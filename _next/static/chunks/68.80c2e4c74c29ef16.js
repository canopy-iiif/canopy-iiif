(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[68],{4470:function(h){"use strict";var g=Object.prototype.hasOwnProperty,_=Object.prototype.toString,E=Object.defineProperty,A=Object.getOwnPropertyDescriptor,isArray=function(h){return"function"==typeof Array.isArray?Array.isArray(h):"[object Array]"===_.call(h)},isPlainObject=function(h){if(!h||"[object Object]"!==_.call(h))return!1;var E,A=g.call(h,"constructor"),k=h.constructor&&h.constructor.prototype&&g.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!A&&!k)return!1;for(E in h);return void 0===E||g.call(h,E)},setProperty=function(h,g){E&&"__proto__"===g.name?E(h,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):h[g.name]=g.newValue},getProperty=function(h,_){if("__proto__"===_){if(!g.call(h,_))return;if(A)return A(h,_).value}return h[_]};h.exports=function extend(){var h,g,_,E,A,k,b=arguments[0],C=1,S=arguments.length,w=!1;for("boolean"==typeof b&&(w=b,b=arguments[1]||{},C=2),(null==b||"object"!=typeof b&&"function"!=typeof b)&&(b={});C<S;++C)if(h=arguments[C],null!=h)for(g in h)_=getProperty(b,g),b!==(E=getProperty(h,g))&&(w&&E&&(isPlainObject(E)||(A=isArray(E)))?(A?(A=!1,k=_&&isArray(_)?_:[]):k=_&&isPlainObject(_)?_:{},setProperty(b,{name:g,newValue:extend(w,k,E)})):void 0!==E&&setProperty(b,{name:g,newValue:E}));return b}},9821:function(h,g,_){"use strict";let E=_(4579).parse,A=_(7799).compile,k=_(7094).segment,b=_(1105);h.exports={parse:E,compile:A,segment:k,hls:b}},7799:function(h){"use strict";function CompilerError(h,g){this.message=h,this.error=g}function convertTimestamp(h){let g=pad(Math.floor(h/60/60),2),_=pad(Math.floor(h/60)%60,2),E=pad(Math.floor(h%60),2),A=pad(Math.floor(1e3*(h%1).toFixed(4)),3);return`${g}:${_}:${E}.${A}`}function pad(h,g){let _=`${h}`;for(;_.length<g;)_=`0${_}`;return _}CompilerError.prototype=Object.create(Error.prototype),h.exports={CompilerError,compile:function(h){if(!h)throw new CompilerError("Input must be non-null");if("object"!=typeof h)throw new CompilerError("Input must be an object");if(Array.isArray(h))throw new CompilerError("Input cannot be array");if(!h.valid)throw new CompilerError("Input must be valid");let g="WEBVTT\n";if(h.meta){if("object"!=typeof h.meta||Array.isArray(h.meta))throw new CompilerError("Metadata must be an object");Object.entries(h.meta).forEach(h=>{if("string"!=typeof h[1])throw new CompilerError(`Metadata value for "${h[0]}" must be string`);g+=`${h[0]}: ${h[1]}
`})}let _=null;return h.cues.forEach((h,E)=>{if(_&&_>h.start)throw new CompilerError(`Cue number ${E} is not in chronological order`);_=h.start,g+="\n"+function(h){if("object"!=typeof h)throw new CompilerError("Cue malformed: not of type object");if("string"!=typeof h.identifier&&"number"!=typeof h.identifier&&null!==h.identifier)throw new CompilerError(`Cue malformed: identifier value is not a string.
    ${JSON.stringify(h)}`);if(isNaN(h.start))throw new CompilerError(`Cue malformed: null start value.
    ${JSON.stringify(h)}`);if(isNaN(h.end))throw new CompilerError(`Cue malformed: null end value.
    ${JSON.stringify(h)}`);if(h.start>=h.end)throw new CompilerError(`Cue malformed: start timestamp greater than end
    ${JSON.stringify(h)}`);if("string"!=typeof h.text)throw new CompilerError(`Cue malformed: null text value.
    ${JSON.stringify(h)}`);if("string"!=typeof h.styles)throw new CompilerError(`Cue malformed: null styles value.
    ${JSON.stringify(h)}`);let g="";h.identifier.length>0&&(g+=`${h.identifier}
`);let _=convertTimestamp(h.start),E=convertTimestamp(h.end);return g+(`${_} --> ${E}`+(h.styles?` ${h.styles}`:""))+`
${h.text}`}(h)+"\n"}),g}}},1105:function(h,g,_){"use strict";let E=_(7094).segment;function pad(h,g){let _="0".repeat(Math.max(0,g-h.toString().length));return`${_}${h}`}function printableTimestamp(h){let g=(h%1).toFixed(3);h=Math.round(h-g);let _=Math.floor(h/3600),E=Math.floor((h-3600*_)/60),A=h-3600*_-60*E,k=`${pad(_,2)}:`;return`${k}${pad(E,2)}:${pad(A,2)}.${pad(1e3*g,3)}`}h.exports={hlsSegment:function(h,g,_){void 0===_&&(_="900000");let A=E(h,g),k=[];return A.forEach((h,g)=>{let E=`WEBVTT
X-TIMESTAMP-MAP=MPEGTS:${_},LOCAL:00:00:00.000

${function(h){let g=[];return h.forEach(h=>{g.push(function(h){let g=[];h.identifier&&g.push(h.identifier);let _=printableTimestamp(h.start),E=printableTimestamp(h.end),A=h.styles?`${h.styles}`:"";return g.push(`${_} --> ${E} ${A}`),g.push(h.text),g.join("\n")}(h))}),g.join("\n\n")}(h.cues)}
`,A=`${g}.vtt`;k.push({filename:A,content:E})}),k},hlsSegmentPlaylist:function(h,g){let _;let A=E(h,g),k=function(h){let g=[];return h.forEach((h,_)=>{g.push(`#EXTINF:${h.duration.toFixed(5)},
${_}.vtt`)}),g.join("\n")}(A),b=Math.round((_=0,A.forEach(h=>{h.duration>_&&(_=h.duration)}),_)),C=`#EXTM3U
#EXT-X-TARGETDURATION:${b}
#EXT-X-VERSION:3
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-PLAYLIST-TYPE:VOD
${k}
#EXT-X-ENDLIST
`;return C}}},4579:function(h){"use strict";function ParserError(h,g){this.message=h,this.error=g}ParserError.prototype=Object.create(Error.prototype);let g=/([0-9]+)?:?([0-9]{2}):([0-9]{2}\.[0-9]{2,3})/;function parseTimestamp(h){let _=h.match(g);return 3600*parseFloat(_[1]||0)+(60*parseFloat(_[2])+parseFloat(_[3]))}h.exports={ParserError,parse:function(h,_){_||(_={});let{meta:E=!1,strict:A=!0}=_;if("string"!=typeof h)throw new ParserError("Input must be a string");h=(h=(h=h.trim()).replace(/\r\n/g,"\n")).replace(/\r/g,"\n");let k=h.split("\n\n"),b=k.shift();if(!b.startsWith("WEBVTT"))throw new ParserError('Must start with "WEBVTT"');let C=b.split("\n"),S=C[0].replace("WEBVTT","");if(S.length>0&&" "!==S[0]&&"	"!==S[0])throw new ParserError("Header comment must start with space or tab");if(0===k.length&&1===C.length)return{valid:!0,strict:A,cues:[],errors:[]};if(!E&&C.length>1&&""!==C[1])throw new ParserError("Missing blank line after signature");let{cues:w,errors:N}=function(h,_){let E=[],A=h.map((h,A)=>{try{return function(h,_,E){var A,k;let b="",C=0,S=.01,w="",N="",R=h.split("\n").filter(Boolean);if(R.length>0&&R[0].trim().startsWith("NOTE"))return null;if(1===R.length&&!R[0].includes("-->"))throw new ParserError(`Cue identifier cannot be standalone (cue #${_})`);if(R.length>1&&!(R[0].includes("-->")||R[1].includes("-->"))){let h=`Cue identifier needs to be followed by timestamp (cue #${_})`;throw new ParserError(h)}R.length>1&&R[1].includes("-->")&&(b=R.shift());let L="string"==typeof R[0]&&R[0].split(" --> ");if(2!==L.length||(A=L[0],!g.test(A))||(k=L[1],!g.test(k)))throw new ParserError(`Invalid cue timestamp (cue #${_})`);if(C=parseTimestamp(L[0]),S=parseTimestamp(L[1]),E){if(C>S)throw new ParserError(`Start timestamp greater than end (cue #${_})`);if(S<=C)throw new ParserError(`End must be greater than start (cue #${_})`)}if(!E&&S<C)throw new ParserError(`End must be greater or equal to start when not strict (cue #${_})`);return N=L[1].replace(g,"").trim(),R.shift(),!!(w=R.join("\n"))&&{identifier:b,start:C,end:S,text:w,styles:N}}(h,A,_)}catch(h){return E.push(h),null}}).filter(Boolean);return{cues:A,errors:E}}(k,A);if(A&&N.length>0)throw N[0];let R=E?function(h){let g={};return h.slice(1).forEach(h=>{let _=h.indexOf(":"),E=h.slice(0,_).trim(),A=h.slice(_+1).trim();g[E]=A}),Object.keys(g).length>0?g:null}(C):null,L={valid:0===N.length,strict:A,cues:w,errors:N};return E&&(L.meta=R),L}}},7094:function(h,g,_){"use strict";let E=_(4579).parse;h.exports={segment:function(h,g){g=g||10;let _=E(h),A=[],k=[],b=null,C=0,S=0;return _.cues.forEach((h,E)=>{let w=0===E,N=E===_.cues.length-1,R=h.start,L=h.end,P=N?1/0:_.cues[E+1].start,z=w?L:L-R,G=w?0:R-_.cues[E-1].end;C=C+z+G,A.length,b&&(k.push(b),C+=b.end-S,b=null),k.push(h);let $=P-L<g&&G<g&&C>g;if(function(h,g,_,E){return(E<=g||E+(g-E%g)+h<_)&&_-h>=g}(S,g,P,G)){var j,W,Q,Z;let h;let _=(j=g,W=C,Q=S,h=j,W>j&&(h=(Z=W-j)+(j-Z%j)),h=N?parseFloat((L-Q).toFixed(2)):Math.round(h));A.push({duration:_,cues:k}),S+=_,C=0,k=[]}else $=!1;$&&(b=h)}),A}}},4887:function(h,g){!function(h){"use strict";function t(h){return null==h}function r(h){throw Error("Argument "+h+" is empty.")}function e(h){return"function"==typeof h&&"getType"in h}function i(h){throw Error("Argument "+h+' is invalid, it should be an action-creator instance from "typesafe-actions"')}function o(h,g){if(null==h)throw Error("Argument contains array with empty element at index "+g);if(null==h.getType)throw Error("Argument contains array with invalid element at index "+g+', it should be an action-creator instance from "typesafe-actions"')}function u(h){return"string"==typeof h||"symbol"==typeof h}function c(h){throw Error("Argument "+h+" is invalid, it should be an action type of type: string | symbol")}function f(h,g){if(null==h)throw Error("Argument contains array with empty element at index "+g);if("string"!=typeof h&&"symbol"!=typeof h)throw Error("Argument contains array with invalid element at index "+g+", it should be of type: string | symbol")}function s(h,g,_,E){return t(h)&&r(1),u(h)||i(1),{type:h,payload:g,meta:_,error:E}}function y(h,g){return t(h)&&r(1),u(h)||c(1),Object.assign(function(){var _=null!=g?g.apply(void 0,arguments):void 0;return Object.assign({type:h},_)},{getType:function(){return h},toString:function(){return h}})}function l(h,g,_){return t(h)&&r(1),u(h)||c(1),function(){return y(h,function(){var h=arguments.length<=0?void 0:arguments[0],E=arguments.length<=1?void 0:arguments[1];return null==g&&null==_||(h=null!=g?g.apply(void 0,arguments):void 0,E=null!=_?_.apply(void 0,arguments):void 0),Object.assign({},void 0!==h&&{payload:h},{},void 0!==E&&{meta:E})})}}function p(h){return t(h)&&r(1),e(h)||i(1),h.getType()}function d(h,g){return t(h)&&r(1),u(h)||c(1),Object.assign(null!=g?g(h):function(){return{type:h}},{getType:function(){return h},toString:function(){return h}})}h.action=s,h.createAction=l,h.createAsyncAction=function(h,g,_,E){return function(){var A=[h,g,_,E].map(function(h,g){return Array.isArray(h)?l(h[0],h[1],h[2])():"string"==typeof h||"symbol"==typeof h?l(h)():void(g<3&&function(h){throw Error("Argument "+h+' is invalid, it should be an action type of "string | symbol" or a tuple of "[string | symbol, Function, Function?]"')}(g))});return{request:A[0],success:A[1],failure:A[2],cancel:A[3]}}},h.createCustomAction=y,h.createReducer=function n(h,g){void 0===g&&(g={});var _=Object.assign({},g),o=function(g,E){var A=Array.isArray(g)?g:[g],k={};return A.map(function(h,g){return e(h)?p(h):u(h)?h:function(h){throw Error("Argument "+h+' is invalid, it should be an action-creator instance from "typesafe-actions" or action type of type: string | symbol')}(g+1)}).forEach(function(h){return k[h]=E}),n(h,Object.assign({},_,{},k))};return Object.assign(function(g,E){if(void 0===g&&(g=h),_.hasOwnProperty(E.type)){var A=_[E.type];if("function"!=typeof A)throw Error('Reducer under "'+E.type+'" key is not a valid reducer');return A(g,E)}return g},{handlers:Object.assign({},_),handleAction:o,handleType:o})},h.deprecated={createAction:function(h,g){return Object.assign(null==g?function(){return s(h)}:g(s.bind(null,h)),{getType:function(){return h},toString:function(){return h}})},createCustomAction:d,createStandardAction:function(h){return t(h)&&r(1),u(h)||c(1),Object.assign(function(){return d(h,function(h){return function(g,_){return{type:h,payload:g,meta:_}}})},{map:function(g){return d(h,function(h){return function(_,E){return Object.assign(g(_,E),{type:h})}})}})}},h.getType=p,h.isActionOf=function(h,g){t(h)&&r(1);var _=Array.isArray(h)?h:[h];_.forEach(o);var u=function(h){return _.some(function(g){return h.type===g.getType()})};return void 0===g?u:u(g)},h.isOfType=function(h,g){t(h)&&r(1);var _=Array.isArray(h)?h:[h];_.forEach(f);var o=function(h){return _.includes(h.type)};return void 0===g?o:o(g)}}(g)},1068:function(h,g,_){"use strict";let E,A;_.r(g),_.d(g,{Image:function(){return le},Primitives:function(){return eK.default},Scroll:function(){return Ft},Slider:function(){return ox.default},Viewer:function(){return xa},default:function(){return lK}});var k,b,C,S,w,N,R,L,P,z,G,$,j,W,Q,Z,et,er,ei,es,el,ec,eu,ed,em,eh,ep,ef,eg,e_,eE,eT,eA,ey,ek,ev,eb,ex,eC={};_.r(eC),_.d(eC,{boolean:function(){return ny},booleanish:function(){return nk},commaOrSpaceSeparated:function(){return nS},commaSeparated:function(){return nC},number:function(){return nb},overloadedBoolean:function(){return nv},spaceSeparated:function(){return nx}});var eS={};_.r(eS),_.d(eS,{attentionMarkers:function(){return aA},contentInitial:function(){return ap},disable:function(){return ay},document:function(){return ah},flow:function(){return ag},flowInitial:function(){return af},insideSpan:function(){return aT},string:function(){return a_},text:function(){return aE}});var eI=_(9203),ew=_(4511),eN=_(6744),eO=_(7294);let eR="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var eD={randomUUID:eR};let eL=new Uint8Array(16),eP=[];for(let h=0;h<256;++h)eP.push((h+256).toString(16).slice(1));var esm_browser_v4=function(h,g,_){if(eD.randomUUID&&!g&&!h)return eD.randomUUID();h=h||{};let A=h.random||(h.rng||function(){if(!E&&!(E="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return E(eL)})();if(A[6]=15&A[6]|64,A[8]=63&A[8]|128,g){_=_||0;for(let h=0;h<16;++h)g[_+h]=A[h];return g}return function(h,g=0){return eP[h[g+0]]+eP[h[g+1]]+eP[h[g+2]]+eP[h[g+3]]+"-"+eP[h[g+4]]+eP[h[g+5]]+"-"+eP[h[g+6]]+eP[h[g+7]]+"-"+eP[h[g+8]]+eP[h[g+9]]+"-"+eP[h[g+10]]+eP[h[g+11]]+eP[h[g+12]]+eP[h[g+13]]+eP[h[g+14]]+eP[h[g+15]]}(A)};let eM=window.OpenSeadragon;if(!eM&&!(eM=eI))throw Error("OpenSeadragon is missing.");let eF="http://www.w3.org/2000/svg";eM.Viewer&&(eM.Viewer.prototype.svgOverlay=function(){return this._svgOverlayInfo||(this._svgOverlayInfo=new y(this)),this._svgOverlayInfo});let y=function(h){let g=this;this._viewer=h,this._containerWidth=0,this._containerHeight=0,this._svg=document.createElementNS(eF,"svg"),this._svg.style.position="absolute",this._svg.style.left=0,this._svg.style.top=0,this._svg.style.width="100%",this._svg.style.height="100%",this._viewer.canvas.appendChild(this._svg),this._node=document.createElementNS(eF,"g"),this._svg.appendChild(this._node),this._viewer.addHandler("animation",function(){g.resize()}),this._viewer.addHandler("open",function(){g.resize()}),this._viewer.addHandler("rotate",function(){g.resize()}),this._viewer.addHandler("flip",function(){g.resize()}),this._viewer.addHandler("resize",function(){g.resize()}),this.resize()};y.prototype={node:function(){return this._node},resize:function(){this._containerWidth!==this._viewer.container.clientWidth&&(this._containerWidth=this._viewer.container.clientWidth,this._svg.setAttribute("width",this._containerWidth)),this._containerHeight!==this._viewer.container.clientHeight&&(this._containerHeight=this._viewer.container.clientHeight,this._svg.setAttribute("height",this._containerHeight));let h=this._viewer.viewport.pixelFromPoint(new eM.Point(0,0),!0),g=this._viewer.viewport.getZoom(!0),_=this._viewer.viewport.getRotation(),E=this._viewer.viewport.getFlip(),A=this._viewer.viewport._containerInnerSize.x,k=A*g,b=k;E&&(k=-k,h.x=-h.x+A),this._node.setAttribute("transform","translate("+h.x+","+h.y+") scale("+k+","+b+") rotate("+_+")")},onClick:function(h,g){new eM.MouseTracker({element:h,clickHandler:g}).setTracking(!0)}};let M=h=>fetch(`${h.replace(/\/$/,"")}/info.json`).then(h=>h.json()).then(h=>h).catch(g=>{console.error(`The IIIF tilesource ${h.replace(/\/$/,"")}/info.json failed to load: ${g}`)}),B=h=>{let g,_;return Array.isArray(h)&&(g=h[0])&&(_="@id"in g?g["@id"]:g.id),_};var eB=((k=eB||{}).TiledImage="tiledImage",k.SimpleImage="simpleImage",k);let O=h=>{let g=Array.isArray(null==h?void 0:h.service)&&(null==h?void 0:h.service.length)>0,_=g?B(null==h?void 0:h.service):null==h?void 0:h.id,E=g?eB.TiledImage:eB.SimpleImage;return{uri:_,imageType:E}},F=(h,g)=>{let _=g?eB.TiledImage:eB.SimpleImage;return{uri:h,imageType:_}},{styled:eH,css:eU,keyframes:ez,createTheme:eG}=(0,eN.Th)({theme:{colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:"hsl(209 100% 38.2%)",accentMuted:"hsl(209 80% 61.8%)",accentAlt:"hsl(209 80% 30%)",secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},media:{xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"}}),e$=eH("div",{display:"flex",flexDirection:"column",alignItems:"center"}),ej=eH("p",{fontWeight:"bold",fontSize:"x-large"}),eq=eH("span",{fontSize:"medium"}),T=({error:h})=>{let{message:g}=h;return eO.createElement(e$,{role:"alert"},eO.createElement(ej,{"data-testid":"headline"},"Something went wrong"),g&&eO.createElement(eq,null,`Error message: ${g}`," "))},eV=eH("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),eY=eH("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),eW=eH("div",{width:"100%",height:"100%",maxHeight:"100vh",background:"transparent",backgroundSize:"contain",color:"white",position:"relative",zIndex:"0",overflow:"hidden",variants:{hasNavigator:{true:{[`${eV}`]:{display:"block"}},false:{[`${eV}`]:{display:"none"}}}}}),eQ=eH("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",backgroundColor:"$primary",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&[data-button=rotate-right]":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=rotate-left]":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=reset]":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}}),m=({className:h,id:g,label:_,children:E})=>{let A=_.toLowerCase().replace(/\s/g,"-");return eO.createElement(eQ,{id:g,className:h,"data-testid":"openseadragon-button","data-button":A},eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":`${g}-svg-title`,"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},eO.createElement("title",{id:`${g}-svg-title`},_),E))},eX=eH("div",{position:"absolute",zIndex:"1",top:"1rem",right:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),V=()=>eO.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),D=()=>eO.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),U=()=>eO.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),X=()=>eO.createElement("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),image_$=()=>eO.createElement(eO.Fragment,null,eO.createElement("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),eO.createElement("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})),Y=({_cloverViewerHasPlaceholder:h,config:g})=>eO.createElement(eX,{"data-testid":"clover-iiif-image-openseadragon-controls",hasPlaceholder:h},g.showZoomControl&&eO.createElement(eO.Fragment,null,eO.createElement(m,{id:g.zoomInButton,label:"zoom in"},eO.createElement(V,null)),eO.createElement(m,{id:g.zoomOutButton,label:"zoom out"},eO.createElement(D,null))),g.showFullPageControl&&eO.createElement(m,{id:g.fullPageButton,label:"full page"},eO.createElement(U,null)),g.showRotationControl&&eO.createElement(eO.Fragment,null,eO.createElement(m,{id:g.rotateRightButton,label:"rotate right"},eO.createElement(image_$,null)),eO.createElement(m,{id:g.rotateLeftButton,label:"rotate left"},eO.createElement(image_$,null))),g.showHomeControl&&eO.createElement(m,{id:g.homeButton,label:"reset"},eO.createElement(X,null))),q=({ariaLabel:h,config:g,uri:_,_cloverViewerHasPlaceholder:E,imageType:A,openSeadragonCallback:k})=>{let[b,C]=(0,eO.useState)(),[S,w]=(0,eO.useState)(),N=(0,eO.useRef)(!1);return(0,eO.useEffect)(()=>(N.current||(N.current=!0,S||w(eI(g))),()=>null==S?void 0:S.destroy()),[]),(0,eO.useEffect)(()=>{S&&k&&k(S)},[S,k]),(0,eO.useEffect)(()=>{S&&_!==b&&(null==S||S.forceRedraw(),C(_))},[S,b,_]),(0,eO.useEffect)(()=>{if(b&&S)switch(A){case"simpleImage":null==S||S.addSimpleImage({url:b});break;case"tiledImage":M(b).then(h=>{try{if(!h)throw Error(`No tile source found for ${b}`);null==S||S.addTiledImage({tileSource:h})}catch(h){console.error(h)}});break;default:null==S||S.close(),console.warn(`Unable to render ${b} in OpenSeadragon as type: "${A}"`)}},[A,b]),eO.createElement(eW,{className:"clover-iiif-image-openseadragon","data-testid":"clover-iiif-image-openseadragon","data-openseadragon-instance":g.id,hasNavigator:g.showNavigator},eO.createElement(Y,{_cloverViewerHasPlaceholder:E,config:g}),g.showNavigator&&eO.createElement(eV,{id:g.navigatorId,"data-testid":"clover-iiif-image-openseadragon-navigator"}),eO.createElement(eY,{id:g.id,"data-testid":"clover-iiif-image-openseadragon-viewport",role:"img",...h&&{"aria-label":h}}))},J=(h,g="none")=>{if(!h)return null;if("string"==typeof h)return[h];if(!h[g]){let g=Object.getOwnPropertyNames(h);if(g.length>0)return h[g[0]]}return h[g]&&Array.isArray(h[g])?h[g]:null},K=(h,g="none",_=", ")=>{let E=J(h,g);return Array.isArray(E)?E.join(`${_}`):E},le=({_cloverViewerHasPlaceholder:h=!1,body:g,instanceId:_,isTiledImage:E=!1,label:A,src:k="",openSeadragonCallback:b,openSeadragonConfig:C={}})=>{let S=_||esm_browser_v4(),w="string"==typeof A?A:K(A),N={id:`openseadragon-${S}`,navigatorId:`openseadragon-navigator-${S}`,loadTilesWithAjax:!0,fullPageButton:`fullPage-${S}`,homeButton:`reset-${S}`,rotateLeftButton:`rotateLeft-${S}`,rotateRightButton:`rotateRight-${S}`,zoomInButton:`zoomIn-${S}`,zoomOutButton:`zoomOut-${S}`,showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!1},...C},{imageType:R,uri:L}=g?O(g):F(k,E);return L?eO.createElement(ew.SV,{FallbackComponent:T},eO.createElement(q,{_cloverViewerHasPlaceholder:h,ariaLabel:w,config:N,imageType:R,key:S,uri:L,openSeadragonCallback:b})):null};var eK=_(1830),eZ=Object.defineProperty,__defNormalProp=(h,g,_)=>g in h?eZ(h,g,{enumerable:!0,configurable:!0,writable:!0,value:_}):h[g]=_,__publicField=(h,g,_)=>(__defNormalProp(h,"symbol"!=typeof g?g+"":g,_),_);let eJ=[];Object.freeze(eJ);let e0={id:"https://iiif-parser/annotation-page",type:"AnnotationPage",behavior:eJ,motivation:null,label:null,thumbnail:eJ,summary:null,requiredStatement:null,metadata:eJ,rights:null,provider:eJ,items:eJ,seeAlso:eJ,homepage:eJ,logo:eJ,rendering:eJ,service:eJ},e1={id:"https://iiif-parser/empty-canvas",type:"Canvas",label:null,behavior:eJ,motivation:null,thumbnail:eJ,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:eJ,rights:null,navDate:null,provider:eJ,items:eJ,annotations:eJ,seeAlso:eJ,homepage:eJ,logo:eJ,partOf:eJ,rendering:eJ,service:eJ,duration:0,height:0,width:0},e2={id:"https://iiif-parser/empty-collection",type:"Collection",label:null,viewingDirection:"left-to-right",behavior:eJ,motivation:null,thumbnail:eJ,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:eJ,rights:null,navDate:null,provider:eJ,items:eJ,annotations:eJ,seeAlso:eJ,homepage:eJ,logo:eJ,partOf:eJ,rendering:eJ,service:eJ,services:eJ},e3={id:"https://iiif-parser/empty-manifest",type:"Manifest",annotations:eJ,behavior:eJ,homepage:eJ,items:eJ,label:null,logo:eJ,metadata:eJ,motivation:null,navDate:null,provider:eJ,partOf:eJ,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,rendering:eJ,requiredStatement:null,rights:null,seeAlso:eJ,service:eJ,services:eJ,start:null,structures:eJ,summary:null,thumbnail:eJ,viewingDirection:"left-to-right"},e4={id:"https://iiif-parser/empty-canvas",type:"Range",label:null,behavior:eJ,motivation:null,thumbnail:eJ,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:eJ,rights:null,navDate:null,provider:eJ,items:eJ,annotations:eJ,seeAlso:eJ,homepage:eJ,logo:eJ,partOf:eJ,rendering:eJ,service:eJ,start:null,supplementary:null,viewingDirection:"left-to-right"},e5={id:"https://iiif-parser/empty-agent",type:"Agent",label:{},logo:eJ,seeAlso:eJ,homepage:eJ};function ensureArray$1(h){return Array.isArray(h)?h:[h]}let e6=["Collection","Manifest","Canvas","AnnotationPage","AnnotationCollection","Annotation","ContentResource","Range","Service","Selector","Agent"];let Traverse$1=class Traverse$1{constructor(h,g={}){__publicField(this,"traversals"),__publicField(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationCollection:[],annotationPage:[],annotation:[],contentResource:[],choice:[],range:[],service:[],agent:[],...h},this.options={allowUndefinedReturn:!1,...g}}static all(h){return new Traverse$1({collection:[h],manifest:[h],canvas:[h],annotationCollection:[h],annotationPage:[h],annotation:[h],contentResource:[h],choice:[h],range:[h],service:[h]})}traverseDescriptive(h){return h.thumbnail&&(h.thumbnail=h.thumbnail.map(h=>this.traverseType(h,this.traversals.contentResource))),h.provider&&(h.provider=h.provider.map(h=>this.traverseAgent(h))),h}traverseLinking(h){return h.seeAlso&&(h.seeAlso=h.seeAlso.map(h=>this.traverseType(h,this.traversals.contentResource))),h.service&&(h.service=ensureArray$1(h.service).map(h=>this.traverseType(h,this.traversals.service))),h.services&&(h.services=h.services.map(h=>this.traverseType(h,this.traversals.service))),h.logo&&(h.logo=h.logo.map(h=>this.traverseType(h,this.traversals.contentResource))),h.homepage&&(h.homepage=h.homepage.map(h=>this.traverseType(h,this.traversals.contentResource))),h.partOf&&(h.partOf=h.partOf.map(h=>"string"!=typeof h&&h.type?"Canvas"===h.type?this.traverseType(h,this.traversals.canvas):"AnnotationCollection"===h.type?this.traverseType(h,this.traversals.annotationCollection):"Collection"===h.type?this.traverseType(h,this.traversals.collection):this.traverseType(h,this.traversals.contentResource):this.traverseType(h,this.traversals.contentResource))),h.start&&(h.start=h.start?this.traverseType(h.start,this.traversals.canvas):null),h.rendering&&(h.rendering=h.rendering.map(h=>this.traverseType(h,this.traversals.contentResource))),h.supplementary&&(h.supplementary=h.supplementary.map(h=>this.traverseType(h,this.traversals.contentResource))),h}traverseCollectionItems(h){return h.items&&h.items.map(h=>"Collection"===h.type?this.traverseCollection(h):this.traverseManifest(h)),h}traverseCollection(h){return this.traverseType(this.traverseDescriptive(this.traverseInlineAnnotationPages(this.traverseLinking(this.traversePosterCanvas(this.traverseCollectionItems(h))))),this.traversals.collection)}traverseManifestItems(h){return h.items&&(h.items=h.items.map(h=>this.traverseCanvas(h))),h}traverseManifestStructures(h){return h.structures&&(h.structures=h.structures.map(h=>this.traverseRange(h))),h}traverseManifest(h){return this.traverseType(this.traverseInlineAnnotationPages(this.traverseManifestStructures(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(h)))))),this.traversals.manifest)}traverseCanvasItems(h){return h.items=(h.items||[]).map(h=>this.traverseAnnotationPage(h)),h}traverseInlineAnnotationPages(h){return"string"!=typeof h&&h&&h.annotations&&(h.annotations=h.annotations.map(h=>this.traverseAnnotationPage(h))),h}traverseCanvas(h){return this.traverseType(this.traverseInlineAnnotationPages(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(h))))),this.traversals.canvas)}traverseAnnotationPageItems(h){return h.items&&(h.items=h.items.map(h=>this.traverseAnnotation(h))),h}traverseAnnotationPage(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationPageItems(h))),this.traversals.annotationPage)}traverseAnnotationBody(h){return Array.isArray(h.body)?h.body=h.body.map(h=>this.traverseContentResource(h)):h.body&&(h.body=this.traverseContentResource(h.body)),h}traversePosterCanvas(h){return h.posterCanvas&&(h.posterCanvas=this.traverseCanvas(h.posterCanvas)),h.placeholderCanvas&&(h.placeholderCanvas=this.traverseCanvas(h.placeholderCanvas)),h.accompanyingCanvas&&(h.accompanyingCanvas=this.traverseCanvas(h.accompanyingCanvas)),h}traverseAnnotation(h){return this.traverseType(this.traverseLinking(this.traverseAnnotationBody(h)),this.traversals.annotation)}traverseContentResourceLinking(h){return"string"!=typeof h&&h&&h&&h.service&&(h.service=ensureArray$1(h.service||[]).map(h=>this.traverseType(h,this.traversals.service))),h}traverseContentResource(h){return"Choice"===h.type&&(h.items=h.items.map(h=>this.traverseContentResource(h))),this.traverseType(this.traverseInlineAnnotationPages(this.traverseContentResourceLinking(h)),this.traversals.contentResource)}traverseRangeRanges(h){return h.items&&(h.items=h.items.map(h=>"string"==typeof h?this.traverseCanvas({id:h,type:"Canvas"}):"Manifest"===h.type?this.traverseManifest(h):this.traverseRange(h))),h}traverseRange(h){return this.traverseType(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseRangeRanges(h)))),this.traversals.range)}traverseAgent(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(h)),this.traversals.agent)}traverseType(h,g){return g.reduce((h,g)=>{let _=g(h);return void 0!==_||this.options.allowUndefinedReturn?_:h},h)}traverseService(h){return this.traverseType(h,this.traversals.service)}traverseUnknown(h){let g=function(h){if(null==h)throw Error("Null or undefined is not a valid entity.");if(Array.isArray(h))throw Error("Array is not a valid entity");if("object"!=typeof h)throw Error(`${typeof h} is not a valid entity`);if("string"==typeof h.type){let g=e6.indexOf(h.type);if(-1!==g)return e6[g]}if(h.profile)return"Service";throw Error("Resource type is not known")}(h);switch(g){case"Collection":return this.traverseCollection(h);case"Manifest":return this.traverseManifest(h);case"Canvas":return this.traverseCanvas(h);case"AnnotationPage":return this.traverseAnnotationPage(h);case"Annotation":return this.traverseAnnotation(h);case"ContentResource":return this.traverseContentResource(h);case"Range":return this.traverseRange(h);case"Service":return this.traverseService(h);case"Agent":return this.traverseAgent(h);default:throw Error(`Unknown or unsupported resource type of ${g}`)}}};let e8=["sc:Collection","sc:Manifest","sc:Canvas","sc:AnnotationList","oa:Annotation","sc:Range","sc:Layer","sc:Sequence","oa:Choice","Service","ContentResource"];let Traverse=class Traverse{constructor(h,g={}){__publicField(this,"traversals"),__publicField(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationList:[],sequence:[],annotation:[],contentResource:[],choice:[],range:[],service:[],layer:[],...h},this.options={convertPropsToArray:!0,mergeMemberProperties:!0,allowUndefinedReturn:!1,...g}}static all(h){return new Traverse({collection:[h],manifest:[h],canvas:[h],annotationList:[h],sequence:[h],annotation:[h],contentResource:[h],choice:[h],range:[h],service:[h],layer:[h]})}traverseCollection(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(h))),this.traversals.collection)}traverseCollectionItems(h){if(this.options.mergeMemberProperties){let g=[...(h.manifests||[]).map(h=>"string"==typeof h?{"@id":h,"@type":"sc:Manifest"}:h),...(h.collections||[]).map(h=>"string"==typeof h?{"@id":h,"@type":"sc:Collection"}:h),...h.members||[]];delete h.collections,delete h.manifests,h.members=g}return h.manifests&&(h.manifests=h.manifests.map(h=>this.traverseManifest("string"==typeof h?{"@id":h,"@type":"sc:Manifest"}:h))),h.collections&&(h.collections=h.collections.map(h=>this.traverseCollection("string"==typeof h?{"@id":h,"@type":"sc:Collection"}:h))),h.members&&(h.members=h.members.map(h=>"string"==typeof h?h:this.traverseUnknown(h))),h}traverseManifest(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(h))),this.traversals.manifest)}traverseManifestItems(h){return h.sequences&&(h.sequences=h.sequences.map(h=>this.traverseSequence(h))),h.structures&&(h.structures=h.structures.map(h=>this.traverseRange(h))),h}traverseSequence(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(h))),this.traversals.sequence)}traverseSequenceItems(h){return h.canvases&&(h.canvases=h.canvases.map(h=>this.traverseCanvas(h))),h}traverseCanvas(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(h))),this.traversals.canvas)}traverseCanvasItems(h){return h.images&&(h.images=h.images.map(h=>this.traverseAnnotation(h))),h.otherContent&&(h.otherContent=h.otherContent.map(h=>this.traverseAnnotationList(h))),h}traverseRange(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(h))),this.traversals.range)}traverseRangeItems(h){if(this.options.mergeMemberProperties){let g=[...(h.ranges||[]).map(h=>"string"==typeof h?{"@id":h,"@type":"sc:Range"}:h),...(h.canvases||[]).map(h=>"string"==typeof h?{"@id":h,"@type":"sc:Canvas"}:h),...h.members||[]];delete h.ranges,delete h.canvases,h.members=g.length?g.map(h=>this.traverseUnknown(h)):void 0}return h}traverseAnnotationList(h){let g="string"==typeof h?{"@id":h,"@type":"sc:AnnotationList"}:h;return this.traverseType(this.traverseDescriptive(this.traverseAnnotationListItems(g)),this.traversals.annotationList)}traverseAnnotationListItems(h){return h.resources&&(h.resources=h.resources.map(h=>this.traverseAnnotation(h))),h}traverseAnnotation(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(h))),this.traversals.annotation)}traverseAnnotationItems(h){return h.resource&&(Array.isArray(h.resource)?h.resource=h.resource.map(h=>this.traverseContentResource(h)):h.resource=this.traverseContentResource(h.resource)),h.on,h}traverseLayer(h){return this.traverseType(this.traverseLinking(this.traverseLayerItems(h)),this.traversals.layer)}traverseLayerItems(h){return h.otherContent&&(h.otherContent=h.otherContent.map(h=>this.traverseAnnotationList(h))),h}traverseChoice(h){return this.traverseType(this.traverseChoiceItems(h),this.traversals.choice)}traverseChoiceItems(h){return h.default&&"rdf:nil"!==h.default&&(h.default=this.traverseContentResource(h.default)),h.item&&"rdf:nil"!==h.item&&(h.item=h.item.map(h=>this.traverseContentResource(h))),h}traverseService(h){return this.traverseType(this.traverseLinking(h),this.traversals.service)}traverseContentResource(h){return"oa:Choice"===h["@type"]?this.traverseChoice(h):this.traverseType(this.traverseDescriptive(this.traverseLinking(h)),this.traversals.contentResource)}traverseUnknown(h){if(!h["@type"]||"string"==typeof h)return h;switch(function(h){if(null==h)throw Error("Null or undefined is not a valid entity.");if(Array.isArray(h))throw Error("Array is not a valid entity");if("object"!=typeof h)throw Error(`${typeof h} is not a valid entity`);if("string"==typeof h["@type"]){let g=e8.indexOf(h["@type"]);if(-1!==g)return e8[g]}if(h.profile)return"Service";if(h.format||h["@type"])return"ContentResource";throw Error("Resource type is not known")}(h)){case"sc:Collection":return this.traverseCollection(h);case"sc:Manifest":return this.traverseManifest(h);case"sc:Canvas":return this.traverseCanvas(h);case"sc:Sequence":return this.traverseSequence(h);case"sc:Range":return this.traverseRange(h);case"oa:Annotation":return this.traverseAnnotation(h);case"sc:AnnotationList":return this.traverseAnnotationList(h);case"sc:Layer":return this.traverseLayer(h);case"Service":return this.traverseService(h);case"oa:Choice":return this.traverseChoice(h);case"ContentResource":return this.traverseContentResource(h)}return h.profile?this.traverseService(h):h}traverseImageResource(h){let g=Array.isArray(h),_=Array.isArray(h)?h:[h],E=[];for(let h of _)"string"==typeof h?E.push(this.traverseContentResource({"@id":h,"@type":"dctypes:Image"})):E.push(this.traverseContentResource(h));return g||this.options.convertPropsToArray?E:E[0]}traverseDescriptive(h){return h.thumbnail&&(h.thumbnail=this.traverseImageResource(h.thumbnail)),h.logo&&(h.logo=this.traverseImageResource(h.logo)),h}traverseOneOrMoreServices(h){let g=Array.isArray(h),_=Array.isArray(h)?h:[h],E=[];for(let h of _)E.push(this.traverseService(h));return g||this.options.convertPropsToArray?E:E[0]}traverseLinking(h){return h.related&&(h.related=this.traverseOneOrManyType(h.related,this.traversals.contentResource)),h.rendering&&(h.rendering=this.traverseOneOrManyType(h.rendering,this.traversals.contentResource)),h.service&&(h.service=this.traverseOneOrMoreServices(h.service)),h.seeAlso&&(h.seeAlso=this.traverseOneOrManyType(h.seeAlso,this.traversals.contentResource)),h.within&&("string"==typeof h.within||(h.within=this.traverseOneOrManyType(h.within,this.traversals.contentResource))),h.startCanvas&&("string"==typeof h.startCanvas?h.startCanvas=this.traverseType({"@id":h.startCanvas,"@type":"sc:Canvas"},this.traversals.canvas):h.startCanvas&&this.traverseType(h.startCanvas,this.traversals.canvas)),h.contentLayer&&("string"==typeof h.contentLayer?h.contentLayer=this.traverseLayer({"@id":h.contentLayer,"@type":"sc:Layer"}):h.contentLayer=this.traverseLayer(h.contentLayer)),h}traverseOneOrManyType(h,g){if(!Array.isArray(h)){if(!this.options.convertPropsToArray)return this.traverseType(h,g);h=[h]}return h.map(h=>this.traverseType(h,g))}traverseType(h,g){return g.reduce((h,g)=>{let _=g(h);return void 0!==_||this.options.allowUndefinedReturn?_:h},h)}};let e9="http://library.stanford.edu/iiif/image-api/compliance.html#level1",e7="http://library.stanford.edu/iiif/image-api/compliance.html#level2",tt="http://library.stanford.edu/iiif/image-api/conformance.html#level1",tn="http://library.stanford.edu/iiif/image-api/conformance.html#level2",tr="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",ti="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",ts="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",tl="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",tc="http://iiif.io/api/image/1/level1.json",tu="http://iiif.io/api/image/1/profiles/level1.json",td="http://iiif.io/api/image/1/level2.json",tm="http://iiif.io/api/image/1/profiles/level2.json",th="http://iiif.io/api/image/2/level1.json",tp="http://iiif.io/api/image/2/profiles/level1.json",tf="http://iiif.io/api/image/2/level2.json",tg="http://iiif.io/api/image/2/profiles/level2.json",t_="level1",tE="level2",tT="http://iiif.io/api/image/2/level1",tA="http://iiif.io/api/image/2/level2",ty=[tT,tA,e9,e7,tt,tn,tr,ti,ts,tl,tc,tu,td,tm,th,tp,tf,tg,t_,tE],tk=["http://iiif.io/api/image/2/level0",tT,tA,"http://library.stanford.edu/iiif/image-api/compliance.html#level0",e9,e7,"http://library.stanford.edu/iiif/image-api/conformance.html#level0",tt,tn,"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",tr,ti,"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",ts,tl,"http://iiif.io/api/image/1/level0.json","http://iiif.io/api/image/1/profiles/level0.json",tc,tu,td,tm,"http://iiif.io/api/image/2/level0.json","http://iiif.io/api/image/2/profiles/level0.json",th,tp,tf,tg,"level0",t_,tE],tv={attributionLabel:"Attribution",providerId:"http://example.org/provider",providerName:"Unknown"};function convertLanguageMapping(h,g="none"){if(!h)return{};let _=Array.isArray(h)?h:[h],E={};for(let h of _){if("string"==typeof h){E[g]=E[g]?E[g]:[],E[g].push(h||"");continue}if(!h["@language"]){E[g]=E[g]?E[g]:[],E[g].push(h["@value"]||"");continue}let _=h["@language"];E[_]=E[_]?E[_]:[],E[_].push(h["@value"]||"")}return E}function removePrefix(h){for(let g of["sc","oa","dcterms","dctypes","iiif"])if(h.startsWith(`${g}:`))return h.slice(g.length+1);return h}let tb=["Collection","Manifest","Annotation","AnnotationPage","Range","Service"];function getNewType(h){let g=h["@id"]||h.id,_=h["@type"]||h.type,E=h.profile||void 0,A=h["@context"]||void 0;if(E){let h=function(h){switch(h){case"http://iiif.io/api/image/2/level0.json":case"http://iiif.io/api/image/2/level1.json":case"http://iiif.io/api/image/2/level2.json":return"ImageService2";case"http://iiif.io/api/auth/1/kiosk":case"http://iiif.io/api/auth/1/login":case"http://iiif.io/api/auth/1/clickthrough":case"http://iiif.io/api/auth/1/external":case"http://iiif.io/api/auth/0/kiosk":case"http://iiif.io/api/auth/0/login":case"http://iiif.io/api/auth/0/clickthrough":case"http://iiif.io/api/auth/0/external":return"AuthCookieService1";case"http://iiif.io/api/auth/1/token":case"http://iiif.io/api/auth/0/token":return"AuthTokenService1";case"http://iiif.io/api/auth/1/logout":case"http://iiif.io/api/auth/0/logout":return"AuthLogoutService1";case"http://iiif.io/api/search/1/search":case"http://iiif.io/api/search/0/search":return"SearchService1";case"http://iiif.io/api/search/1/autocomplete":case"http://iiif.io/api/search/0/autocomplete":return"AutoCompleteService1"}}(E);if(h)return h}if(A){let h=function(h){let g=Array.isArray(h)?h:[h];for(let h of g)switch(h){case"http://iiif.io/api/image/2/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2":return"ImageService2";case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":return"ImageService1";case"http://iiif.io/api/annex/openannotation/context.json":return"ImageApiSelector"}}(A);if(h)return h}if(_){if(Array.isArray(_)){if(-1!==_.indexOf("oa:CssStylesheet"))return"CssStylesheet";if(-1!==_.indexOf("cnt:ContentAsText"))return"TextualBody";_=_[0]}for(let h of["sc","oa","dcterms","dctypes","iiif"])if(_.startsWith(`${h}:`)){_=_.slice(h.length+1);break}switch(_){case"Layer":return"AnnotationCollection";case"AnnotationList":return"AnnotationPage";case"cnt:ContentAsText":return"TextualBody"}}if(_&&-1!==tb.indexOf(_))return _;if(h.format){if(h.format.startsWith("image/"))return"Image";if(h.format.startsWith("text/")||"application/pdf"===h.format)return"Text";if(h.format.startsWith("application/"))return"Dataset"}return g&&(g.endsWith(".jpg")||g.endsWith(".png")||g.endsWith(".jpeg"))?"Image":_||"unknown"}let tx=/http(s)?:\/\/(creativecommons.org|rightsstatements.org)[^"'\\<\n]+/gm,tC=["http://iiif.io/api/presentation/2/context.json","http://iiif.io/api/image/2/context.json","http://iiif.io/api/image/1/context.json","http://library.stanford.edu/iiif/image-api/1.1/context.json","http://iiif.io/api/search/1/context.json","http://iiif.io/api/search/0/context.json","http://iiif.io/api/auth/1/context.json","http://iiif.io/api/auth/0/context.json","http://iiif.io/api/annex/openannotation/context.json"];function removeUndefinedProperties(h){for(let g in h)(void 0===h[g]||null===h[g])&&delete h[g];return h}let tS=0;function mintNewIdFromResource(h,g){let _=encodeURI(h.id||h["@id"]||"").trim();return _&&g?`${_}/${g}`:_||(tS++,`http://example.org/${h["@type"]}${g?`/${g}`:""}/${tS}`)}function technicalProperties$2(h){let g;let _=[...h.behavior||[]];return h.viewingHint&&_.push(h.viewingHint),Array.isArray(h.motivation)?g=h.motivation.map(removePrefix):h.motivation&&(g=removePrefix(h.motivation)),{"@context":h["@context"]?function(h){if(h){let g=Array.isArray(h)?h:[h],_=[];for(let h of g)"http://iiif.io/api/presentation/2/context.json"===h&&_.push("http://iiif.io/api/presentation/3/context.json"),-1===tC.indexOf(h)&&_.push(h);if(g.length)return 1===_.length?_[0]:_}}(h["@context"]):void 0,id:(h["@id"]||mintNewIdFromResource(h)).trim(),type:getNewType(h),behavior:_.length?_:void 0,height:h.height?h.height:void 0,width:h.width?h.width:void 0,motivation:g,viewingDirection:h.viewingDirection,profile:h.profile,format:h.format?h.format:void 0,duration:void 0,timeMode:void 0}}function descriptiveProperties$2(h){var g;let[_,E]=function(h,g="Rights/License",_="none"){let E=null,A=[],k=Array.isArray(h)?h:[h];for(let h of k){let k=h?function(h){let g=h.match(tx);return g?g[0]:h}(h):void 0;if(k&&(-1!==k.indexOf("creativecommons.org")||-1!==k.indexOf("rightsstatements.org"))){E=k.startsWith("https://")?`http://${k.slice(8)}`:k;continue}k&&A.push({label:{[_]:[g]},value:{[_]:[k]}})}return[E,A]}(h.license),A=[...h.metadata&&(g=h.metadata)?g.map(h=>({label:convertLanguageMapping(h.label),value:convertLanguageMapping(h.value)})):[],...E];return{rights:_,metadata:A.length?A:void 0,label:h.label?convertLanguageMapping(h.label):void 0,requiredStatement:h.attribution?{label:convertLanguageMapping(tv.attributionLabel),value:convertLanguageMapping(h.attribution)}:void 0,navDate:h.navDate,summary:h.description?convertLanguageMapping(h.description):void 0,thumbnail:h.thumbnail}}function linkingProperties$2(h){let g=h.related?Array.isArray(h.related)?h.related:[h.related]:[],_=h.contentLayer;return{provider:h.logo||g.length?[{id:tv.providerId,type:"Agent",homepage:g.length?[g[0]]:void 0,logo:h.logo?Array.isArray(h.logo)?h.logo:[h.logo]:void 0,label:convertLanguageMapping(tv.providerName)}]:void 0,partOf:function(h){if(!h.within)return;let g=Array.isArray(h.within)?h.within:[h.within],_=[];for(let E of g)"string"==typeof E?E&&"sc:Manifest"===h["@type"]&&_.push({id:E,type:"Collection"}):E["@id"]&&_.push({id:E["@id"],type:getNewType(E)});return _.length?_:void 0}(h),rendering:h.rendering,seeAlso:h.seeAlso,start:h.startCanvas,service:h.service?ensureArray$1(h.service):void 0,supplementary:_?[_]:void 0}}function upgradeContentResource(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h),chars:h.chars,format:h.format?h.format:void 0,language:h.language})}let tI=new Traverse({collection:[function(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h),items:h.members})}],manifest:[function(h){let g=[],_=[];for(let E of h.sequences||[])E.canvases.length&&g.push(...E.canvases),E.behavior&&_.push(...E.behavior);let E=technicalProperties$2(h);return _.length&&(E.behavior?E.behavior.push(..._):E.behavior=_),removeUndefinedProperties({...E,...descriptiveProperties$2(h),...linkingProperties$2(h),items:g,structures:h.structures})}],canvas:[function(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h),annotations:h.otherContent&&h.otherContent.length?h.otherContent:void 0,items:h.images&&h.images.length?[{id:mintNewIdFromResource(h,"annotation-page"),type:"AnnotationPage",items:h.images}]:void 0})}],annotationList:[function(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h),items:h.resources&&h.resources.length?h.resources:void 0})}],sequence:[function(h){return h.canvases&&0!==h.canvases.length?{canvases:h.canvases,behavior:h.viewingHint?[h.viewingHint]:[]}:{canvases:[],behavior:[]}}],annotation:[function(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h),target:function upgradeTarget(h){if(Array.isArray(h)){if(h.length>1)return{type:"List",items:h.map(upgradeTarget)};h=h[0]}if("string"==typeof h)return encodeURI(h).trim();if(!("@type"in h))return encodeURI(h["@id"]).trim();{let g;if("string"==typeof h.full)g=h.full;else if("dctypes:Image"===h.full["@type"])g={id:h.full["@id"],type:"Image"};else if("sc:Canvas"===h.full["@type"])g={id:h.full["@id"],type:"Canvas"};else throw Error(`Unsupported source type on annotation: ${h.full["@type"]}`);return{type:"SpecificResource",source:g,selector:function upgradeSelector(h){let g=(Array.isArray(h["@type"])&&h["@type"].includes("oa:SvgSelector")||"oa:SvgSelector"==h["@type"])&&("chars"in h||"value"in h);if(g)return{type:"SvgSelector",value:"chars"in h?h.chars:h.value};if("oa:FragmentSelector"===h["@type"])return{type:"FragmentSelector",value:h.value};if("oa:Choice"===h["@type"])return[upgradeSelector(h.default),...(Array.isArray(h.item)?h.item:[h.item]).map(upgradeSelector)];if("iiif:ImageApiSelector"==h["@type"])return{type:"ImageApiSelector",region:"region"in h?h.region:void 0,rotation:"rotation"in h?h.rotation:void 0};throw Error(`Unsupported selector type: ${h["@type"]}`)}(h.selector)}}}(h.on),body:Array.isArray(h.resource)?h.resource.map(upgradeContentResource):upgradeContentResource(h.resource)})}],contentResource:[upgradeContentResource],choice:[function(h){let g=[];return h.default&&"rdf:nil"!==h.default&&g.push(h.default),h.item&&"rdf:nil"!==h.item&&g.push(...h.item),{...technicalProperties$2(h),...descriptiveProperties$2(h),items:g}}],range:[function(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h),items:h.members})}],service:[function(h){let{"@id":g,"@type":_,"@context":E,profile:A,...k}=h,b={};return g&&(b["@id"]=g),b["@type"]=getNewType(h),"unknown"===b["@type"]&&(E&&E.length&&(b["@context"]=E),b["@type"]="Service"),A&&(b.profile=function getProfile(h){return Array.isArray(h)?getProfile(h.find(h=>"string"==typeof h)):-1!==tk.indexOf(h)?"level2":-1!==ty.indexOf(h)?"level1":"string"==typeof h?h:void 0}(A)),removeUndefinedProperties({...b,...k})}],layer:[function(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h)})}]});function getResource(h,g){if("string"==typeof h)return{id:h,type:g};if(!h.id)throw Error(`Invalid resource does not have an ID (${g})`);return h}function addMissingIdToContentResource(h){return g=>"string"==typeof g?{id:g,type:h}:g.id?g.type?g:{type:h,...g}:{id:`vault://${function(h){let g=JSON.stringify(h),_=5381,E=g.length;for(;E;)_=33*_^g.charCodeAt(--E);let A=_>>>0,k=A.toString(16);return k.length%2?"0"+k:k}(g)}`,type:h,...g}}function ensureDefaultFields(h){return g=>({...h,...g})}function ensureArray(h){return Array.isArray(h)?h:[h]}function ensureArrayOnAnnotation(h){return h.body&&(h.body=ensureArray(h.body)),h.seeAlso&&(h.seeAlso=ensureArray(h.seeAlso)),h.body&&(h.body=ensureArray(h.body)),h.audience&&(h.audience=ensureArray(h.audience)),h.accessibility&&(h.accessibility=ensureArray(h.accessibility)),h.motivation&&(h.motivation=ensureArray(h.motivation)),h}let tw="__$UNSET$__",tN="__$UNWRAP$__";function languageString2to3(h){if(!h)return;let g=Object.keys(h);if(0!==g.length){if(1===g.length){let _=g[0];if(!_)return"";let E=(h[_]||[]).join("");return"@none"===_||"none"===_||"en"===_?E:{"@language":_,"@value":E}}return g.map(g=>({"@language":g,"@value":(h[g]||[]).join("")}))}}function unNestArray(h,g=!1){return h?h.length>1&&!g?h:h[0]||void 0:void 0}function convertService(h){if(h){if("string"==typeof h)return{"@id":h};if("@id"in h){let g={...h};return delete g["@type"],g}return{"@context":"http://iiif.io/api/image/2/context.json","@id":h.id,profile:`http://iiif.io/api/image/2/profiles/${h.profile}.json`}}}function technicalProperties$1(h,g){return[["@id",h.id],["@type",g],["format",h.format],["height",h.height],["width",h.width],["viewingDirection","left-to-right"!==h.viewingDirection?h.viewingDirection:void 0]]}function*descriptiveProperties$1(h){let g=h.provider?yield h.provider[0]:void 0;return[["label",languageString2to3(h.label)],["metadata",h.metadata&&h.metadata.length?h.metadata.map(h=>({label:languageString2to3(h.label)||"",value:languageString2to3(h.value)||""})):void 0],["description",languageString2to3(h.summary)],["thumbnail",unNestArray((yield h.thumbnail))],["navDate",h.navDate],["logo",g?unNestArray(g.logo):void 0],["homepage",g?g.homepage:void 0],["attribution",h.requiredStatement?languageString2to3(h.requiredStatement.value):void 0]]}function*linkingProperties$1(h){return[["seeAlso",unNestArray((yield h.seeAlso))],["service",unNestArray((h.service||[]).map(convertService))],["rendering",unNestArray((yield h.rendering))],["startCanvas",h.start?h.start.id:void 0]]}let tO={Manifest:function*(h){return[...technicalProperties$1(h,"sc:Manifest"),...yield*descriptiveProperties$1(h),...yield*linkingProperties$1(h),["sequences",[{"@id":`${h.id}/sequence0`,"@type":"sc:Sequence",canvases:yield h.items}]],["structures",(yield h.structures)]]},Canvas:function*(h){let g=yield h.items,_=g[0];return[...technicalProperties$1(h,"sc:Canvas"),...yield*descriptiveProperties$1(h),...yield*linkingProperties$1(h),["images",_?[_.resources]:void 0],["annotations",h.annotations&&h.annotations.length?unNestArray((yield h.annotations)):void 0]]},AnnotationPage:function*(h){return[...technicalProperties$1(h,"sc:AnnotationList"),...yield*descriptiveProperties$1(h),["resources",h.items&&h.items.length?unNestArray((yield h.items)):void 0]]},Annotation:function*(h){return[["@id",h.id],["@type","oa:Annotation"],["motivation","sc:painting"],["on",function parseCanvasTarget(h){return Array.isArray(h)?h.map(h=>parseCanvasTarget(h)):"string"==typeof h?h:h.type&&"Canvas"===h.type?h.id:h}(h.target)],["resource",unNestArray((yield h.body),!0)]]},ContentResource:function*(h){return"Image"===h.type?[...technicalProperties$1(h,"dctypes:Image"),...yield*descriptiveProperties$1(h),...yield*linkingProperties$1(h)]:[...technicalProperties$1(h,void 0),...yield*descriptiveProperties$1(h)]},AnnotationCollection:function*(h){return[["@id",h.id],["@type","sc:Layer"],["label",languageString2to3(h.label)]]},Collection:function*(h){return[...technicalProperties$1(h,"sc:Collection"),...yield*descriptiveProperties$1(h),...yield*linkingProperties$1(h),["members",(yield*h.items)]]},Range:function*(h){let g=[],_=[];if(h.items)for(let E of h.items){let A=yield E;g.push({"@id":E.id,"@type":E.type,label:A?A.label:void 0,within:h.id}),"Canvas"===E.type&&_.push(E.id)}return[...technicalProperties$1(h,"sc:Range"),...yield*descriptiveProperties$1(h),...yield*linkingProperties$1(h),["canvases",_.length===g.length?_:void 0],["members",_.length!==g.length?g:void 0]]}};function technicalProperties(h){var g;return[["id",(null==(g=h.id)?void 0:g.startsWith("vault://"))?void 0:h.id],["type",h.type],["format",h.format],["profile",h.profile],["height",h.height],["width",h.width],["duration",h.duration||void 0],["viewingDirection","left-to-right"!==h.viewingDirection?h.viewingDirection:void 0],["behavior",h.behavior&&h.behavior.length?h.behavior:void 0],["timeMode",h.timeMode],["motivation",Array.isArray(h.motivation)?h.motivation[0]:h.motivation]]}function filterEmpty(h){if(h&&0!==h.length)return h}function service2compat(h){if(h&&h.type&&"ImageService2"===h.type){let{id:g,type:_,profile:E,...A}=h,k="string"==typeof E?E:Array.isArray(E)?E.find(h=>"string"==typeof h):"";return{"@id":g,"@type":_,profile:k?k.startsWith("http")?k:`http://iiif.io/api/image/2/${k}.json`:"http://iiif.io/api/image/2/level0.json",...A}}return h}function filterService2Compat(h){if(h&&0!==h.length)return h.map(service2compat)}function*descriptiveProperties(h){return[["label",h.label],["metadata",filterEmpty(h.metadata)],["summary",h.summary],["requiredStatement",h.requiredStatement],["rights",h.rights],["navDate",h.navDate],["language",h.language],["thumbnail",filterEmpty((yield h.thumbnail))],["placeholderCanvas",(yield h.placeholderCanvas)],["accompanyingCanvas",(yield h.accompanyingCanvas)],["provider",filterEmpty((yield h.provider))]]}function*linkingProperties(h){return[["seeAlso",filterEmpty((yield h.seeAlso))],["service",filterService2Compat(h.service)],["services",filterService2Compat(h.services)],["rendering",filterEmpty((yield h.rendering))],["supplementary",filterEmpty((yield h.supplementary))],["homepage",filterEmpty((yield h.homepage))],["logo",filterEmpty((yield h.logo))],["partOf",filterEmpty((yield h.partOf))],["start",h.start]]}let tR={Manifest:function*(h,g,{isTopLevel:_}){return _?[["@context","http://iiif.io/api/presentation/3/context.json"],...technicalProperties(h),...yield*descriptiveProperties(h),...yield*linkingProperties(h),["items",(yield h.items)],["structures",filterEmpty((yield h.structures))],["annotations",filterEmpty((yield h.annotations))]]:[...technicalProperties(h),...yield*descriptiveProperties(h)]},Canvas:function*(h){return[...technicalProperties(h),...yield*descriptiveProperties(h),...yield*linkingProperties(h),["items",(yield h.items)],["annotations",filterEmpty((yield h.annotations))]]},Agent:function*(h){return[["id",h.id],["type","Agent"],["label",h.label],...yield*linkingProperties(h)]},AnnotationPage:function*(h){let g=Object.entries(h).map(([h,g])=>[h,Array.isArray(g)?filterEmpty(g):g]).filter(([h,g])=>"items"!==h);return[...g,...yield*linkingProperties(h),["items",(yield h.items)]]},Service:function*(h){return[[tN,service2compat(h)]]},Annotation:function*(h){let g=Object.entries(h).map(([h,g])=>"motivation"===h?[h,Array.isArray(g)?g[0]:g]:[h,Array.isArray(g)?filterEmpty(g):g]).filter(([h])=>"body"!==h),_=yield h.body;return[...g,["body",1===_.length?_[0]:_]]},ContentResource:function*(h){return[...technicalProperties(h),...yield*descriptiveProperties(h),...yield*linkingProperties(h),["annotations",filterEmpty((yield h.annotations))],["items",filterEmpty((yield h.items))]]},AnnotationCollection:function*(h){return[["id",h.id],["type","AnnotationCollection"],["label",h.label]]},Collection:function*(h,g,{isTopLevel:_}){return _?[["@context","http://iiif.io/api/presentation/3/context.json"],...technicalProperties(h),...yield*descriptiveProperties(h),...yield*linkingProperties(h),["items",filterEmpty((yield h.items))]]:[...technicalProperties(h),...yield*descriptiveProperties(h)]},Range:function*(h){let g=[];for(let _ of h.items)"Range"===_.type?g.push((yield _)):g.push(_);return[...technicalProperties(h),...yield*descriptiveProperties(h),...yield*linkingProperties(h),["items",g],["annotations",filterEmpty((yield h.annotations))]]}};var tD=_(4887);function _typeof(h){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(h)}function ownKeys(h,g){var _=Object.keys(h);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(h);g&&(E=E.filter(function(g){return Object.getOwnPropertyDescriptor(h,g).enumerable})),_.push.apply(_,E)}return _}function _objectSpread2(h){for(var g=1;g<arguments.length;g++){var _=null!=arguments[g]?arguments[g]:{};g%2?ownKeys(Object(_),!0).forEach(function(g){!function(h,g,_){var E;E=function(h,g){if("object"!==_typeof(h)||null===h)return h;var _=h[Symbol.toPrimitive];if(void 0!==_){var E=_.call(h,g||"default");if("object"!==_typeof(E))return E;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(h)}(g,"string"),(g="symbol"===_typeof(E)?E:String(E))in h?Object.defineProperty(h,g,{value:_,enumerable:!0,configurable:!0,writable:!0}):h[g]=_}(h,g,_[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(_)):ownKeys(Object(_)).forEach(function(g){Object.defineProperty(h,g,Object.getOwnPropertyDescriptor(_,g))})}return h}function formatProdErrorMessage(h){return"Minified Redux error #"+h+"; visit https://redux.js.org/Errors?code="+h+" for the full message or use the non-minified dev environment for full errors. "}var tL="function"==typeof Symbol&&Symbol.observable||"@@observable",randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},tP={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function combineReducers(h){for(var g,_=Object.keys(h),E={},A=0;A<_.length;A++){var k=_[A];"function"==typeof h[k]&&(E[k]=h[k])}var b=Object.keys(E);try{!function(h){Object.keys(h).forEach(function(g){var _=h[g];if(void 0===_(void 0,{type:tP.INIT}))throw Error(formatProdErrorMessage(12));if(void 0===_(void 0,{type:tP.PROBE_UNKNOWN_ACTION()}))throw Error(formatProdErrorMessage(13))})}(E)}catch(h){g=h}return function(h,_){if(void 0===h&&(h={}),g)throw g;for(var A=!1,k={},C=0;C<b.length;C++){var S=b[C],w=E[S],N=h[S],R=w(N,_);if(void 0===R)throw _&&_.type,Error(formatProdErrorMessage(14));k[S]=R,A=A||R!==N}return(A=A||b.length!==Object.keys(h).length)?k:h}}function compose(){for(var h=arguments.length,g=Array(h),_=0;_<h;_++)g[_]=arguments[_];return 0===g.length?function(h){return h}:1===g.length?g[0]:g.reduce(function(h,g){return function(){return h(g.apply(void 0,arguments))}})}function applyMiddleware(){for(var h=arguments.length,g=Array(h),_=0;_<h;_++)g[_]=arguments[_];return function(h){return function(){var _=h.apply(void 0,arguments),_dispatch=function(){throw Error(formatProdErrorMessage(15))},E={getState:_.getState,dispatch:function(){return _dispatch.apply(void 0,arguments)}},A=g.map(function(h){return h(E)});return _dispatch=compose.apply(void 0,A)(_.dispatch),_objectSpread2(_objectSpread2({},_),{},{dispatch:_dispatch})}}}let tM="@iiif/IMPORT_ENTITIES",tF="@iiif/MODIFY_ENTITY_FIELD",tB="@iiif/REORDER_ENTITY_FIELD",tH="@iiif/ADD_REFERENCE",tU="@iiif/REMOVE_REFERENCE",tz=(0,tD.createAction)(tM)(),tG=(0,tD.createAction)(tF)(),t$=(0,tD.createAction)(tB)(),tj=(0,tD.createAction)(tH)(),tq=(0,tD.createAction)(tU)(),tV={importEntities:tz,modifyEntityField:tG,reorderEntityField:t$,addReference:tj,removeReference:tq},tY="@iiif/ADD_MAPPING",tW="@iiif/ADD_MAPPINGS",tQ=(0,tD.createAction)(tY)(),tX=(0,tD.createAction)(tW)(),tK="@iiif/SET_META_VALUE",tZ="@iiif/SET_META_VALUE_DYNAMIC",tJ="@iiif/UNSET_META_VALUE",t0=(0,tD.createAction)(tK)(),t1=(0,tD.createAction)(tZ)(),t2=(0,tD.createAction)(tJ)(),t3={setMetaValue:t0,setMetaValueDynamic:t1,unsetMetaValue:t2},t4="RESOURCE_ERROR",t5="RESOURCE_LOADING",t6="RESOURCE_READY",t8="@iiif/REQUEST_RESOURCE",t9="@iiif/REQUEST_ERROR",t7="@iiif/REQUEST_MISMATCH",ne="@iiif/REQUEST_COMPLETE",nt="@iiif/REQUEST_OFFLINE_RESOURCE",nn=(0,tD.createAction)(t8)(),nr=(0,tD.createAction)(t9)(),ni=(0,tD.createAction)(t7)(),ns=(0,tD.createAction)(ne)();(0,tD.createAction)(nt)();let nl="@iiif/BATCH",nc="@iiif/BATCH_IMPORT",nu=(0,tD.createAction)(nl)();(0,tD.createAction)(nc)();let actionListFromResource=(h,g)=>{let{entities:_,resource:E,mapping:A}=function(h){let g=h&&h["@context"]&&("http://iiif.io/api/presentation/2/context.json"===h["@context"]||-1!==h["@context"].indexOf("http://iiif.io/api/presentation/2/context.json")||"http://www.shared-canvas.org/ns/context.json"===h["@context"])||"http://iiif.io/api/image/2/context.json"===h["@context"]?tI.traverseUnknown(h):h,_={Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}},E={},addToEntities=(h,g)=>{let E=_[h]?_[h]:{};return _=>{let A=getResource(_,g||h);return A&&A.id&&h?(E[A.id]=E[A.id]?function(h,g){if("string"==typeof h)return h;if(g.id!==h.id||g.type!==h.type)throw Error("Can only merge entities with identical identifiers and type!");return function merge(h,g){if(!g)return h;if(Array.isArray(h)){if(!Array.isArray(g))throw Error("Cannot merge array with non-array");let _=[...h];for(let E of g)if(null!=E){if(Array.isArray(E))_.push(E);else if("object"==typeof E&&E.id&&E.type){let h=_.findIndex(h=>h.id===E.id&&h.type===E.type);h>=0&&(_[h]=merge(_[h],E))}else -1===h.indexOf(E)&&_.push(E)}return _}if("object"==typeof h){if(Array.isArray(g)||"object"!=typeof g)throw Error("Cannot merge object with non-object");let _={...h};for(let[h,E]of Object.entries(g)){let g=_[h];g!==eJ&&g?_[h]=merge(g,E):_[h]=E}return _}return h||g}({...h},g)}(E[A.id],A):Object.assign({},A),{id:A.id,type:"ContentResource"===h?h:A.type}):A}},addToMapping=(h,g)=>_=>{let{id:A,type:k}=getResource(_,g||h);if(void 0===A)throw Error("Found invalid entity without an ID.");return"ContentResource"===h?E[A]=h:E[A]=k,_},A=new Traverse$1({collection:[ensureDefaultFields(e2),addToMapping("Collection"),addToEntities("Collection")],manifest:[ensureDefaultFields(e3),addToMapping("Manifest"),addToEntities("Manifest")],canvas:[ensureDefaultFields(e1),addToMapping("Canvas"),addToEntities("Canvas")],annotationPage:[addMissingIdToContentResource("AnnotationPage"),ensureDefaultFields(e0),addToMapping("AnnotationPage"),addToEntities("AnnotationPage")],annotation:[addMissingIdToContentResource("Annotation"),ensureArrayOnAnnotation,addToMapping("Annotation"),addToEntities("Annotation")],contentResource:[addMissingIdToContentResource("ContentResource"),addToMapping("ContentResource"),addToEntities("ContentResource")],range:[ensureDefaultFields(e4),addToMapping("Range","Canvas"),addToEntities("Range","Canvas")],agent:[ensureDefaultFields(e5),addToMapping("Agent"),addToEntities("Agent")]}),k=A.traverseUnknown(g);return{entities:_,resource:k,mapping:E}}(g);if(void 0===E.id)return[nr({id:h,message:"ID is not defined in resource."})];let k=[tz({entities:_}),tX({mapping:A})];return E.id!==h&&(k.push(tQ({id:h,type:E.type})),k.push(ni({requestId:h,actualId:E.id}))),k.push(ns({id:h})),k},nd=Number.isNaN||function(h){return"number"==typeof h&&h!=h};function areInputsEqual(h,g){if(!Array.isArray(h)||!Array.isArray(g))return h===g;if(h.length!==g.length)return!1;for(let A=0;A<h.length;A++){var _,E;if(!((_=h[A])===(E=g[A])||nd(_)&&nd(E)))return!1}return!0}function esm_resolveIfExists(h,g){let _=h.iiif.requests[g],E=h.iiif.mapping[g];if(E&&h.iiif.entities[E][_.resourceUri])return h.iiif.entities[E][_.resourceUri]}function createFetchHelper(h,g,{waitTimeout:_=30}={}){return async(E,A)=>{let k=h.getState(),b=k.iiif.requests[E];if(b)switch(b.loadingState){case t4:break;case t5:{let g;let A=!1;try{let k=await Promise.race([new Promise((_,k)=>{A||(g=h.subscribe(()=>{let g=h.getState();if(g.iiif.requests[E].loadingState===t4){k();return}if(g.iiif.requests[E].loadingState===t6){let h=esm_resolveIfExists(g,E);h?_(h):k()}}))}),new Promise((h,g)=>setTimeout(()=>{A=!0,g()},60*_))]);if(g&&g(),k)return k}catch(h){g&&g()}break}case t6:{let h=esm_resolveIfExists(k,E);if(h)return h}}h.dispatch(nn({id:E}));try{let _=await g(E,A);_.id||_["@id"]||(_["@type"]&&(_["@id"]=E),_.id=E);let k=actionListFromResource(E,_);return h.dispatch(nu({actions:k})),esm_resolveIfExists(h.getState(),E)}catch(g){throw h.dispatch(nr({id:E,message:g.toString()})),g}}}function esm_getDefaultEntities(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}function isReferenceList(h,g,_,E){return!(!h[_]||!h[_][g]||!h[_][g][E]||!Array.isArray(h[_][g][E]))}let nm=combineReducers({mapping:(h={},g)=>{switch(g.type){case tY:return{...h,[g.payload.id]:g.payload.type};case tW:return{...h,...g.payload.mapping};default:return h}},entities:(h=esm_getDefaultEntities(),g)=>{switch(g.type){case tF:{if(!h[g.payload.type]||!h[g.payload.type][g.payload.id])return h;let _=h[g.payload.type][g.payload.id];if("string"==typeof _)return h;return{...h,[g.payload.type]:{...h[g.payload.type],[g.payload.id]:{..._,[g.payload.key]:g.payload.value}}}}case tB:{if(!isReferenceList(h,g.payload.id,g.payload.type,g.payload.key))return h;let _=h[g.payload.type][g.payload.id];if("string"==typeof _)return h;let E=Array.from(_[g.payload.key]),[A]=E.splice(g.payload.startIndex,1);return E.splice(g.payload.endIndex,0,A),{...h,[g.payload.type]:{...h[g.payload.type],[g.payload.id]:{..._,[g.payload.key]:E}}}}case tM:{let _=Object.keys(g.payload.entities),E={...h};for(let A of _){let _=g.payload.entities[A],k={...h[A]||{}},b=!1,C=Object.keys(_||{})||[];if(_&&C){for(let g of C)b=!0,k[g]=h[A][g]?function(h,g){let _={},E=[];for(let[A,k]of Object.entries(h||{})){E.push(A);let h=(g||{})[A];if(!h||0===h.length){_[A]=k;continue}_[A]=h}for(let[h,A]of Object.entries(g||{}))-1===E.indexOf(h)&&(_[h]=A);return _}(h[A][g],_[g]):_[g];b&&(E[A]=k)}}return E}case tH:{if(!isReferenceList(h,g.payload.id,g.payload.type,g.payload.key))return h;let _=h[g.payload.type][g.payload.id],E=Array.from(_[g.payload.key]);return E.splice(g.payload.index||E.length+1,0,g.payload.reference),{...h,[g.payload.type]:{...h[g.payload.type],[g.payload.id]:{..._,[g.payload.key]:E}}}}case tU:{if(!isReferenceList(h,g.payload.id,g.payload.type,g.payload.key))return h;let _=h[g.payload.type][g.payload.id],E=Array.from(_[g.payload.key]),A=g.payload.index||E.findIndex(h=>h&&h.id===g.payload.reference.id);if(-1===A||E[A]?.id!==g.payload.reference.id)return h;return E.splice(A,1),{...h,[g.payload.type]:{...h[g.payload.type],[g.payload.id]:{..._,[g.payload.key]:E}}}}default:return h}},requests:(h={},g)=>{switch(g.type){case t8:case nt:return{...h,[g.payload.id]:{requestUri:g.payload.id,loadingState:t5,uriMismatch:!1,resourceUri:g.payload.id}};case t7:return{...h,[g.payload.requestId]:{...h[g.payload.requestId]||{},uriMismatch:!0,resourceUri:g.payload.actualId},[g.payload.actualId]:{requestUri:g.payload.requestId,loadingState:h[g.payload.requestId].loadingState,uriMismatch:!0,resourceUri:g.payload.actualId}};case t9:return{...h,[g.payload.id]:{...h[g.payload.id]||{},loadingState:t4,error:g.payload.message}};case ne:return{...h,[g.payload.id]:{...h[g.payload.id]||{},loadingState:t6,error:void 0}}}return h},meta:(h={},g)=>{let{id:_,updateValue:E,value:A,meta:k,key:b}=g&&g.payload||{};switch(g.type){case tK:return{...h,[_]:{...h[_]||{},[k]:{...h[_]&&h[_][k]||{},[b]:A}}};case tZ:return{...h,[_]:{...h[_]||{},[k]:{...h[_]&&h[_][k]||{},[b]:E(h[_]&&h[_][k]?h[_][k][b]:void 0)}}};case tJ:if(h[_]&&h[_][k]&&h[_][k][b])return{...h,[_]:{...h[_]||{},[k]:{...h[_]&&h[_][k]||{},[b]:void 0}}};return h;default:return h}}}),nh="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||compose;let Vault=class Vault{options;store;emitter;isBatching=!1;batchQueue=[];remoteFetcher;staticFetcher;constructor(h,g){var _;this.options=Object.assign({reducers:{},middleware:[],defaultState:{},customFetcher:this.defaultFetcher,enableDevtools:!0},h||{}),this.store=g||function(h={}){let{enableDevtools:g=!0,iiifStoreName:_="iiif",defaultState:E={},extraMiddleware:A=[],customReducers:k={}}=h,b=combineReducers({[_]:nm,...k}),C=function createStore(h,g,_){if("function"==typeof g&&"function"==typeof _||"function"==typeof _&&"function"==typeof arguments[3])throw Error(formatProdErrorMessage(0));if("function"==typeof g&&void 0===_&&(_=g,g=void 0),void 0!==_){if("function"!=typeof _)throw Error(formatProdErrorMessage(1));return _(createStore)(h,g)}if("function"!=typeof h)throw Error(formatProdErrorMessage(2));var E,A=h,k=g,b=[],C=b,S=!1;function ensureCanMutateNextListeners(){C===b&&(C=b.slice())}function getState(){if(S)throw Error(formatProdErrorMessage(3));return k}function subscribe(h){if("function"!=typeof h)throw Error(formatProdErrorMessage(4));if(S)throw Error(formatProdErrorMessage(5));var g=!0;return ensureCanMutateNextListeners(),C.push(h),function(){if(g){if(S)throw Error(formatProdErrorMessage(6));g=!1,ensureCanMutateNextListeners();var _=C.indexOf(h);C.splice(_,1),b=null}}}function dispatch(h){if(!function(h){if("object"!=typeof h||null===h)return!1;for(var g=h;null!==Object.getPrototypeOf(g);)g=Object.getPrototypeOf(g);return Object.getPrototypeOf(h)===g}(h))throw Error(formatProdErrorMessage(7));if(void 0===h.type)throw Error(formatProdErrorMessage(8));if(S)throw Error(formatProdErrorMessage(9));try{S=!0,k=A(k,h)}finally{S=!1}for(var g=b=C,_=0;_<g.length;_++)(0,g[_])();return h}return dispatch({type:tP.INIT}),(E={dispatch:dispatch,subscribe:subscribe,getState:getState,replaceReducer:function(h){if("function"!=typeof h)throw Error(formatProdErrorMessage(10));A=h,dispatch({type:tP.REPLACE})}})[tL]=function(){var h;return(h={subscribe:function(h){if("object"!=typeof h||null===h)throw Error(formatProdErrorMessage(11));function observeState(){h.next&&h.next(getState())}return observeState(),{unsubscribe:subscribe(observeState)}}})[tL]=function(){return this},h},E}((h,g)=>g&&g.type===nl?g.payload.actions.reduce(b,h):g&&g.type===nc?g.payload.state:b(h,g),E,g?nh(applyMiddleware(...A)):compose(applyMiddleware(...A)));return C}({customReducers:this.options.reducers,extraMiddleware:[...this.options.middleware,this.middleware],defaultState:this.options.defaultState,enableDevtools:this.options.enableDevtools}),this.emitter={all:_=_||new Map,on:function(h,g){var E=_.get(h);E?E.push(g):_.set(h,[g])},off:function(h,g){var E=_.get(h);E&&(g?E.splice(E.indexOf(g)>>>0,1):_.set(h,[]))},emit:function(h,g){var E=_.get(h);E&&E.slice().map(function(h){h(g)}),(E=_.get("*"))&&E.slice().map(function(_){_(h,g)})}},this.remoteFetcher=createFetchHelper(this.store,this.options.customFetcher),this.staticFetcher=createFetchHelper(this.store,(h,g)=>g)}defaultFetcher=h=>fetch(h).then(h=>h.json());batch(h){this.isBatching=!0;try{h(this),this.store.dispatch(nu({actions:this.batchQueue}))}catch(h){throw this.batchQueue=[],this.isBatching=!1,h}this.batchQueue=[],this.isBatching=!1}async asyncBatch(h){this.isBatching=!0;try{await h(this),this.store.dispatch(nu({actions:this.batchQueue}))}catch(h){throw this.batchQueue=[],this.isBatching=!1,h}this.batchQueue=[],this.isBatching=!1}modifyEntityField(h,g,_){this.dispatch(tV.modifyEntityField({id:h.id,type:h.type,key:g,value:_}))}dispatch(h){this.isBatching?this.batchQueue.push(h):this.store.dispatch(h)}middleware=h=>g=>_=>{if(_.type===nl){for(let g of _.payload.actions)this.emitter.emit(g.type,{realAction:g,state:h.getState()});let E=g(_);for(let h of _.payload.actions)this.emitter.emit(`after:${_.type}`,{action:_,state:E});return E}this.emitter.emit(_.type,{action:_,state:h.getState()});let E=g(_);return this.emitter.emit(`after:${_.type}`,{action:_,state:E}),E};serialize(h,g){return function(h,g,_){if(!g.type||!g.id)throw Error("Unknown entity");if(!_[g.type])throw Error(`Serializer not found for ${g.type}`);return function flatten(E){let A=_[E.type];if(!A)return tw;let k=function(h,g){let _=h.requests[g],E=h.mapping[g];if(E&&(!_||!_.resourceUri||h.entities[E][_.resourceUri]))return h.entities[E][_?_.resourceUri:g]}(h,E.id)||(E.id&&E.type?E:null);if(!k)return tw;let b=A(k,h,{isTopLevel:g.id===E.id}),C=b.next();for(;!C.done;){let h=C.value,g=tw;if(h){if(Array.isArray(h)){let _=[];for(let g of h)_.push(flatten(g));g=_}else g=flatten(h)}C=b.next(g)}return C.value===tw?tw:function(h){let g={};for(let[_,E]of h){if(_===tN&&E!==tw)return E;E!==tw&&null!=E&&(g[_]=E)}return g}(C.value)}(g)}(this.getState().iiif,h,g)}toPresentation2(h){return this.serialize(h,tO)}toPresentation3(h){return this.serialize(h,tR)}hydrate(h,g){return this.get(h,g,{skipSelfReturn:!1})}get(h,g,_={}){"string"!=typeof g&&(_=g||{},g=void 0);let{skipSelfReturn:E=!0}=_||{};if(Array.isArray(h))return h.map(h=>this.get(h,_));let A=this.getState();if("string"==typeof h){let _=g||A.iiif.mapping[h];if(!_)return E?null:{id:h,type:"unknown"};h={id:h,type:_}}let k=g||h.type,b=h.id,C=A.iiif.entities[k];if(!C){let g=A.iiif.requests[b];return g&&g.resourceUri!==b?this.get(g.resourceUri,_):E?null:h}return C[h.id]||(E?null:h)}select(h){return h(this.getState())}getStore(){return this.store}getState(){return this.store.getState()}loadManifest(h,g){let _="string"==typeof h?h:h.id;return this.load(_,g)}loadCollection(h,g){let _="string"==typeof h?h:h.id;return this.load(_,g)}load(h,g){let _="string"==typeof h?h:h.id;return g?this.staticFetcher(_,g):this.remoteFetcher(_)}areInputsEqual(h,g){return areInputsEqual(h,g)}subscribe(h,g,_){void 0===_&&(void 0===g||!1===g||!0===g)&&(_=g,g=h,h=h=>h);let E=_?null:h(this.store.getState());return _||g(E,this),this.store.subscribe(()=>{let _=this.store.getState(),A=h(_);E===A||areInputsEqual(E,A)||g(A,this),E=A})}async ensureLoaded(h){let g="string"==typeof h?h:h.id;this.requestStatus(g)||await this.load(g)}requestStatus(h){return this.select(g=>g.iiif.requests[h])}getResourceMeta(h,g){let _=this.getState().iiif.meta[h];return _?g?_[g]:_:void 0}setMetaValue([h,g,_],E){this.dispatch("function"==typeof E?t3.setMetaValueDynamic({id:h,meta:g,key:_,updateValue:E}):t3.setMetaValue({id:h,meta:g,key:_,value:E}))}};var np=_(1036),nf=_(3041);let ng="object"==typeof self?self:globalThis,deserializer=(h,g)=>{let as=(g,_)=>(h.set(_,g),g),unpair=_=>{if(h.has(_))return h.get(_);let[E,A]=g[_];switch(E){case 0:case -1:return as(A,_);case 1:{let h=as([],_);for(let g of A)h.push(unpair(g));return h}case 2:{let h=as({},_);for(let[g,_]of A)h[unpair(g)]=unpair(_);return h}case 3:return as(new Date(A),_);case 4:{let{source:h,flags:g}=A;return as(new RegExp(h,g),_)}case 5:{let h=as(new Map,_);for(let[g,_]of A)h.set(unpair(g),unpair(_));return h}case 6:{let h=as(new Set,_);for(let g of A)h.add(unpair(g));return h}case 7:{let{name:h,message:g}=A;return as(new ng[h](g),_)}case 8:return as(BigInt(A),_);case"BigInt":return as(Object(BigInt(A)),_)}return as(new ng[E](A),_)};return unpair},deserialize=h=>deserializer(new Map,h)(0),{toString:n_}={},{keys:nE}=Object,typeOf=h=>{let g=typeof h;if("object"!==g||!h)return[0,g];let _=n_.call(h).slice(8,-1);switch(_){case"Array":return[1,""];case"Object":return[2,""];case"Date":return[3,""];case"RegExp":return[4,""];case"Map":return[5,""];case"Set":return[6,""]}return _.includes("Array")?[1,_]:_.includes("Error")?[7,_]:[2,_]},shouldSkip=([h,g])=>0===h&&("function"===g||"symbol"===g),serializer=(h,g,_,E)=>{let as=(h,g)=>{let A=E.push(h)-1;return _.set(g,A),A},pair=E=>{if(_.has(E))return _.get(E);let[A,k]=typeOf(E);switch(A){case 0:{let g=E;switch(k){case"bigint":A=8,g=E.toString();break;case"function":case"symbol":if(h)throw TypeError("unable to serialize "+k);g=null;break;case"undefined":return as([-1],E)}return as([A,g],E)}case 1:{if(k)return as([k,[...E]],E);let h=[],g=as([A,h],E);for(let g of E)h.push(pair(g));return g}case 2:{if(k)switch(k){case"BigInt":return as([k,E.toString()],E);case"Boolean":case"Number":case"String":return as([k,E.valueOf()],E)}if(g&&"toJSON"in E)return pair(E.toJSON());let _=[],b=as([A,_],E);for(let g of nE(E))(h||!shouldSkip(typeOf(E[g])))&&_.push([pair(g),pair(E[g])]);return b}case 3:return as([A,E.toISOString()],E);case 4:{let{source:h,flags:g}=E;return as([A,{source:h,flags:g}],E)}case 5:{let g=[],_=as([A,g],E);for(let[_,A]of E)(h||!(shouldSkip(typeOf(_))||shouldSkip(typeOf(A))))&&g.push([pair(_),pair(A)]);return _}case 6:{let g=[],_=as([A,g],E);for(let _ of E)(h||!shouldSkip(typeOf(_)))&&g.push(pair(_));return _}}let{message:b}=E;return as([A,{name:k,message:b}],E)};return pair},serialize_serialize=(h,{json:g,lossy:_}={})=>{let E=[];return serializer(!(g||_),!!g,new Map,E)(h),E};var nT="function"==typeof structuredClone?(h,g)=>g&&("json"in g||"lossy"in g)?deserialize(serialize_serialize(h,g)):structuredClone(h):(h,g)=>deserialize(serialize_serialize(h,g));let Schema=class Schema{constructor(h,g,_){this.property=h,this.normal=g,_&&(this.space=_)}};function merge_merge(h,g){let _={},E={},A=-1;for(;++A<h.length;)Object.assign(_,h[A].property),Object.assign(E,h[A].normal);return new Schema(_,E,g)}function normalize_normalize(h){return h.toLowerCase()}Schema.prototype.property={},Schema.prototype.normal={},Schema.prototype.space=null;let Info=class Info{constructor(h,g){this.property=h,this.attribute=g}};Info.prototype.space=null,Info.prototype.boolean=!1,Info.prototype.booleanish=!1,Info.prototype.overloadedBoolean=!1,Info.prototype.number=!1,Info.prototype.commaSeparated=!1,Info.prototype.spaceSeparated=!1,Info.prototype.commaOrSpaceSeparated=!1,Info.prototype.mustUseProperty=!1,Info.prototype.defined=!1;let nA=0,ny=increment(),nk=increment(),nv=increment(),nb=increment(),nx=increment(),nC=increment(),nS=increment();function increment(){return 2**++nA}let nI=Object.keys(eC);let DefinedInfo=class DefinedInfo extends Info{constructor(h,g,_,E){var A,k;let b=-1;if(super(h,g),E&&(this.space=E),"number"==typeof _)for(;++b<nI.length;){let h=nI[b];A=nI[b],(k=(_&eC[h])===eC[h])&&(this[A]=k)}}};DefinedInfo.prototype.defined=!0;let nw={}.hasOwnProperty;function create(h){let g;let _={},E={};for(g in h.properties)if(nw.call(h.properties,g)){let A=h.properties[g],k=new DefinedInfo(g,h.transform(h.attributes||{},g),A,h.space);h.mustUseProperty&&h.mustUseProperty.includes(g)&&(k.mustUseProperty=!0),_[g]=k,E[normalize_normalize(g)]=g,E[normalize_normalize(k.attribute)]=g}return new Schema(_,E,h.space)}let nN=create({space:"xlink",transform:(h,g)=>"xlink:"+g.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),nO=create({space:"xml",transform:(h,g)=>"xml:"+g.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function caseSensitiveTransform(h,g){return g in h?h[g]:g}function caseInsensitiveTransform(h,g){return caseSensitiveTransform(h,g.toLowerCase())}let nR=create({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:caseInsensitiveTransform,properties:{xmlns:null,xmlnsXLink:null}}),nD=create({transform:(h,g)=>"role"===g?g:"aria-"+g.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:nk,ariaAutoComplete:null,ariaBusy:nk,ariaChecked:nk,ariaColCount:nb,ariaColIndex:nb,ariaColSpan:nb,ariaControls:nx,ariaCurrent:null,ariaDescribedBy:nx,ariaDetails:null,ariaDisabled:nk,ariaDropEffect:nx,ariaErrorMessage:null,ariaExpanded:nk,ariaFlowTo:nx,ariaGrabbed:nk,ariaHasPopup:null,ariaHidden:nk,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:nx,ariaLevel:nb,ariaLive:null,ariaModal:nk,ariaMultiLine:nk,ariaMultiSelectable:nk,ariaOrientation:null,ariaOwns:nx,ariaPlaceholder:null,ariaPosInSet:nb,ariaPressed:nk,ariaReadOnly:nk,ariaRelevant:null,ariaRequired:nk,ariaRoleDescription:nx,ariaRowCount:nb,ariaRowIndex:nb,ariaRowSpan:nb,ariaSelected:nk,ariaSetSize:nb,ariaSort:null,ariaValueMax:nb,ariaValueMin:nb,ariaValueNow:nb,ariaValueText:null,role:null}}),nL=create({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:caseInsensitiveTransform,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:nC,acceptCharset:nx,accessKey:nx,action:null,allow:null,allowFullScreen:ny,allowPaymentRequest:ny,allowUserMedia:ny,alt:null,as:null,async:ny,autoCapitalize:null,autoComplete:nx,autoFocus:ny,autoPlay:ny,blocking:nx,capture:ny,charSet:null,checked:ny,cite:null,className:nx,cols:nb,colSpan:null,content:null,contentEditable:nk,controls:ny,controlsList:nx,coords:nb|nC,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ny,defer:ny,dir:null,dirName:null,disabled:ny,download:nv,draggable:nk,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ny,formTarget:null,headers:nx,height:nb,hidden:ny,high:nb,href:null,hrefLang:null,htmlFor:nx,httpEquiv:nx,id:null,imageSizes:null,imageSrcSet:null,inert:ny,inputMode:null,integrity:null,is:null,isMap:ny,itemId:null,itemProp:nx,itemRef:nx,itemScope:ny,itemType:nx,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ny,low:nb,manifest:null,max:null,maxLength:nb,media:null,method:null,min:null,minLength:nb,multiple:ny,muted:ny,name:null,nonce:null,noModule:ny,noValidate:ny,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ny,optimum:nb,pattern:null,ping:nx,placeholder:null,playsInline:ny,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ny,referrerPolicy:null,rel:nx,required:ny,reversed:ny,rows:nb,rowSpan:nb,sandbox:nx,scope:null,scoped:ny,seamless:ny,selected:ny,shape:null,size:nb,sizes:null,slot:null,span:nb,spellCheck:nk,src:null,srcDoc:null,srcLang:null,srcSet:null,start:nb,step:null,style:null,tabIndex:nb,target:null,title:null,translate:null,type:null,typeMustMatch:ny,useMap:null,value:nk,width:nb,wrap:null,align:null,aLink:null,archive:nx,axis:null,background:null,bgColor:null,border:nb,borderColor:null,bottomMargin:nb,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ny,declare:ny,event:null,face:null,frame:null,frameBorder:null,hSpace:nb,leftMargin:nb,link:null,longDesc:null,lowSrc:null,marginHeight:nb,marginWidth:nb,noResize:ny,noHref:ny,noShade:ny,noWrap:ny,object:null,profile:null,prompt:null,rev:null,rightMargin:nb,rules:null,scheme:null,scrolling:nk,standby:null,summary:null,text:null,topMargin:nb,valueType:null,version:null,vAlign:null,vLink:null,vSpace:nb,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ny,disableRemotePlayback:ny,prefix:null,property:null,results:nb,security:null,unselectable:null}}),nP=create({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:caseSensitiveTransform,properties:{about:nS,accentHeight:nb,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:nb,amplitude:nb,arabicForm:null,ascent:nb,attributeName:null,attributeType:null,azimuth:nb,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:nb,by:null,calcMode:null,capHeight:nb,className:nx,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:nb,diffuseConstant:nb,direction:null,display:null,dur:null,divisor:nb,dominantBaseline:null,download:ny,dx:null,dy:null,edgeMode:null,editable:null,elevation:nb,enableBackground:null,end:null,event:null,exponent:nb,externalResourcesRequired:null,fill:null,fillOpacity:nb,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:nC,g2:nC,glyphName:nC,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:nb,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:nb,horizOriginX:nb,horizOriginY:nb,id:null,ideographic:nb,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:nb,k:nb,k1:nb,k2:nb,k3:nb,k4:nb,kernelMatrix:nS,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:nb,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:nb,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:nb,overlineThickness:nb,paintOrder:null,panose1:null,path:null,pathLength:nb,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:nx,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:nb,pointsAtY:nb,pointsAtZ:nb,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:nS,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:nS,rev:nS,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:nS,requiredFeatures:nS,requiredFonts:nS,requiredFormats:nS,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:nb,specularExponent:nb,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:nb,strikethroughThickness:nb,string:null,stroke:null,strokeDashArray:nS,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:nb,strokeOpacity:nb,strokeWidth:null,style:null,surfaceScale:nb,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:nS,tabIndex:nb,tableValues:null,target:null,targetX:nb,targetY:nb,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:nS,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:nb,underlineThickness:nb,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:nb,values:null,vAlphabetic:nb,vMathematical:nb,vectorEffect:null,vHanging:nb,vIdeographic:nb,version:null,vertAdvY:nb,vertOriginX:nb,vertOriginY:nb,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:nb,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),nM=merge_merge([nO,nN,nR,nD,nL],"html"),nF=merge_merge([nO,nN,nR,nD,nP],"svg");function parse(h){let g=[],_=String(h||""),E=_.indexOf(","),A=0,k=!1;for(;!k;){-1===E&&(E=_.length,k=!0);let h=_.slice(A,E).trim();(h||!k)&&g.push(h),A=E+1,E=_.indexOf(",",A)}return g}function comma_separated_tokens_stringify(h,g){let _=g||{},E=""===h[h.length-1]?[...h,""]:h;return E.join((_.padRight?" ":"")+","+(!1===_.padLeft?"":" ")).trim()}let nB=/[#.]/g,nH=/^data[-\w.:]+$/i,nU=/-[a-z]/g,nz=/[A-Z]/g;function find(h,g){let _=normalize_normalize(g),E=g,A=Info;if(_ in h.normal)return h.property[h.normal[_]];if(_.length>4&&"data"===_.slice(0,4)&&nH.test(g)){if("-"===g.charAt(4)){let h=g.slice(5).replace(nU,camelcase);E="data"+h.charAt(0).toUpperCase()+h.slice(1)}else{let h=g.slice(4);if(!nU.test(h)){let _=h.replace(nz,kebab);"-"!==_.charAt(0)&&(_="-"+_),g="data"+_}}A=DefinedInfo}return new A(E,g)}function kebab(h){return"-"+h.toLowerCase()}function camelcase(h){return h.charAt(1).toUpperCase()}function space_separated_tokens_parse(h){let g=String(h||"").trim();return g?g.split(/[ \t\n\r\f]+/g):[]}function space_separated_tokens_stringify(h){return h.join(" ").trim()}let nG=new Set(["button","menu","reset","submit"]),n$={}.hasOwnProperty;function createH(h,g,_){let E=_&&function(h){let g={},_=-1;for(;++_<h.length;)g[h[_].toLowerCase()]=h[_];return g}(_);return function(_,A,...k){let b,C=-1;if(null==_)b={type:"root",children:[]},k.unshift(A);else{var S;if((b=function(h,g){let _,E;let A=h||"",k={},b=0;for(;b<A.length;){nB.lastIndex=b;let h=nB.exec(A),g=A.slice(b,h?h.index:A.length);g&&(_?"#"===_?k.id=g:Array.isArray(k.className)?k.className.push(g):k.className=[g]:E=g,b+=g.length),h&&(_=h[0],b++)}return{type:"element",tagName:E||g||"div",properties:k,children:[]}}(_,g)).tagName=b.tagName.toLowerCase(),E&&n$.call(E,b.tagName)&&(b.tagName=E[b.tagName]),S=b.tagName,!(null==A||"object"!=typeof A||Array.isArray(A))&&("input"===S||!A.type||"string"!=typeof A.type||!("children"in A&&Array.isArray(A.children))&&("button"===S?nG.has(A.type.toLowerCase()):!("value"in A)))){let g;for(g in A)n$.call(A,g)&&function(h,g,_,E){let A;let k=find(h,_),b=-1;if(null!=E){if("number"==typeof E){if(Number.isNaN(E))return;A=E}else A="boolean"==typeof E?E:"string"==typeof E?k.spaceSeparated?space_separated_tokens_parse(E):k.commaSeparated?parse(E):k.commaOrSpaceSeparated?space_separated_tokens_parse(parse(E).join(" ")):parsePrimitive(k,k.property,E):Array.isArray(E)?E.concat():"style"===k.property?function(h){let g;let _=[];for(g in h)n$.call(h,g)&&_.push([g,h[g]].join(": "));return _.join("; ")}(E):String(E);if(Array.isArray(A)){let h=[];for(;++b<A.length;){let g=parsePrimitive(k,k.property,A[b]);h[b]=g}A=h}if("className"===k.property&&Array.isArray(g.className)){let h=A;A=g.className.concat(h)}g[k.property]=A}}(h,b.properties,g,A[g])}else k.unshift(A)}for(;++C<k.length;)!function addChild(h,g){let _=-1;if(null==g);else if("string"==typeof g||"number"==typeof g)h.push({type:"text",value:String(g)});else if(Array.isArray(g))for(;++_<g.length;)addChild(h,g[_]);else if("object"==typeof g&&"type"in g)"root"===g.type?addChild(h,g.children):h.push(g);else throw Error("Expected node, nodes, or string, got `"+g+"`")}(b.children,k[C]);return"element"===b.type&&"template"===b.tagName&&(b.content={type:"root",children:b.children},b.children=[]),b}}function parsePrimitive(h,g,_){if("string"==typeof _){if(h.number&&_&&!Number.isNaN(Number(_)))return Number(_);if((h.boolean||h.overloadedBoolean)&&(""===_||normalize_normalize(_)===normalize_normalize(g)))return!0}return _}let nj=createH(nM,"div"),nq=createH(nF,"g",["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"]),nV=/\r?\n|\r/g,nY={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},nW={}.hasOwnProperty,nQ=Object.prototype;function one(h,g){let _;switch(g.nodeName){case"#comment":return _={type:"comment",value:g.data},patch(h,g,_),_;case"#document":case"#document-fragment":{let E="mode"in g&&("quirks"===g.mode||"limited-quirks"===g.mode);if(_={type:"root",children:lib_all(h,g.childNodes),data:{quirksMode:E}},h.file&&h.location){let g=String(h.file),E=function(h){let g=String(h),_=[];for(nV.lastIndex=0;nV.test(g);)_.push(nV.lastIndex);return _.push(g.length+1),{toPoint:function(h){let g=-1;if("number"==typeof h&&h>-1&&h<_[_.length-1]){for(;++g<_.length;)if(_[g]>h)return{line:g+1,column:h-(g>0?_[g-1]:0)+1,offset:h}}},toOffset:function(h){let g=h&&h.line,E=h&&h.column;if("number"==typeof g&&"number"==typeof E&&!Number.isNaN(g)&&!Number.isNaN(E)&&g-1 in _){let h=(_[g-2]||0)+E-1||0;if(h>-1&&h<_[_.length-1])return h}}}}(g),A=E.toPoint(0),k=E.toPoint(g.length);_.position={start:A,end:k}}return _}case"#documentType":return patch(h,g,_={type:"doctype"}),_;case"#text":return _={type:"text",value:g.value},patch(h,g,_),_;default:return function(h,g){let _=h.schema;h.schema=g.namespaceURI===nY.svg?nF:nM;let E=-1,A={};for(;++E<g.attrs.length;){let h=g.attrs[E],_=(h.prefix?h.prefix+":":"")+h.name;nW.call(nQ,_)||(A[_]=h.value)}let k="svg"===h.schema.space?nq:nj,b=k(g.tagName,A,lib_all(h,g.childNodes));if(patch(h,g,b),"template"===b.tagName){let _=g.sourceCodeLocation,E=_&&_.startTag&&position(_.startTag),A=_&&_.endTag&&position(_.endTag),k=one(h,g.content);E&&A&&h.file&&(k.position={start:E.end,end:A.start}),b.content=k}return h.schema=_,b}(h,g)}}function lib_all(h,g){let _=-1,E=[];for(;++_<g.length;){let A=one(h,g[_]);E.push(A)}return E}function patch(h,g,_){if("sourceCodeLocation"in g&&g.sourceCodeLocation&&h.file){let E=function(h,g,_){let E=position(_);if("element"===g.type){let A=g.children[g.children.length-1];if(E&&!_.endTag&&A&&A.position&&A.position.end&&(E.end=Object.assign({},A.position.end)),h.verbose){let E;let A={};if(_.attrs)for(E in _.attrs)nW.call(_.attrs,E)&&(A[find(h.schema,E).property]=position(_.attrs[E]));_.startTag;let k=position(_.startTag),b=_.endTag?position(_.endTag):void 0,C={opening:k};b&&(C.closing=b),C.properties=A,g.data={position:C}}}return E}(h,_,g.sourceCodeLocation);E&&(h.location=!0,_.position=E)}}function position(h){let g=point({line:h.startLine,column:h.startCol,offset:h.startOffset}),_=point({line:h.endLine,column:h.endCol,offset:h.endOffset});return g||_?{start:g,end:_}:void 0}function point(h){return h.line&&h.column?h:void 0}let nX={}.hasOwnProperty;function zwitch(h,g){let _=g||{};function one(g,..._){let E=one.invalid,A=one.handlers;if(g&&nX.call(g,h)){let _=String(g[h]);E=nX.call(A,_)?A[_]:one.unknown}if(E)return E.call(this,g,..._)}return one.handlers=_.handlers||{},one.invalid=_.invalid,one.unknown=_.unknown,one}let nK={},nZ={}.hasOwnProperty,nJ=zwitch("type",{handlers:{root:function(h,g){let _={nodeName:"#document",mode:(h.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return _.childNodes=hast_util_to_parse5_lib_all(h.children,_,g),lib_patch(h,_),_},element:function(h,g){let _;let E=g;"element"===h.type&&"svg"===h.tagName.toLowerCase()&&"html"===g.space&&(E=nF);let A=[];if(h.properties){for(_ in h.properties)if("children"!==_&&nZ.call(h.properties,_)){let g=function(h,g,_){let E=find(h,g);if(!1===_||null==_||"number"==typeof _&&Number.isNaN(_)||!_&&E.boolean)return;Array.isArray(_)&&(_=E.commaSeparated?comma_separated_tokens_stringify(_):space_separated_tokens_stringify(_));let A={name:E.attribute,value:!0===_?"":String(_)};if(E.space&&"html"!==E.space&&"svg"!==E.space){let h=A.name.indexOf(":");h<0?A.prefix="":(A.name=A.name.slice(h+1),A.prefix=E.attribute.slice(0,h)),A.namespace=nY[E.space]}return A}(E,_,h.properties[_]);g&&A.push(g)}}let k=E.space,b={nodeName:h.tagName,tagName:h.tagName,attrs:A,namespaceURI:nY[k],childNodes:[],parentNode:null};return b.childNodes=hast_util_to_parse5_lib_all(h.children,b,E),lib_patch(h,b),"template"===h.tagName&&h.content&&(b.content=function(h,g){let _={nodeName:"#document-fragment",childNodes:[]};return _.childNodes=hast_util_to_parse5_lib_all(h.children,_,g),lib_patch(h,_),_}(h.content,E)),b},text:function(h){let g={nodeName:"#text",value:h.value,parentNode:null};return lib_patch(h,g),g},comment:function(h){let g={nodeName:"#comment",data:h.value,parentNode:null};return lib_patch(h,g),g},doctype:function(h){let g={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return lib_patch(h,g),g}}});function hast_util_to_parse5_lib_all(h,g,_){let E=-1,A=[];if(h)for(;++E<h.length;){let k=nJ(h[E],_);k.parentNode=g,A.push(k)}return A}function lib_patch(h,g){let _=h.position;_&&_.start&&_.end&&(_.start.offset,_.end.offset,g.sourceCodeLocation={startLine:_.start.line,startCol:_.start.column,startOffset:_.start.offset,endLine:_.end.line,endCol:_.end.column,endOffset:_.end.offset})}let n0=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],n1=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]);(b=ei=ei||(ei={}))[b.EOF=-1]="EOF",b[b.NULL=0]="NULL",b[b.TABULATION=9]="TABULATION",b[b.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",b[b.LINE_FEED=10]="LINE_FEED",b[b.FORM_FEED=12]="FORM_FEED",b[b.SPACE=32]="SPACE",b[b.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",b[b.QUOTATION_MARK=34]="QUOTATION_MARK",b[b.NUMBER_SIGN=35]="NUMBER_SIGN",b[b.AMPERSAND=38]="AMPERSAND",b[b.APOSTROPHE=39]="APOSTROPHE",b[b.HYPHEN_MINUS=45]="HYPHEN_MINUS",b[b.SOLIDUS=47]="SOLIDUS",b[b.DIGIT_0=48]="DIGIT_0",b[b.DIGIT_9=57]="DIGIT_9",b[b.SEMICOLON=59]="SEMICOLON",b[b.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",b[b.EQUALS_SIGN=61]="EQUALS_SIGN",b[b.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",b[b.QUESTION_MARK=63]="QUESTION_MARK",b[b.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",b[b.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",b[b.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",b[b.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",b[b.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",b[b.GRAVE_ACCENT=96]="GRAVE_ACCENT",b[b.LATIN_SMALL_A=97]="LATIN_SMALL_A",b[b.LATIN_SMALL_F=102]="LATIN_SMALL_F",b[b.LATIN_SMALL_X=120]="LATIN_SMALL_X",b[b.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",b[b.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER";let n2={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function isSurrogate(h){return h>=55296&&h<=57343}function isControlCodePoint(h){return 32!==h&&10!==h&&13!==h&&9!==h&&12!==h&&h>=1&&h<=31||h>=127&&h<=159}function isUndefinedCodePoint(h){return h>=64976&&h<=65007||n1.has(h)}(C=es=es||(es={})).controlCharacterInInputStream="control-character-in-input-stream",C.noncharacterInInputStream="noncharacter-in-input-stream",C.surrogateInInputStream="surrogate-in-input-stream",C.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",C.endTagWithAttributes="end-tag-with-attributes",C.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",C.unexpectedSolidusInTag="unexpected-solidus-in-tag",C.unexpectedNullCharacter="unexpected-null-character",C.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",C.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",C.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",C.missingEndTagName="missing-end-tag-name",C.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",C.unknownNamedCharacterReference="unknown-named-character-reference",C.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",C.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",C.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",C.eofBeforeTagName="eof-before-tag-name",C.eofInTag="eof-in-tag",C.missingAttributeValue="missing-attribute-value",C.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",C.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",C.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",C.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",C.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",C.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",C.missingDoctypePublicIdentifier="missing-doctype-public-identifier",C.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",C.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",C.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",C.cdataInHtmlContent="cdata-in-html-content",C.incorrectlyOpenedComment="incorrectly-opened-comment",C.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",C.eofInDoctype="eof-in-doctype",C.nestedComment="nested-comment",C.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",C.eofInComment="eof-in-comment",C.incorrectlyClosedComment="incorrectly-closed-comment",C.eofInCdata="eof-in-cdata",C.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",C.nullCharacterReference="null-character-reference",C.surrogateCharacterReference="surrogate-character-reference",C.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",C.controlCharacterReference="control-character-reference",C.noncharacterCharacterReference="noncharacter-character-reference",C.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",C.missingDoctypeName="missing-doctype-name",C.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",C.duplicateAttribute="duplicate-attribute",C.nonConformingDoctype="non-conforming-doctype",C.missingDoctype="missing-doctype",C.misplacedDoctype="misplaced-doctype",C.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",C.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",C.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",C.openElementsLeftAfterEof="open-elements-left-after-eof",C.abandonedHeadElementChild="abandoned-head-element-child",C.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",C.nestedNoscriptInHead="nested-noscript-in-head",C.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text";let Preprocessor=class Preprocessor{constructor(h){this.handler=h,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+Number(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(h){let{line:g,col:_,offset:E}=this;return{code:h,startLine:g,endLine:g,startCol:_,endCol:_,startOffset:E,endOffset:E}}_err(h){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(h)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(h){if(this.pos!==this.html.length-1){let g=this.html.charCodeAt(this.pos+1);if(g>=56320&&g<=57343)return this.pos++,this._addGap(),(h-55296)*1024+9216+g}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,ei.EOF;return this._err(es.surrogateInInputStream),h}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(h,g){this.html.length>0?this.html+=h:this.html=h,this.endOfChunkHit=!1,this.lastChunkWritten=g}insertHtmlAtCurrentPos(h){this.html=this.html.substring(0,this.pos+1)+h+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(h,g){if(this.pos+h.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(g)return this.html.startsWith(h,this.pos);for(let g=0;g<h.length;g++){let _=32|this.html.charCodeAt(this.pos+g);if(_!==h.charCodeAt(g))return!1}return!0}peek(h){let g=this.pos+h;if(g>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ei.EOF;let _=this.html.charCodeAt(g);return _===ei.CARRIAGE_RETURN?ei.LINE_FEED:_}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ei.EOF;let h=this.html.charCodeAt(this.pos);if(h===ei.CARRIAGE_RETURN)return this.isEol=!0,this.skipNextNewLine=!0,ei.LINE_FEED;if(h===ei.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine))return this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance();this.skipNextNewLine=!1,isSurrogate(h)&&(h=this._processSurrogate(h));let g=null===this.handler.onParseError||h>31&&h<127||h===ei.LINE_FEED||h===ei.CARRIAGE_RETURN||h>159&&h<64976;return g||this._checkForProblematicCharacters(h),h}_checkForProblematicCharacters(h){isControlCodePoint(h)?this._err(es.controlCharacterInInputStream):isUndefinedCodePoint(h)&&this._err(es.noncharacterInInputStream)}retreat(h){for(this.pos-=h;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}};function getTokenAttr(h,g){for(let _=h.attrs.length-1;_>=0;_--)if(h.attrs[_].name===g)return h.attrs[_].value;return null}(S=el=el||(el={}))[S.CHARACTER=0]="CHARACTER",S[S.NULL_CHARACTER=1]="NULL_CHARACTER",S[S.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",S[S.START_TAG=3]="START_TAG",S[S.END_TAG=4]="END_TAG",S[S.COMMENT=5]="COMMENT",S[S.DOCTYPE=6]="DOCTYPE",S[S.EOF=7]="EOF",S[S.HIBERNATION=8]="HIBERNATION";var n3=new Uint16Array('<\xd5\x00\x00\x00\x00\x00\x00EMabcfglmnoprstu\\bfms\x7f\x84\x8b\x90\x95\x98\xa6\xb3\xb9\xc8\xcflig\xc6P&cute\xc1reve;iyx}rc\xc2;r;\ud835\udd04rave\xc0pha;acr;d;gp\x9d\xa1on;f;\ud835\udd38plyFunction;ing\xc5cs\xbe\xc3r;\ud835\udc9cign;ilde\xc3ml\xc4aceforsu\xe5\xfb\xfecr\xea\xf2kslash;\xf6\xf8;ed;y;crtause;noullis;a;r;\ud835\udd05pf;\ud835\udd39eve;c\xf2mpeq;HOacdefhilorsucy;PY\xa9cpyute;;italDifferentialD;leys;aeioron;dil\xc7rc;nint;ot;dnilla;terDot;\xf2i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;\ud835\udc9ep;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;\ud835\udd07afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\x00\x00\x00\x00f;\ud835\udd3b;DEot;qual;bleCDLRUVontourIntegra\xeco\x00\x00\xbbnArrow;eoftARTrrow;ightArrow;e\xe5ngLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\x00\x00rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\x00\x00ightVector;eeVector;ector;Bar;ight\x00eeVector;ector;Bar;ee;Arrow;ctr;\ud835\udc9frok;NTacdfglmopqstuxG;H\xd0cute\xc9aiyron;rc\xca;ot;r;\ud835\udd08rave\xc8ement;apcr;ty\x00\x00mallSquare;erySmallSquare;gpon;f;\ud835\udd3csilon;uail;Tilde;librium;cir;m;a;ml\xcbipsts;onentialE;cfiosy;r;\ud835\udd09lled\x00\x00mallSquare;erySmallSquare;\x00\x00\x00f;\ud835\udd3dAll;riertrf;c\xf2JTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;\ud835\udd0a;pf;\ud835\udd3eeaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;\ud835\udca2;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\x00f;izontalLine;ct\xf2rok;mpownHum\xf0qual;EJOacdfgmnostucy;lig;cy;cute\xcdiyrc\xce;ot;r;rave\xcc;apcgr;inaryI;lie\xf3\x00;egrral;section;isibleCTomma;imes;gpton;f;\ud835\udd40a;cr;ilde;\x00cy;l\xcfcfosuiyrc;;r;\ud835\udd0dpf;\ud835\udd41\x00r;\ud835\udca5rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;\ud835\udd0epf;\ud835\udd42cr;\ud835\udca6JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\x00bleBracket;n\x00eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ight\xe1sEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;\ud835\udd0f;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftaright\xe1ight\xe1f;\ud835\udd43erLReftArrow;ightArrow;cht\xf2;rok;;acefiosup;y;dliumSpace;lintrf;r;\ud835\udd10nusPlus;pf;\ud835\udd44c\xf2;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicn\xeberyThi\xeetedGLreaterGreate\xf2essLes\xf3Line;r;\ud835\udd11Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;\ud835\udca9ilde\xd1;Eacdfgmoprstuvlig;cute\xd3iyrc\xd4;blac;r;\ud835\udd12rave\xd2aeicr;ga;cron;pf;\ud835\udd46enCurlyDQoubleQuote;uote;;clr;\ud835\udcaaash\xd8ide\xd5es;ml\xd6erBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;\ud835\udd13i;;usMinus;ipncareplan\xe5f;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;\ud835\udcab;UfosOT"r;\ud835\udd14pf;cr;\ud835\udcacBEacefhiorsuarr;G\xaecnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;r\xbbo;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\x00bleBracket;n\x00eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;\ud835\udd16ortDLRUownArrow\xbbeftArrow\xbbightArrow\xbbpArrow;gma;allCircle;pf;\ud835\udd4a\x00\x00t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;\ud835\udcaear;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th\xe1;;esrset;Equal;et\xbbHRSacfhiorsORN\xdeADE;Hccy;y;bu;;aeyron;dil;;r;\ud835\udd17ei\x00efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;\ud835\udd4bipleDot;ctr;\ud835\udcafrok;\x00\x00\x00\x00\x00\x00\x00crute\xdar;ocir;r\x00y;ve;iyrc\xdb;blac;r;\ud835\udd18rave\xd9acr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;\ud835\udd4cADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;own\xe1erLReftArrow;ightArrow;i;lon;ing;cr;\ud835\udcb0ilde;ml\xdcDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;\ud835\udd19pf;\ud835\udd4dcr;\ud835\udcb1dash;cefosirc;dge;r;\ud835\udd1apf;\ud835\udd4ecr;\ud835\udcb2fiosr;\ud835\udd1b;pf;\ud835\udd4fcr;\ud835\udcb3AIUacfosucy;cy;cy;cute\xddiyrc;;r;\ud835\udd1cpf;\ud835\udd50cr;\ud835\udcb4ml;Hacdefoscy;cute;ayron;;ot;\x00oWidt\xe8a;r;pf;cr;\ud835\udcb5\x00\x00\x00\x00\x00\x00\x00cute\xe1reve;;Ediuy;;rc\xe2te\xb4;lig\xe6;r\xb2;\ud835\udd1erave\xe0epfpsym;\xe8ha;apcclr;g;\x00\x00;adsvnd;;lope;;;elmrsz;e\xbbsd;a;;;;;;;;t;vb;d;pth;\xbb\xb9arr;gpon;f;\ud835\udd52;Eaeiop;cir;;d;s;rox;e\xf1ing\xe5ctyr;\ud835\udcb6;mp;e\xf1ilde\xe3ml\xe4cionin\xf4nt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;ge\xbbrk;tbrk;oy;quo;cmprtaus;eptyv;s\xe9no\xf5ahw;;een;r;\ud835\udd1fgcostuvwaiu\xf0rc;p\xbbdptot;lus;imes;\x00\x00cup;ar;riangleduown;p;plus;e\xe5\xe5arow;akocnklstozenge;riangle;dlrown;eft;ight;k;\x00\x00;;4;ck;eo;q=uiv;t;ptwxf;\ud835\udd53;tom\xbbtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbar\xa6ceior;\ud835\udcb7mi;m;el;bh;sub;l;et\xbbp;Ee;;q\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00cprute;;abcdsnd;rcup;aup;p;ot;;eot;\xeeaeiu\x00s;on;dil\xe7rc;ps;sm;ot;dmnil\xb8ptyv;t\xa2;er\xe4r;\ud835\udd20ceiy;ck;mark\xbb;r;Ecefms;;elq;e\x00\x00rrowlreft;ight;RSacd\xbb;st;irc;ash;nint;id;cir;ubs;uit\xbb\x00on;e;q\xc7\xc6\x00\x00a;t;;fl\xeeemxent\xbbe\xf3\x00;dot;n\xf4fry;\ud835\udd54o\xe4\xa9;sr;aorr;ss;cur;\ud835\udcb8bp;e;;e;dot;delprvwarrlr;;\x00\x00r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\x00\x00re\xe3u\xe3ee;edge;en\xa4earrowlreft\xbbight\xbbe\xe4cionin\xf4nt;lcty;AHabcdefhijlorstuwzr\xf2ar;glrsger;eth;\xf2h;v\xbbarow;a\xe3ayron;;;aogrr;tseq;glm\xb0ta;ptyv;irsht;;\ud835\udd21arlr\xbb\xbbaegsvm;osnd;suit;amma;in;;iode\xf7;ontimes;n\xf8cy;c\x00\x00rn;op;lptuwlar;f;\ud835\udd55;empsq;dot;inus;lus;quare;blebarwedg\xe5\xfanadhownarrow\xf3arpoonlref\xf4igh\xf4karo\xf7\x00\x00rn;op;cotry;\ud835\udcb9;l;rok;drot;i;fahr\xf2a\xf2angle;ciy;grarr;DacdefglmnopqrstuxDoo\xf4csute\xe9ter;aioyron;r;c\xealon;;ot;Drot;;\ud835\udd22;rsave\xe8;dot;;ilsnters;;;dot;apscr;ty;svet\xbbp1;;;gs;p;gpon;f;\ud835\udd56alsr;sl;us;i;lvon\xbb;csuviorc\xbb\x00\x00\xedantgltr\xbbess\xbbaeils;st;v;DD;parsl;Daot;rr;cdir;o\xf4ah;\xf0mrl\xebo;cipl;s\xf4eoctatio\xeenential\xe5\x00\x00\x00\x00\x00\x00\x00llingdotse\xf1y;male;ilrlig;\x00\x00g;ig;;\ud835\udd23lig;lig;fjaltt;ig;ns;of;\x00f;\ud835\udd57ak;v;artint;aocs\x00\x00\xbd;\xbc;;;\x00;;\x00\x00\xbe;;5;\x00;;8;l;wn;cr;\ud835\udcbbEabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan\xf4;cdlc;ot;o;l;;es;r;\ud835\udd24;gmel;cy;;Eaj;;;Eaes;p;prox\xbb;q;qim;pf;\ud835\udd58cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\x00pro\xf8r;qlqles\xf3i\xedenrtneqq;\xc5Aabcefkosyr\xf2ilmrrs\xf0f\xbbil\xf4drcy;;cwir;;ar;irc;alrrts;uit\xbblip;con;r;\ud835\udd25sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;\ud835\udd59bar;cltr;\ud835\udcbdas\xe8rok;bpull;hen\xbb\x00\x00\x00\x00\x00\x00cute\xed;iyrc\xee;cxy;cl\xa1fr;\ud835\udd26rave\xec;inoinnt;t;fin;ta;lig;aopcgtr;elpin\xe5ar\xf4h;f;ed;;cfotare;in;tie;do\xf4;celpal;grer\xf3\xe3arhk;rod;cgpty;on;f;\ud835\udd5aa;uest\xbfcir;\ud835\udcben;Edsv;ot;;v;;ilde;\x00cy;l\xefcfmosuiyrc;;r;\ud835\udd27ath;pf;\ud835\udd5b\x00r;\ud835\udcbfrcy;kcy;acfghjosppa;v;eydil;;r;\ud835\udd28reen;cy;cy;pf;\ud835\udd5ccr;\ud835\udcc0ABEHabcdefghjlmnoprstuvartr\xf2\xf2ail;arr;;g;ar;\x00\x00\x00\x00\x00\x00\x00\x00\x00ute;mptyv;ra\xeebda;g;dl;\xe5;uo\xabr;bfhlpst;fs;s;\xebp;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;\xec\xe2;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;ta\xe9arpoonduown\xbbp\xbbeftarrows;ightahsrrow;sarpoon\xf3quigarro\xf7hreetimes;;qslan\xf4;cdgsc;ot;o;r;;es;adegsppro\xf8ot;qgq\xf4gt\xf2\xf4i\xedilrsht;;\ud835\udd29;E;rdu;l;lk;cy;;achtr\xf2orne\xf2ard;ri;iodot;ust;ache\xbbEaes;p;prox\xbb;q;qim;abnoptwznrg;r;r\xebglmreftaright\xe1apsto;ight\xe1parrowlref\xf4ight;aflr;;\ud835\udd5dus;imes;st;\xe1;efnge\xbbar;lt;achmtr\xf2orne\xf2ar;d;;ri;achiqtquo;r;\ud835\udcc1m;eg;;buo;r;rok;<;cdhilqrci;r;re\xe5mes;arr;uest;Piar;;efrdushar;har;enrtneqq;\xc5DacdefhilnopsuDot;clprr\xafet;;ese\xbb;sto;dluow\xeeef\xf4\xf0ker;oymma;;ash;asuredangle\xbbr;\ud835\udd2ao;cdnro\xb5;acds\xf4ir;ot\xb7us;bd;u;p;\xf2\xf0dpels;f;\ud835\udd5ectr;\ud835\udcc2pos\xbb;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptla\xbbute;g;;Eiop;d;s;ro\xf8ur;al;s\x00p\xa0mp;eaeouy\x00;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;ui\xf6eiar;\xedist;sr;\ud835\udd2bEest;qs;qslan\xf4i\xed;r\xbbAapr\xf2rr;ar;;sv;d;cy;AEadestr\xf2;rr;r;;fqstarrro\xf7ightarro\xf7;qslan\xf4;s\xbbi\xed;ri;ei\xe4ptf;\ud835\udd5f\xac;inn;Edv;ot;;;i;v;;aorr;astlle\xecl;;lint;;ceu\xe5;c;e\xf1Aaitr\xf2rr;cw;;ghtarrow\xbbri;echimpqu;ceru\xe5;\ud835\udcc3ort\x00\x00ar\xe1m;e;qsubp\xe5\xe5bcp;Ees;et;eq;qc;e\xf1;Ees;et;eq;qgilr\xeclde\xf1\xe7ianglelreft;e\xf1ight;e\xf1;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00csute\xf3iyr;c\xf4;abioslac;v;old;lig;crir;;\ud835\udd2c\x00\x00\x00n;ave\xf2;bmar;acitr\xf2irr;oss;n\xe5;aeicr;ga;cdnron;;pf;\ud835\udd60aelr;rp;;adiosvr\xf2;efmr;of\xbb\xaa\xbagof;r;lope;;clo\xf2ash\xf8l;ide\xf5es;as;ml\xf6bar;\x00\x00\x00\x00\x00\x00\x00\x00\x00r;ast\xb6;lle\xec\x00\x00m;;y;rcimptnt;od;il;enk;r;\ud835\udd2dimo;v;ma\xf4ne;;tvchfork\xbb;aunckk;h;\xf6s;abcdemstcir;ir;ou;;n\xb1im;wo;ipuntint;f;\ud835\udd61nd\xa3;Eaceinosu;p;u\xe5;c;acensppro\xf8urlye\xf1\xf1aespprox;qq;im;i\xedme;sEas\xf0dfpalslar;ine;urf;;t\xefrel;cir;\ud835\udcc5;ncsp;fiopsur;\ud835\udd2epf;\ud835\udd62rime;cr;\ud835\udcc6aeoteirnion\xf3nt;st;e\xf1\xf4ABHabcdefhilmnoprstuxartr\xf2\xf2ail;ar\xf2ar;cdenqrteu;te;i\xe3mptyv;g;del;;\xe5uo\xbbr;abcfhlpstwp;;fs;;s;\xeb\xf0l;im;l;;aiil;o;nal\xf3abrr\xf2rk;akcek;;es;ldu;;aeuyron;diil;\xec\xe2;clqsa;dhar;uo;rh;acgl;ipsn\xe5ar\xf4t;ilrsht;;\ud835\udd2faordu\xbb;l;;v;gnshtahlrstrrow;ta\xe9arpoonduow\xeep\xbbeftahrrow\xf3arpoon\xf3ightarrows;quigarro\xf7hreetimes;g;ingdotse\xf1ahmr\xf2a\xf2;oust;ache\xbbmid;abptnrg;r;r\xebaflr;;\ud835\udd63us;imes;apr;gt;olint;ar\xf2achqquo;r;\ud835\udcc7buo;rhirre\xe5mes;i;efltri;luhar;;\x00\x00\x00\x00\x00\x00\x00cute;qu\xef;Eaceinpsy;\x00;on;u\xe5;dil;rc;Eas;p;im;olint;i\xed;ot;be;Aacmstxrr;rhr\xeb;ot\xa7i;war;min\xf0nu\xf3\xf1t;r;o\ud835\udd30acoyrp;hycy;;rt\x00\x00i\xe4ara\xec\xadgmma;fv;;deglnprot;;q;E;;E;e;lus;arr;ar\xf2aeitlslsetm\xe9hp;parsl;dle;;e;s;flptcy;;b;ar;f;\ud835\udd64adres;uit\xbbcsuaup;s;p;s;ubp;eset;e\xf1;eset;e\xf1;afr\xbbar\xf2cemtr;\ud835\udcc8tm\xee\xf1i\xecar\xe6arr;fanighteppsilo\xeeh\xe9s\xbbbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acensppro\xf8urlye\xf1\xf1aesppro\xf8q\xf1g;123;Edehlmnps\xb9\xb2\xb3;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr\xeb;owar;lig\xdf\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00get;;r\xebaeyron;dil;;lrec;r;\ud835\udd31eiko\x00e4fa;svym;cnkasppro\xf8im\xbbs\xf0as\xf0rn\xfees\xd7;bd;ar;;eps\xe1;bcfot;ir;;o\ud835\udd65rk;\xe1rime;aipd\xe5adempstngle;dlqrown\xbbeft;e\xf1;ight;e\xf1ot;inus;lus;b;ime;ezium;chtry;\ud835\udcc9;cy;rok;iox\xf4headlreftarro\xf7ightarrow\xbbAHabcdfghlmoprstuwr\xf2ar;crute\xfa\xf2r\x00y;ve;iyrc\xfb;abhr\xf2lac;a\xf2irsht;;\ud835\udd32rave\xf9rlr\xbb\xbblk;ct\x00\x00rn;er\xbbop;ri;alcr;\xa8gpon;f;\ud835\udd66adhlsuown\xe1arpoonlref\xf4igh\xf4i;hl\xbbon\xbbparrows;cit\x00\x00rn;er\xbbop;ng;ri;cr;\ud835\udccadirot;lde;i;f\xbbamr\xf2l\xfcangle;ABDacdeflnoprszr\xf2ar;v;as\xe8nrgrt;eknprstapp\xe1othin\xe7hirop\xf4;h\xefiugm\xe1bpsetneq;q;setneq;q;hret\xe1ianglelreft\xbbight\xbby;ash\xbbelr;bear;q;lip;bta\xf2r;\ud835\udd33tr\xe9subp\xbb\xbbpf;\ud835\udd67ro\xf0tr\xe9cur;\ud835\udccbbpnEe\xbbnEe\xbbigzag;cefoprsirc;dibgar;e;q;erp;r;\ud835\udd34pf;\ud835\udd68;eat\xe8cr;\ud835\udccc\x00\x00\x00\x00\x00\x00\x00tr\xe9r;\ud835\udd35Aar\xf2r\xf2;Aar\xf2r\xf2a\xf0is;dptfl;\ud835\udd69im\xe5Aar\xf2r\xf2cqr;\ud835\udccdptr\xe9acefiosucuyte\xfd;iyrc;;n\xa5r;\ud835\udd36cy;pf;\ud835\udd6acr;\ud835\udccecmy;l\xffacdefhioswcute;ayron;;ot;ettr\xe6a;r;\ud835\udd37cy;grarr;pf;\ud835\udd6bcr;\ud835\udccfjn;j;'.split("").map(h=>h.charCodeAt(0))),n4=new Uint16Array("aglq	\x15\x18\x1b\x0f\x00\x00\x12p;os;t;t;uot;".split("").map(h=>h.charCodeAt(0)));let n5=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),n6=null!==(ec=String.fromCodePoint)&&void 0!==ec?ec:function(h){let g="";return h>65535&&(h-=65536,g+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),g+=String.fromCharCode(h)};function isNumber(h){return h>=eu.ZERO&&h<=eu.NINE}(w=eu||(eu={}))[w.NUM=35]="NUM",w[w.SEMI=59]="SEMI",w[w.EQUALS=61]="EQUALS",w[w.ZERO=48]="ZERO",w[w.NINE=57]="NINE",w[w.LOWER_A=97]="LOWER_A",w[w.LOWER_F=102]="LOWER_F",w[w.LOWER_X=120]="LOWER_X",w[w.LOWER_Z=122]="LOWER_Z",w[w.UPPER_A=65]="UPPER_A",w[w.UPPER_F=70]="UPPER_F",w[w.UPPER_Z=90]="UPPER_Z",(N=ed||(ed={}))[N.VALUE_LENGTH=49152]="VALUE_LENGTH",N[N.BRANCH_LENGTH=16256]="BRANCH_LENGTH",N[N.JUMP_TABLE=127]="JUMP_TABLE",(R=em||(em={}))[R.EntityStart=0]="EntityStart",R[R.NumericStart=1]="NumericStart",R[R.NumericDecimal=2]="NumericDecimal",R[R.NumericHex=3]="NumericHex",R[R.NamedEntity=4]="NamedEntity",(L=eh||(eh={}))[L.Legacy=0]="Legacy",L[L.Strict=1]="Strict",L[L.Attribute=2]="Attribute";let EntityDecoder=class EntityDecoder{constructor(h,g,_){this.decodeTree=h,this.emitCodePoint=g,this.errors=_,this.state=em.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=eh.Strict}startEntity(h){this.decodeMode=h,this.state=em.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(h,g){switch(this.state){case em.EntityStart:if(h.charCodeAt(g)===eu.NUM)return this.state=em.NumericStart,this.consumed+=1,this.stateNumericStart(h,g+1);return this.state=em.NamedEntity,this.stateNamedEntity(h,g);case em.NumericStart:return this.stateNumericStart(h,g);case em.NumericDecimal:return this.stateNumericDecimal(h,g);case em.NumericHex:return this.stateNumericHex(h,g);case em.NamedEntity:return this.stateNamedEntity(h,g)}}stateNumericStart(h,g){return g>=h.length?-1:(32|h.charCodeAt(g))===eu.LOWER_X?(this.state=em.NumericHex,this.consumed+=1,this.stateNumericHex(h,g+1)):(this.state=em.NumericDecimal,this.stateNumericDecimal(h,g))}addToNumericResult(h,g,_,E){if(g!==_){let A=_-g;this.result=this.result*Math.pow(E,A)+parseInt(h.substr(g,A),E),this.consumed+=A}}stateNumericHex(h,g){let _=g;for(;g<h.length;){var E;let A=h.charCodeAt(g);if(!isNumber(A)&&(!((E=A)>=eu.UPPER_A)||!(E<=eu.UPPER_F))&&(!(E>=eu.LOWER_A)||!(E<=eu.LOWER_F)))return this.addToNumericResult(h,_,g,16),this.emitNumericEntity(A,3);g+=1}return this.addToNumericResult(h,_,g,16),-1}stateNumericDecimal(h,g){let _=g;for(;g<h.length;){let E=h.charCodeAt(g);if(!isNumber(E))return this.addToNumericResult(h,_,g,10),this.emitNumericEntity(E,2);g+=1}return this.addToNumericResult(h,_,g,10),-1}emitNumericEntity(h,g){var _,E,A;if(this.consumed<=g)return null===(_=this.errors)||void 0===_||_.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(h===eu.SEMI)this.consumed+=1;else if(this.decodeMode===eh.Strict)return 0;return this.emitCodePoint((E=this.result)>=55296&&E<=57343||E>1114111?65533:null!==(A=n5.get(E))&&void 0!==A?A:E,this.consumed),this.errors&&(h!==eu.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(h,g){let{decodeTree:_}=this,E=_[this.treeIndex],A=(E&ed.VALUE_LENGTH)>>14;for(;g<h.length;g++,this.excess++){let k=h.charCodeAt(g);if(this.treeIndex=determineBranch(_,E,this.treeIndex+Math.max(1,A),k),this.treeIndex<0)return 0===this.result||this.decodeMode===eh.Attribute&&(0===A||function(h){var g;return h===eu.EQUALS||(g=h)>=eu.UPPER_A&&g<=eu.UPPER_Z||g>=eu.LOWER_A&&g<=eu.LOWER_Z||isNumber(g)}(k))?0:this.emitNotTerminatedNamedEntity();if(0!=(A=((E=_[this.treeIndex])&ed.VALUE_LENGTH)>>14)){if(k===eu.SEMI)return this.emitNamedEntityData(this.treeIndex,A,this.consumed+this.excess);this.decodeMode!==eh.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return -1}emitNotTerminatedNamedEntity(){var h;let{result:g,decodeTree:_}=this,E=(_[g]&ed.VALUE_LENGTH)>>14;return this.emitNamedEntityData(g,E,this.consumed),null===(h=this.errors)||void 0===h||h.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(h,g,_){let{decodeTree:E}=this;return this.emitCodePoint(1===g?E[h]&~ed.VALUE_LENGTH:E[h+1],_),3===g&&this.emitCodePoint(E[h+2],_),_}end(){var h;switch(this.state){case em.NamedEntity:return 0!==this.result&&(this.decodeMode!==eh.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case em.NumericDecimal:return this.emitNumericEntity(0,2);case em.NumericHex:return this.emitNumericEntity(0,3);case em.NumericStart:return null===(h=this.errors)||void 0===h||h.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case em.EntityStart:return 0}}};function getDecoder(h){let g="",_=new EntityDecoder(h,h=>g+=n6(h));return function(h,E){let A=0,k=0;for(;(k=h.indexOf("&",k))>=0;){g+=h.slice(A,k),_.startEntity(E);let b=_.write(h,k+1);if(b<0){A=k+_.end();break}A=k+b,k=0===b?A+1:A}let b=g+h.slice(A);return g="",b}}function determineBranch(h,g,_,E){let A=(g&ed.BRANCH_LENGTH)>>7,k=g&ed.JUMP_TABLE;if(0===A)return 0!==k&&E===k?_:-1;if(k){let g=E-k;return g<0||g>=A?-1:h[_+g]-1}let b=_,C=b+A-1;for(;b<=C;){let g=b+C>>>1,_=h[g];if(_<E)b=g+1;else{if(!(_>E))return h[g+A];C=g-1}}return -1}getDecoder(n3),getDecoder(n4),(P=ep=ep||(ep={})).HTML="http://www.w3.org/1999/xhtml",P.MATHML="http://www.w3.org/1998/Math/MathML",P.SVG="http://www.w3.org/2000/svg",P.XLINK="http://www.w3.org/1999/xlink",P.XML="http://www.w3.org/XML/1998/namespace",P.XMLNS="http://www.w3.org/2000/xmlns/",(z=ef=ef||(ef={})).TYPE="type",z.ACTION="action",z.ENCODING="encoding",z.PROMPT="prompt",z.NAME="name",z.COLOR="color",z.FACE="face",z.SIZE="size",(G=eg=eg||(eg={})).NO_QUIRKS="no-quirks",G.QUIRKS="quirks",G.LIMITED_QUIRKS="limited-quirks",($=e_=e_||(e_={})).A="a",$.ADDRESS="address",$.ANNOTATION_XML="annotation-xml",$.APPLET="applet",$.AREA="area",$.ARTICLE="article",$.ASIDE="aside",$.B="b",$.BASE="base",$.BASEFONT="basefont",$.BGSOUND="bgsound",$.BIG="big",$.BLOCKQUOTE="blockquote",$.BODY="body",$.BR="br",$.BUTTON="button",$.CAPTION="caption",$.CENTER="center",$.CODE="code",$.COL="col",$.COLGROUP="colgroup",$.DD="dd",$.DESC="desc",$.DETAILS="details",$.DIALOG="dialog",$.DIR="dir",$.DIV="div",$.DL="dl",$.DT="dt",$.EM="em",$.EMBED="embed",$.FIELDSET="fieldset",$.FIGCAPTION="figcaption",$.FIGURE="figure",$.FONT="font",$.FOOTER="footer",$.FOREIGN_OBJECT="foreignObject",$.FORM="form",$.FRAME="frame",$.FRAMESET="frameset",$.H1="h1",$.H2="h2",$.H3="h3",$.H4="h4",$.H5="h5",$.H6="h6",$.HEAD="head",$.HEADER="header",$.HGROUP="hgroup",$.HR="hr",$.HTML="html",$.I="i",$.IMG="img",$.IMAGE="image",$.INPUT="input",$.IFRAME="iframe",$.KEYGEN="keygen",$.LABEL="label",$.LI="li",$.LINK="link",$.LISTING="listing",$.MAIN="main",$.MALIGNMARK="malignmark",$.MARQUEE="marquee",$.MATH="math",$.MENU="menu",$.META="meta",$.MGLYPH="mglyph",$.MI="mi",$.MO="mo",$.MN="mn",$.MS="ms",$.MTEXT="mtext",$.NAV="nav",$.NOBR="nobr",$.NOFRAMES="noframes",$.NOEMBED="noembed",$.NOSCRIPT="noscript",$.OBJECT="object",$.OL="ol",$.OPTGROUP="optgroup",$.OPTION="option",$.P="p",$.PARAM="param",$.PLAINTEXT="plaintext",$.PRE="pre",$.RB="rb",$.RP="rp",$.RT="rt",$.RTC="rtc",$.RUBY="ruby",$.S="s",$.SCRIPT="script",$.SECTION="section",$.SELECT="select",$.SOURCE="source",$.SMALL="small",$.SPAN="span",$.STRIKE="strike",$.STRONG="strong",$.STYLE="style",$.SUB="sub",$.SUMMARY="summary",$.SUP="sup",$.TABLE="table",$.TBODY="tbody",$.TEMPLATE="template",$.TEXTAREA="textarea",$.TFOOT="tfoot",$.TD="td",$.TH="th",$.THEAD="thead",$.TITLE="title",$.TR="tr",$.TRACK="track",$.TT="tt",$.U="u",$.UL="ul",$.SVG="svg",$.VAR="var",$.WBR="wbr",$.XMP="xmp",(j=eE=eE||(eE={}))[j.UNKNOWN=0]="UNKNOWN",j[j.A=1]="A",j[j.ADDRESS=2]="ADDRESS",j[j.ANNOTATION_XML=3]="ANNOTATION_XML",j[j.APPLET=4]="APPLET",j[j.AREA=5]="AREA",j[j.ARTICLE=6]="ARTICLE",j[j.ASIDE=7]="ASIDE",j[j.B=8]="B",j[j.BASE=9]="BASE",j[j.BASEFONT=10]="BASEFONT",j[j.BGSOUND=11]="BGSOUND",j[j.BIG=12]="BIG",j[j.BLOCKQUOTE=13]="BLOCKQUOTE",j[j.BODY=14]="BODY",j[j.BR=15]="BR",j[j.BUTTON=16]="BUTTON",j[j.CAPTION=17]="CAPTION",j[j.CENTER=18]="CENTER",j[j.CODE=19]="CODE",j[j.COL=20]="COL",j[j.COLGROUP=21]="COLGROUP",j[j.DD=22]="DD",j[j.DESC=23]="DESC",j[j.DETAILS=24]="DETAILS",j[j.DIALOG=25]="DIALOG",j[j.DIR=26]="DIR",j[j.DIV=27]="DIV",j[j.DL=28]="DL",j[j.DT=29]="DT",j[j.EM=30]="EM",j[j.EMBED=31]="EMBED",j[j.FIELDSET=32]="FIELDSET",j[j.FIGCAPTION=33]="FIGCAPTION",j[j.FIGURE=34]="FIGURE",j[j.FONT=35]="FONT",j[j.FOOTER=36]="FOOTER",j[j.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",j[j.FORM=38]="FORM",j[j.FRAME=39]="FRAME",j[j.FRAMESET=40]="FRAMESET",j[j.H1=41]="H1",j[j.H2=42]="H2",j[j.H3=43]="H3",j[j.H4=44]="H4",j[j.H5=45]="H5",j[j.H6=46]="H6",j[j.HEAD=47]="HEAD",j[j.HEADER=48]="HEADER",j[j.HGROUP=49]="HGROUP",j[j.HR=50]="HR",j[j.HTML=51]="HTML",j[j.I=52]="I",j[j.IMG=53]="IMG",j[j.IMAGE=54]="IMAGE",j[j.INPUT=55]="INPUT",j[j.IFRAME=56]="IFRAME",j[j.KEYGEN=57]="KEYGEN",j[j.LABEL=58]="LABEL",j[j.LI=59]="LI",j[j.LINK=60]="LINK",j[j.LISTING=61]="LISTING",j[j.MAIN=62]="MAIN",j[j.MALIGNMARK=63]="MALIGNMARK",j[j.MARQUEE=64]="MARQUEE",j[j.MATH=65]="MATH",j[j.MENU=66]="MENU",j[j.META=67]="META",j[j.MGLYPH=68]="MGLYPH",j[j.MI=69]="MI",j[j.MO=70]="MO",j[j.MN=71]="MN",j[j.MS=72]="MS",j[j.MTEXT=73]="MTEXT",j[j.NAV=74]="NAV",j[j.NOBR=75]="NOBR",j[j.NOFRAMES=76]="NOFRAMES",j[j.NOEMBED=77]="NOEMBED",j[j.NOSCRIPT=78]="NOSCRIPT",j[j.OBJECT=79]="OBJECT",j[j.OL=80]="OL",j[j.OPTGROUP=81]="OPTGROUP",j[j.OPTION=82]="OPTION",j[j.P=83]="P",j[j.PARAM=84]="PARAM",j[j.PLAINTEXT=85]="PLAINTEXT",j[j.PRE=86]="PRE",j[j.RB=87]="RB",j[j.RP=88]="RP",j[j.RT=89]="RT",j[j.RTC=90]="RTC",j[j.RUBY=91]="RUBY",j[j.S=92]="S",j[j.SCRIPT=93]="SCRIPT",j[j.SECTION=94]="SECTION",j[j.SELECT=95]="SELECT",j[j.SOURCE=96]="SOURCE",j[j.SMALL=97]="SMALL",j[j.SPAN=98]="SPAN",j[j.STRIKE=99]="STRIKE",j[j.STRONG=100]="STRONG",j[j.STYLE=101]="STYLE",j[j.SUB=102]="SUB",j[j.SUMMARY=103]="SUMMARY",j[j.SUP=104]="SUP",j[j.TABLE=105]="TABLE",j[j.TBODY=106]="TBODY",j[j.TEMPLATE=107]="TEMPLATE",j[j.TEXTAREA=108]="TEXTAREA",j[j.TFOOT=109]="TFOOT",j[j.TD=110]="TD",j[j.TH=111]="TH",j[j.THEAD=112]="THEAD",j[j.TITLE=113]="TITLE",j[j.TR=114]="TR",j[j.TRACK=115]="TRACK",j[j.TT=116]="TT",j[j.U=117]="U",j[j.UL=118]="UL",j[j.SVG=119]="SVG",j[j.VAR=120]="VAR",j[j.WBR=121]="WBR",j[j.XMP=122]="XMP";let n8=new Map([[e_.A,eE.A],[e_.ADDRESS,eE.ADDRESS],[e_.ANNOTATION_XML,eE.ANNOTATION_XML],[e_.APPLET,eE.APPLET],[e_.AREA,eE.AREA],[e_.ARTICLE,eE.ARTICLE],[e_.ASIDE,eE.ASIDE],[e_.B,eE.B],[e_.BASE,eE.BASE],[e_.BASEFONT,eE.BASEFONT],[e_.BGSOUND,eE.BGSOUND],[e_.BIG,eE.BIG],[e_.BLOCKQUOTE,eE.BLOCKQUOTE],[e_.BODY,eE.BODY],[e_.BR,eE.BR],[e_.BUTTON,eE.BUTTON],[e_.CAPTION,eE.CAPTION],[e_.CENTER,eE.CENTER],[e_.CODE,eE.CODE],[e_.COL,eE.COL],[e_.COLGROUP,eE.COLGROUP],[e_.DD,eE.DD],[e_.DESC,eE.DESC],[e_.DETAILS,eE.DETAILS],[e_.DIALOG,eE.DIALOG],[e_.DIR,eE.DIR],[e_.DIV,eE.DIV],[e_.DL,eE.DL],[e_.DT,eE.DT],[e_.EM,eE.EM],[e_.EMBED,eE.EMBED],[e_.FIELDSET,eE.FIELDSET],[e_.FIGCAPTION,eE.FIGCAPTION],[e_.FIGURE,eE.FIGURE],[e_.FONT,eE.FONT],[e_.FOOTER,eE.FOOTER],[e_.FOREIGN_OBJECT,eE.FOREIGN_OBJECT],[e_.FORM,eE.FORM],[e_.FRAME,eE.FRAME],[e_.FRAMESET,eE.FRAMESET],[e_.H1,eE.H1],[e_.H2,eE.H2],[e_.H3,eE.H3],[e_.H4,eE.H4],[e_.H5,eE.H5],[e_.H6,eE.H6],[e_.HEAD,eE.HEAD],[e_.HEADER,eE.HEADER],[e_.HGROUP,eE.HGROUP],[e_.HR,eE.HR],[e_.HTML,eE.HTML],[e_.I,eE.I],[e_.IMG,eE.IMG],[e_.IMAGE,eE.IMAGE],[e_.INPUT,eE.INPUT],[e_.IFRAME,eE.IFRAME],[e_.KEYGEN,eE.KEYGEN],[e_.LABEL,eE.LABEL],[e_.LI,eE.LI],[e_.LINK,eE.LINK],[e_.LISTING,eE.LISTING],[e_.MAIN,eE.MAIN],[e_.MALIGNMARK,eE.MALIGNMARK],[e_.MARQUEE,eE.MARQUEE],[e_.MATH,eE.MATH],[e_.MENU,eE.MENU],[e_.META,eE.META],[e_.MGLYPH,eE.MGLYPH],[e_.MI,eE.MI],[e_.MO,eE.MO],[e_.MN,eE.MN],[e_.MS,eE.MS],[e_.MTEXT,eE.MTEXT],[e_.NAV,eE.NAV],[e_.NOBR,eE.NOBR],[e_.NOFRAMES,eE.NOFRAMES],[e_.NOEMBED,eE.NOEMBED],[e_.NOSCRIPT,eE.NOSCRIPT],[e_.OBJECT,eE.OBJECT],[e_.OL,eE.OL],[e_.OPTGROUP,eE.OPTGROUP],[e_.OPTION,eE.OPTION],[e_.P,eE.P],[e_.PARAM,eE.PARAM],[e_.PLAINTEXT,eE.PLAINTEXT],[e_.PRE,eE.PRE],[e_.RB,eE.RB],[e_.RP,eE.RP],[e_.RT,eE.RT],[e_.RTC,eE.RTC],[e_.RUBY,eE.RUBY],[e_.S,eE.S],[e_.SCRIPT,eE.SCRIPT],[e_.SECTION,eE.SECTION],[e_.SELECT,eE.SELECT],[e_.SOURCE,eE.SOURCE],[e_.SMALL,eE.SMALL],[e_.SPAN,eE.SPAN],[e_.STRIKE,eE.STRIKE],[e_.STRONG,eE.STRONG],[e_.STYLE,eE.STYLE],[e_.SUB,eE.SUB],[e_.SUMMARY,eE.SUMMARY],[e_.SUP,eE.SUP],[e_.TABLE,eE.TABLE],[e_.TBODY,eE.TBODY],[e_.TEMPLATE,eE.TEMPLATE],[e_.TEXTAREA,eE.TEXTAREA],[e_.TFOOT,eE.TFOOT],[e_.TD,eE.TD],[e_.TH,eE.TH],[e_.THEAD,eE.THEAD],[e_.TITLE,eE.TITLE],[e_.TR,eE.TR],[e_.TRACK,eE.TRACK],[e_.TT,eE.TT],[e_.U,eE.U],[e_.UL,eE.UL],[e_.SVG,eE.SVG],[e_.VAR,eE.VAR],[e_.WBR,eE.WBR],[e_.XMP,eE.XMP]]);function getTagID(h){var g;return null!==(g=n8.get(h))&&void 0!==g?g:eE.UNKNOWN}let n9=eE,n7={[ep.HTML]:new Set([n9.ADDRESS,n9.APPLET,n9.AREA,n9.ARTICLE,n9.ASIDE,n9.BASE,n9.BASEFONT,n9.BGSOUND,n9.BLOCKQUOTE,n9.BODY,n9.BR,n9.BUTTON,n9.CAPTION,n9.CENTER,n9.COL,n9.COLGROUP,n9.DD,n9.DETAILS,n9.DIR,n9.DIV,n9.DL,n9.DT,n9.EMBED,n9.FIELDSET,n9.FIGCAPTION,n9.FIGURE,n9.FOOTER,n9.FORM,n9.FRAME,n9.FRAMESET,n9.H1,n9.H2,n9.H3,n9.H4,n9.H5,n9.H6,n9.HEAD,n9.HEADER,n9.HGROUP,n9.HR,n9.HTML,n9.IFRAME,n9.IMG,n9.INPUT,n9.LI,n9.LINK,n9.LISTING,n9.MAIN,n9.MARQUEE,n9.MENU,n9.META,n9.NAV,n9.NOEMBED,n9.NOFRAMES,n9.NOSCRIPT,n9.OBJECT,n9.OL,n9.P,n9.PARAM,n9.PLAINTEXT,n9.PRE,n9.SCRIPT,n9.SECTION,n9.SELECT,n9.SOURCE,n9.STYLE,n9.SUMMARY,n9.TABLE,n9.TBODY,n9.TD,n9.TEMPLATE,n9.TEXTAREA,n9.TFOOT,n9.TH,n9.THEAD,n9.TITLE,n9.TR,n9.TRACK,n9.UL,n9.WBR,n9.XMP]),[ep.MATHML]:new Set([n9.MI,n9.MO,n9.MN,n9.MS,n9.MTEXT,n9.ANNOTATION_XML]),[ep.SVG]:new Set([n9.TITLE,n9.FOREIGN_OBJECT,n9.DESC]),[ep.XLINK]:new Set,[ep.XML]:new Set,[ep.XMLNS]:new Set};function isNumberedHeader(h){return h===n9.H1||h===n9.H2||h===n9.H3||h===n9.H4||h===n9.H5||h===n9.H6}e_.STYLE,e_.SCRIPT,e_.XMP,e_.IFRAME,e_.NOEMBED,e_.NOFRAMES,e_.PLAINTEXT;let re=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);(W=eT||(eT={}))[W.DATA=0]="DATA",W[W.RCDATA=1]="RCDATA",W[W.RAWTEXT=2]="RAWTEXT",W[W.SCRIPT_DATA=3]="SCRIPT_DATA",W[W.PLAINTEXT=4]="PLAINTEXT",W[W.TAG_OPEN=5]="TAG_OPEN",W[W.END_TAG_OPEN=6]="END_TAG_OPEN",W[W.TAG_NAME=7]="TAG_NAME",W[W.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",W[W.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",W[W.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",W[W.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",W[W.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",W[W.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",W[W.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",W[W.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",W[W.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",W[W.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",W[W.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",W[W.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",W[W.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",W[W.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",W[W.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",W[W.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",W[W.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",W[W.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",W[W.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",W[W.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",W[W.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",W[W.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",W[W.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",W[W.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",W[W.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",W[W.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",W[W.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",W[W.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",W[W.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",W[W.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",W[W.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",W[W.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",W[W.BOGUS_COMMENT=40]="BOGUS_COMMENT",W[W.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",W[W.COMMENT_START=42]="COMMENT_START",W[W.COMMENT_START_DASH=43]="COMMENT_START_DASH",W[W.COMMENT=44]="COMMENT",W[W.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",W[W.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",W[W.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",W[W.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",W[W.COMMENT_END_DASH=49]="COMMENT_END_DASH",W[W.COMMENT_END=50]="COMMENT_END",W[W.COMMENT_END_BANG=51]="COMMENT_END_BANG",W[W.DOCTYPE=52]="DOCTYPE",W[W.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",W[W.DOCTYPE_NAME=54]="DOCTYPE_NAME",W[W.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",W[W.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",W[W.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",W[W.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",W[W.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",W[W.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",W[W.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",W[W.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",W[W.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",W[W.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",W[W.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",W[W.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",W[W.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",W[W.CDATA_SECTION=68]="CDATA_SECTION",W[W.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",W[W.CDATA_SECTION_END=70]="CDATA_SECTION_END",W[W.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",W[W.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",W[W.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",W[W.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",W[W.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",W[W.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",W[W.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",W[W.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END";let rt={DATA:eT.DATA,RCDATA:eT.RCDATA,RAWTEXT:eT.RAWTEXT,SCRIPT_DATA:eT.SCRIPT_DATA,PLAINTEXT:eT.PLAINTEXT,CDATA_SECTION:eT.CDATA_SECTION};function isAsciiDigit(h){return h>=ei.DIGIT_0&&h<=ei.DIGIT_9}function isAsciiUpper(h){return h>=ei.LATIN_CAPITAL_A&&h<=ei.LATIN_CAPITAL_Z}function isAsciiLetter(h){return h>=ei.LATIN_SMALL_A&&h<=ei.LATIN_SMALL_Z||isAsciiUpper(h)}function tokenizer_isAsciiAlphaNumeric(h){return isAsciiLetter(h)||isAsciiDigit(h)}function isAsciiUpperHexDigit(h){return h>=ei.LATIN_CAPITAL_A&&h<=ei.LATIN_CAPITAL_F}function isAsciiLowerHexDigit(h){return h>=ei.LATIN_SMALL_A&&h<=ei.LATIN_SMALL_F}function isWhitespace(h){return h===ei.SPACE||h===ei.LINE_FEED||h===ei.TABULATION||h===ei.FORM_FEED}function isScriptDataDoubleEscapeSequenceEnd(h){return isWhitespace(h)||h===ei.SOLIDUS||h===ei.GREATER_THAN_SIGN}let Tokenizer=class Tokenizer{constructor(h,g){this.options=h,this.handler=g,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=eT.DATA,this.returnState=eT.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Preprocessor(g),this.currentLocation=this.getCurrentLocation(-1)}_err(h){var g,_;null===(_=(g=this.handler).onParseError)||void 0===_||_.call(g,this.preprocessor.getError(h))}getCurrentLocation(h){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-h,startOffset:this.preprocessor.offset-h,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;let h=this._consume();this._ensureHibernation()||this._callState(h)}this.inLoop=!1}}pause(){this.paused=!0}resume(h){if(!this.paused)throw Error("Parser was already resumed");this.paused=!1,this.inLoop||(this._runParsingLoop(),this.paused||null==h||h())}write(h,g,_){this.active=!0,this.preprocessor.write(h,g),this._runParsingLoop(),this.paused||null==_||_()}insertHtmlAtCurrentPos(h){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(h),this._runParsingLoop()}_ensureHibernation(){return!!this.preprocessor.endOfChunkHit&&(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0)}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(h){this.consumedAfterSnapshot-=h,this.preprocessor.retreat(h)}_reconsumeInState(h,g){this.state=h,this._callState(g)}_advanceBy(h){this.consumedAfterSnapshot+=h;for(let g=0;g<h;g++)this.preprocessor.advance()}_consumeSequenceIfMatch(h,g){return!!this.preprocessor.startsWith(h,g)&&(this._advanceBy(h.length-1),!0)}_createStartTagToken(){this.currentToken={type:el.START_TAG,tagName:"",tagID:eE.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:el.END_TAG,tagName:"",tagID:eE.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(h){this.currentToken={type:el.COMMENT,data:"",location:this.getCurrentLocation(h)}}_createDoctypeToken(h){this.currentToken={type:el.DOCTYPE,name:h,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(h,g){this.currentCharacterToken={type:h,chars:g,location:this.currentLocation}}_createAttr(h){this.currentAttr={name:h,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var h,g;let _=this.currentToken;if(null===getTokenAttr(_,this.currentAttr.name)){if(_.attrs.push(this.currentAttr),_.location&&this.currentLocation){let E=null!==(h=(g=_.location).attrs)&&void 0!==h?h:g.attrs=Object.create(null);E[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(es.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(h){this._emitCurrentCharacterToken(h.location),this.currentToken=null,h.location&&(h.location.endLine=this.preprocessor.line,h.location.endCol=this.preprocessor.col+1,h.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){let h=this.currentToken;this.prepareToken(h),h.tagID=getTagID(h.tagName),h.type===el.START_TAG?(this.lastStartTagName=h.tagName,this.handler.onStartTag(h)):(h.attrs.length>0&&this._err(es.endTagWithAttributes),h.selfClosing&&this._err(es.endTagWithTrailingSolidus),this.handler.onEndTag(h)),this.preprocessor.dropParsedChunk()}emitCurrentComment(h){this.prepareToken(h),this.handler.onComment(h),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(h){this.prepareToken(h),this.handler.onDoctype(h),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(h){if(this.currentCharacterToken){switch(h&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=h.startLine,this.currentCharacterToken.location.endCol=h.startCol,this.currentCharacterToken.location.endOffset=h.startOffset),this.currentCharacterToken.type){case el.CHARACTER:this.handler.onCharacter(this.currentCharacterToken);break;case el.NULL_CHARACTER:this.handler.onNullCharacter(this.currentCharacterToken);break;case el.WHITESPACE_CHARACTER:this.handler.onWhitespaceCharacter(this.currentCharacterToken)}this.currentCharacterToken=null}}_emitEOFToken(){let h=this.getCurrentLocation(0);h&&(h.endLine=h.startLine,h.endCol=h.startCol,h.endOffset=h.startOffset),this._emitCurrentCharacterToken(h),this.handler.onEof({type:el.EOF,location:h}),this.active=!1}_appendCharToCurrentCharacterToken(h,g){if(this.currentCharacterToken){if(this.currentCharacterToken.type!==h)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=g;return}}this._createCharacterToken(h,g)}_emitCodePoint(h){let g=isWhitespace(h)?el.WHITESPACE_CHARACTER:h===ei.NULL?el.NULL_CHARACTER:el.CHARACTER;this._appendCharToCurrentCharacterToken(g,String.fromCodePoint(h))}_emitChars(h){this._appendCharToCurrentCharacterToken(el.CHARACTER,h)}_matchNamedCharacterReference(h){let g=null,_=0,E=!1;for(let k=0,b=n3[0];k>=0&&!((k=determineBranch(n3,b,k+1,h))<0);h=this._consume()){_+=1,b=n3[k];let C=b&ed.VALUE_LENGTH;if(C){var A;let b=(C>>14)-1;if(h!==ei.SEMICOLON&&this._isCharacterReferenceInAttribute()&&((A=this.preprocessor.peek(1))===ei.EQUALS_SIGN||tokenizer_isAsciiAlphaNumeric(A))?(g=[ei.AMPERSAND],k+=b):(g=0===b?[n3[k]&~ed.VALUE_LENGTH]:1===b?[n3[++k]]:[n3[++k],n3[++k]],_=0,E=h!==ei.SEMICOLON),0===b){this._consume();break}}}return this._unconsume(_),E&&!this.preprocessor.endOfChunkHit&&this._err(es.missingSemicolonAfterCharacterReference),this._unconsume(1),g}_isCharacterReferenceInAttribute(){return this.returnState===eT.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===eT.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===eT.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(h){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(h):this._emitCodePoint(h)}_callState(h){switch(this.state){case eT.DATA:this._stateData(h);break;case eT.RCDATA:this._stateRcdata(h);break;case eT.RAWTEXT:this._stateRawtext(h);break;case eT.SCRIPT_DATA:this._stateScriptData(h);break;case eT.PLAINTEXT:this._statePlaintext(h);break;case eT.TAG_OPEN:this._stateTagOpen(h);break;case eT.END_TAG_OPEN:this._stateEndTagOpen(h);break;case eT.TAG_NAME:this._stateTagName(h);break;case eT.RCDATA_LESS_THAN_SIGN:this._stateRcdataLessThanSign(h);break;case eT.RCDATA_END_TAG_OPEN:this._stateRcdataEndTagOpen(h);break;case eT.RCDATA_END_TAG_NAME:this._stateRcdataEndTagName(h);break;case eT.RAWTEXT_LESS_THAN_SIGN:this._stateRawtextLessThanSign(h);break;case eT.RAWTEXT_END_TAG_OPEN:this._stateRawtextEndTagOpen(h);break;case eT.RAWTEXT_END_TAG_NAME:this._stateRawtextEndTagName(h);break;case eT.SCRIPT_DATA_LESS_THAN_SIGN:this._stateScriptDataLessThanSign(h);break;case eT.SCRIPT_DATA_END_TAG_OPEN:this._stateScriptDataEndTagOpen(h);break;case eT.SCRIPT_DATA_END_TAG_NAME:this._stateScriptDataEndTagName(h);break;case eT.SCRIPT_DATA_ESCAPE_START:this._stateScriptDataEscapeStart(h);break;case eT.SCRIPT_DATA_ESCAPE_START_DASH:this._stateScriptDataEscapeStartDash(h);break;case eT.SCRIPT_DATA_ESCAPED:this._stateScriptDataEscaped(h);break;case eT.SCRIPT_DATA_ESCAPED_DASH:this._stateScriptDataEscapedDash(h);break;case eT.SCRIPT_DATA_ESCAPED_DASH_DASH:this._stateScriptDataEscapedDashDash(h);break;case eT.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataEscapedLessThanSign(h);break;case eT.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:this._stateScriptDataEscapedEndTagOpen(h);break;case eT.SCRIPT_DATA_ESCAPED_END_TAG_NAME:this._stateScriptDataEscapedEndTagName(h);break;case eT.SCRIPT_DATA_DOUBLE_ESCAPE_START:this._stateScriptDataDoubleEscapeStart(h);break;case eT.SCRIPT_DATA_DOUBLE_ESCAPED:this._stateScriptDataDoubleEscaped(h);break;case eT.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:this._stateScriptDataDoubleEscapedDash(h);break;case eT.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:this._stateScriptDataDoubleEscapedDashDash(h);break;case eT.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataDoubleEscapedLessThanSign(h);break;case eT.SCRIPT_DATA_DOUBLE_ESCAPE_END:this._stateScriptDataDoubleEscapeEnd(h);break;case eT.BEFORE_ATTRIBUTE_NAME:this._stateBeforeAttributeName(h);break;case eT.ATTRIBUTE_NAME:this._stateAttributeName(h);break;case eT.AFTER_ATTRIBUTE_NAME:this._stateAfterAttributeName(h);break;case eT.BEFORE_ATTRIBUTE_VALUE:this._stateBeforeAttributeValue(h);break;case eT.ATTRIBUTE_VALUE_DOUBLE_QUOTED:this._stateAttributeValueDoubleQuoted(h);break;case eT.ATTRIBUTE_VALUE_SINGLE_QUOTED:this._stateAttributeValueSingleQuoted(h);break;case eT.ATTRIBUTE_VALUE_UNQUOTED:this._stateAttributeValueUnquoted(h);break;case eT.AFTER_ATTRIBUTE_VALUE_QUOTED:this._stateAfterAttributeValueQuoted(h);break;case eT.SELF_CLOSING_START_TAG:this._stateSelfClosingStartTag(h);break;case eT.BOGUS_COMMENT:this._stateBogusComment(h);break;case eT.MARKUP_DECLARATION_OPEN:this._stateMarkupDeclarationOpen(h);break;case eT.COMMENT_START:this._stateCommentStart(h);break;case eT.COMMENT_START_DASH:this._stateCommentStartDash(h);break;case eT.COMMENT:this._stateComment(h);break;case eT.COMMENT_LESS_THAN_SIGN:this._stateCommentLessThanSign(h);break;case eT.COMMENT_LESS_THAN_SIGN_BANG:this._stateCommentLessThanSignBang(h);break;case eT.COMMENT_LESS_THAN_SIGN_BANG_DASH:this._stateCommentLessThanSignBangDash(h);break;case eT.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:this._stateCommentLessThanSignBangDashDash(h);break;case eT.COMMENT_END_DASH:this._stateCommentEndDash(h);break;case eT.COMMENT_END:this._stateCommentEnd(h);break;case eT.COMMENT_END_BANG:this._stateCommentEndBang(h);break;case eT.DOCTYPE:this._stateDoctype(h);break;case eT.BEFORE_DOCTYPE_NAME:this._stateBeforeDoctypeName(h);break;case eT.DOCTYPE_NAME:this._stateDoctypeName(h);break;case eT.AFTER_DOCTYPE_NAME:this._stateAfterDoctypeName(h);break;case eT.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._stateAfterDoctypePublicKeyword(h);break;case eT.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:this._stateBeforeDoctypePublicIdentifier(h);break;case eT.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypePublicIdentifierDoubleQuoted(h);break;case eT.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypePublicIdentifierSingleQuoted(h);break;case eT.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:this._stateAfterDoctypePublicIdentifier(h);break;case eT.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:this._stateBetweenDoctypePublicAndSystemIdentifiers(h);break;case eT.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._stateAfterDoctypeSystemKeyword(h);break;case eT.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:this._stateBeforeDoctypeSystemIdentifier(h);break;case eT.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypeSystemIdentifierDoubleQuoted(h);break;case eT.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypeSystemIdentifierSingleQuoted(h);break;case eT.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:this._stateAfterDoctypeSystemIdentifier(h);break;case eT.BOGUS_DOCTYPE:this._stateBogusDoctype(h);break;case eT.CDATA_SECTION:this._stateCdataSection(h);break;case eT.CDATA_SECTION_BRACKET:this._stateCdataSectionBracket(h);break;case eT.CDATA_SECTION_END:this._stateCdataSectionEnd(h);break;case eT.CHARACTER_REFERENCE:this._stateCharacterReference(h);break;case eT.NAMED_CHARACTER_REFERENCE:this._stateNamedCharacterReference(h);break;case eT.AMBIGUOUS_AMPERSAND:this._stateAmbiguousAmpersand(h);break;case eT.NUMERIC_CHARACTER_REFERENCE:this._stateNumericCharacterReference(h);break;case eT.HEXADEMICAL_CHARACTER_REFERENCE_START:this._stateHexademicalCharacterReferenceStart(h);break;case eT.HEXADEMICAL_CHARACTER_REFERENCE:this._stateHexademicalCharacterReference(h);break;case eT.DECIMAL_CHARACTER_REFERENCE:this._stateDecimalCharacterReference(h);break;case eT.NUMERIC_CHARACTER_REFERENCE_END:this._stateNumericCharacterReferenceEnd(h);break;default:throw Error("Unknown state")}}_stateData(h){switch(h){case ei.LESS_THAN_SIGN:this.state=eT.TAG_OPEN;break;case ei.AMPERSAND:this.returnState=eT.DATA,this.state=eT.CHARACTER_REFERENCE;break;case ei.NULL:this._err(es.unexpectedNullCharacter),this._emitCodePoint(h);break;case ei.EOF:this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateRcdata(h){switch(h){case ei.AMPERSAND:this.returnState=eT.RCDATA,this.state=eT.CHARACTER_REFERENCE;break;case ei.LESS_THAN_SIGN:this.state=eT.RCDATA_LESS_THAN_SIGN;break;case ei.NULL:this._err(es.unexpectedNullCharacter),this._emitChars("");break;case ei.EOF:this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateRawtext(h){switch(h){case ei.LESS_THAN_SIGN:this.state=eT.RAWTEXT_LESS_THAN_SIGN;break;case ei.NULL:this._err(es.unexpectedNullCharacter),this._emitChars("");break;case ei.EOF:this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateScriptData(h){switch(h){case ei.LESS_THAN_SIGN:this.state=eT.SCRIPT_DATA_LESS_THAN_SIGN;break;case ei.NULL:this._err(es.unexpectedNullCharacter),this._emitChars("");break;case ei.EOF:this._emitEOFToken();break;default:this._emitCodePoint(h)}}_statePlaintext(h){switch(h){case ei.NULL:this._err(es.unexpectedNullCharacter),this._emitChars("");break;case ei.EOF:this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateTagOpen(h){if(isAsciiLetter(h))this._createStartTagToken(),this.state=eT.TAG_NAME,this._stateTagName(h);else switch(h){case ei.EXCLAMATION_MARK:this.state=eT.MARKUP_DECLARATION_OPEN;break;case ei.SOLIDUS:this.state=eT.END_TAG_OPEN;break;case ei.QUESTION_MARK:this._err(es.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=eT.BOGUS_COMMENT,this._stateBogusComment(h);break;case ei.EOF:this._err(es.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break;default:this._err(es.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=eT.DATA,this._stateData(h)}}_stateEndTagOpen(h){if(isAsciiLetter(h))this._createEndTagToken(),this.state=eT.TAG_NAME,this._stateTagName(h);else switch(h){case ei.GREATER_THAN_SIGN:this._err(es.missingEndTagName),this.state=eT.DATA;break;case ei.EOF:this._err(es.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break;default:this._err(es.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=eT.BOGUS_COMMENT,this._stateBogusComment(h)}}_stateTagName(h){let g=this.currentToken;switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:this.state=eT.BEFORE_ATTRIBUTE_NAME;break;case ei.SOLIDUS:this.state=eT.SELF_CLOSING_START_TAG;break;case ei.GREATER_THAN_SIGN:this.state=eT.DATA,this.emitCurrentTagToken();break;case ei.NULL:this._err(es.unexpectedNullCharacter),g.tagName+="";break;case ei.EOF:this._err(es.eofInTag),this._emitEOFToken();break;default:g.tagName+=String.fromCodePoint(isAsciiUpper(h)?h+32:h)}}_stateRcdataLessThanSign(h){h===ei.SOLIDUS?this.state=eT.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=eT.RCDATA,this._stateRcdata(h))}_stateRcdataEndTagOpen(h){isAsciiLetter(h)?(this.state=eT.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(h)):(this._emitChars("</"),this.state=eT.RCDATA,this._stateRcdata(h))}handleSpecialEndTag(h){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();let g=this.currentToken;g.tagName=this.lastStartTagName;let _=this.preprocessor.peek(this.lastStartTagName.length);switch(_){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=eT.BEFORE_ATTRIBUTE_NAME,!1;case ei.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=eT.SELF_CLOSING_START_TAG,!1;case ei.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=eT.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(h){this.handleSpecialEndTag(h)&&(this._emitChars("</"),this.state=eT.RCDATA,this._stateRcdata(h))}_stateRawtextLessThanSign(h){h===ei.SOLIDUS?this.state=eT.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=eT.RAWTEXT,this._stateRawtext(h))}_stateRawtextEndTagOpen(h){isAsciiLetter(h)?(this.state=eT.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(h)):(this._emitChars("</"),this.state=eT.RAWTEXT,this._stateRawtext(h))}_stateRawtextEndTagName(h){this.handleSpecialEndTag(h)&&(this._emitChars("</"),this.state=eT.RAWTEXT,this._stateRawtext(h))}_stateScriptDataLessThanSign(h){switch(h){case ei.SOLIDUS:this.state=eT.SCRIPT_DATA_END_TAG_OPEN;break;case ei.EXCLAMATION_MARK:this.state=eT.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break;default:this._emitChars("<"),this.state=eT.SCRIPT_DATA,this._stateScriptData(h)}}_stateScriptDataEndTagOpen(h){isAsciiLetter(h)?(this.state=eT.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(h)):(this._emitChars("</"),this.state=eT.SCRIPT_DATA,this._stateScriptData(h))}_stateScriptDataEndTagName(h){this.handleSpecialEndTag(h)&&(this._emitChars("</"),this.state=eT.SCRIPT_DATA,this._stateScriptData(h))}_stateScriptDataEscapeStart(h){h===ei.HYPHEN_MINUS?(this.state=eT.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=eT.SCRIPT_DATA,this._stateScriptData(h))}_stateScriptDataEscapeStartDash(h){h===ei.HYPHEN_MINUS?(this.state=eT.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=eT.SCRIPT_DATA,this._stateScriptData(h))}_stateScriptDataEscaped(h){switch(h){case ei.HYPHEN_MINUS:this.state=eT.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break;case ei.LESS_THAN_SIGN:this.state=eT.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case ei.NULL:this._err(es.unexpectedNullCharacter),this._emitChars("");break;case ei.EOF:this._err(es.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateScriptDataEscapedDash(h){switch(h){case ei.HYPHEN_MINUS:this.state=eT.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break;case ei.LESS_THAN_SIGN:this.state=eT.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case ei.NULL:this._err(es.unexpectedNullCharacter),this.state=eT.SCRIPT_DATA_ESCAPED,this._emitChars("");break;case ei.EOF:this._err(es.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=eT.SCRIPT_DATA_ESCAPED,this._emitCodePoint(h)}}_stateScriptDataEscapedDashDash(h){switch(h){case ei.HYPHEN_MINUS:this._emitChars("-");break;case ei.LESS_THAN_SIGN:this.state=eT.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case ei.GREATER_THAN_SIGN:this.state=eT.SCRIPT_DATA,this._emitChars(">");break;case ei.NULL:this._err(es.unexpectedNullCharacter),this.state=eT.SCRIPT_DATA_ESCAPED,this._emitChars("");break;case ei.EOF:this._err(es.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=eT.SCRIPT_DATA_ESCAPED,this._emitCodePoint(h)}}_stateScriptDataEscapedLessThanSign(h){h===ei.SOLIDUS?this.state=eT.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:isAsciiLetter(h)?(this._emitChars("<"),this.state=eT.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(h)):(this._emitChars("<"),this.state=eT.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(h))}_stateScriptDataEscapedEndTagOpen(h){isAsciiLetter(h)?(this.state=eT.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(h)):(this._emitChars("</"),this.state=eT.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(h))}_stateScriptDataEscapedEndTagName(h){this.handleSpecialEndTag(h)&&(this._emitChars("</"),this.state=eT.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(h))}_stateScriptDataDoubleEscapeStart(h){if(this.preprocessor.startsWith(n2.SCRIPT,!1)&&isScriptDataDoubleEscapeSequenceEnd(this.preprocessor.peek(n2.SCRIPT.length))){this._emitCodePoint(h);for(let h=0;h<n2.SCRIPT.length;h++)this._emitCodePoint(this._consume());this.state=eT.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=eT.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(h))}_stateScriptDataDoubleEscaped(h){switch(h){case ei.HYPHEN_MINUS:this.state=eT.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break;case ei.LESS_THAN_SIGN:this.state=eT.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case ei.NULL:this._err(es.unexpectedNullCharacter),this._emitChars("");break;case ei.EOF:this._err(es.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateScriptDataDoubleEscapedDash(h){switch(h){case ei.HYPHEN_MINUS:this.state=eT.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break;case ei.LESS_THAN_SIGN:this.state=eT.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case ei.NULL:this._err(es.unexpectedNullCharacter),this.state=eT.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars("");break;case ei.EOF:this._err(es.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=eT.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(h)}}_stateScriptDataDoubleEscapedDashDash(h){switch(h){case ei.HYPHEN_MINUS:this._emitChars("-");break;case ei.LESS_THAN_SIGN:this.state=eT.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case ei.GREATER_THAN_SIGN:this.state=eT.SCRIPT_DATA,this._emitChars(">");break;case ei.NULL:this._err(es.unexpectedNullCharacter),this.state=eT.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars("");break;case ei.EOF:this._err(es.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=eT.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(h)}}_stateScriptDataDoubleEscapedLessThanSign(h){h===ei.SOLIDUS?(this.state=eT.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=eT.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(h))}_stateScriptDataDoubleEscapeEnd(h){if(this.preprocessor.startsWith(n2.SCRIPT,!1)&&isScriptDataDoubleEscapeSequenceEnd(this.preprocessor.peek(n2.SCRIPT.length))){this._emitCodePoint(h);for(let h=0;h<n2.SCRIPT.length;h++)this._emitCodePoint(this._consume());this.state=eT.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=eT.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(h))}_stateBeforeAttributeName(h){switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:break;case ei.SOLIDUS:case ei.GREATER_THAN_SIGN:case ei.EOF:this.state=eT.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(h);break;case ei.EQUALS_SIGN:this._err(es.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=eT.ATTRIBUTE_NAME;break;default:this._createAttr(""),this.state=eT.ATTRIBUTE_NAME,this._stateAttributeName(h)}}_stateAttributeName(h){switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:case ei.SOLIDUS:case ei.GREATER_THAN_SIGN:case ei.EOF:this._leaveAttrName(),this.state=eT.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(h);break;case ei.EQUALS_SIGN:this._leaveAttrName(),this.state=eT.BEFORE_ATTRIBUTE_VALUE;break;case ei.QUOTATION_MARK:case ei.APOSTROPHE:case ei.LESS_THAN_SIGN:this._err(es.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(h);break;case ei.NULL:this._err(es.unexpectedNullCharacter),this.currentAttr.name+="";break;default:this.currentAttr.name+=String.fromCodePoint(isAsciiUpper(h)?h+32:h)}}_stateAfterAttributeName(h){switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:break;case ei.SOLIDUS:this.state=eT.SELF_CLOSING_START_TAG;break;case ei.EQUALS_SIGN:this.state=eT.BEFORE_ATTRIBUTE_VALUE;break;case ei.GREATER_THAN_SIGN:this.state=eT.DATA,this.emitCurrentTagToken();break;case ei.EOF:this._err(es.eofInTag),this._emitEOFToken();break;default:this._createAttr(""),this.state=eT.ATTRIBUTE_NAME,this._stateAttributeName(h)}}_stateBeforeAttributeValue(h){switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:break;case ei.QUOTATION_MARK:this.state=eT.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break;case ei.APOSTROPHE:this.state=eT.ATTRIBUTE_VALUE_SINGLE_QUOTED;break;case ei.GREATER_THAN_SIGN:this._err(es.missingAttributeValue),this.state=eT.DATA,this.emitCurrentTagToken();break;default:this.state=eT.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(h)}}_stateAttributeValueDoubleQuoted(h){switch(h){case ei.QUOTATION_MARK:this.state=eT.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case ei.AMPERSAND:this.returnState=eT.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=eT.CHARACTER_REFERENCE;break;case ei.NULL:this._err(es.unexpectedNullCharacter),this.currentAttr.value+="";break;case ei.EOF:this._err(es.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(h)}}_stateAttributeValueSingleQuoted(h){switch(h){case ei.APOSTROPHE:this.state=eT.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case ei.AMPERSAND:this.returnState=eT.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=eT.CHARACTER_REFERENCE;break;case ei.NULL:this._err(es.unexpectedNullCharacter),this.currentAttr.value+="";break;case ei.EOF:this._err(es.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(h)}}_stateAttributeValueUnquoted(h){switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:this._leaveAttrValue(),this.state=eT.BEFORE_ATTRIBUTE_NAME;break;case ei.AMPERSAND:this.returnState=eT.ATTRIBUTE_VALUE_UNQUOTED,this.state=eT.CHARACTER_REFERENCE;break;case ei.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=eT.DATA,this.emitCurrentTagToken();break;case ei.NULL:this._err(es.unexpectedNullCharacter),this.currentAttr.value+="";break;case ei.QUOTATION_MARK:case ei.APOSTROPHE:case ei.LESS_THAN_SIGN:case ei.EQUALS_SIGN:case ei.GRAVE_ACCENT:this._err(es.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(h);break;case ei.EOF:this._err(es.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(h)}}_stateAfterAttributeValueQuoted(h){switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:this._leaveAttrValue(),this.state=eT.BEFORE_ATTRIBUTE_NAME;break;case ei.SOLIDUS:this._leaveAttrValue(),this.state=eT.SELF_CLOSING_START_TAG;break;case ei.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=eT.DATA,this.emitCurrentTagToken();break;case ei.EOF:this._err(es.eofInTag),this._emitEOFToken();break;default:this._err(es.missingWhitespaceBetweenAttributes),this.state=eT.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(h)}}_stateSelfClosingStartTag(h){switch(h){case ei.GREATER_THAN_SIGN:{let h=this.currentToken;h.selfClosing=!0,this.state=eT.DATA,this.emitCurrentTagToken();break}case ei.EOF:this._err(es.eofInTag),this._emitEOFToken();break;default:this._err(es.unexpectedSolidusInTag),this.state=eT.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(h)}}_stateBogusComment(h){let g=this.currentToken;switch(h){case ei.GREATER_THAN_SIGN:this.state=eT.DATA,this.emitCurrentComment(g);break;case ei.EOF:this.emitCurrentComment(g),this._emitEOFToken();break;case ei.NULL:this._err(es.unexpectedNullCharacter),g.data+="";break;default:g.data+=String.fromCodePoint(h)}}_stateMarkupDeclarationOpen(h){this._consumeSequenceIfMatch(n2.DASH_DASH,!0)?(this._createCommentToken(n2.DASH_DASH.length+1),this.state=eT.COMMENT_START):this._consumeSequenceIfMatch(n2.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(n2.DOCTYPE.length+1),this.state=eT.DOCTYPE):this._consumeSequenceIfMatch(n2.CDATA_START,!0)?this.inForeignNode?this.state=eT.CDATA_SECTION:(this._err(es.cdataInHtmlContent),this._createCommentToken(n2.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=eT.BOGUS_COMMENT):this._ensureHibernation()||(this._err(es.incorrectlyOpenedComment),this._createCommentToken(2),this.state=eT.BOGUS_COMMENT,this._stateBogusComment(h))}_stateCommentStart(h){switch(h){case ei.HYPHEN_MINUS:this.state=eT.COMMENT_START_DASH;break;case ei.GREATER_THAN_SIGN:{this._err(es.abruptClosingOfEmptyComment),this.state=eT.DATA;let h=this.currentToken;this.emitCurrentComment(h);break}default:this.state=eT.COMMENT,this._stateComment(h)}}_stateCommentStartDash(h){let g=this.currentToken;switch(h){case ei.HYPHEN_MINUS:this.state=eT.COMMENT_END;break;case ei.GREATER_THAN_SIGN:this._err(es.abruptClosingOfEmptyComment),this.state=eT.DATA,this.emitCurrentComment(g);break;case ei.EOF:this._err(es.eofInComment),this.emitCurrentComment(g),this._emitEOFToken();break;default:g.data+="-",this.state=eT.COMMENT,this._stateComment(h)}}_stateComment(h){let g=this.currentToken;switch(h){case ei.HYPHEN_MINUS:this.state=eT.COMMENT_END_DASH;break;case ei.LESS_THAN_SIGN:g.data+="<",this.state=eT.COMMENT_LESS_THAN_SIGN;break;case ei.NULL:this._err(es.unexpectedNullCharacter),g.data+="";break;case ei.EOF:this._err(es.eofInComment),this.emitCurrentComment(g),this._emitEOFToken();break;default:g.data+=String.fromCodePoint(h)}}_stateCommentLessThanSign(h){let g=this.currentToken;switch(h){case ei.EXCLAMATION_MARK:g.data+="!",this.state=eT.COMMENT_LESS_THAN_SIGN_BANG;break;case ei.LESS_THAN_SIGN:g.data+="<";break;default:this.state=eT.COMMENT,this._stateComment(h)}}_stateCommentLessThanSignBang(h){h===ei.HYPHEN_MINUS?this.state=eT.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=eT.COMMENT,this._stateComment(h))}_stateCommentLessThanSignBangDash(h){h===ei.HYPHEN_MINUS?this.state=eT.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=eT.COMMENT_END_DASH,this._stateCommentEndDash(h))}_stateCommentLessThanSignBangDashDash(h){h!==ei.GREATER_THAN_SIGN&&h!==ei.EOF&&this._err(es.nestedComment),this.state=eT.COMMENT_END,this._stateCommentEnd(h)}_stateCommentEndDash(h){let g=this.currentToken;switch(h){case ei.HYPHEN_MINUS:this.state=eT.COMMENT_END;break;case ei.EOF:this._err(es.eofInComment),this.emitCurrentComment(g),this._emitEOFToken();break;default:g.data+="-",this.state=eT.COMMENT,this._stateComment(h)}}_stateCommentEnd(h){let g=this.currentToken;switch(h){case ei.GREATER_THAN_SIGN:this.state=eT.DATA,this.emitCurrentComment(g);break;case ei.EXCLAMATION_MARK:this.state=eT.COMMENT_END_BANG;break;case ei.HYPHEN_MINUS:g.data+="-";break;case ei.EOF:this._err(es.eofInComment),this.emitCurrentComment(g),this._emitEOFToken();break;default:g.data+="--",this.state=eT.COMMENT,this._stateComment(h)}}_stateCommentEndBang(h){let g=this.currentToken;switch(h){case ei.HYPHEN_MINUS:g.data+="--!",this.state=eT.COMMENT_END_DASH;break;case ei.GREATER_THAN_SIGN:this._err(es.incorrectlyClosedComment),this.state=eT.DATA,this.emitCurrentComment(g);break;case ei.EOF:this._err(es.eofInComment),this.emitCurrentComment(g),this._emitEOFToken();break;default:g.data+="--!",this.state=eT.COMMENT,this._stateComment(h)}}_stateDoctype(h){switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:this.state=eT.BEFORE_DOCTYPE_NAME;break;case ei.GREATER_THAN_SIGN:this.state=eT.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(h);break;case ei.EOF:{this._err(es.eofInDoctype),this._createDoctypeToken(null);let h=this.currentToken;h.forceQuirks=!0,this.emitCurrentDoctype(h),this._emitEOFToken();break}default:this._err(es.missingWhitespaceBeforeDoctypeName),this.state=eT.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(h)}}_stateBeforeDoctypeName(h){if(isAsciiUpper(h))this._createDoctypeToken(String.fromCharCode(h+32)),this.state=eT.DOCTYPE_NAME;else switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:break;case ei.NULL:this._err(es.unexpectedNullCharacter),this._createDoctypeToken(""),this.state=eT.DOCTYPE_NAME;break;case ei.GREATER_THAN_SIGN:{this._err(es.missingDoctypeName),this._createDoctypeToken(null);let h=this.currentToken;h.forceQuirks=!0,this.emitCurrentDoctype(h),this.state=eT.DATA;break}case ei.EOF:{this._err(es.eofInDoctype),this._createDoctypeToken(null);let h=this.currentToken;h.forceQuirks=!0,this.emitCurrentDoctype(h),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(h)),this.state=eT.DOCTYPE_NAME}}_stateDoctypeName(h){let g=this.currentToken;switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:this.state=eT.AFTER_DOCTYPE_NAME;break;case ei.GREATER_THAN_SIGN:this.state=eT.DATA,this.emitCurrentDoctype(g);break;case ei.NULL:this._err(es.unexpectedNullCharacter),g.name+="";break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:g.name+=String.fromCodePoint(isAsciiUpper(h)?h+32:h)}}_stateAfterDoctypeName(h){let g=this.currentToken;switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:break;case ei.GREATER_THAN_SIGN:this.state=eT.DATA,this.emitCurrentDoctype(g);break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:this._consumeSequenceIfMatch(n2.PUBLIC,!1)?this.state=eT.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(n2.SYSTEM,!1)?this.state=eT.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(es.invalidCharacterSequenceAfterDoctypeName),g.forceQuirks=!0,this.state=eT.BOGUS_DOCTYPE,this._stateBogusDoctype(h))}}_stateAfterDoctypePublicKeyword(h){let g=this.currentToken;switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:this.state=eT.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break;case ei.QUOTATION_MARK:this._err(es.missingWhitespaceAfterDoctypePublicKeyword),g.publicId="",this.state=eT.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case ei.APOSTROPHE:this._err(es.missingWhitespaceAfterDoctypePublicKeyword),g.publicId="",this.state=eT.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case ei.GREATER_THAN_SIGN:this._err(es.missingDoctypePublicIdentifier),g.forceQuirks=!0,this.state=eT.DATA,this.emitCurrentDoctype(g);break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:this._err(es.missingQuoteBeforeDoctypePublicIdentifier),g.forceQuirks=!0,this.state=eT.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateBeforeDoctypePublicIdentifier(h){let g=this.currentToken;switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:break;case ei.QUOTATION_MARK:g.publicId="",this.state=eT.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case ei.APOSTROPHE:g.publicId="",this.state=eT.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case ei.GREATER_THAN_SIGN:this._err(es.missingDoctypePublicIdentifier),g.forceQuirks=!0,this.state=eT.DATA,this.emitCurrentDoctype(g);break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:this._err(es.missingQuoteBeforeDoctypePublicIdentifier),g.forceQuirks=!0,this.state=eT.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateDoctypePublicIdentifierDoubleQuoted(h){let g=this.currentToken;switch(h){case ei.QUOTATION_MARK:this.state=eT.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case ei.NULL:this._err(es.unexpectedNullCharacter),g.publicId+="";break;case ei.GREATER_THAN_SIGN:this._err(es.abruptDoctypePublicIdentifier),g.forceQuirks=!0,this.emitCurrentDoctype(g),this.state=eT.DATA;break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:g.publicId+=String.fromCodePoint(h)}}_stateDoctypePublicIdentifierSingleQuoted(h){let g=this.currentToken;switch(h){case ei.APOSTROPHE:this.state=eT.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case ei.NULL:this._err(es.unexpectedNullCharacter),g.publicId+="";break;case ei.GREATER_THAN_SIGN:this._err(es.abruptDoctypePublicIdentifier),g.forceQuirks=!0,this.emitCurrentDoctype(g),this.state=eT.DATA;break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:g.publicId+=String.fromCodePoint(h)}}_stateAfterDoctypePublicIdentifier(h){let g=this.currentToken;switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:this.state=eT.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break;case ei.GREATER_THAN_SIGN:this.state=eT.DATA,this.emitCurrentDoctype(g);break;case ei.QUOTATION_MARK:this._err(es.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),g.systemId="",this.state=eT.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case ei.APOSTROPHE:this._err(es.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),g.systemId="",this.state=eT.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:this._err(es.missingQuoteBeforeDoctypeSystemIdentifier),g.forceQuirks=!0,this.state=eT.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateBetweenDoctypePublicAndSystemIdentifiers(h){let g=this.currentToken;switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:break;case ei.GREATER_THAN_SIGN:this.emitCurrentDoctype(g),this.state=eT.DATA;break;case ei.QUOTATION_MARK:g.systemId="",this.state=eT.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case ei.APOSTROPHE:g.systemId="",this.state=eT.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:this._err(es.missingQuoteBeforeDoctypeSystemIdentifier),g.forceQuirks=!0,this.state=eT.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateAfterDoctypeSystemKeyword(h){let g=this.currentToken;switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:this.state=eT.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break;case ei.QUOTATION_MARK:this._err(es.missingWhitespaceAfterDoctypeSystemKeyword),g.systemId="",this.state=eT.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case ei.APOSTROPHE:this._err(es.missingWhitespaceAfterDoctypeSystemKeyword),g.systemId="",this.state=eT.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case ei.GREATER_THAN_SIGN:this._err(es.missingDoctypeSystemIdentifier),g.forceQuirks=!0,this.state=eT.DATA,this.emitCurrentDoctype(g);break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:this._err(es.missingQuoteBeforeDoctypeSystemIdentifier),g.forceQuirks=!0,this.state=eT.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateBeforeDoctypeSystemIdentifier(h){let g=this.currentToken;switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:break;case ei.QUOTATION_MARK:g.systemId="",this.state=eT.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case ei.APOSTROPHE:g.systemId="",this.state=eT.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case ei.GREATER_THAN_SIGN:this._err(es.missingDoctypeSystemIdentifier),g.forceQuirks=!0,this.state=eT.DATA,this.emitCurrentDoctype(g);break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:this._err(es.missingQuoteBeforeDoctypeSystemIdentifier),g.forceQuirks=!0,this.state=eT.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateDoctypeSystemIdentifierDoubleQuoted(h){let g=this.currentToken;switch(h){case ei.QUOTATION_MARK:this.state=eT.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case ei.NULL:this._err(es.unexpectedNullCharacter),g.systemId+="";break;case ei.GREATER_THAN_SIGN:this._err(es.abruptDoctypeSystemIdentifier),g.forceQuirks=!0,this.emitCurrentDoctype(g),this.state=eT.DATA;break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:g.systemId+=String.fromCodePoint(h)}}_stateDoctypeSystemIdentifierSingleQuoted(h){let g=this.currentToken;switch(h){case ei.APOSTROPHE:this.state=eT.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case ei.NULL:this._err(es.unexpectedNullCharacter),g.systemId+="";break;case ei.GREATER_THAN_SIGN:this._err(es.abruptDoctypeSystemIdentifier),g.forceQuirks=!0,this.emitCurrentDoctype(g),this.state=eT.DATA;break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:g.systemId+=String.fromCodePoint(h)}}_stateAfterDoctypeSystemIdentifier(h){let g=this.currentToken;switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:break;case ei.GREATER_THAN_SIGN:this.emitCurrentDoctype(g),this.state=eT.DATA;break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:this._err(es.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=eT.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateBogusDoctype(h){let g=this.currentToken;switch(h){case ei.GREATER_THAN_SIGN:this.emitCurrentDoctype(g),this.state=eT.DATA;break;case ei.NULL:this._err(es.unexpectedNullCharacter);break;case ei.EOF:this.emitCurrentDoctype(g),this._emitEOFToken()}}_stateCdataSection(h){switch(h){case ei.RIGHT_SQUARE_BRACKET:this.state=eT.CDATA_SECTION_BRACKET;break;case ei.EOF:this._err(es.eofInCdata),this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateCdataSectionBracket(h){h===ei.RIGHT_SQUARE_BRACKET?this.state=eT.CDATA_SECTION_END:(this._emitChars("]"),this.state=eT.CDATA_SECTION,this._stateCdataSection(h))}_stateCdataSectionEnd(h){switch(h){case ei.GREATER_THAN_SIGN:this.state=eT.DATA;break;case ei.RIGHT_SQUARE_BRACKET:this._emitChars("]");break;default:this._emitChars("]]"),this.state=eT.CDATA_SECTION,this._stateCdataSection(h)}}_stateCharacterReference(h){h===ei.NUMBER_SIGN?this.state=eT.NUMERIC_CHARACTER_REFERENCE:tokenizer_isAsciiAlphaNumeric(h)?(this.state=eT.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(h)):(this._flushCodePointConsumedAsCharacterReference(ei.AMPERSAND),this._reconsumeInState(this.returnState,h))}_stateNamedCharacterReference(h){let g=this._matchNamedCharacterReference(h);if(this._ensureHibernation());else if(g){for(let h=0;h<g.length;h++)this._flushCodePointConsumedAsCharacterReference(g[h]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(ei.AMPERSAND),this.state=eT.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(h){tokenizer_isAsciiAlphaNumeric(h)?this._flushCodePointConsumedAsCharacterReference(h):(h===ei.SEMICOLON&&this._err(es.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,h))}_stateNumericCharacterReference(h){this.charRefCode=0,h===ei.LATIN_SMALL_X||h===ei.LATIN_CAPITAL_X?this.state=eT.HEXADEMICAL_CHARACTER_REFERENCE_START:isAsciiDigit(h)?(this.state=eT.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(h)):(this._err(es.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(ei.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(ei.NUMBER_SIGN),this._reconsumeInState(this.returnState,h))}_stateHexademicalCharacterReferenceStart(h){isAsciiDigit(h)||isAsciiUpperHexDigit(h)||isAsciiLowerHexDigit(h)?(this.state=eT.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(h)):(this._err(es.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(ei.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(ei.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(h){isAsciiUpperHexDigit(h)?this.charRefCode=16*this.charRefCode+h-55:isAsciiLowerHexDigit(h)?this.charRefCode=16*this.charRefCode+h-87:isAsciiDigit(h)?this.charRefCode=16*this.charRefCode+h-48:h===ei.SEMICOLON?this.state=eT.NUMERIC_CHARACTER_REFERENCE_END:(this._err(es.missingSemicolonAfterCharacterReference),this.state=eT.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(h))}_stateDecimalCharacterReference(h){isAsciiDigit(h)?this.charRefCode=10*this.charRefCode+h-48:h===ei.SEMICOLON?this.state=eT.NUMERIC_CHARACTER_REFERENCE_END:(this._err(es.missingSemicolonAfterCharacterReference),this.state=eT.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(h))}_stateNumericCharacterReferenceEnd(h){if(this.charRefCode===ei.NULL)this._err(es.nullCharacterReference),this.charRefCode=ei.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(es.characterReferenceOutsideUnicodeRange),this.charRefCode=ei.REPLACEMENT_CHARACTER;else if(isSurrogate(this.charRefCode))this._err(es.surrogateCharacterReference),this.charRefCode=ei.REPLACEMENT_CHARACTER;else if(isUndefinedCodePoint(this.charRefCode))this._err(es.noncharacterCharacterReference);else if(isControlCodePoint(this.charRefCode)||this.charRefCode===ei.CARRIAGE_RETURN){this._err(es.controlCharacterReference);let h=re.get(this.charRefCode);void 0!==h&&(this.charRefCode=h)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,h)}};let rn=new Set([eE.DD,eE.DT,eE.LI,eE.OPTGROUP,eE.OPTION,eE.P,eE.RB,eE.RP,eE.RT,eE.RTC]),rr=new Set([...rn,eE.CAPTION,eE.COLGROUP,eE.TBODY,eE.TD,eE.TFOOT,eE.TH,eE.THEAD,eE.TR]),ra=new Map([[eE.APPLET,ep.HTML],[eE.CAPTION,ep.HTML],[eE.HTML,ep.HTML],[eE.MARQUEE,ep.HTML],[eE.OBJECT,ep.HTML],[eE.TABLE,ep.HTML],[eE.TD,ep.HTML],[eE.TEMPLATE,ep.HTML],[eE.TH,ep.HTML],[eE.ANNOTATION_XML,ep.MATHML],[eE.MI,ep.MATHML],[eE.MN,ep.MATHML],[eE.MO,ep.MATHML],[eE.MS,ep.MATHML],[eE.MTEXT,ep.MATHML],[eE.DESC,ep.SVG],[eE.FOREIGN_OBJECT,ep.SVG],[eE.TITLE,ep.SVG]]),rs=[eE.H1,eE.H2,eE.H3,eE.H4,eE.H5,eE.H6],rl=[eE.TR,eE.TEMPLATE,eE.HTML],rc=[eE.TBODY,eE.TFOOT,eE.THEAD,eE.TEMPLATE,eE.HTML],ru=[eE.TABLE,eE.TEMPLATE,eE.HTML],rd=[eE.TD,eE.TH];let OpenElementStack=class OpenElementStack{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(h,g,_){this.treeAdapter=g,this.handler=_,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=eE.UNKNOWN,this.current=h}_indexOf(h){return this.items.lastIndexOf(h,this.stackTop)}_isInTemplate(){return this.currentTagId===eE.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===ep.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(h,g){this.stackTop++,this.items[this.stackTop]=h,this.current=h,this.tagIDs[this.stackTop]=g,this.currentTagId=g,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(h,g,!0)}pop(){let h=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(h,!0)}replace(h,g){let _=this._indexOf(h);this.items[_]=g,_===this.stackTop&&(this.current=g)}insertAfter(h,g,_){let E=this._indexOf(h)+1;this.items.splice(E,0,g),this.tagIDs.splice(E,0,_),this.stackTop++,E===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,E===this.stackTop)}popUntilTagNamePopped(h){let g=this.stackTop+1;do g=this.tagIDs.lastIndexOf(h,g-1);while(g>0&&this.treeAdapter.getNamespaceURI(this.items[g])!==ep.HTML);this.shortenToLength(g<0?0:g)}shortenToLength(h){for(;this.stackTop>=h;){let g=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(g,this.stackTop<h)}}popUntilElementPopped(h){let g=this._indexOf(h);this.shortenToLength(g<0?0:g)}popUntilPopped(h,g){let _=this._indexOfTagNames(h,g);this.shortenToLength(_<0?0:_)}popUntilNumberedHeaderPopped(){this.popUntilPopped(rs,ep.HTML)}popUntilTableCellPopped(){this.popUntilPopped(rd,ep.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(h,g){for(let _=this.stackTop;_>=0;_--)if(h.includes(this.tagIDs[_])&&this.treeAdapter.getNamespaceURI(this.items[_])===g)return _;return -1}clearBackTo(h,g){let _=this._indexOfTagNames(h,g);this.shortenToLength(_+1)}clearBackToTableContext(){this.clearBackTo(ru,ep.HTML)}clearBackToTableBodyContext(){this.clearBackTo(rc,ep.HTML)}clearBackToTableRowContext(){this.clearBackTo(rl,ep.HTML)}remove(h){let g=this._indexOf(h);g>=0&&(g===this.stackTop?this.pop():(this.items.splice(g,1),this.tagIDs.splice(g,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(h,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===eE.BODY?this.items[1]:null}contains(h){return this._indexOf(h)>-1}getCommonAncestor(h){let g=this._indexOf(h)-1;return g>=0?this.items[g]:null}isRootHtmlElementCurrent(){return 0===this.stackTop&&this.tagIDs[0]===eE.HTML}hasInScope(h){for(let g=this.stackTop;g>=0;g--){let _=this.tagIDs[g],E=this.treeAdapter.getNamespaceURI(this.items[g]);if(_===h&&E===ep.HTML)break;if(ra.get(_)===E)return!1}return!0}hasNumberedHeaderInScope(){for(let h=this.stackTop;h>=0;h--){let g=this.tagIDs[h],_=this.treeAdapter.getNamespaceURI(this.items[h]);if(isNumberedHeader(g)&&_===ep.HTML)break;if(ra.get(g)===_)return!1}return!0}hasInListItemScope(h){for(let g=this.stackTop;g>=0;g--){let _=this.tagIDs[g],E=this.treeAdapter.getNamespaceURI(this.items[g]);if(_===h&&E===ep.HTML)break;if((_===eE.UL||_===eE.OL)&&E===ep.HTML||ra.get(_)===E)return!1}return!0}hasInButtonScope(h){for(let g=this.stackTop;g>=0;g--){let _=this.tagIDs[g],E=this.treeAdapter.getNamespaceURI(this.items[g]);if(_===h&&E===ep.HTML)break;if(_===eE.BUTTON&&E===ep.HTML||ra.get(_)===E)return!1}return!0}hasInTableScope(h){for(let g=this.stackTop;g>=0;g--){let _=this.tagIDs[g],E=this.treeAdapter.getNamespaceURI(this.items[g]);if(E===ep.HTML){if(_===h)break;if(_===eE.TABLE||_===eE.TEMPLATE||_===eE.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let h=this.stackTop;h>=0;h--){let g=this.tagIDs[h],_=this.treeAdapter.getNamespaceURI(this.items[h]);if(_===ep.HTML){if(g===eE.TBODY||g===eE.THEAD||g===eE.TFOOT)break;if(g===eE.TABLE||g===eE.HTML)return!1}}return!0}hasInSelectScope(h){for(let g=this.stackTop;g>=0;g--){let _=this.tagIDs[g],E=this.treeAdapter.getNamespaceURI(this.items[g]);if(E===ep.HTML){if(_===h)break;if(_!==eE.OPTION&&_!==eE.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;rn.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;rr.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(h){for(;this.currentTagId!==h&&rr.has(this.currentTagId);)this.pop()}};(Q=eA=eA||(eA={}))[Q.Marker=0]="Marker",Q[Q.Element=1]="Element";let rm={type:eA.Marker};let FormattingElementList=class FormattingElementList{constructor(h){this.treeAdapter=h,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(h,g){let _=[],E=g.length,A=this.treeAdapter.getTagName(h),k=this.treeAdapter.getNamespaceURI(h);for(let h=0;h<this.entries.length;h++){let g=this.entries[h];if(g.type===eA.Marker)break;let{element:b}=g;if(this.treeAdapter.getTagName(b)===A&&this.treeAdapter.getNamespaceURI(b)===k){let g=this.treeAdapter.getAttrList(b);g.length===E&&_.push({idx:h,attrs:g})}}return _}_ensureNoahArkCondition(h){if(this.entries.length<3)return;let g=this.treeAdapter.getAttrList(h),_=this._getNoahArkConditionCandidates(h,g);if(_.length<3)return;let E=new Map(g.map(h=>[h.name,h.value])),A=0;for(let h=0;h<_.length;h++){let g=_[h];g.attrs.every(h=>E.get(h.name)===h.value)&&(A+=1)>=3&&this.entries.splice(g.idx,1)}}insertMarker(){this.entries.unshift(rm)}pushElement(h,g){this._ensureNoahArkCondition(h),this.entries.unshift({type:eA.Element,element:h,token:g})}insertElementAfterBookmark(h,g){let _=this.entries.indexOf(this.bookmark);this.entries.splice(_,0,{type:eA.Element,element:h,token:g})}removeEntry(h){let g=this.entries.indexOf(h);g>=0&&this.entries.splice(g,1)}clearToLastMarker(){let h=this.entries.indexOf(rm);h>=0?this.entries.splice(0,h+1):this.entries.length=0}getElementEntryInScopeWithTagName(h){let g=this.entries.find(g=>g.type===eA.Marker||this.treeAdapter.getTagName(g.element)===h);return g&&g.type===eA.Element?g:null}getElementEntry(h){return this.entries.find(g=>g.type===eA.Element&&g.element===h)}};function createTextNode(h){return{nodeName:"#text",value:h,parentNode:null}}let rh={createDocument:()=>({nodeName:"#document",mode:eg.NO_QUIRKS,childNodes:[]}),createDocumentFragment:()=>({nodeName:"#document-fragment",childNodes:[]}),createElement:(h,g,_)=>({nodeName:h,tagName:h,attrs:_,namespaceURI:g,childNodes:[],parentNode:null}),createCommentNode:h=>({nodeName:"#comment",data:h,parentNode:null}),appendChild(h,g){h.childNodes.push(g),g.parentNode=h},insertBefore(h,g,_){let E=h.childNodes.indexOf(_);h.childNodes.splice(E,0,g),g.parentNode=h},setTemplateContent(h,g){h.content=g},getTemplateContent:h=>h.content,setDocumentType(h,g,_,E){let A=h.childNodes.find(h=>"#documentType"===h.nodeName);A?(A.name=g,A.publicId=_,A.systemId=E):rh.appendChild(h,{nodeName:"#documentType",name:g,publicId:_,systemId:E,parentNode:null})},setDocumentMode(h,g){h.mode=g},getDocumentMode:h=>h.mode,detachNode(h){if(h.parentNode){let g=h.parentNode.childNodes.indexOf(h);h.parentNode.childNodes.splice(g,1),h.parentNode=null}},insertText(h,g){if(h.childNodes.length>0){let _=h.childNodes[h.childNodes.length-1];if(rh.isTextNode(_)){_.value+=g;return}}rh.appendChild(h,createTextNode(g))},insertTextBefore(h,g,_){let E=h.childNodes[h.childNodes.indexOf(_)-1];E&&rh.isTextNode(E)?E.value+=g:rh.insertBefore(h,createTextNode(g),_)},adoptAttributes(h,g){let _=new Set(h.attrs.map(h=>h.name));for(let E=0;E<g.length;E++)_.has(g[E].name)||h.attrs.push(g[E])},getFirstChild:h=>h.childNodes[0],getChildNodes:h=>h.childNodes,getParentNode:h=>h.parentNode,getAttrList:h=>h.attrs,getTagName:h=>h.tagName,getNamespaceURI:h=>h.namespaceURI,getTextNodeContent:h=>h.value,getCommentNodeContent:h=>h.data,getDocumentTypeNodeName:h=>h.name,getDocumentTypeNodePublicId:h=>h.publicId,getDocumentTypeNodeSystemId:h=>h.systemId,isTextNode:h=>"#text"===h.nodeName,isCommentNode:h=>"#comment"===h.nodeName,isDocumentTypeNode:h=>"#documentType"===h.nodeName,isElementNode:h=>Object.prototype.hasOwnProperty.call(h,"tagName"),setNodeSourceCodeLocation(h,g){h.sourceCodeLocation=g},getNodeSourceCodeLocation:h=>h.sourceCodeLocation,updateNodeSourceCodeLocation(h,g){h.sourceCodeLocation={...h.sourceCodeLocation,...g}}},rp="html",rf=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],rg=[...rf,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],r_=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),rE=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],rT=[...rE,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function hasPrefix(h,g){return g.some(g=>h.startsWith(g))}let rA={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},ry=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(h=>[h.toLowerCase(),h])),rk=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:ep.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:ep.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:ep.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:ep.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:ep.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:ep.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:ep.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:ep.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:ep.XML}],["xml:space",{prefix:"xml",name:"space",namespace:ep.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:ep.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:ep.XMLNS}]]),rv=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(h=>[h.toLowerCase(),h])),rb=new Set([eE.B,eE.BIG,eE.BLOCKQUOTE,eE.BODY,eE.BR,eE.CENTER,eE.CODE,eE.DD,eE.DIV,eE.DL,eE.DT,eE.EM,eE.EMBED,eE.H1,eE.H2,eE.H3,eE.H4,eE.H5,eE.H6,eE.HEAD,eE.HR,eE.I,eE.IMG,eE.LI,eE.LISTING,eE.MENU,eE.META,eE.NOBR,eE.OL,eE.P,eE.PRE,eE.RUBY,eE.S,eE.SMALL,eE.SPAN,eE.STRONG,eE.STRIKE,eE.SUB,eE.SUP,eE.TABLE,eE.TT,eE.U,eE.UL,eE.VAR]);function adjustTokenMathMLAttrs(h){for(let g=0;g<h.attrs.length;g++)if("definitionurl"===h.attrs[g].name){h.attrs[g].name="definitionURL";break}}function adjustTokenSVGAttrs(h){for(let g=0;g<h.attrs.length;g++){let _=ry.get(h.attrs[g].name);null!=_&&(h.attrs[g].name=_)}}function adjustTokenXMLAttrs(h){for(let g=0;g<h.attrs.length;g++){let _=rk.get(h.attrs[g].name);_&&(h.attrs[g].prefix=_.prefix,h.attrs[g].name=_.name,h.attrs[g].namespace=_.namespace)}}(Z=ey||(ey={}))[Z.INITIAL=0]="INITIAL",Z[Z.BEFORE_HTML=1]="BEFORE_HTML",Z[Z.BEFORE_HEAD=2]="BEFORE_HEAD",Z[Z.IN_HEAD=3]="IN_HEAD",Z[Z.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",Z[Z.AFTER_HEAD=5]="AFTER_HEAD",Z[Z.IN_BODY=6]="IN_BODY",Z[Z.TEXT=7]="TEXT",Z[Z.IN_TABLE=8]="IN_TABLE",Z[Z.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",Z[Z.IN_CAPTION=10]="IN_CAPTION",Z[Z.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",Z[Z.IN_TABLE_BODY=12]="IN_TABLE_BODY",Z[Z.IN_ROW=13]="IN_ROW",Z[Z.IN_CELL=14]="IN_CELL",Z[Z.IN_SELECT=15]="IN_SELECT",Z[Z.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",Z[Z.IN_TEMPLATE=17]="IN_TEMPLATE",Z[Z.AFTER_BODY=18]="AFTER_BODY",Z[Z.IN_FRAMESET=19]="IN_FRAMESET",Z[Z.AFTER_FRAMESET=20]="AFTER_FRAMESET",Z[Z.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",Z[Z.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET";let rx={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},rC=new Set([eE.TABLE,eE.TBODY,eE.TFOOT,eE.THEAD,eE.TR]),rS={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:rh,onParseError:null};let parser_Parser=class parser_Parser{constructor(h,g,_=null,E=null){this.fragmentContext=_,this.scriptHandler=E,this.currentToken=null,this.stopped=!1,this.insertionMode=ey.INITIAL,this.originalInsertionMode=ey.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...rS,...h},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=null!=g?g:this.treeAdapter.createDocument(),this.tokenizer=new Tokenizer(this.options,this),this.activeFormattingElements=new FormattingElementList(this.treeAdapter),this.fragmentContextID=_?getTagID(this.treeAdapter.getTagName(_)):eE.UNKNOWN,this._setContextModes(null!=_?_:this.document,this.fragmentContextID),this.openElements=new OpenElementStack(this.document,this.treeAdapter,this)}static parse(h,g){let _=new this(g);return _.tokenizer.write(h,!0),_.document}static getFragmentParser(h,g){let _={...rS,...g};null!=h||(h=_.treeAdapter.createElement(e_.TEMPLATE,ep.HTML,[]));let E=_.treeAdapter.createElement("documentmock",ep.HTML,[]),A=new this(_,E,h);return A.fragmentContextID===eE.TEMPLATE&&A.tmplInsertionModeStack.unshift(ey.IN_TEMPLATE),A._initTokenizerForFragmentParsing(),A._insertFakeRootElement(),A._resetInsertionMode(),A._findFormInFragmentContext(),A}getFragment(){let h=this.treeAdapter.getFirstChild(this.document),g=this.treeAdapter.createDocumentFragment();return this._adoptNodes(h,g),g}_err(h,g,_){var E;if(!this.onParseError)return;let A=null!==(E=h.location)&&void 0!==E?E:rx,k={code:g,startLine:A.startLine,startCol:A.startCol,startOffset:A.startOffset,endLine:_?A.startLine:A.endLine,endCol:_?A.startCol:A.endCol,endOffset:_?A.startOffset:A.endOffset};this.onParseError(k)}onItemPush(h,g,_){var E,A;null===(A=(E=this.treeAdapter).onItemPush)||void 0===A||A.call(E,h),_&&this.openElements.stackTop>0&&this._setContextModes(h,g)}onItemPop(h,g){var _,E;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(h,this.currentToken),null===(E=(_=this.treeAdapter).onItemPop)||void 0===E||E.call(_,h,this.openElements.current),g){let h,g;0===this.openElements.stackTop&&this.fragmentContext?(h=this.fragmentContext,g=this.fragmentContextID):{current:h,currentTagId:g}=this.openElements,this._setContextModes(h,g)}}_setContextModes(h,g){let _=h===this.document||this.treeAdapter.getNamespaceURI(h)===ep.HTML;this.currentNotInHTML=!_,this.tokenizer.inForeignNode=!_&&!this._isIntegrationPoint(g,h)}_switchToTextParsing(h,g){this._insertElement(h,ep.HTML),this.tokenizer.state=g,this.originalInsertionMode=this.insertionMode,this.insertionMode=ey.TEXT}switchToPlaintextParsing(){this.insertionMode=ey.TEXT,this.originalInsertionMode=ey.IN_BODY,this.tokenizer.state=rt.PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let h=this.fragmentContext;for(;h;){if(this.treeAdapter.getTagName(h)===e_.FORM){this.formElement=h;break}h=this.treeAdapter.getParentNode(h)}}_initTokenizerForFragmentParsing(){if(this.fragmentContext&&this.treeAdapter.getNamespaceURI(this.fragmentContext)===ep.HTML)switch(this.fragmentContextID){case eE.TITLE:case eE.TEXTAREA:this.tokenizer.state=rt.RCDATA;break;case eE.STYLE:case eE.XMP:case eE.IFRAME:case eE.NOEMBED:case eE.NOFRAMES:case eE.NOSCRIPT:this.tokenizer.state=rt.RAWTEXT;break;case eE.SCRIPT:this.tokenizer.state=rt.SCRIPT_DATA;break;case eE.PLAINTEXT:this.tokenizer.state=rt.PLAINTEXT}}_setDocumentType(h){let g=h.name||"",_=h.publicId||"",E=h.systemId||"";if(this.treeAdapter.setDocumentType(this.document,g,_,E),h.location){let g=this.treeAdapter.getChildNodes(this.document),_=g.find(h=>this.treeAdapter.isDocumentTypeNode(h));_&&this.treeAdapter.setNodeSourceCodeLocation(_,h.location)}}_attachElementToTree(h,g){if(this.options.sourceCodeLocationInfo){let _=g&&{...g,startTag:g};this.treeAdapter.setNodeSourceCodeLocation(h,_)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(h);else{let g=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(g,h)}}_appendElement(h,g){let _=this.treeAdapter.createElement(h.tagName,g,h.attrs);this._attachElementToTree(_,h.location)}_insertElement(h,g){let _=this.treeAdapter.createElement(h.tagName,g,h.attrs);this._attachElementToTree(_,h.location),this.openElements.push(_,h.tagID)}_insertFakeElement(h,g){let _=this.treeAdapter.createElement(h,ep.HTML,[]);this._attachElementToTree(_,null),this.openElements.push(_,g)}_insertTemplate(h){let g=this.treeAdapter.createElement(h.tagName,ep.HTML,h.attrs),_=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(g,_),this._attachElementToTree(g,h.location),this.openElements.push(g,h.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(_,null)}_insertFakeRootElement(){let h=this.treeAdapter.createElement(e_.HTML,ep.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(h,null),this.treeAdapter.appendChild(this.openElements.current,h),this.openElements.push(h,eE.HTML)}_appendCommentNode(h,g){let _=this.treeAdapter.createCommentNode(h.data);this.treeAdapter.appendChild(g,_),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(_,h.location)}_insertCharacters(h){let g,_;if(this._shouldFosterParentOnInsertion()?({parent:g,beforeElement:_}=this._findFosterParentingLocation(),_?this.treeAdapter.insertTextBefore(g,h.chars,_):this.treeAdapter.insertText(g,h.chars)):(g=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(g,h.chars)),!h.location)return;let E=this.treeAdapter.getChildNodes(g),A=_?E.lastIndexOf(_):E.length,k=E[A-1],b=this.treeAdapter.getNodeSourceCodeLocation(k);if(b){let{endLine:g,endCol:_,endOffset:E}=h.location;this.treeAdapter.updateNodeSourceCodeLocation(k,{endLine:g,endCol:_,endOffset:E})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(k,h.location)}_adoptNodes(h,g){for(let _=this.treeAdapter.getFirstChild(h);_;_=this.treeAdapter.getFirstChild(h))this.treeAdapter.detachNode(_),this.treeAdapter.appendChild(g,_)}_setEndLocation(h,g){if(this.treeAdapter.getNodeSourceCodeLocation(h)&&g.location){let _=g.location,E=this.treeAdapter.getTagName(h),A=g.type===el.END_TAG&&E===g.tagName?{endTag:{..._},endLine:_.endLine,endCol:_.endCol,endOffset:_.endOffset}:{endLine:_.startLine,endCol:_.startCol,endOffset:_.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(h,A)}}shouldProcessStartTagTokenInForeignContent(h){let g,_;return!!this.currentNotInHTML&&(0===this.openElements.stackTop&&this.fragmentContext?(g=this.fragmentContext,_=this.fragmentContextID):{current:g,currentTagId:_}=this.openElements,(h.tagID!==eE.SVG||this.treeAdapter.getTagName(g)!==e_.ANNOTATION_XML||this.treeAdapter.getNamespaceURI(g)!==ep.MATHML)&&(this.tokenizer.inForeignNode||(h.tagID===eE.MGLYPH||h.tagID===eE.MALIGNMARK)&&!this._isIntegrationPoint(_,g,ep.HTML)))}_processToken(h){switch(h.type){case el.CHARACTER:this.onCharacter(h);break;case el.NULL_CHARACTER:this.onNullCharacter(h);break;case el.COMMENT:this.onComment(h);break;case el.DOCTYPE:this.onDoctype(h);break;case el.START_TAG:this._processStartTag(h);break;case el.END_TAG:this.onEndTag(h);break;case el.EOF:this.onEof(h);break;case el.WHITESPACE_CHARACTER:this.onWhitespaceCharacter(h)}}_isIntegrationPoint(h,g,_){let E=this.treeAdapter.getNamespaceURI(g),A=this.treeAdapter.getAttrList(g);return(!_||_===ep.HTML)&&function(h,g,_){if(g===ep.MATHML&&h===eE.ANNOTATION_XML){for(let h=0;h<_.length;h++)if(_[h].name===ef.ENCODING){let g=_[h].value.toLowerCase();return g===rA.TEXT_HTML||g===rA.APPLICATION_XML}}return g===ep.SVG&&(h===eE.FOREIGN_OBJECT||h===eE.DESC||h===eE.TITLE)}(h,E,A)||(!_||_===ep.MATHML)&&E===ep.MATHML&&(h===eE.MI||h===eE.MO||h===eE.MN||h===eE.MS||h===eE.MTEXT)}_reconstructActiveFormattingElements(){let h=this.activeFormattingElements.entries.length;if(h){let g=this.activeFormattingElements.entries.findIndex(h=>h.type===eA.Marker||this.openElements.contains(h.element)),_=g<0?h-1:g-1;for(let h=_;h>=0;h--){let g=this.activeFormattingElements.entries[h];this._insertElement(g.token,this.treeAdapter.getNamespaceURI(g.element)),g.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ey.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(eE.P),this.openElements.popUntilTagNamePopped(eE.P)}_resetInsertionMode(){for(let h=this.openElements.stackTop;h>=0;h--)switch(0===h&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[h]){case eE.TR:this.insertionMode=ey.IN_ROW;return;case eE.TBODY:case eE.THEAD:case eE.TFOOT:this.insertionMode=ey.IN_TABLE_BODY;return;case eE.CAPTION:this.insertionMode=ey.IN_CAPTION;return;case eE.COLGROUP:this.insertionMode=ey.IN_COLUMN_GROUP;return;case eE.TABLE:this.insertionMode=ey.IN_TABLE;return;case eE.BODY:this.insertionMode=ey.IN_BODY;return;case eE.FRAMESET:this.insertionMode=ey.IN_FRAMESET;return;case eE.SELECT:this._resetInsertionModeForSelect(h);return;case eE.TEMPLATE:this.insertionMode=this.tmplInsertionModeStack[0];return;case eE.HTML:this.insertionMode=this.headElement?ey.AFTER_HEAD:ey.BEFORE_HEAD;return;case eE.TD:case eE.TH:if(h>0){this.insertionMode=ey.IN_CELL;return}break;case eE.HEAD:if(h>0){this.insertionMode=ey.IN_HEAD;return}}this.insertionMode=ey.IN_BODY}_resetInsertionModeForSelect(h){if(h>0)for(let g=h-1;g>0;g--){let h=this.openElements.tagIDs[g];if(h===eE.TEMPLATE)break;if(h===eE.TABLE){this.insertionMode=ey.IN_SELECT_IN_TABLE;return}}this.insertionMode=ey.IN_SELECT}_isElementCausesFosterParenting(h){return rC.has(h)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let h=this.openElements.stackTop;h>=0;h--){let g=this.openElements.items[h];switch(this.openElements.tagIDs[h]){case eE.TEMPLATE:if(this.treeAdapter.getNamespaceURI(g)===ep.HTML)return{parent:this.treeAdapter.getTemplateContent(g),beforeElement:null};break;case eE.TABLE:{let _=this.treeAdapter.getParentNode(g);if(_)return{parent:_,beforeElement:g};return{parent:this.openElements.items[h-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(h){let g=this._findFosterParentingLocation();g.beforeElement?this.treeAdapter.insertBefore(g.parent,h,g.beforeElement):this.treeAdapter.appendChild(g.parent,h)}_isSpecialElement(h,g){let _=this.treeAdapter.getNamespaceURI(h);return n7[_].has(g)}onCharacter(h){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){this._insertCharacters(h),this.framesetOk=!1;return}switch(this.insertionMode){case ey.INITIAL:tokenInInitialMode(this,h);break;case ey.BEFORE_HTML:tokenBeforeHtml(this,h);break;case ey.BEFORE_HEAD:tokenBeforeHead(this,h);break;case ey.IN_HEAD:tokenInHead(this,h);break;case ey.IN_HEAD_NO_SCRIPT:tokenInHeadNoScript(this,h);break;case ey.AFTER_HEAD:tokenAfterHead(this,h);break;case ey.IN_BODY:case ey.IN_CAPTION:case ey.IN_CELL:case ey.IN_TEMPLATE:characterInBody(this,h);break;case ey.TEXT:case ey.IN_SELECT:case ey.IN_SELECT_IN_TABLE:this._insertCharacters(h);break;case ey.IN_TABLE:case ey.IN_TABLE_BODY:case ey.IN_ROW:characterInTable(this,h);break;case ey.IN_TABLE_TEXT:characterInTableText(this,h);break;case ey.IN_COLUMN_GROUP:tokenInColumnGroup(this,h);break;case ey.AFTER_BODY:tokenAfterBody(this,h);break;case ey.AFTER_AFTER_BODY:tokenAfterAfterBody(this,h)}}onNullCharacter(h){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){h.chars="",this._insertCharacters(h);return}switch(this.insertionMode){case ey.INITIAL:tokenInInitialMode(this,h);break;case ey.BEFORE_HTML:tokenBeforeHtml(this,h);break;case ey.BEFORE_HEAD:tokenBeforeHead(this,h);break;case ey.IN_HEAD:tokenInHead(this,h);break;case ey.IN_HEAD_NO_SCRIPT:tokenInHeadNoScript(this,h);break;case ey.AFTER_HEAD:tokenAfterHead(this,h);break;case ey.TEXT:this._insertCharacters(h);break;case ey.IN_TABLE:case ey.IN_TABLE_BODY:case ey.IN_ROW:characterInTable(this,h);break;case ey.IN_COLUMN_GROUP:tokenInColumnGroup(this,h);break;case ey.AFTER_BODY:tokenAfterBody(this,h);break;case ey.AFTER_AFTER_BODY:tokenAfterAfterBody(this,h)}}onComment(h){if(this.skipNextNewLine=!1,this.currentNotInHTML){appendComment(this,h);return}switch(this.insertionMode){case ey.INITIAL:case ey.BEFORE_HTML:case ey.BEFORE_HEAD:case ey.IN_HEAD:case ey.IN_HEAD_NO_SCRIPT:case ey.AFTER_HEAD:case ey.IN_BODY:case ey.IN_TABLE:case ey.IN_CAPTION:case ey.IN_COLUMN_GROUP:case ey.IN_TABLE_BODY:case ey.IN_ROW:case ey.IN_CELL:case ey.IN_SELECT:case ey.IN_SELECT_IN_TABLE:case ey.IN_TEMPLATE:case ey.IN_FRAMESET:case ey.AFTER_FRAMESET:appendComment(this,h);break;case ey.IN_TABLE_TEXT:tokenInTableText(this,h);break;case ey.AFTER_BODY:!function(h,g){h._appendCommentNode(g,h.openElements.items[0])}(this,h);break;case ey.AFTER_AFTER_BODY:case ey.AFTER_AFTER_FRAMESET:!function(h,g){h._appendCommentNode(g,h.document)}(this,h)}}onDoctype(h){switch(this.skipNextNewLine=!1,this.insertionMode){case ey.INITIAL:!function(h,g){h._setDocumentType(g);let _=g.forceQuirks?eg.QUIRKS:function(h){if(h.name!==rp)return eg.QUIRKS;let{systemId:g}=h;if(g&&"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd"===g.toLowerCase())return eg.QUIRKS;let{publicId:_}=h;if(null!==_){if(_=_.toLowerCase(),r_.has(_))return eg.QUIRKS;let h=null===g?rg:rf;if(hasPrefix(_,h))return eg.QUIRKS;if(hasPrefix(_,h=null===g?rE:rT))return eg.LIMITED_QUIRKS}return eg.NO_QUIRKS}(g);g.name===rp&&null===g.publicId&&(null===g.systemId||"about:legacy-compat"===g.systemId)||h._err(g,es.nonConformingDoctype),h.treeAdapter.setDocumentMode(h.document,_),h.insertionMode=ey.BEFORE_HTML}(this,h);break;case ey.BEFORE_HEAD:case ey.IN_HEAD:case ey.IN_HEAD_NO_SCRIPT:case ey.AFTER_HEAD:this._err(h,es.misplacedDoctype);break;case ey.IN_TABLE_TEXT:tokenInTableText(this,h)}}onStartTag(h){this.skipNextNewLine=!1,this.currentToken=h,this._processStartTag(h),h.selfClosing&&!h.ackSelfClosing&&this._err(h,es.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(h){this.shouldProcessStartTagTokenInForeignContent(h)?function(h,g){if(function(h){let g=h.tagID,_=g===eE.FONT&&h.attrs.some(({name:h})=>h===ef.COLOR||h===ef.SIZE||h===ef.FACE);return _||rb.has(g)}(g))popUntilHtmlOrIntegrationPoint(h),h._startTagOutsideForeignContent(g);else{let _=h._getAdjustedCurrentElement(),E=h.treeAdapter.getNamespaceURI(_);E===ep.MATHML?adjustTokenMathMLAttrs(g):E===ep.SVG&&(function(h){let g=rv.get(h.tagName);null!=g&&(h.tagName=g,h.tagID=getTagID(h.tagName))}(g),adjustTokenSVGAttrs(g)),adjustTokenXMLAttrs(g),g.selfClosing?h._appendElement(g,E):h._insertElement(g,E),g.ackSelfClosing=!0}}(this,h):this._startTagOutsideForeignContent(h)}_startTagOutsideForeignContent(h){switch(this.insertionMode){case ey.INITIAL:tokenInInitialMode(this,h);break;case ey.BEFORE_HTML:h.tagID===eE.HTML?(this._insertElement(h,ep.HTML),this.insertionMode=ey.BEFORE_HEAD):tokenBeforeHtml(this,h);break;case ey.BEFORE_HEAD:!function(h,g){switch(g.tagID){case eE.HTML:startTagInBody(h,g);break;case eE.HEAD:h._insertElement(g,ep.HTML),h.headElement=h.openElements.current,h.insertionMode=ey.IN_HEAD;break;default:tokenBeforeHead(h,g)}}(this,h);break;case ey.IN_HEAD:startTagInHead(this,h);break;case ey.IN_HEAD_NO_SCRIPT:!function(h,g){switch(g.tagID){case eE.HTML:startTagInBody(h,g);break;case eE.BASEFONT:case eE.BGSOUND:case eE.HEAD:case eE.LINK:case eE.META:case eE.NOFRAMES:case eE.STYLE:startTagInHead(h,g);break;case eE.NOSCRIPT:h._err(g,es.nestedNoscriptInHead);break;default:tokenInHeadNoScript(h,g)}}(this,h);break;case ey.AFTER_HEAD:!function(h,g){switch(g.tagID){case eE.HTML:startTagInBody(h,g);break;case eE.BODY:h._insertElement(g,ep.HTML),h.framesetOk=!1,h.insertionMode=ey.IN_BODY;break;case eE.FRAMESET:h._insertElement(g,ep.HTML),h.insertionMode=ey.IN_FRAMESET;break;case eE.BASE:case eE.BASEFONT:case eE.BGSOUND:case eE.LINK:case eE.META:case eE.NOFRAMES:case eE.SCRIPT:case eE.STYLE:case eE.TEMPLATE:case eE.TITLE:h._err(g,es.abandonedHeadElementChild),h.openElements.push(h.headElement,eE.HEAD),startTagInHead(h,g),h.openElements.remove(h.headElement);break;case eE.HEAD:h._err(g,es.misplacedStartTagForHeadElement);break;default:tokenAfterHead(h,g)}}(this,h);break;case ey.IN_BODY:startTagInBody(this,h);break;case ey.IN_TABLE:startTagInTable(this,h);break;case ey.IN_TABLE_TEXT:tokenInTableText(this,h);break;case ey.IN_CAPTION:!function(h,g){let _=g.tagID;rI.has(_)?h.openElements.hasInTableScope(eE.CAPTION)&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilTagNamePopped(eE.CAPTION),h.activeFormattingElements.clearToLastMarker(),h.insertionMode=ey.IN_TABLE,startTagInTable(h,g)):startTagInBody(h,g)}(this,h);break;case ey.IN_COLUMN_GROUP:startTagInColumnGroup(this,h);break;case ey.IN_TABLE_BODY:startTagInTableBody(this,h);break;case ey.IN_ROW:startTagInRow(this,h);break;case ey.IN_CELL:!function(h,g){let _=g.tagID;rI.has(_)?(h.openElements.hasInTableScope(eE.TD)||h.openElements.hasInTableScope(eE.TH))&&(h._closeTableCell(),startTagInRow(h,g)):startTagInBody(h,g)}(this,h);break;case ey.IN_SELECT:startTagInSelect(this,h);break;case ey.IN_SELECT_IN_TABLE:!function(h,g){let _=g.tagID;_===eE.CAPTION||_===eE.TABLE||_===eE.TBODY||_===eE.TFOOT||_===eE.THEAD||_===eE.TR||_===eE.TD||_===eE.TH?(h.openElements.popUntilTagNamePopped(eE.SELECT),h._resetInsertionMode(),h._processStartTag(g)):startTagInSelect(h,g)}(this,h);break;case ey.IN_TEMPLATE:!function(h,g){switch(g.tagID){case eE.BASE:case eE.BASEFONT:case eE.BGSOUND:case eE.LINK:case eE.META:case eE.NOFRAMES:case eE.SCRIPT:case eE.STYLE:case eE.TEMPLATE:case eE.TITLE:startTagInHead(h,g);break;case eE.CAPTION:case eE.COLGROUP:case eE.TBODY:case eE.TFOOT:case eE.THEAD:h.tmplInsertionModeStack[0]=ey.IN_TABLE,h.insertionMode=ey.IN_TABLE,startTagInTable(h,g);break;case eE.COL:h.tmplInsertionModeStack[0]=ey.IN_COLUMN_GROUP,h.insertionMode=ey.IN_COLUMN_GROUP,startTagInColumnGroup(h,g);break;case eE.TR:h.tmplInsertionModeStack[0]=ey.IN_TABLE_BODY,h.insertionMode=ey.IN_TABLE_BODY,startTagInTableBody(h,g);break;case eE.TD:case eE.TH:h.tmplInsertionModeStack[0]=ey.IN_ROW,h.insertionMode=ey.IN_ROW,startTagInRow(h,g);break;default:h.tmplInsertionModeStack[0]=ey.IN_BODY,h.insertionMode=ey.IN_BODY,startTagInBody(h,g)}}(this,h);break;case ey.AFTER_BODY:h.tagID===eE.HTML?startTagInBody(this,h):tokenAfterBody(this,h);break;case ey.IN_FRAMESET:!function(h,g){switch(g.tagID){case eE.HTML:startTagInBody(h,g);break;case eE.FRAMESET:h._insertElement(g,ep.HTML);break;case eE.FRAME:h._appendElement(g,ep.HTML),g.ackSelfClosing=!0;break;case eE.NOFRAMES:startTagInHead(h,g)}}(this,h);break;case ey.AFTER_FRAMESET:!function(h,g){switch(g.tagID){case eE.HTML:startTagInBody(h,g);break;case eE.NOFRAMES:startTagInHead(h,g)}}(this,h);break;case ey.AFTER_AFTER_BODY:h.tagID===eE.HTML?startTagInBody(this,h):tokenAfterAfterBody(this,h);break;case ey.AFTER_AFTER_FRAMESET:!function(h,g){switch(g.tagID){case eE.HTML:startTagInBody(h,g);break;case eE.NOFRAMES:startTagInHead(h,g)}}(this,h)}}onEndTag(h){this.skipNextNewLine=!1,this.currentToken=h,this.currentNotInHTML?function(h,g){if(g.tagID===eE.P||g.tagID===eE.BR){popUntilHtmlOrIntegrationPoint(h),h._endTagOutsideForeignContent(g);return}for(let _=h.openElements.stackTop;_>0;_--){let E=h.openElements.items[_];if(h.treeAdapter.getNamespaceURI(E)===ep.HTML){h._endTagOutsideForeignContent(g);break}let A=h.treeAdapter.getTagName(E);if(A.toLowerCase()===g.tagName){g.tagName=A,h.openElements.shortenToLength(_);break}}}(this,h):this._endTagOutsideForeignContent(h)}_endTagOutsideForeignContent(h){var g;switch(this.insertionMode){case ey.INITIAL:tokenInInitialMode(this,h);break;case ey.BEFORE_HTML:!function(h,g){let _=g.tagID;(_===eE.HTML||_===eE.HEAD||_===eE.BODY||_===eE.BR)&&tokenBeforeHtml(h,g)}(this,h);break;case ey.BEFORE_HEAD:!function(h,g){let _=g.tagID;_===eE.HEAD||_===eE.BODY||_===eE.HTML||_===eE.BR?tokenBeforeHead(h,g):h._err(g,es.endTagWithoutMatchingOpenElement)}(this,h);break;case ey.IN_HEAD:!function(h,g){switch(g.tagID){case eE.HEAD:h.openElements.pop(),h.insertionMode=ey.AFTER_HEAD;break;case eE.BODY:case eE.BR:case eE.HTML:tokenInHead(h,g);break;case eE.TEMPLATE:templateEndTagInHead(h,g);break;default:h._err(g,es.endTagWithoutMatchingOpenElement)}}(this,h);break;case ey.IN_HEAD_NO_SCRIPT:!function(h,g){switch(g.tagID){case eE.NOSCRIPT:h.openElements.pop(),h.insertionMode=ey.IN_HEAD;break;case eE.BR:tokenInHeadNoScript(h,g);break;default:h._err(g,es.endTagWithoutMatchingOpenElement)}}(this,h);break;case ey.AFTER_HEAD:!function(h,g){switch(g.tagID){case eE.BODY:case eE.HTML:case eE.BR:tokenAfterHead(h,g);break;case eE.TEMPLATE:templateEndTagInHead(h,g);break;default:h._err(g,es.endTagWithoutMatchingOpenElement)}}(this,h);break;case ey.IN_BODY:endTagInBody(this,h);break;case ey.TEXT:h.tagID===eE.SCRIPT&&(null===(g=this.scriptHandler)||void 0===g||g.call(this,this.openElements.current)),this.openElements.pop(),this.insertionMode=this.originalInsertionMode;break;case ey.IN_TABLE:endTagInTable(this,h);break;case ey.IN_TABLE_TEXT:tokenInTableText(this,h);break;case ey.IN_CAPTION:!function(h,g){let _=g.tagID;switch(_){case eE.CAPTION:case eE.TABLE:h.openElements.hasInTableScope(eE.CAPTION)&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilTagNamePopped(eE.CAPTION),h.activeFormattingElements.clearToLastMarker(),h.insertionMode=ey.IN_TABLE,_===eE.TABLE&&endTagInTable(h,g));break;case eE.BODY:case eE.COL:case eE.COLGROUP:case eE.HTML:case eE.TBODY:case eE.TD:case eE.TFOOT:case eE.TH:case eE.THEAD:case eE.TR:break;default:endTagInBody(h,g)}}(this,h);break;case ey.IN_COLUMN_GROUP:!function(h,g){switch(g.tagID){case eE.COLGROUP:h.openElements.currentTagId===eE.COLGROUP&&(h.openElements.pop(),h.insertionMode=ey.IN_TABLE);break;case eE.TEMPLATE:templateEndTagInHead(h,g);break;case eE.COL:break;default:tokenInColumnGroup(h,g)}}(this,h);break;case ey.IN_TABLE_BODY:endTagInTableBody(this,h);break;case ey.IN_ROW:endTagInRow(this,h);break;case ey.IN_CELL:!function(h,g){let _=g.tagID;switch(_){case eE.TD:case eE.TH:h.openElements.hasInTableScope(_)&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilTagNamePopped(_),h.activeFormattingElements.clearToLastMarker(),h.insertionMode=ey.IN_ROW);break;case eE.TABLE:case eE.TBODY:case eE.TFOOT:case eE.THEAD:case eE.TR:h.openElements.hasInTableScope(_)&&(h._closeTableCell(),endTagInRow(h,g));break;case eE.BODY:case eE.CAPTION:case eE.COL:case eE.COLGROUP:case eE.HTML:break;default:endTagInBody(h,g)}}(this,h);break;case ey.IN_SELECT:endTagInSelect(this,h);break;case ey.IN_SELECT_IN_TABLE:!function(h,g){let _=g.tagID;_===eE.CAPTION||_===eE.TABLE||_===eE.TBODY||_===eE.TFOOT||_===eE.THEAD||_===eE.TR||_===eE.TD||_===eE.TH?h.openElements.hasInTableScope(_)&&(h.openElements.popUntilTagNamePopped(eE.SELECT),h._resetInsertionMode(),h.onEndTag(g)):endTagInSelect(h,g)}(this,h);break;case ey.IN_TEMPLATE:h.tagID===eE.TEMPLATE&&templateEndTagInHead(this,h);break;case ey.AFTER_BODY:endTagAfterBody(this,h);break;case ey.IN_FRAMESET:h.tagID!==eE.FRAMESET||this.openElements.isRootHtmlElementCurrent()||(this.openElements.pop(),this.fragmentContext||this.openElements.currentTagId===eE.FRAMESET||(this.insertionMode=ey.AFTER_FRAMESET));break;case ey.AFTER_FRAMESET:h.tagID===eE.HTML&&(this.insertionMode=ey.AFTER_AFTER_FRAMESET);break;case ey.AFTER_AFTER_BODY:tokenAfterAfterBody(this,h)}}onEof(h){switch(this.insertionMode){case ey.INITIAL:tokenInInitialMode(this,h);break;case ey.BEFORE_HTML:tokenBeforeHtml(this,h);break;case ey.BEFORE_HEAD:tokenBeforeHead(this,h);break;case ey.IN_HEAD:tokenInHead(this,h);break;case ey.IN_HEAD_NO_SCRIPT:tokenInHeadNoScript(this,h);break;case ey.AFTER_HEAD:tokenAfterHead(this,h);break;case ey.IN_BODY:case ey.IN_TABLE:case ey.IN_CAPTION:case ey.IN_COLUMN_GROUP:case ey.IN_TABLE_BODY:case ey.IN_ROW:case ey.IN_CELL:case ey.IN_SELECT:case ey.IN_SELECT_IN_TABLE:eofInBody(this,h);break;case ey.TEXT:this._err(h,es.eofInElementThatCanContainOnlyText),this.openElements.pop(),this.insertionMode=this.originalInsertionMode,this.onEof(h);break;case ey.IN_TABLE_TEXT:tokenInTableText(this,h);break;case ey.IN_TEMPLATE:eofInTemplate(this,h);break;case ey.AFTER_BODY:case ey.IN_FRAMESET:case ey.AFTER_FRAMESET:case ey.AFTER_AFTER_BODY:case ey.AFTER_AFTER_FRAMESET:stopParsing(this,h)}}onWhitespaceCharacter(h){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,h.chars.charCodeAt(0)===ei.LINE_FEED)){if(1===h.chars.length)return;h.chars=h.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(h);return}switch(this.insertionMode){case ey.IN_HEAD:case ey.IN_HEAD_NO_SCRIPT:case ey.AFTER_HEAD:case ey.TEXT:case ey.IN_COLUMN_GROUP:case ey.IN_SELECT:case ey.IN_SELECT_IN_TABLE:case ey.IN_FRAMESET:case ey.AFTER_FRAMESET:this._insertCharacters(h);break;case ey.IN_BODY:case ey.IN_CAPTION:case ey.IN_CELL:case ey.IN_TEMPLATE:case ey.AFTER_BODY:case ey.AFTER_AFTER_BODY:case ey.AFTER_AFTER_FRAMESET:whitespaceCharacterInBody(this,h);break;case ey.IN_TABLE:case ey.IN_TABLE_BODY:case ey.IN_ROW:characterInTable(this,h);break;case ey.IN_TABLE_TEXT:whitespaceCharacterInTableText(this,h)}}};function callAdoptionAgency(h,g){for(let _=0;_<8;_++){let _=function(h,g){let _=h.activeFormattingElements.getElementEntryInScopeWithTagName(g.tagName);return _?h.openElements.contains(_.element)?h.openElements.hasInScope(g.tagID)||(_=null):(h.activeFormattingElements.removeEntry(_),_=null):genericEndTagInBody(h,g),_}(h,g);if(!_)break;let E=function(h,g){let _=null,E=h.openElements.stackTop;for(;E>=0;E--){let A=h.openElements.items[E];if(A===g.element)break;h._isSpecialElement(A,h.openElements.tagIDs[E])&&(_=A)}return _||(h.openElements.shortenToLength(E<0?0:E),h.activeFormattingElements.removeEntry(g)),_}(h,_);if(!E)break;h.activeFormattingElements.bookmark=_;let A=function(h,g,_){let E=g,A=h.openElements.getCommonAncestor(g);for(let k=0,b=A;b!==_;k++,b=A){A=h.openElements.getCommonAncestor(b);let _=h.activeFormattingElements.getElementEntry(b),C=_&&k>=3,S=!_||C;S?(C&&h.activeFormattingElements.removeEntry(_),h.openElements.remove(b)):(b=function(h,g){let _=h.treeAdapter.getNamespaceURI(g.element),E=h.treeAdapter.createElement(g.token.tagName,_,g.token.attrs);return h.openElements.replace(g.element,E),g.element=E,E}(h,_),E===g&&(h.activeFormattingElements.bookmark=_),h.treeAdapter.detachNode(E),h.treeAdapter.appendChild(b,E),E=b)}return E}(h,E,_.element),k=h.openElements.getCommonAncestor(_.element);h.treeAdapter.detachNode(A),k&&function(h,g,_){let E=h.treeAdapter.getTagName(g),A=getTagID(E);if(h._isElementCausesFosterParenting(A))h._fosterParentElement(_);else{let E=h.treeAdapter.getNamespaceURI(g);A===eE.TEMPLATE&&E===ep.HTML&&(g=h.treeAdapter.getTemplateContent(g)),h.treeAdapter.appendChild(g,_)}}(h,k,A),function(h,g,_){let E=h.treeAdapter.getNamespaceURI(_.element),{token:A}=_,k=h.treeAdapter.createElement(A.tagName,E,A.attrs);h._adoptNodes(g,k),h.treeAdapter.appendChild(g,k),h.activeFormattingElements.insertElementAfterBookmark(k,A),h.activeFormattingElements.removeEntry(_),h.openElements.remove(_.element),h.openElements.insertAfter(g,k,A.tagID)}(h,E,_)}}function appendComment(h,g){h._appendCommentNode(g,h.openElements.currentTmplContentOrNode)}function stopParsing(h,g){if(h.stopped=!0,g.location){let _=h.fragmentContext?0:2;for(let E=h.openElements.stackTop;E>=_;E--)h._setEndLocation(h.openElements.items[E],g);if(!h.fragmentContext&&h.openElements.stackTop>=0){let _=h.openElements.items[0],E=h.treeAdapter.getNodeSourceCodeLocation(_);if(E&&!E.endTag&&(h._setEndLocation(_,g),h.openElements.stackTop>=1)){let _=h.openElements.items[1],E=h.treeAdapter.getNodeSourceCodeLocation(_);E&&!E.endTag&&h._setEndLocation(_,g)}}}}function tokenInInitialMode(h,g){h._err(g,es.missingDoctype,!0),h.treeAdapter.setDocumentMode(h.document,eg.QUIRKS),h.insertionMode=ey.BEFORE_HTML,h._processToken(g)}function tokenBeforeHtml(h,g){h._insertFakeRootElement(),h.insertionMode=ey.BEFORE_HEAD,h._processToken(g)}function tokenBeforeHead(h,g){h._insertFakeElement(e_.HEAD,eE.HEAD),h.headElement=h.openElements.current,h.insertionMode=ey.IN_HEAD,h._processToken(g)}function startTagInHead(h,g){switch(g.tagID){case eE.HTML:startTagInBody(h,g);break;case eE.BASE:case eE.BASEFONT:case eE.BGSOUND:case eE.LINK:case eE.META:h._appendElement(g,ep.HTML),g.ackSelfClosing=!0;break;case eE.TITLE:h._switchToTextParsing(g,rt.RCDATA);break;case eE.NOSCRIPT:h.options.scriptingEnabled?h._switchToTextParsing(g,rt.RAWTEXT):(h._insertElement(g,ep.HTML),h.insertionMode=ey.IN_HEAD_NO_SCRIPT);break;case eE.NOFRAMES:case eE.STYLE:h._switchToTextParsing(g,rt.RAWTEXT);break;case eE.SCRIPT:h._switchToTextParsing(g,rt.SCRIPT_DATA);break;case eE.TEMPLATE:h._insertTemplate(g),h.activeFormattingElements.insertMarker(),h.framesetOk=!1,h.insertionMode=ey.IN_TEMPLATE,h.tmplInsertionModeStack.unshift(ey.IN_TEMPLATE);break;case eE.HEAD:h._err(g,es.misplacedStartTagForHeadElement);break;default:tokenInHead(h,g)}}function templateEndTagInHead(h,g){h.openElements.tmplCount>0?(h.openElements.generateImpliedEndTagsThoroughly(),h.openElements.currentTagId!==eE.TEMPLATE&&h._err(g,es.closingOfElementWithOpenChildElements),h.openElements.popUntilTagNamePopped(eE.TEMPLATE),h.activeFormattingElements.clearToLastMarker(),h.tmplInsertionModeStack.shift(),h._resetInsertionMode()):h._err(g,es.endTagWithoutMatchingOpenElement)}function tokenInHead(h,g){h.openElements.pop(),h.insertionMode=ey.AFTER_HEAD,h._processToken(g)}function tokenInHeadNoScript(h,g){let _=g.type===el.EOF?es.openElementsLeftAfterEof:es.disallowedContentInNoscriptInHead;h._err(g,_),h.openElements.pop(),h.insertionMode=ey.IN_HEAD,h._processToken(g)}function tokenAfterHead(h,g){h._insertFakeElement(e_.BODY,eE.BODY),h.insertionMode=ey.IN_BODY,modeInBody(h,g)}function modeInBody(h,g){switch(g.type){case el.CHARACTER:characterInBody(h,g);break;case el.WHITESPACE_CHARACTER:whitespaceCharacterInBody(h,g);break;case el.COMMENT:appendComment(h,g);break;case el.START_TAG:startTagInBody(h,g);break;case el.END_TAG:endTagInBody(h,g);break;case el.EOF:eofInBody(h,g)}}function whitespaceCharacterInBody(h,g){h._reconstructActiveFormattingElements(),h._insertCharacters(g)}function characterInBody(h,g){h._reconstructActiveFormattingElements(),h._insertCharacters(g),h.framesetOk=!1}function areaStartTagInBody(h,g){h._reconstructActiveFormattingElements(),h._appendElement(g,ep.HTML),h.framesetOk=!1,g.ackSelfClosing=!0}function isHiddenInput(h){let g=getTokenAttr(h,ef.TYPE);return null!=g&&"hidden"===g.toLowerCase()}function noembedStartTagInBody(h,g){h._switchToTextParsing(g,rt.RAWTEXT)}function genericStartTagInBody(h,g){h._reconstructActiveFormattingElements(),h._insertElement(g,ep.HTML)}function startTagInBody(h,g){switch(g.tagID){case eE.I:case eE.S:case eE.B:case eE.U:case eE.EM:case eE.TT:case eE.BIG:case eE.CODE:case eE.FONT:case eE.SMALL:case eE.STRIKE:case eE.STRONG:h._reconstructActiveFormattingElements(),h._insertElement(g,ep.HTML),h.activeFormattingElements.pushElement(h.openElements.current,g);break;case eE.A:!function(h,g){let _=h.activeFormattingElements.getElementEntryInScopeWithTagName(e_.A);_&&(callAdoptionAgency(h,g),h.openElements.remove(_.element),h.activeFormattingElements.removeEntry(_)),h._reconstructActiveFormattingElements(),h._insertElement(g,ep.HTML),h.activeFormattingElements.pushElement(h.openElements.current,g)}(h,g);break;case eE.H1:case eE.H2:case eE.H3:case eE.H4:case eE.H5:case eE.H6:h.openElements.hasInButtonScope(eE.P)&&h._closePElement(),isNumberedHeader(h.openElements.currentTagId)&&h.openElements.pop(),h._insertElement(g,ep.HTML);break;case eE.P:case eE.DL:case eE.OL:case eE.UL:case eE.DIV:case eE.DIR:case eE.NAV:case eE.MAIN:case eE.MENU:case eE.ASIDE:case eE.CENTER:case eE.FIGURE:case eE.FOOTER:case eE.HEADER:case eE.HGROUP:case eE.DIALOG:case eE.DETAILS:case eE.ADDRESS:case eE.ARTICLE:case eE.SECTION:case eE.SUMMARY:case eE.FIELDSET:case eE.BLOCKQUOTE:case eE.FIGCAPTION:h.openElements.hasInButtonScope(eE.P)&&h._closePElement(),h._insertElement(g,ep.HTML);break;case eE.LI:case eE.DD:case eE.DT:!function(h,g){h.framesetOk=!1;let _=g.tagID;for(let g=h.openElements.stackTop;g>=0;g--){let E=h.openElements.tagIDs[g];if(_===eE.LI&&E===eE.LI||(_===eE.DD||_===eE.DT)&&(E===eE.DD||E===eE.DT)){h.openElements.generateImpliedEndTagsWithExclusion(E),h.openElements.popUntilTagNamePopped(E);break}if(E!==eE.ADDRESS&&E!==eE.DIV&&E!==eE.P&&h._isSpecialElement(h.openElements.items[g],E))break}h.openElements.hasInButtonScope(eE.P)&&h._closePElement(),h._insertElement(g,ep.HTML)}(h,g);break;case eE.BR:case eE.IMG:case eE.WBR:case eE.AREA:case eE.EMBED:case eE.KEYGEN:areaStartTagInBody(h,g);break;case eE.HR:h.openElements.hasInButtonScope(eE.P)&&h._closePElement(),h._appendElement(g,ep.HTML),h.framesetOk=!1,g.ackSelfClosing=!0;break;case eE.RB:case eE.RTC:h.openElements.hasInScope(eE.RUBY)&&h.openElements.generateImpliedEndTags(),h._insertElement(g,ep.HTML);break;case eE.RT:case eE.RP:h.openElements.hasInScope(eE.RUBY)&&h.openElements.generateImpliedEndTagsWithExclusion(eE.RTC),h._insertElement(g,ep.HTML);break;case eE.PRE:case eE.LISTING:h.openElements.hasInButtonScope(eE.P)&&h._closePElement(),h._insertElement(g,ep.HTML),h.skipNextNewLine=!0,h.framesetOk=!1;break;case eE.XMP:h.openElements.hasInButtonScope(eE.P)&&h._closePElement(),h._reconstructActiveFormattingElements(),h.framesetOk=!1,h._switchToTextParsing(g,rt.RAWTEXT);break;case eE.SVG:h._reconstructActiveFormattingElements(),adjustTokenSVGAttrs(g),adjustTokenXMLAttrs(g),g.selfClosing?h._appendElement(g,ep.SVG):h._insertElement(g,ep.SVG),g.ackSelfClosing=!0;break;case eE.HTML:0===h.openElements.tmplCount&&h.treeAdapter.adoptAttributes(h.openElements.items[0],g.attrs);break;case eE.BASE:case eE.LINK:case eE.META:case eE.STYLE:case eE.TITLE:case eE.SCRIPT:case eE.BGSOUND:case eE.BASEFONT:case eE.TEMPLATE:startTagInHead(h,g);break;case eE.BODY:!function(h,g){let _=h.openElements.tryPeekProperlyNestedBodyElement();_&&0===h.openElements.tmplCount&&(h.framesetOk=!1,h.treeAdapter.adoptAttributes(_,g.attrs))}(h,g);break;case eE.FORM:!function(h,g){let _=h.openElements.tmplCount>0;h.formElement&&!_||(h.openElements.hasInButtonScope(eE.P)&&h._closePElement(),h._insertElement(g,ep.HTML),_||(h.formElement=h.openElements.current))}(h,g);break;case eE.NOBR:h._reconstructActiveFormattingElements(),h.openElements.hasInScope(eE.NOBR)&&(callAdoptionAgency(h,g),h._reconstructActiveFormattingElements()),h._insertElement(g,ep.HTML),h.activeFormattingElements.pushElement(h.openElements.current,g);break;case eE.MATH:h._reconstructActiveFormattingElements(),adjustTokenMathMLAttrs(g),adjustTokenXMLAttrs(g),g.selfClosing?h._appendElement(g,ep.MATHML):h._insertElement(g,ep.MATHML),g.ackSelfClosing=!0;break;case eE.TABLE:h.treeAdapter.getDocumentMode(h.document)!==eg.QUIRKS&&h.openElements.hasInButtonScope(eE.P)&&h._closePElement(),h._insertElement(g,ep.HTML),h.framesetOk=!1,h.insertionMode=ey.IN_TABLE;break;case eE.INPUT:h._reconstructActiveFormattingElements(),h._appendElement(g,ep.HTML),isHiddenInput(g)||(h.framesetOk=!1),g.ackSelfClosing=!0;break;case eE.PARAM:case eE.TRACK:case eE.SOURCE:h._appendElement(g,ep.HTML),g.ackSelfClosing=!0;break;case eE.IMAGE:g.tagName=e_.IMG,g.tagID=eE.IMG,areaStartTagInBody(h,g);break;case eE.BUTTON:h.openElements.hasInScope(eE.BUTTON)&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilTagNamePopped(eE.BUTTON)),h._reconstructActiveFormattingElements(),h._insertElement(g,ep.HTML),h.framesetOk=!1;break;case eE.APPLET:case eE.OBJECT:case eE.MARQUEE:h._reconstructActiveFormattingElements(),h._insertElement(g,ep.HTML),h.activeFormattingElements.insertMarker(),h.framesetOk=!1;break;case eE.IFRAME:h.framesetOk=!1,h._switchToTextParsing(g,rt.RAWTEXT);break;case eE.SELECT:h._reconstructActiveFormattingElements(),h._insertElement(g,ep.HTML),h.framesetOk=!1,h.insertionMode=h.insertionMode===ey.IN_TABLE||h.insertionMode===ey.IN_CAPTION||h.insertionMode===ey.IN_TABLE_BODY||h.insertionMode===ey.IN_ROW||h.insertionMode===ey.IN_CELL?ey.IN_SELECT_IN_TABLE:ey.IN_SELECT;break;case eE.OPTION:case eE.OPTGROUP:h.openElements.currentTagId===eE.OPTION&&h.openElements.pop(),h._reconstructActiveFormattingElements(),h._insertElement(g,ep.HTML);break;case eE.NOEMBED:noembedStartTagInBody(h,g);break;case eE.FRAMESET:!function(h,g){let _=h.openElements.tryPeekProperlyNestedBodyElement();h.framesetOk&&_&&(h.treeAdapter.detachNode(_),h.openElements.popAllUpToHtmlElement(),h._insertElement(g,ep.HTML),h.insertionMode=ey.IN_FRAMESET)}(h,g);break;case eE.TEXTAREA:h._insertElement(g,ep.HTML),h.skipNextNewLine=!0,h.tokenizer.state=rt.RCDATA,h.originalInsertionMode=h.insertionMode,h.framesetOk=!1,h.insertionMode=ey.TEXT;break;case eE.NOSCRIPT:h.options.scriptingEnabled?noembedStartTagInBody(h,g):genericStartTagInBody(h,g);break;case eE.PLAINTEXT:h.openElements.hasInButtonScope(eE.P)&&h._closePElement(),h._insertElement(g,ep.HTML),h.tokenizer.state=rt.PLAINTEXT;break;case eE.COL:case eE.TH:case eE.TD:case eE.TR:case eE.HEAD:case eE.FRAME:case eE.TBODY:case eE.TFOOT:case eE.THEAD:case eE.CAPTION:case eE.COLGROUP:break;default:genericStartTagInBody(h,g)}}function genericEndTagInBody(h,g){let _=g.tagName,E=g.tagID;for(let g=h.openElements.stackTop;g>0;g--){let A=h.openElements.items[g],k=h.openElements.tagIDs[g];if(E===k&&(E!==eE.UNKNOWN||h.treeAdapter.getTagName(A)===_)){h.openElements.generateImpliedEndTagsWithExclusion(E),h.openElements.stackTop>=g&&h.openElements.shortenToLength(g);break}if(h._isSpecialElement(A,k))break}}function endTagInBody(h,g){switch(g.tagID){case eE.A:case eE.B:case eE.I:case eE.S:case eE.U:case eE.EM:case eE.TT:case eE.BIG:case eE.CODE:case eE.FONT:case eE.NOBR:case eE.SMALL:case eE.STRIKE:case eE.STRONG:callAdoptionAgency(h,g);break;case eE.P:h.openElements.hasInButtonScope(eE.P)||h._insertFakeElement(e_.P,eE.P),h._closePElement();break;case eE.DL:case eE.UL:case eE.OL:case eE.DIR:case eE.DIV:case eE.NAV:case eE.PRE:case eE.MAIN:case eE.MENU:case eE.ASIDE:case eE.BUTTON:case eE.CENTER:case eE.FIGURE:case eE.FOOTER:case eE.HEADER:case eE.HGROUP:case eE.DIALOG:case eE.ADDRESS:case eE.ARTICLE:case eE.DETAILS:case eE.SECTION:case eE.SUMMARY:case eE.LISTING:case eE.FIELDSET:case eE.BLOCKQUOTE:case eE.FIGCAPTION:!function(h,g){let _=g.tagID;h.openElements.hasInScope(_)&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilTagNamePopped(_))}(h,g);break;case eE.LI:h.openElements.hasInListItemScope(eE.LI)&&(h.openElements.generateImpliedEndTagsWithExclusion(eE.LI),h.openElements.popUntilTagNamePopped(eE.LI));break;case eE.DD:case eE.DT:!function(h,g){let _=g.tagID;h.openElements.hasInScope(_)&&(h.openElements.generateImpliedEndTagsWithExclusion(_),h.openElements.popUntilTagNamePopped(_))}(h,g);break;case eE.H1:case eE.H2:case eE.H3:case eE.H4:case eE.H5:case eE.H6:h.openElements.hasNumberedHeaderInScope()&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilNumberedHeaderPopped());break;case eE.BR:h._reconstructActiveFormattingElements(),h._insertFakeElement(e_.BR,eE.BR),h.openElements.pop(),h.framesetOk=!1;break;case eE.BODY:!function(h,g){if(h.openElements.hasInScope(eE.BODY)&&(h.insertionMode=ey.AFTER_BODY,h.options.sourceCodeLocationInfo)){let _=h.openElements.tryPeekProperlyNestedBodyElement();_&&h._setEndLocation(_,g)}}(h,g);break;case eE.HTML:h.openElements.hasInScope(eE.BODY)&&(h.insertionMode=ey.AFTER_BODY,endTagAfterBody(h,g));break;case eE.FORM:!function(h){let g=h.openElements.tmplCount>0,{formElement:_}=h;g||(h.formElement=null),(_||g)&&h.openElements.hasInScope(eE.FORM)&&(h.openElements.generateImpliedEndTags(),g?h.openElements.popUntilTagNamePopped(eE.FORM):_&&h.openElements.remove(_))}(h);break;case eE.APPLET:case eE.OBJECT:case eE.MARQUEE:!function(h,g){let _=g.tagID;h.openElements.hasInScope(_)&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilTagNamePopped(_),h.activeFormattingElements.clearToLastMarker())}(h,g);break;case eE.TEMPLATE:templateEndTagInHead(h,g);break;default:genericEndTagInBody(h,g)}}function eofInBody(h,g){h.tmplInsertionModeStack.length>0?eofInTemplate(h,g):stopParsing(h,g)}function characterInTable(h,g){if(rC.has(h.openElements.currentTagId))switch(h.pendingCharacterTokens.length=0,h.hasNonWhitespacePendingCharacterToken=!1,h.originalInsertionMode=h.insertionMode,h.insertionMode=ey.IN_TABLE_TEXT,g.type){case el.CHARACTER:characterInTableText(h,g);break;case el.WHITESPACE_CHARACTER:whitespaceCharacterInTableText(h,g)}else tokenInTable(h,g)}function startTagInTable(h,g){switch(g.tagID){case eE.TD:case eE.TH:case eE.TR:h.openElements.clearBackToTableContext(),h._insertFakeElement(e_.TBODY,eE.TBODY),h.insertionMode=ey.IN_TABLE_BODY,startTagInTableBody(h,g);break;case eE.STYLE:case eE.SCRIPT:case eE.TEMPLATE:startTagInHead(h,g);break;case eE.COL:h.openElements.clearBackToTableContext(),h._insertFakeElement(e_.COLGROUP,eE.COLGROUP),h.insertionMode=ey.IN_COLUMN_GROUP,startTagInColumnGroup(h,g);break;case eE.FORM:h.formElement||0!==h.openElements.tmplCount||(h._insertElement(g,ep.HTML),h.formElement=h.openElements.current,h.openElements.pop());break;case eE.TABLE:h.openElements.hasInTableScope(eE.TABLE)&&(h.openElements.popUntilTagNamePopped(eE.TABLE),h._resetInsertionMode(),h._processStartTag(g));break;case eE.TBODY:case eE.TFOOT:case eE.THEAD:h.openElements.clearBackToTableContext(),h._insertElement(g,ep.HTML),h.insertionMode=ey.IN_TABLE_BODY;break;case eE.INPUT:isHiddenInput(g)?h._appendElement(g,ep.HTML):tokenInTable(h,g),g.ackSelfClosing=!0;break;case eE.CAPTION:h.openElements.clearBackToTableContext(),h.activeFormattingElements.insertMarker(),h._insertElement(g,ep.HTML),h.insertionMode=ey.IN_CAPTION;break;case eE.COLGROUP:h.openElements.clearBackToTableContext(),h._insertElement(g,ep.HTML),h.insertionMode=ey.IN_COLUMN_GROUP;break;default:tokenInTable(h,g)}}function endTagInTable(h,g){switch(g.tagID){case eE.TABLE:h.openElements.hasInTableScope(eE.TABLE)&&(h.openElements.popUntilTagNamePopped(eE.TABLE),h._resetInsertionMode());break;case eE.TEMPLATE:templateEndTagInHead(h,g);break;case eE.BODY:case eE.CAPTION:case eE.COL:case eE.COLGROUP:case eE.HTML:case eE.TBODY:case eE.TD:case eE.TFOOT:case eE.TH:case eE.THEAD:case eE.TR:break;default:tokenInTable(h,g)}}function tokenInTable(h,g){let _=h.fosterParentingEnabled;h.fosterParentingEnabled=!0,modeInBody(h,g),h.fosterParentingEnabled=_}function whitespaceCharacterInTableText(h,g){h.pendingCharacterTokens.push(g)}function characterInTableText(h,g){h.pendingCharacterTokens.push(g),h.hasNonWhitespacePendingCharacterToken=!0}function tokenInTableText(h,g){let _=0;if(h.hasNonWhitespacePendingCharacterToken)for(;_<h.pendingCharacterTokens.length;_++)tokenInTable(h,h.pendingCharacterTokens[_]);else for(;_<h.pendingCharacterTokens.length;_++)h._insertCharacters(h.pendingCharacterTokens[_]);h.insertionMode=h.originalInsertionMode,h._processToken(g)}let rI=new Set([eE.CAPTION,eE.COL,eE.COLGROUP,eE.TBODY,eE.TD,eE.TFOOT,eE.TH,eE.THEAD,eE.TR]);function startTagInColumnGroup(h,g){switch(g.tagID){case eE.HTML:startTagInBody(h,g);break;case eE.COL:h._appendElement(g,ep.HTML),g.ackSelfClosing=!0;break;case eE.TEMPLATE:startTagInHead(h,g);break;default:tokenInColumnGroup(h,g)}}function tokenInColumnGroup(h,g){h.openElements.currentTagId===eE.COLGROUP&&(h.openElements.pop(),h.insertionMode=ey.IN_TABLE,h._processToken(g))}function startTagInTableBody(h,g){switch(g.tagID){case eE.TR:h.openElements.clearBackToTableBodyContext(),h._insertElement(g,ep.HTML),h.insertionMode=ey.IN_ROW;break;case eE.TH:case eE.TD:h.openElements.clearBackToTableBodyContext(),h._insertFakeElement(e_.TR,eE.TR),h.insertionMode=ey.IN_ROW,startTagInRow(h,g);break;case eE.CAPTION:case eE.COL:case eE.COLGROUP:case eE.TBODY:case eE.TFOOT:case eE.THEAD:h.openElements.hasTableBodyContextInTableScope()&&(h.openElements.clearBackToTableBodyContext(),h.openElements.pop(),h.insertionMode=ey.IN_TABLE,startTagInTable(h,g));break;default:startTagInTable(h,g)}}function endTagInTableBody(h,g){let _=g.tagID;switch(g.tagID){case eE.TBODY:case eE.TFOOT:case eE.THEAD:h.openElements.hasInTableScope(_)&&(h.openElements.clearBackToTableBodyContext(),h.openElements.pop(),h.insertionMode=ey.IN_TABLE);break;case eE.TABLE:h.openElements.hasTableBodyContextInTableScope()&&(h.openElements.clearBackToTableBodyContext(),h.openElements.pop(),h.insertionMode=ey.IN_TABLE,endTagInTable(h,g));break;case eE.BODY:case eE.CAPTION:case eE.COL:case eE.COLGROUP:case eE.HTML:case eE.TD:case eE.TH:case eE.TR:break;default:endTagInTable(h,g)}}function startTagInRow(h,g){switch(g.tagID){case eE.TH:case eE.TD:h.openElements.clearBackToTableRowContext(),h._insertElement(g,ep.HTML),h.insertionMode=ey.IN_CELL,h.activeFormattingElements.insertMarker();break;case eE.CAPTION:case eE.COL:case eE.COLGROUP:case eE.TBODY:case eE.TFOOT:case eE.THEAD:case eE.TR:h.openElements.hasInTableScope(eE.TR)&&(h.openElements.clearBackToTableRowContext(),h.openElements.pop(),h.insertionMode=ey.IN_TABLE_BODY,startTagInTableBody(h,g));break;default:startTagInTable(h,g)}}function endTagInRow(h,g){switch(g.tagID){case eE.TR:h.openElements.hasInTableScope(eE.TR)&&(h.openElements.clearBackToTableRowContext(),h.openElements.pop(),h.insertionMode=ey.IN_TABLE_BODY);break;case eE.TABLE:h.openElements.hasInTableScope(eE.TR)&&(h.openElements.clearBackToTableRowContext(),h.openElements.pop(),h.insertionMode=ey.IN_TABLE_BODY,endTagInTableBody(h,g));break;case eE.TBODY:case eE.TFOOT:case eE.THEAD:(h.openElements.hasInTableScope(g.tagID)||h.openElements.hasInTableScope(eE.TR))&&(h.openElements.clearBackToTableRowContext(),h.openElements.pop(),h.insertionMode=ey.IN_TABLE_BODY,endTagInTableBody(h,g));break;case eE.BODY:case eE.CAPTION:case eE.COL:case eE.COLGROUP:case eE.HTML:case eE.TD:case eE.TH:break;default:endTagInTable(h,g)}}function startTagInSelect(h,g){switch(g.tagID){case eE.HTML:startTagInBody(h,g);break;case eE.OPTION:h.openElements.currentTagId===eE.OPTION&&h.openElements.pop(),h._insertElement(g,ep.HTML);break;case eE.OPTGROUP:h.openElements.currentTagId===eE.OPTION&&h.openElements.pop(),h.openElements.currentTagId===eE.OPTGROUP&&h.openElements.pop(),h._insertElement(g,ep.HTML);break;case eE.INPUT:case eE.KEYGEN:case eE.TEXTAREA:case eE.SELECT:h.openElements.hasInSelectScope(eE.SELECT)&&(h.openElements.popUntilTagNamePopped(eE.SELECT),h._resetInsertionMode(),g.tagID!==eE.SELECT&&h._processStartTag(g));break;case eE.SCRIPT:case eE.TEMPLATE:startTagInHead(h,g)}}function endTagInSelect(h,g){switch(g.tagID){case eE.OPTGROUP:h.openElements.stackTop>0&&h.openElements.currentTagId===eE.OPTION&&h.openElements.tagIDs[h.openElements.stackTop-1]===eE.OPTGROUP&&h.openElements.pop(),h.openElements.currentTagId===eE.OPTGROUP&&h.openElements.pop();break;case eE.OPTION:h.openElements.currentTagId===eE.OPTION&&h.openElements.pop();break;case eE.SELECT:h.openElements.hasInSelectScope(eE.SELECT)&&(h.openElements.popUntilTagNamePopped(eE.SELECT),h._resetInsertionMode());break;case eE.TEMPLATE:templateEndTagInHead(h,g)}}function eofInTemplate(h,g){h.openElements.tmplCount>0?(h.openElements.popUntilTagNamePopped(eE.TEMPLATE),h.activeFormattingElements.clearToLastMarker(),h.tmplInsertionModeStack.shift(),h._resetInsertionMode(),h.onEof(g)):stopParsing(h,g)}function endTagAfterBody(h,g){var _;if(g.tagID===eE.HTML){if(h.fragmentContext||(h.insertionMode=ey.AFTER_AFTER_BODY),h.options.sourceCodeLocationInfo&&h.openElements.tagIDs[0]===eE.HTML){h._setEndLocation(h.openElements.items[0],g);let E=h.openElements.items[1];!E||(null===(_=h.treeAdapter.getNodeSourceCodeLocation(E))||void 0===_?void 0:_.endTag)||h._setEndLocation(E,g)}}else tokenAfterBody(h,g)}function tokenAfterBody(h,g){h.insertionMode=ey.IN_BODY,modeInBody(h,g)}function tokenAfterAfterBody(h,g){h.insertionMode=ey.IN_BODY,modeInBody(h,g)}function popUntilHtmlOrIntegrationPoint(h){for(;h.treeAdapter.getNamespaceURI(h.openElements.current)!==ep.HTML&&!h._isIntegrationPoint(h.openElements.currentTagId,h.openElements.current);)h.openElements.pop()}let rw=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);function getEscaper(h,g){return function(_){let E;let A=0,k="";for(;E=h.exec(_);)A!==E.index&&(k+=_.substring(A,E.index)),k+=g.get(E[0].charCodeAt(0)),A=E.index+1;return k+_.substring(A)}}null!=String.prototype.codePointAt||((h,g)=>(64512&h.charCodeAt(g))==55296?(h.charCodeAt(g)-55296)*1024+h.charCodeAt(g+1)-56320+65536:h.charCodeAt(g)),getEscaper(/[&<>'"]/g,rw),getEscaper(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),getEscaper(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),e_.AREA,e_.BASE,e_.BASEFONT,e_.BGSOUND,e_.BR,e_.COL,e_.EMBED,e_.FRAME,e_.HR,e_.IMG,e_.INPUT,e_.KEYGEN,e_.LINK,e_.META,e_.PARAM,e_.SOURCE,e_.TRACK,e_.WBR;let rN=lib_point("end"),rO=lib_point("start");function lib_point(h){return function(g){let _=g&&g.position&&g.position[h]||{};if("number"==typeof _.line&&_.line>0&&"number"==typeof _.column&&_.column>0)return{line:_.line,column:_.column,offset:"number"==typeof _.offset&&_.offset>-1?_.offset:void 0}}}let convert=function(h){if(null==h)return lib_ok;if("function"==typeof h)return castFactory(h);if("object"==typeof h)return Array.isArray(h)?function(h){let g=[],_=-1;for(;++_<h.length;)g[_]=convert(h[_]);return castFactory(function(...h){let _=-1;for(;++_<g.length;)if(g[_].apply(this,h))return!0;return!1})}(h):castFactory(function(g){let _;for(_ in h)if(g[_]!==h[_])return!1;return!0});if("string"==typeof h)return castFactory(function(g){return g&&g.type===h});throw Error("Expected function, string, or object as test")};function castFactory(h){return function(g,_,E){var A;return!!(null!==(A=g)&&"object"==typeof A&&"type"in A&&h.call(this,g,"number"==typeof _?_:void 0,E||void 0))}}function lib_ok(){return!0}let rR=[],rD=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),rL={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function raw(h,g){let _=function(h){let g="root"===h.type?h.children[0]:h;return!!(g&&("doctype"===g.type||"element"===g.type&&"html"===g.tagName))}(h),E=zwitch("type",{handlers:{root:lib_root,element:hast_util_raw_lib_element,text:hast_util_raw_lib_text,comment:lib_comment,doctype:lib_doctype,raw:handleRaw},unknown}),A={parser:_?new parser_Parser(rL):parser_Parser.getFragmentParser(void 0,rL),handle(h){E(h,A)},stitches:!1,options:g||{}};E(h,A),resetTokenizer(A,rO());let k=_?A.parser.document:A.parser.getFragment(),b=function(h,g){let _=g||{};return one({file:_.file||void 0,location:!1,schema:"svg"===_.space?nF:nM,verbose:_.verbose||!1},h)}(k,{file:A.options.file});if(A.stitches){let h;h=function(h,g,_){if(h.value.stitch&&_&&void 0!==g){let E=_.children;return E[g]=h.value.stitch,g}},function(h,g,_,E){let A;"function"==typeof g&&"function"!=typeof _?(E=_,_=g):A=g;let k=convert(A),b=E?-1:1;(function factory(h,A,C){let S=h&&"object"==typeof h?h:{};if("string"==typeof S.type){let g="string"==typeof S.tagName?S.tagName:"string"==typeof S.name?S.name:void 0;Object.defineProperty(visit,"name",{value:"node ("+h.type+(g?"<"+g+">":"")+")"})}return visit;function visit(){var S;let w,N,R,L=rR;if((!g||k(h,A,C[C.length-1]||void 0))&&!1===(L=Array.isArray(S=_(h,C))?S:"number"==typeof S?[!0,S]:null==S?rR:[S])[0])return L;if("children"in h&&h.children&&h.children&&"skip"!==L[0])for(N=(E?h.children.length:-1)+b,R=C.concat(h);N>-1&&N<h.children.length;){let g=h.children[N];if(!1===(w=factory(g,N,R)())[0])return w;N="number"==typeof w[1]?w[1]:N+b}return L}})(h,void 0,[])()}(b,"comment",function(g,_){let E=_[_.length-1],A=E?E.children.indexOf(g):void 0;return h(g,A,E)},void 0)}return"root"===b.type&&1===b.children.length&&b.children[0].type===h.type?b.children[0]:b}function hast_util_raw_lib_all(h,g){let _=-1;if(h)for(;++_<h.length;)g.handle(h[_])}function lib_root(h,g){hast_util_raw_lib_all(h.children,g)}function hast_util_raw_lib_element(h,g){(function(h,g){if(g.parser.tokenizer.state===rt.PLAINTEXT)return;resetTokenizer(g,rO(h));let _=g.parser.openElements.current,E="namespaceURI"in _?_.namespaceURI:nY.html;E===nY.html&&"svg"===h.tagName&&(E=nY.svg);let A=function(h,g){let _=(g||nK).space;return nJ(h,"svg"===_?nF:nM)}({...h,children:[]},{space:E===nY.svg?"svg":"html"}),k="attrs"in A?A.attrs:[],b={type:el.START_TAG,tagName:h.tagName,tagID:getTagID(h.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:k,location:createParse5Location(h)};g.parser.currentToken=b,g.parser._processToken(g.parser.currentToken),g.parser.tokenizer.lastStartTagName=h.tagName})(h,g),hast_util_raw_lib_all(h.children,g),function(h,g){if(!g.parser.tokenizer.inForeignNode&&n0.includes(h.tagName)||g.parser.tokenizer.state===rt.PLAINTEXT)return;resetTokenizer(g,rN(h));let _={type:el.END_TAG,tagName:h.tagName,tagID:getTagID(h.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:createParse5Location(h)};g.parser.currentToken=_,g.parser._processToken(g.parser.currentToken),_.tagName===g.parser.tokenizer.lastStartTagName&&(g.parser.tokenizer.state===rt.RCDATA||g.parser.tokenizer.state===rt.RAWTEXT||g.parser.tokenizer.state===rt.SCRIPT_DATA)&&(g.parser.tokenizer.state=rt.DATA)}(h,g)}function hast_util_raw_lib_text(h,g){let _={type:el.CHARACTER,chars:h.value,location:createParse5Location(h)};resetTokenizer(g,rO(h)),g.parser.currentToken=_,g.parser._processToken(g.parser.currentToken)}function lib_doctype(h,g){let _={type:el.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:createParse5Location(h)};resetTokenizer(g,rO(h)),g.parser.currentToken=_,g.parser._processToken(g.parser.currentToken)}function lib_comment(h,g){let _=h.value,E={type:el.COMMENT,data:_,location:createParse5Location(h)};resetTokenizer(g,rO(h)),g.parser.currentToken=E,g.parser._processToken(g.parser.currentToken)}function handleRaw(h,g){if(g.parser.tokenizer.preprocessor.html="",g.parser.tokenizer.preprocessor.pos=-1,g.parser.tokenizer.preprocessor.lastGapPos=-2,g.parser.tokenizer.preprocessor.gapStack=[],g.parser.tokenizer.preprocessor.skipNextNewLine=!1,g.parser.tokenizer.preprocessor.lastChunkWritten=!1,g.parser.tokenizer.preprocessor.endOfChunkHit=!1,g.parser.tokenizer.preprocessor.isEol=!1,setPoint(g,rO(h)),g.parser.tokenizer.write(h.value,!1),g.parser.tokenizer._runParsingLoop(),72===g.parser.tokenizer.state||78===g.parser.tokenizer.state){g.parser.tokenizer.preprocessor.lastChunkWritten=!0;let h=g.parser.tokenizer._consume();g.parser.tokenizer._callState(h)}}function unknown(h,g){if(g.options.passThrough&&g.options.passThrough.includes(h.type))!function(h,g){g.stitches=!0;let _="children"in h?nT({...h,children:[]}):nT(h);if("children"in h&&"children"in _){let E=raw({type:"root",children:h.children},g.options);_.children=E.children}lib_comment({type:"comment",value:{stitch:_}},g)}(h,g);else{let g="";throw rD.has(h.type)&&(g=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),Error("Cannot compile `"+h.type+"` node"+g)}}function resetTokenizer(h,g){setPoint(h,g);let _=h.parser.tokenizer.currentCharacterToken;_&&_.location&&(_.location.endLine=h.parser.tokenizer.preprocessor.line,_.location.endCol=h.parser.tokenizer.preprocessor.col+1,_.location.endOffset=h.parser.tokenizer.preprocessor.offset+1,h.parser.currentToken=_,h.parser._processToken(h.parser.currentToken)),h.parser.tokenizer.paused=!1,h.parser.tokenizer.inLoop=!1,h.parser.tokenizer.active=!1,h.parser.tokenizer.returnState=rt.DATA,h.parser.tokenizer.charRefCode=-1,h.parser.tokenizer.consumedAfterSnapshot=-1,h.parser.tokenizer.currentLocation=null,h.parser.tokenizer.currentCharacterToken=null,h.parser.tokenizer.currentToken=null,h.parser.tokenizer.currentAttr={name:"",value:""}}function setPoint(h,g){if(g&&void 0!==g.offset){let _={startLine:g.line,startCol:g.column,startOffset:g.offset,endLine:-1,endCol:-1,endOffset:-1};h.parser.tokenizer.preprocessor.lineStartPos=-g.column+1,h.parser.tokenizer.preprocessor.droppedBufferSize=g.offset,h.parser.tokenizer.preprocessor.line=g.line,h.parser.tokenizer.currentLocation=_}}function createParse5Location(h){let g=rO(h)||{line:void 0,column:void 0,offset:void 0},_=rN(h)||{line:void 0,column:void 0,offset:void 0},E={startLine:g.line,startCol:g.column,startOffset:g.offset,endLine:_.line,endCol:_.column,endOffset:_.offset};return E}function rehypeRaw(h){return function(g,_){let E=raw(g,{...h,file:_});return E}}let rP=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],rM={nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",times:"\xd7",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",divide:"\xf7",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},rF=["cent","copy","divide","gt","lt","not","para","times"],rB={}.hasOwnProperty,rH={};for(A in rM)rB.call(rM,A)&&(rH[rM[A]]=A);function formatSmart(h,g,_){let E,A=function(h,g,_){let E="&#x"+h.toString(16).toUpperCase();return _&&g&&!/[\dA-Fa-f]/.test(String.fromCharCode(g))?E:E+";"}(h,g,_.omitOptionalSemicolons);if((_.useNamedReferences||_.useShortestReferences)&&(E=function(h,g,_,E){let A=String.fromCharCode(h);if(rB.call(rH,A)){let h=rH[A],k="&"+h;return _&&rP.includes(h)&&!rF.includes(h)&&(!E||g&&61!==g&&/[^\da-z]/i.test(String.fromCharCode(g)))?k:k+";"}return""}(h,g,_.omitOptionalSemicolons,_.attribute)),(_.useShortestReferences||!E)&&_.useShortestReferences){let E=function(h,g,_){let E="&#"+String(h);return _&&g&&!/\d/.test(String.fromCharCode(g))?E:E+";"}(h,g,_.omitOptionalSemicolons);E.length<A.length&&(A=E)}return E&&(!_.useShortestReferences||E.length<A.length)?E:A}function stringifyEntities(h,g){return function(h,g){if(h=h.replace(g.subset?function(h){let g=[],_=-1;for(;++_<h.length;)g.push(h[_].replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"));return RegExp("(?:"+g.join("|")+")","g")}(g.subset):/["&'<>`]/g,basic),g.subset||g.escapeOnly)return h;return h.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,function(h,_,E){return g.format((h.charCodeAt(0)-55296)*1024+h.charCodeAt(1)-56320+65536,E.charCodeAt(_+2),g)}).replace(/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,basic);function basic(h,_,E){return g.format(h.charCodeAt(0),E.charCodeAt(_+1),g)}}(h,Object.assign({format:formatSmart},g))}let rU=/^>|^->|<!--|-->|--!>|<!-$/g,rz=[">"],rG=["<",">"];function ccount(h,g){let _=String(h);if("string"!=typeof g)throw TypeError("Expected character");let E=0,A=_.indexOf(g);for(;-1!==A;)E++,A=_.indexOf(g,A+g.length);return E}let r$=/[ \t\n\f\r]/g;function whitespace(h){return"object"==typeof h?"text"===h.type&&lib_empty(h.value):lib_empty(h)}function lib_empty(h){return""===h.replace(r$,"")}let rj=siblings(1),rq=siblings(-1),rV=[];function siblings(h){return function(g,_,E){let A=g?g.children:rV,k=(_||0)+h,b=A[k];if(!E)for(;b&&whitespace(b);)k+=h,b=A[k];return b}}let rY={}.hasOwnProperty;function omission(h){return function(g,_,E){return rY.call(h,g.tagName)&&h[g.tagName](g,_,E)}}let rW=omission({body:function(h,g,_){let E=rj(_,g);return!E||"comment"!==E.type},caption:headOrColgroupOrCaption,colgroup:headOrColgroupOrCaption,dd:function(h,g,_){let E=rj(_,g);return!E||"element"===E.type&&("dt"===E.tagName||"dd"===E.tagName)},dt:function(h,g,_){let E=rj(_,g);return!!(E&&"element"===E.type&&("dt"===E.tagName||"dd"===E.tagName))},head:headOrColgroupOrCaption,html:function(h,g,_){let E=rj(_,g);return!E||"comment"!==E.type},li:function(h,g,_){let E=rj(_,g);return!E||"element"===E.type&&"li"===E.tagName},optgroup:function(h,g,_){let E=rj(_,g);return!E||"element"===E.type&&"optgroup"===E.tagName},option:function(h,g,_){let E=rj(_,g);return!E||"element"===E.type&&("option"===E.tagName||"optgroup"===E.tagName)},p:function(h,g,_){let E=rj(_,g);return E?"element"===E.type&&("address"===E.tagName||"article"===E.tagName||"aside"===E.tagName||"blockquote"===E.tagName||"details"===E.tagName||"div"===E.tagName||"dl"===E.tagName||"fieldset"===E.tagName||"figcaption"===E.tagName||"figure"===E.tagName||"footer"===E.tagName||"form"===E.tagName||"h1"===E.tagName||"h2"===E.tagName||"h3"===E.tagName||"h4"===E.tagName||"h5"===E.tagName||"h6"===E.tagName||"header"===E.tagName||"hgroup"===E.tagName||"hr"===E.tagName||"main"===E.tagName||"menu"===E.tagName||"nav"===E.tagName||"ol"===E.tagName||"p"===E.tagName||"pre"===E.tagName||"section"===E.tagName||"table"===E.tagName||"ul"===E.tagName):!_||!("element"===_.type&&("a"===_.tagName||"audio"===_.tagName||"del"===_.tagName||"ins"===_.tagName||"map"===_.tagName||"noscript"===_.tagName||"video"===_.tagName))},rp:rubyElement,rt:rubyElement,tbody:function(h,g,_){let E=rj(_,g);return!E||"element"===E.type&&("tbody"===E.tagName||"tfoot"===E.tagName)},td:cells,tfoot:function(h,g,_){return!rj(_,g)},th:cells,thead:function(h,g,_){let E=rj(_,g);return!!(E&&"element"===E.type&&("tbody"===E.tagName||"tfoot"===E.tagName))},tr:function(h,g,_){let E=rj(_,g);return!E||"element"===E.type&&"tr"===E.tagName}});function headOrColgroupOrCaption(h,g,_){let E=rj(_,g,!0);return!E||"comment"!==E.type&&!("text"===E.type&&whitespace(E.value.charAt(0)))}function rubyElement(h,g,_){let E=rj(_,g);return!E||"element"===E.type&&("rp"===E.tagName||"rt"===E.tagName)}function cells(h,g,_){let E=rj(_,g);return!E||"element"===E.type&&("td"===E.tagName||"th"===E.tagName)}let rQ=omission({body:function(h){let g=rj(h,-1,!0);return!g||"comment"!==g.type&&!("text"===g.type&&whitespace(g.value.charAt(0)))&&!("element"===g.type&&("meta"===g.tagName||"link"===g.tagName||"script"===g.tagName||"style"===g.tagName||"template"===g.tagName))},colgroup:function(h,g,_){let E=rq(_,g),A=rj(h,-1,!0);return!(_&&E&&"element"===E.type&&"colgroup"===E.tagName&&rW(E,_.children.indexOf(E),_))&&!!(A&&"element"===A.type&&"col"===A.tagName)},head:function(h){let g=h.children,_=[],E=-1;for(;++E<g.length;){let h=g[E];if("element"===h.type&&("title"===h.tagName||"base"===h.tagName)){if(_.includes(h.tagName))return!1;_.push(h.tagName)}}return g.length>0},html:function(h){let g=rj(h,-1);return!g||"comment"!==g.type},tbody:function(h,g,_){let E=rq(_,g),A=rj(h,-1);return!(_&&E&&"element"===E.type&&("thead"===E.tagName||"tbody"===E.tagName)&&rW(E,_.children.indexOf(E),_))&&!!(A&&"element"===A.type&&"tr"===A.tagName)}}),rX={name:[["	\n\f\r &/=>".split(""),"	\n\f\r \"&'/=>`".split("")],["\x00	\n\f\r \"&'/<=>".split(""),"\x00	\n\f\r \"&'/<=>`".split("")]],unquoted:[["	\n\f\r &>".split(""),"\x00	\n\f\r \"&'<=>`".split("")],["\x00	\n\f\r \"&'<=>`".split(""),"\x00	\n\f\r \"&'<=>`".split("")]],single:[["&'".split(""),"\"&'`".split("")],["\x00&'".split(""),"\x00\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\x00"&'.split(""),"\x00\"&'`".split("")]]},rK=["<","&"];function text_text(h,g,_,E){return _&&"element"===_.type&&("script"===_.tagName||"style"===_.tagName)?h.value:stringifyEntities(h.value,Object.assign({},E.settings.characterReferences,{subset:rK}))}let rZ=zwitch("type",{invalid:function(h){throw Error("Expected node, not `"+h+"`")},unknown:function(h){throw Error("Cannot compile unknown node `"+h.type+"`")},handlers:{comment:function(h,g,_,E){return E.settings.bogusComments?"<?"+stringifyEntities(h.value,Object.assign({},E.settings.characterReferences,{subset:rz}))+">":"<!--"+h.value.replace(rU,function(h){return stringifyEntities(h,Object.assign({},E.settings.characterReferences,{subset:rG}))})+"-->"},doctype:function(h,g,_,E){return"<!"+(E.settings.upperDoctype?"DOCTYPE":"doctype")+(E.settings.tightDoctype?"":" ")+"html>"},element:function(h,g,_,E){let A;let k=E.schema,b="svg"!==k.space&&E.settings.omitOptionalTags,C="svg"===k.space?E.settings.closeEmptyElements:E.settings.voids.includes(h.tagName.toLowerCase()),S=[];"html"===k.space&&"svg"===h.tagName&&(E.schema=nF);let w=function(h,g){let _;let E=[],A=-1;if(g){for(_ in g)if(null!==g[_]&&void 0!==g[_]){let A=function(h,g,_){let E;let A=find(h.schema,g),k=h.settings.allowParseErrors&&"html"===h.schema.space?0:1,b=h.settings.allowDangerousCharacters?0:1,C=h.quote;if(A.overloadedBoolean&&(_===A.attribute||""===_)?_=!0:(A.boolean||A.overloadedBoolean&&"string"!=typeof _)&&(_=!!_),null==_||!1===_||"number"==typeof _&&Number.isNaN(_))return"";let S=stringifyEntities(A.attribute,Object.assign({},h.settings.characterReferences,{subset:rX.name[k][b]}));return!0===_?S:(_=Array.isArray(_)?(A.commaSeparated?comma_separated_tokens_stringify:space_separated_tokens_stringify)(_,{padLeft:!h.settings.tightCommaSeparatedLists}):String(_),h.settings.collapseEmptyAttributes&&!_)?S:(h.settings.preferUnquoted&&(E=stringifyEntities(_,Object.assign({},h.settings.characterReferences,{attribute:!0,subset:rX.unquoted[k][b]}))),E!==_&&(h.settings.quoteSmart&&ccount(_,C)>ccount(_,h.alternative)&&(C=h.alternative),E=C+stringifyEntities(_,Object.assign({},h.settings.characterReferences,{subset:("'"===C?rX.single:rX.double)[k][b],attribute:!0}))+C),S+(E?"="+E:E))}(h,_,g[_]);A&&E.push(A)}}for(;++A<E.length;){let g=h.settings.tightAttributes?E[A].charAt(E[A].length-1):void 0;A!==E.length-1&&'"'!==g&&"'"!==g&&(E[A]+=" ")}return E.join("")}(E,h.properties),N=E.all("html"===k.space&&"template"===h.tagName?h.content:h);return E.schema=k,N&&(C=!1),!w&&b&&rQ(h,g,_)||(S.push("<",h.tagName,w?" "+w:""),C&&("svg"===k.space||E.settings.closeSelfClosing)&&(A=w.charAt(w.length-1),(!E.settings.tightSelfClosing||"/"===A||A&&'"'!==A&&"'"!==A)&&S.push(" "),S.push("/")),S.push(">")),S.push(N),C||b&&rW(h,g,_)||S.push("</"+h.tagName+">"),S.join("")},raw:function(h,g,_,E){return E.settings.allowDangerousHtml?h.value:text_text(h,g,_,E)},root:function(h,g,_,E){return E.all(h)},text:text_text}}),rJ={},r0={},r1=[];function hast_util_to_html_lib_one(h,g,_){return rZ(h,g,_,this)}function hast_util_to_html_lib_all(h){let g=[],_=h&&h.children||r1,E=-1;for(;++E<_.length;)g[E]=this.one(_[E],E,h);return g.join("")}function rehypeStringify(h){let g={...this.data("settings"),...h};this.compiler=function(h){return function(h,g){let _=g||rJ,E=_.quote||'"';if('"'!==E&&"'"!==E)throw Error("Invalid quote `"+E+"`, expected `'` or `\"`");let A={one:hast_util_to_html_lib_one,all:hast_util_to_html_lib_all,settings:{omitOptionalTags:_.omitOptionalTags||!1,allowParseErrors:_.allowParseErrors||!1,allowDangerousCharacters:_.allowDangerousCharacters||!1,quoteSmart:_.quoteSmart||!1,preferUnquoted:_.preferUnquoted||!1,tightAttributes:_.tightAttributes||!1,upperDoctype:_.upperDoctype||!1,tightDoctype:_.tightDoctype||!1,bogusComments:_.bogusComments||!1,tightCommaSeparatedLists:_.tightCommaSeparatedLists||!1,tightSelfClosing:_.tightSelfClosing||!1,collapseEmptyAttributes:_.collapseEmptyAttributes||!1,allowDangerousHtml:_.allowDangerousHtml||!1,voids:_.voids||n0,characterReferences:_.characterReferences||r0,closeSelfClosing:_.closeSelfClosing||!1,closeEmptyElements:_.closeEmptyElements||!1},schema:"svg"===_.space?nF:nM,quote:E,alternative:'"'===E?"'":'"'};return A.one(Array.isArray(h)?{type:"root",children:h}:h,void 0,void 0)}(h,g)}}regexCheck(/[A-Za-z]/),regexCheck(/[\dA-Za-z]/),regexCheck(/[#-'*+\--9=?A-Z^-~]/),regexCheck(/\d/),regexCheck(/[\dA-Fa-f]/),regexCheck(/[!-/:-@[-`{-~]/);let r2=regexCheck(/\p{P}|\p{S}/u),r3=regexCheck(/\s/);function regexCheck(h){return function(g){return null!==g&&g>-1&&h.test(String.fromCharCode(g))}}let lib_convert=function(h){if(null==h)return unist_util_is_lib_ok;if("function"==typeof h)return lib_castFactory(h);if("object"==typeof h)return Array.isArray(h)?function(h){let g=[],_=-1;for(;++_<h.length;)g[_]=lib_convert(h[_]);return lib_castFactory(function(...h){let _=-1;for(;++_<g.length;)if(g[_].apply(this,h))return!0;return!1})}(h):lib_castFactory(function(g){let _;for(_ in h)if(g[_]!==h[_])return!1;return!0});if("string"==typeof h)return lib_castFactory(function(g){return g&&g.type===h});throw Error("Expected function, string, or object as test")};function lib_castFactory(h){return function(g,_,E){var A;return!!(null!==(A=g)&&"object"==typeof A&&"type"in A&&h.call(this,g,"number"==typeof _?_:void 0,E||void 0))}}function unist_util_is_lib_ok(){return!0}let r4=[],r5="phrasing",r6=["autolink","link","image","label"];function enterLiteralAutolink(h){this.enter({type:"link",title:null,url:"",children:[]},h)}function enterLiteralAutolinkValue(h){this.config.enter.autolinkProtocol.call(this,h)}function exitLiteralAutolinkHttp(h){this.config.exit.autolinkProtocol.call(this,h)}function exitLiteralAutolinkWww(h){this.config.exit.data.call(this,h);let g=this.stack[this.stack.length-1];g.type,g.url="http://"+this.sliceSerialize(h)}function exitLiteralAutolinkEmail(h){this.config.exit.autolinkEmail.call(this,h)}function exitLiteralAutolink(h){this.exit(h)}function transformGfmAutolinkLiterals(h){!function(h,g,_){let E=lib_convert((_||{}).ignore||[]),A=function(h){let g=[];if(!Array.isArray(h))throw TypeError("Expected find and replace tuple or list of tuples");let _=!h[0]||Array.isArray(h[0])?h:[h],E=-1;for(;++E<_.length;){var A;let h=_[E];g.push(["string"==typeof(A=h[0])?RegExp(function(h){if("string"!=typeof h)throw TypeError("Expected a string");return h.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(A),"g"):A,function(h){return"function"==typeof h?h:function(){return h}}(h[1])])}return g}(g),k=-1;for(;++k<A.length;)!function(h,g,_,E){let A;"function"==typeof g&&"function"!=typeof _?(E=_,_=g):A=g;let k=lib_convert(A),b=E?-1:1;(function factory(h,A,C){let S=h&&"object"==typeof h?h:{};if("string"==typeof S.type){let g="string"==typeof S.tagName?S.tagName:"string"==typeof S.name?S.name:void 0;Object.defineProperty(visit,"name",{value:"node ("+h.type+(g?"<"+g+">":"")+")"})}return visit;function visit(){var S;let w,N,R,L=r4;if((!g||k(h,A,C[C.length-1]||void 0))&&!1===(L=Array.isArray(S=_(h,C))?S:"number"==typeof S?[!0,S]:null==S?r4:[S])[0])return L;if("children"in h&&h.children&&h.children&&"skip"!==L[0])for(N=(E?h.children.length:-1)+b,R=C.concat(h);N>-1&&N<h.children.length;){let g=h.children[N];if(!1===(w=factory(g,N,R)())[0])return w;N="number"==typeof w[1]?w[1]:N+b}return L}})(h,void 0,[])()}(h,"text",visitor);function visitor(h,g){let _,b=-1;for(;++b<g.length;){let h=g[b],A=_?_.children:void 0;if(E(h,A?A.indexOf(h):void 0,_))return;_=h}if(_)return function(h,g){let _=g[g.length-1],E=A[k][0],b=A[k][1],C=0,S=_.children,w=S.indexOf(h),N=!1,R=[];E.lastIndex=0;let L=E.exec(h.value);for(;L;){let _=L.index,A={index:L.index,input:L.input,stack:[...g,h]},k=b(...L,A);if("string"==typeof k&&(k=k.length>0?{type:"text",value:k}:void 0),!1===k?E.lastIndex=_+1:(C!==_&&R.push({type:"text",value:h.value.slice(C,_)}),Array.isArray(k)?R.push(...k):k&&R.push(k),C=_+L[0].length,N=!0),!E.global)break;L=E.exec(h.value)}return N?(C<h.value.length&&R.push({type:"text",value:h.value.slice(C)}),_.children.splice(w,1,...R)):R=[h],w+R.length}(h,g)}}(h,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,findUrl],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,findEmail]],{ignore:["link","linkReference"]})}function findUrl(h,g,_,E,A){let k="";if(!previous(A)||(/^w/i.test(g)&&(_=g+_,g="",k="http://"),!function(h){let g=h.split(".");return!(g.length<2||g[g.length-1]&&(/_/.test(g[g.length-1])||!/[a-zA-Z\d]/.test(g[g.length-1]))||g[g.length-2]&&(/_/.test(g[g.length-2])||!/[a-zA-Z\d]/.test(g[g.length-2])))}(_)))return!1;let b=function(h){let g=/[!"&'),.:;<>?\]}]+$/.exec(h);if(!g)return[h,void 0];h=h.slice(0,g.index);let _=g[0],E=_.indexOf(")"),A=ccount(h,"("),k=ccount(h,")");for(;-1!==E&&A>k;)h+=_.slice(0,E+1),E=(_=_.slice(E+1)).indexOf(")"),k++;return[h,_]}(_+E);if(!b[0])return!1;let C={type:"link",title:null,url:k+g+b[0],children:[{type:"text",value:g+b[0]}]};return b[1]?[C,{type:"text",value:b[1]}]:C}function findEmail(h,g,_,E){return!(!previous(E,!0)||/[-\d_]$/.test(_))&&{type:"link",title:null,url:"mailto:"+g+"@"+_,children:[{type:"text",value:g+"@"+_}]}}function previous(h,g){let _=h.input.charCodeAt(h.index-1);return(0===h.index||r3(_)||r2(_))&&(!g||47!==_)}function normalizeIdentifier(h){return h.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}function enterFootnoteDefinition(h){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},h)}function enterFootnoteDefinitionLabelString(){this.buffer()}function exitFootnoteDefinitionLabelString(h){let g=this.resume(),_=this.stack[this.stack.length-1];_.type,_.label=g,_.identifier=normalizeIdentifier(this.sliceSerialize(h)).toLowerCase()}function exitFootnoteDefinition(h){this.exit(h)}function enterFootnoteCall(h){this.enter({type:"footnoteReference",identifier:"",label:""},h)}function enterFootnoteCallString(){this.buffer()}function exitFootnoteCallString(h){let g=this.resume(),_=this.stack[this.stack.length-1];_.type,_.label=g,_.identifier=normalizeIdentifier(this.sliceSerialize(h)).toLowerCase()}function exitFootnoteCall(h){this.exit(h)}function footnoteReference(h,g,_,E){let A=_.createTracker(E),k=A.move("[^"),b=_.enter("footnoteReference"),C=_.enter("reference");return k+=A.move(_.safe(_.associationId(h),{...A.current(),before:k,after:"]"})),C(),b(),k+=A.move("]")}function footnoteDefinition(h,g,_,E){let A=_.createTracker(E),k=A.move("[^"),b=_.enter("footnoteDefinition"),C=_.enter("label");return k+=A.move(_.safe(_.associationId(h),{...A.current(),before:k,after:"]"})),C(),k+=A.move("]:"+(h.children&&h.children.length>0?" ":"")),A.shift(4),k+=A.move(_.indentLines(_.containerFlow(h,A.current()),map)),b(),k}function map(h,g,_){return 0===g?h:(_?"":"    ")+h}footnoteReference.peek=function(){return"["};let r8=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function enterStrikethrough(h){this.enter({type:"delete",children:[]},h)}function exitStrikethrough(h){this.exit(h)}function handleDelete(h,g,_,E){let A=_.createTracker(E),k=_.enter("strikethrough"),b=A.move("~~");return b+=_.containerPhrasing(h,{...A.current(),before:b,after:"~"})+A.move("~~"),k(),b}function defaultStringLength(h){return h.length}function toAlignment(h){let g="string"==typeof h?h.codePointAt(0):0;return 67===g||99===g?99:76===g||108===g?108:82===g||114===g?114:0}function blockquote_map(h,g,_){return">"+(_?"":" ")+h}function listInScope(h,g,_){if("string"==typeof g&&(g=[g]),!g||0===g.length)return _;let E=-1;for(;++E<g.length;)if(h.includes(g[E]))return!0;return!1}function hardBreak(h,g,_,E){let A=-1;for(;++A<_.unsafe.length;){var k,b;if("\n"===_.unsafe[A].character&&listInScope(k=_.stack,(b=_.unsafe[A]).inConstruct,!0)&&!listInScope(k,b.notInConstruct,!1))return/[ \t]/.test(E.before)?"":" "}return"\\\n"}function longestStreak(h,g){let _=String(h),E=_.indexOf(g),A=E,k=0,b=0;if("string"!=typeof g)throw TypeError("Expected substring");for(;-1!==E;)E===A?++k>b&&(b=k):k=1,A=E+g.length,E=_.indexOf(g,A);return b}function code_map(h,g,_){return(_?"":"    ")+h}function checkQuote(h){let g=h.options.quote||'"';if('"'!==g&&"'"!==g)throw Error("Cannot serialize title with `"+g+"` for `options.quote`, expected `\"`, or `'`");return g}function emphasis(h,g,_,E){let A=function(h){let g=h.options.emphasis||"*";if("*"!==g&&"_"!==g)throw Error("Cannot serialize emphasis with `"+g+"` for `options.emphasis`, expected `*`, or `_`");return g}(_),k=_.enter("emphasis"),b=_.createTracker(E),C=b.move(A);return C+=b.move(_.containerPhrasing(h,{before:C,after:A,...b.current()}))+b.move(A),k(),C}handleDelete.peek=function(){return"~"},emphasis.peek=function(h,g,_){return _.options.emphasis||"*"};let unist_util_is_lib_convert=function(h){if(null==h)return node_modules_unist_util_is_lib_ok;if("function"==typeof h)return unist_util_is_lib_castFactory(h);if("object"==typeof h)return Array.isArray(h)?function(h){let g=[],_=-1;for(;++_<h.length;)g[_]=unist_util_is_lib_convert(h[_]);return unist_util_is_lib_castFactory(function(...h){let _=-1;for(;++_<g.length;)if(g[_].apply(this,h))return!0;return!1})}(h):unist_util_is_lib_castFactory(function(g){let _;for(_ in h)if(g[_]!==h[_])return!1;return!0});if("string"==typeof h)return unist_util_is_lib_castFactory(function(g){return g&&g.type===h});throw Error("Expected function, string, or object as test")};function unist_util_is_lib_castFactory(h){return function(g,_,E){var A;return!!(null!==(A=g)&&"object"==typeof A&&"type"in A&&h.call(this,g,"number"==typeof _?_:void 0,E||void 0))}}function node_modules_unist_util_is_lib_ok(){return!0}let r9=[],r7={};function lib_toString(h,g){let _=g||r7,E="boolean"!=typeof _.includeImageAlt||_.includeImageAlt,A="boolean"!=typeof _.includeHtml||_.includeHtml;return mdast_util_to_string_lib_one(h,E,A)}function mdast_util_to_string_lib_one(h,g,_){if(h&&"object"==typeof h){if("value"in h)return"html"!==h.type||_?h.value:"";if(g&&"alt"in h&&h.alt)return h.alt;if("children"in h)return mdast_util_to_string_lib_all(h.children,g,_)}return Array.isArray(h)?mdast_util_to_string_lib_all(h,g,_):""}function mdast_util_to_string_lib_all(h,g,_){let E=[],A=-1;for(;++A<h.length;)E[A]=mdast_util_to_string_lib_one(h[A],g,_);return E.join("")}function html_html(h){return h.value||""}function image_image(h,g,_,E){let A=checkQuote(_),k='"'===A?"Quote":"Apostrophe",b=_.enter("image"),C=_.enter("label"),S=_.createTracker(E),w=S.move("![");return w+=S.move(_.safe(h.alt,{before:w,after:"]",...S.current()}))+S.move("]("),C(),!h.url&&h.title||/[\0- \u007F]/.test(h.url)?(C=_.enter("destinationLiteral"),w+=S.move("<"),w+=S.move(_.safe(h.url,{before:w,after:">",...S.current()}))+S.move(">")):(C=_.enter("destinationRaw"),w+=S.move(_.safe(h.url,{before:w,after:h.title?" ":")",...S.current()}))),C(),h.title&&(C=_.enter(`title${k}`),w+=S.move(" "+A),w+=S.move(_.safe(h.title,{before:w,after:A,...S.current()}))+S.move(A),C()),w+=S.move(")"),b(),w}function imageReference(h,g,_,E){let A=h.referenceType,k=_.enter("imageReference"),b=_.enter("label"),C=_.createTracker(E),S=C.move("!["),w=_.safe(h.alt,{before:S,after:"]",...C.current()});S+=C.move(w+"]["),b();let N=_.stack;_.stack=[],b=_.enter("reference");let R=_.safe(_.associationId(h),{before:S,after:"]",...C.current()});return b(),_.stack=N,k(),"full"!==A&&w&&w===R?"shortcut"===A?S=S.slice(0,-1):S+=C.move("]"):S+=C.move(R+"]"),S}function inlineCode(h,g,_){let E=h.value||"",A="`",k=-1;for(;RegExp("(^|[^`])"+A+"([^`]|$)").test(E);)A+="`";for(/[^ \r\n]/.test(E)&&(/^[ \r\n]/.test(E)&&/[ \r\n]$/.test(E)||/^`|`$/.test(E))&&(E=" "+E+" ");++k<_.unsafe.length;){let h;let g=_.unsafe[k],A=_.compilePattern(g);if(g.atBreak)for(;h=A.exec(E);){let g=h.index;10===E.charCodeAt(g)&&13===E.charCodeAt(g-1)&&g--,E=E.slice(0,g)+" "+E.slice(h.index+1)}}return A+E+A}function formatLinkAsAutolink(h,g){let _=lib_toString(h);return!!(!g.options.resourceLink&&h.url&&!h.title&&h.children&&1===h.children.length&&"text"===h.children[0].type&&(_===h.url||"mailto:"+_===h.url)&&/^[a-z][a-z+.-]+:/i.test(h.url)&&!/[\0- <>\u007F]/.test(h.url))}function link_link(h,g,_,E){let A,k;let b=checkQuote(_),C='"'===b?"Quote":"Apostrophe",S=_.createTracker(E);if(formatLinkAsAutolink(h,_)){let g=_.stack;_.stack=[],A=_.enter("autolink");let E=S.move("<");return E+=S.move(_.containerPhrasing(h,{before:E,after:">",...S.current()}))+S.move(">"),A(),_.stack=g,E}A=_.enter("link"),k=_.enter("label");let w=S.move("[");return w+=S.move(_.containerPhrasing(h,{before:w,after:"](",...S.current()}))+S.move("]("),k(),!h.url&&h.title||/[\0- \u007F]/.test(h.url)?(k=_.enter("destinationLiteral"),w+=S.move("<"),w+=S.move(_.safe(h.url,{before:w,after:">",...S.current()}))+S.move(">")):(k=_.enter("destinationRaw"),w+=S.move(_.safe(h.url,{before:w,after:h.title?" ":")",...S.current()}))),k(),h.title&&(k=_.enter(`title${C}`),w+=S.move(" "+b),w+=S.move(_.safe(h.title,{before:w,after:b,...S.current()}))+S.move(b),k()),w+=S.move(")"),A(),w}function linkReference(h,g,_,E){let A=h.referenceType,k=_.enter("linkReference"),b=_.enter("label"),C=_.createTracker(E),S=C.move("["),w=_.containerPhrasing(h,{before:S,after:"]",...C.current()});S+=C.move(w+"]["),b();let N=_.stack;_.stack=[],b=_.enter("reference");let R=_.safe(_.associationId(h),{before:S,after:"]",...C.current()});return b(),_.stack=N,k(),"full"!==A&&w&&w===R?"shortcut"===A?S=S.slice(0,-1):S+=C.move("]"):S+=C.move(R+"]"),S}function checkBullet(h){let g=h.options.bullet||"*";if("*"!==g&&"+"!==g&&"-"!==g)throw Error("Cannot serialize items with `"+g+"` for `options.bullet`, expected `*`, `+`, or `-`");return g}function checkRule(h){let g=h.options.rule||"*";if("*"!==g&&"-"!==g&&"_"!==g)throw Error("Cannot serialize rules with `"+g+"` for `options.rule`, expected `*`, `-`, or `_`");return g}html_html.peek=function(){return"<"},image_image.peek=function(){return"!"},imageReference.peek=function(){return"!"},inlineCode.peek=function(){return"`"},link_link.peek=function(h,g,_){return formatLinkAsAutolink(h,_)?"<":"["},linkReference.peek=function(){return"["};let ie=unist_util_is_lib_convert(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function strong(h,g,_,E){let A=function(h){let g=h.options.strong||"*";if("*"!==g&&"_"!==g)throw Error("Cannot serialize strong with `"+g+"` for `options.strong`, expected `*`, or `_`");return g}(_),k=_.enter("strong"),b=_.createTracker(E),C=b.move(A+A);return C+=b.move(_.containerPhrasing(h,{before:C,after:A,...b.current()}))+b.move(A+A),k(),C}strong.peek=function(h,g,_){return _.options.strong||"*"};let it={blockquote:function(h,g,_,E){let A=_.enter("blockquote"),k=_.createTracker(E);k.move("> "),k.shift(2);let b=_.indentLines(_.containerFlow(h,k.current()),blockquote_map);return A(),b},break:hardBreak,code:function(h,g,_,E){let A=function(h){let g=h.options.fence||"`";if("`"!==g&&"~"!==g)throw Error("Cannot serialize code with `"+g+"` for `options.fence`, expected `` ` `` or `~`");return g}(_),k=h.value||"",b="`"===A?"GraveAccent":"Tilde";if(!1===_.options.fences&&h.value&&!h.lang&&/[^ \r\n]/.test(h.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(h.value)){let h=_.enter("codeIndented"),g=_.indentLines(k,code_map);return h(),g}let C=_.createTracker(E),S=A.repeat(Math.max(longestStreak(k,A)+1,3)),w=_.enter("codeFenced"),N=C.move(S);if(h.lang){let g=_.enter(`codeFencedLang${b}`);N+=C.move(_.safe(h.lang,{before:N,after:" ",encode:["`"],...C.current()})),g()}if(h.lang&&h.meta){let g=_.enter(`codeFencedMeta${b}`);N+=C.move(" "),N+=C.move(_.safe(h.meta,{before:N,after:"\n",encode:["`"],...C.current()})),g()}return N+=C.move("\n"),k&&(N+=C.move(k+"\n")),N+=C.move(S),w(),N},definition:function(h,g,_,E){let A=checkQuote(_),k='"'===A?"Quote":"Apostrophe",b=_.enter("definition"),C=_.enter("label"),S=_.createTracker(E),w=S.move("[");return w+=S.move(_.safe(_.associationId(h),{before:w,after:"]",...S.current()}))+S.move("]: "),C(),!h.url||/[\0- \u007F]/.test(h.url)?(C=_.enter("destinationLiteral"),w+=S.move("<"),w+=S.move(_.safe(h.url,{before:w,after:">",...S.current()}))+S.move(">")):(C=_.enter("destinationRaw"),w+=S.move(_.safe(h.url,{before:w,after:h.title?" ":"\n",...S.current()}))),C(),h.title&&(C=_.enter(`title${k}`),w+=S.move(" "+A),w+=S.move(_.safe(h.title,{before:w,after:A,...S.current()}))+S.move(A),C()),b(),w},emphasis:emphasis,hardBreak:hardBreak,heading:function(h,g,_,E){var A,k;let b,C,S,w;let N=Math.max(Math.min(6,h.depth||1),1),R=_.createTracker(E);if(b=!1,"function"==typeof(A=function(h){if("value"in h&&/\r?\n|\r/.test(h.value)||"break"===h.type)return b=!0,!1})&&"function"!=typeof k?(S=void 0,w=A,C=k):(S=A,w=k,C=void 0),function(h,g,_,E){let A;"function"==typeof g&&"function"!=typeof _?(E=_,_=g):A=g;let k=unist_util_is_lib_convert(A),b=E?-1:1;(function factory(h,A,C){let S=h&&"object"==typeof h?h:{};if("string"==typeof S.type){let g="string"==typeof S.tagName?S.tagName:"string"==typeof S.name?S.name:void 0;Object.defineProperty(visit,"name",{value:"node ("+h.type+(g?"<"+g+">":"")+")"})}return visit;function visit(){var S;let w,N,R,L=r9;if((!g||k(h,A,C[C.length-1]||void 0))&&!1===(L=Array.isArray(S=_(h,C))?S:"number"==typeof S?[!0,S]:null==S?r9:[S])[0])return L;if("children"in h&&h.children&&h.children&&"skip"!==L[0])for(N=(E?h.children.length:-1)+b,R=C.concat(h);N>-1&&N<h.children.length;){let g=h.children[N];if(!1===(w=factory(g,N,R)())[0])return w;N="number"==typeof w[1]?w[1]:N+b}return L}})(h,void 0,[])()}(h,S,function(h,g){let _=g[g.length-1],E=_?_.children.indexOf(h):void 0;return w(h,E,_)},C),(!h.depth||h.depth<3)&&lib_toString(h)&&(_.options.setext||b)){let g=_.enter("headingSetext"),E=_.enter("phrasing"),A=_.containerPhrasing(h,{...R.current(),before:"\n",after:"\n"});return E(),g(),A+"\n"+(1===N?"=":"-").repeat(A.length-(Math.max(A.lastIndexOf("\r"),A.lastIndexOf("\n"))+1))}let L="#".repeat(N),P=_.enter("headingAtx"),z=_.enter("phrasing");R.move(L+" ");let G=_.containerPhrasing(h,{before:"# ",after:"\n",...R.current()});return/^[\t ]/.test(G)&&(G="&#x"+G.charCodeAt(0).toString(16).toUpperCase()+";"+G.slice(1)),G=G?L+" "+G:L,_.options.closeAtx&&(G+=" "+L),z(),P(),G},html:html_html,image:image_image,imageReference:imageReference,inlineCode:inlineCode,link:link_link,linkReference:linkReference,list:function(h,g,_,E){let A=_.enter("list"),k=_.bulletCurrent,b=h.ordered?function(h){let g=h.options.bulletOrdered||".";if("."!==g&&")"!==g)throw Error("Cannot serialize items with `"+g+"` for `options.bulletOrdered`, expected `.` or `)`");return g}(_):checkBullet(_),C=h.ordered?"."===b?")":".":function(h){let g=checkBullet(h),_=h.options.bulletOther;if(!_)return"*"===g?"-":"*";if("*"!==_&&"+"!==_&&"-"!==_)throw Error("Cannot serialize items with `"+_+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(_===g)throw Error("Expected `bullet` (`"+g+"`) and `bulletOther` (`"+_+"`) to be different");return _}(_),S=!!g&&!!_.bulletLastUsed&&b===_.bulletLastUsed;if(!h.ordered){let g=h.children?h.children[0]:void 0;if("*"!==b&&"-"!==b||!g||g.children&&g.children[0]||"list"!==_.stack[_.stack.length-1]||"listItem"!==_.stack[_.stack.length-2]||"list"!==_.stack[_.stack.length-3]||"listItem"!==_.stack[_.stack.length-4]||0!==_.indexStack[_.indexStack.length-1]||0!==_.indexStack[_.indexStack.length-2]||0!==_.indexStack[_.indexStack.length-3]||(S=!0),checkRule(_)===b&&g){let g=-1;for(;++g<h.children.length;){let _=h.children[g];if(_&&"listItem"===_.type&&_.children&&_.children[0]&&"thematicBreak"===_.children[0].type){S=!0;break}}}}S&&(b=C),_.bulletCurrent=b;let w=_.containerFlow(h,E);return _.bulletLastUsed=b,_.bulletCurrent=k,A(),w},listItem:function(h,g,_,E){let A=function(h){let g=h.options.listItemIndent||"one";if("tab"!==g&&"one"!==g&&"mixed"!==g)throw Error("Cannot serialize items with `"+g+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return g}(_),k=_.bulletCurrent||checkBullet(_);g&&"list"===g.type&&g.ordered&&(k=("number"==typeof g.start&&g.start>-1?g.start:1)+(!1===_.options.incrementListMarker?0:g.children.indexOf(h))+k);let b=k.length+1;("tab"===A||"mixed"===A&&(g&&"list"===g.type&&g.spread||h.spread))&&(b=4*Math.ceil(b/4));let C=_.createTracker(E);C.move(k+" ".repeat(b-k.length)),C.shift(b);let S=_.enter("listItem"),w=_.indentLines(_.containerFlow(h,C.current()),function(h,g,_){return g?(_?"":" ".repeat(b))+h:(_?k:k+" ".repeat(b-k.length))+h});return S(),w},paragraph:function(h,g,_,E){let A=_.enter("paragraph"),k=_.enter("phrasing"),b=_.containerPhrasing(h,E);return k(),A(),b},root:function(h,g,_,E){let A=h.children.some(function(h){return ie(h)}),k=A?_.containerPhrasing:_.containerFlow;return k.call(_,h,E)},strong:strong,text:function(h,g,_,E){return _.safe(h.value,E)},thematicBreak:function(h,g,_){let E=(checkRule(_)+(_.options.ruleSpaces?" ":"")).repeat(function(h){let g=h.options.ruleRepetition||3;if(g<3)throw Error("Cannot serialize rules with repetition `"+g+"` for `options.ruleRepetition`, expected `3` or more");return g}(_));return _.options.ruleSpaces?E.slice(0,-1):E}};function enterTable(h){let g=h._align;this.enter({type:"table",align:g.map(function(h){return"none"===h?null:h}),children:[]},h),this.data.inTable=!0}function exitTable(h){this.exit(h),this.data.inTable=void 0}function enterRow(h){this.enter({type:"tableRow",children:[]},h)}function exit(h){this.exit(h)}function enterCell(h){this.enter({type:"tableCell",children:[]},h)}function exitCodeText(h){let g=this.resume();this.data.inTable&&(g=g.replace(/\\([\\|])/g,replace));let _=this.stack[this.stack.length-1];_.type,_.value=g,this.exit(h)}function replace(h,g){return"|"===g?g:h}function handle_blockquote_map(h,g,_){return">"+(_?"":" ")+h}function pattern_in_scope_listInScope(h,g,_){if("string"==typeof g&&(g=[g]),!g||0===g.length)return _;let E=-1;for(;++E<g.length;)if(h.includes(g[E]))return!0;return!1}function break_hardBreak(h,g,_,E){let A=-1;for(;++A<_.unsafe.length;){var k,b;if("\n"===_.unsafe[A].character&&pattern_in_scope_listInScope(k=_.stack,(b=_.unsafe[A]).inConstruct,!0)&&!pattern_in_scope_listInScope(k,b.notInConstruct,!1))return/[ \t]/.test(E.before)?"":" "}return"\\\n"}function handle_code_map(h,g,_){return(_?"":"    ")+h}function check_quote_checkQuote(h){let g=h.options.quote||'"';if('"'!==g&&"'"!==g)throw Error("Cannot serialize title with `"+g+"` for `options.quote`, expected `\"`, or `'`");return g}function emphasis_emphasis(h,g,_,E){let A=function(h){let g=h.options.emphasis||"*";if("*"!==g&&"_"!==g)throw Error("Cannot serialize emphasis with `"+g+"` for `options.emphasis`, expected `*`, or `_`");return g}(_),k=_.enter("emphasis"),b=_.createTracker(E),C=b.move(A);return C+=b.move(_.containerPhrasing(h,{before:C,after:A,...b.current()}))+b.move(A),k(),C}emphasis_emphasis.peek=function(h,g,_){return _.options.emphasis||"*"};let node_modules_unist_util_is_lib_convert=function(h){if(null==h)return mdast_util_gfm_task_list_item_node_modules_unist_util_is_lib_ok;if("function"==typeof h)return node_modules_unist_util_is_lib_castFactory(h);if("object"==typeof h)return Array.isArray(h)?function(h){let g=[],_=-1;for(;++_<h.length;)g[_]=node_modules_unist_util_is_lib_convert(h[_]);return node_modules_unist_util_is_lib_castFactory(function(...h){let _=-1;for(;++_<g.length;)if(g[_].apply(this,h))return!0;return!1})}(h):node_modules_unist_util_is_lib_castFactory(function(g){let _;for(_ in h)if(g[_]!==h[_])return!1;return!0});if("string"==typeof h)return node_modules_unist_util_is_lib_castFactory(function(g){return g&&g.type===h});throw Error("Expected function, string, or object as test")};function node_modules_unist_util_is_lib_castFactory(h){return function(g,_,E){var A;return!!(null!==(A=g)&&"object"==typeof A&&"type"in A&&h.call(this,g,"number"==typeof _?_:void 0,E||void 0))}}function mdast_util_gfm_task_list_item_node_modules_unist_util_is_lib_ok(){return!0}let ir=[],ii={};function mdast_util_to_string_lib_toString(h,g){let _=g||ii,E="boolean"!=typeof _.includeImageAlt||_.includeImageAlt,A="boolean"!=typeof _.includeHtml||_.includeHtml;return node_modules_mdast_util_to_string_lib_one(h,E,A)}function node_modules_mdast_util_to_string_lib_one(h,g,_){if(h&&"object"==typeof h){if("value"in h)return"html"!==h.type||_?h.value:"";if(g&&"alt"in h&&h.alt)return h.alt;if("children"in h)return node_modules_mdast_util_to_string_lib_all(h.children,g,_)}return Array.isArray(h)?node_modules_mdast_util_to_string_lib_all(h,g,_):""}function node_modules_mdast_util_to_string_lib_all(h,g,_){let E=[],A=-1;for(;++A<h.length;)E[A]=node_modules_mdast_util_to_string_lib_one(h[A],g,_);return E.join("")}function handle_html_html(h){return h.value||""}function handle_image_image(h,g,_,E){let A=check_quote_checkQuote(_),k='"'===A?"Quote":"Apostrophe",b=_.enter("image"),C=_.enter("label"),S=_.createTracker(E),w=S.move("![");return w+=S.move(_.safe(h.alt,{before:w,after:"]",...S.current()}))+S.move("]("),C(),!h.url&&h.title||/[\0- \u007F]/.test(h.url)?(C=_.enter("destinationLiteral"),w+=S.move("<"),w+=S.move(_.safe(h.url,{before:w,after:">",...S.current()}))+S.move(">")):(C=_.enter("destinationRaw"),w+=S.move(_.safe(h.url,{before:w,after:h.title?" ":")",...S.current()}))),C(),h.title&&(C=_.enter(`title${k}`),w+=S.move(" "+A),w+=S.move(_.safe(h.title,{before:w,after:A,...S.current()}))+S.move(A),C()),w+=S.move(")"),b(),w}function image_reference_imageReference(h,g,_,E){let A=h.referenceType,k=_.enter("imageReference"),b=_.enter("label"),C=_.createTracker(E),S=C.move("!["),w=_.safe(h.alt,{before:S,after:"]",...C.current()});S+=C.move(w+"]["),b();let N=_.stack;_.stack=[],b=_.enter("reference");let R=_.safe(_.associationId(h),{before:S,after:"]",...C.current()});return b(),_.stack=N,k(),"full"!==A&&w&&w===R?"shortcut"===A?S=S.slice(0,-1):S+=C.move("]"):S+=C.move(R+"]"),S}function inline_code_inlineCode(h,g,_){let E=h.value||"",A="`",k=-1;for(;RegExp("(^|[^`])"+A+"([^`]|$)").test(E);)A+="`";for(/[^ \r\n]/.test(E)&&(/^[ \r\n]/.test(E)&&/[ \r\n]$/.test(E)||/^`|`$/.test(E))&&(E=" "+E+" ");++k<_.unsafe.length;){let h;let g=_.unsafe[k],A=_.compilePattern(g);if(g.atBreak)for(;h=A.exec(E);){let g=h.index;10===E.charCodeAt(g)&&13===E.charCodeAt(g-1)&&g--,E=E.slice(0,g)+" "+E.slice(h.index+1)}}return A+E+A}function format_link_as_autolink_formatLinkAsAutolink(h,g){let _=mdast_util_to_string_lib_toString(h);return!!(!g.options.resourceLink&&h.url&&!h.title&&h.children&&1===h.children.length&&"text"===h.children[0].type&&(_===h.url||"mailto:"+_===h.url)&&/^[a-z][a-z+.-]+:/i.test(h.url)&&!/[\0- <>\u007F]/.test(h.url))}function handle_link_link(h,g,_,E){let A,k;let b=check_quote_checkQuote(_),C='"'===b?"Quote":"Apostrophe",S=_.createTracker(E);if(format_link_as_autolink_formatLinkAsAutolink(h,_)){let g=_.stack;_.stack=[],A=_.enter("autolink");let E=S.move("<");return E+=S.move(_.containerPhrasing(h,{before:E,after:">",...S.current()}))+S.move(">"),A(),_.stack=g,E}A=_.enter("link"),k=_.enter("label");let w=S.move("[");return w+=S.move(_.containerPhrasing(h,{before:w,after:"](",...S.current()}))+S.move("]("),k(),!h.url&&h.title||/[\0- \u007F]/.test(h.url)?(k=_.enter("destinationLiteral"),w+=S.move("<"),w+=S.move(_.safe(h.url,{before:w,after:">",...S.current()}))+S.move(">")):(k=_.enter("destinationRaw"),w+=S.move(_.safe(h.url,{before:w,after:h.title?" ":")",...S.current()}))),k(),h.title&&(k=_.enter(`title${C}`),w+=S.move(" "+b),w+=S.move(_.safe(h.title,{before:w,after:b,...S.current()}))+S.move(b),k()),w+=S.move(")"),A(),w}function link_reference_linkReference(h,g,_,E){let A=h.referenceType,k=_.enter("linkReference"),b=_.enter("label"),C=_.createTracker(E),S=C.move("["),w=_.containerPhrasing(h,{before:S,after:"]",...C.current()});S+=C.move(w+"]["),b();let N=_.stack;_.stack=[],b=_.enter("reference");let R=_.safe(_.associationId(h),{before:S,after:"]",...C.current()});return b(),_.stack=N,k(),"full"!==A&&w&&w===R?"shortcut"===A?S=S.slice(0,-1):S+=C.move("]"):S+=C.move(R+"]"),S}function check_bullet_checkBullet(h){let g=h.options.bullet||"*";if("*"!==g&&"+"!==g&&"-"!==g)throw Error("Cannot serialize items with `"+g+"` for `options.bullet`, expected `*`, `+`, or `-`");return g}function check_rule_checkRule(h){let g=h.options.rule||"*";if("*"!==g&&"-"!==g&&"_"!==g)throw Error("Cannot serialize rules with `"+g+"` for `options.rule`, expected `*`, `-`, or `_`");return g}handle_html_html.peek=function(){return"<"},handle_image_image.peek=function(){return"!"},image_reference_imageReference.peek=function(){return"!"},inline_code_inlineCode.peek=function(){return"`"},handle_link_link.peek=function(h,g,_){return format_link_as_autolink_formatLinkAsAutolink(h,_)?"<":"["},link_reference_linkReference.peek=function(){return"["};let ia=node_modules_unist_util_is_lib_convert(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function strong_strong(h,g,_,E){let A=function(h){let g=h.options.strong||"*";if("*"!==g&&"_"!==g)throw Error("Cannot serialize strong with `"+g+"` for `options.strong`, expected `*`, or `_`");return g}(_),k=_.enter("strong"),b=_.createTracker(E),C=b.move(A+A);return C+=b.move(_.containerPhrasing(h,{before:C,after:A,...b.current()}))+b.move(A+A),k(),C}strong_strong.peek=function(h,g,_){return _.options.strong||"*"};let io={blockquote:function(h,g,_,E){let A=_.enter("blockquote"),k=_.createTracker(E);k.move("> "),k.shift(2);let b=_.indentLines(_.containerFlow(h,k.current()),handle_blockquote_map);return A(),b},break:break_hardBreak,code:function(h,g,_,E){let A=function(h){let g=h.options.fence||"`";if("`"!==g&&"~"!==g)throw Error("Cannot serialize code with `"+g+"` for `options.fence`, expected `` ` `` or `~`");return g}(_),k=h.value||"",b="`"===A?"GraveAccent":"Tilde";if(!1===_.options.fences&&h.value&&!h.lang&&/[^ \r\n]/.test(h.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(h.value)){let h=_.enter("codeIndented"),g=_.indentLines(k,handle_code_map);return h(),g}let C=_.createTracker(E),S=A.repeat(Math.max(longestStreak(k,A)+1,3)),w=_.enter("codeFenced"),N=C.move(S);if(h.lang){let g=_.enter(`codeFencedLang${b}`);N+=C.move(_.safe(h.lang,{before:N,after:" ",encode:["`"],...C.current()})),g()}if(h.lang&&h.meta){let g=_.enter(`codeFencedMeta${b}`);N+=C.move(" "),N+=C.move(_.safe(h.meta,{before:N,after:"\n",encode:["`"],...C.current()})),g()}return N+=C.move("\n"),k&&(N+=C.move(k+"\n")),N+=C.move(S),w(),N},definition:function(h,g,_,E){let A=check_quote_checkQuote(_),k='"'===A?"Quote":"Apostrophe",b=_.enter("definition"),C=_.enter("label"),S=_.createTracker(E),w=S.move("[");return w+=S.move(_.safe(_.associationId(h),{before:w,after:"]",...S.current()}))+S.move("]: "),C(),!h.url||/[\0- \u007F]/.test(h.url)?(C=_.enter("destinationLiteral"),w+=S.move("<"),w+=S.move(_.safe(h.url,{before:w,after:">",...S.current()}))+S.move(">")):(C=_.enter("destinationRaw"),w+=S.move(_.safe(h.url,{before:w,after:h.title?" ":"\n",...S.current()}))),C(),h.title&&(C=_.enter(`title${k}`),w+=S.move(" "+A),w+=S.move(_.safe(h.title,{before:w,after:A,...S.current()}))+S.move(A),C()),b(),w},emphasis:emphasis_emphasis,hardBreak:break_hardBreak,heading:function(h,g,_,E){var A,k;let b,C,S,w;let N=Math.max(Math.min(6,h.depth||1),1),R=_.createTracker(E);if(b=!1,"function"==typeof(A=function(h){if("value"in h&&/\r?\n|\r/.test(h.value)||"break"===h.type)return b=!0,!1})&&"function"!=typeof k?(S=void 0,w=A,C=k):(S=A,w=k,C=void 0),function(h,g,_,E){let A;"function"==typeof g&&"function"!=typeof _?(E=_,_=g):A=g;let k=node_modules_unist_util_is_lib_convert(A),b=E?-1:1;(function factory(h,A,C){let S=h&&"object"==typeof h?h:{};if("string"==typeof S.type){let g="string"==typeof S.tagName?S.tagName:"string"==typeof S.name?S.name:void 0;Object.defineProperty(visit,"name",{value:"node ("+h.type+(g?"<"+g+">":"")+")"})}return visit;function visit(){var S;let w,N,R,L=ir;if((!g||k(h,A,C[C.length-1]||void 0))&&!1===(L=Array.isArray(S=_(h,C))?S:"number"==typeof S?[!0,S]:null==S?ir:[S])[0])return L;if("children"in h&&h.children&&h.children&&"skip"!==L[0])for(N=(E?h.children.length:-1)+b,R=C.concat(h);N>-1&&N<h.children.length;){let g=h.children[N];if(!1===(w=factory(g,N,R)())[0])return w;N="number"==typeof w[1]?w[1]:N+b}return L}})(h,void 0,[])()}(h,S,function(h,g){let _=g[g.length-1],E=_?_.children.indexOf(h):void 0;return w(h,E,_)},C),(!h.depth||h.depth<3)&&mdast_util_to_string_lib_toString(h)&&(_.options.setext||b)){let g=_.enter("headingSetext"),E=_.enter("phrasing"),A=_.containerPhrasing(h,{...R.current(),before:"\n",after:"\n"});return E(),g(),A+"\n"+(1===N?"=":"-").repeat(A.length-(Math.max(A.lastIndexOf("\r"),A.lastIndexOf("\n"))+1))}let L="#".repeat(N),P=_.enter("headingAtx"),z=_.enter("phrasing");R.move(L+" ");let G=_.containerPhrasing(h,{before:"# ",after:"\n",...R.current()});return/^[\t ]/.test(G)&&(G="&#x"+G.charCodeAt(0).toString(16).toUpperCase()+";"+G.slice(1)),G=G?L+" "+G:L,_.options.closeAtx&&(G+=" "+L),z(),P(),G},html:handle_html_html,image:handle_image_image,imageReference:image_reference_imageReference,inlineCode:inline_code_inlineCode,link:handle_link_link,linkReference:link_reference_linkReference,list:function(h,g,_,E){let A=_.enter("list"),k=_.bulletCurrent,b=h.ordered?function(h){let g=h.options.bulletOrdered||".";if("."!==g&&")"!==g)throw Error("Cannot serialize items with `"+g+"` for `options.bulletOrdered`, expected `.` or `)`");return g}(_):check_bullet_checkBullet(_),C=h.ordered?"."===b?")":".":function(h){let g=check_bullet_checkBullet(h),_=h.options.bulletOther;if(!_)return"*"===g?"-":"*";if("*"!==_&&"+"!==_&&"-"!==_)throw Error("Cannot serialize items with `"+_+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(_===g)throw Error("Expected `bullet` (`"+g+"`) and `bulletOther` (`"+_+"`) to be different");return _}(_),S=!!g&&!!_.bulletLastUsed&&b===_.bulletLastUsed;if(!h.ordered){let g=h.children?h.children[0]:void 0;if("*"!==b&&"-"!==b||!g||g.children&&g.children[0]||"list"!==_.stack[_.stack.length-1]||"listItem"!==_.stack[_.stack.length-2]||"list"!==_.stack[_.stack.length-3]||"listItem"!==_.stack[_.stack.length-4]||0!==_.indexStack[_.indexStack.length-1]||0!==_.indexStack[_.indexStack.length-2]||0!==_.indexStack[_.indexStack.length-3]||(S=!0),check_rule_checkRule(_)===b&&g){let g=-1;for(;++g<h.children.length;){let _=h.children[g];if(_&&"listItem"===_.type&&_.children&&_.children[0]&&"thematicBreak"===_.children[0].type){S=!0;break}}}}S&&(b=C),_.bulletCurrent=b;let w=_.containerFlow(h,E);return _.bulletLastUsed=b,_.bulletCurrent=k,A(),w},listItem:function(h,g,_,E){let A=function(h){let g=h.options.listItemIndent||"one";if("tab"!==g&&"one"!==g&&"mixed"!==g)throw Error("Cannot serialize items with `"+g+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return g}(_),k=_.bulletCurrent||check_bullet_checkBullet(_);g&&"list"===g.type&&g.ordered&&(k=("number"==typeof g.start&&g.start>-1?g.start:1)+(!1===_.options.incrementListMarker?0:g.children.indexOf(h))+k);let b=k.length+1;("tab"===A||"mixed"===A&&(g&&"list"===g.type&&g.spread||h.spread))&&(b=4*Math.ceil(b/4));let C=_.createTracker(E);C.move(k+" ".repeat(b-k.length)),C.shift(b);let S=_.enter("listItem"),w=_.indentLines(_.containerFlow(h,C.current()),function(h,g,_){return g?(_?"":" ".repeat(b))+h:(_?k:k+" ".repeat(b-k.length))+h});return S(),w},paragraph:function(h,g,_,E){let A=_.enter("paragraph"),k=_.enter("phrasing"),b=_.containerPhrasing(h,E);return k(),A(),b},root:function(h,g,_,E){let A=h.children.some(function(h){return ia(h)}),k=A?_.containerPhrasing:_.containerFlow;return k.call(_,h,E)},strong:strong_strong,text:function(h,g,_,E){return _.safe(h.value,E)},thematicBreak:function(h,g,_){let E=(check_rule_checkRule(_)+(_.options.ruleSpaces?" ":"")).repeat(function(h){let g=h.options.ruleRepetition||3;if(g<3)throw Error("Cannot serialize rules with repetition `"+g+"` for `options.ruleRepetition`, expected `3` or more");return g}(_));return _.options.ruleSpaces?E.slice(0,-1):E}};function exitCheck(h){let g=this.stack[this.stack.length-2];g.type,g.checked="taskListCheckValueChecked"===h.type}function exitParagraphWithTaskListItem(h){let g=this.stack[this.stack.length-2];if(g&&"listItem"===g.type&&"boolean"==typeof g.checked){let h=this.stack[this.stack.length-1];h.type;let _=h.children[0];if(_&&"text"===_.type){let E;let A=g.children,k=-1;for(;++k<A.length;){let h=A[k];if("paragraph"===h.type){E=h;break}}E===h&&(_.value=_.value.slice(1),0===_.value.length?h.children.shift():h.position&&_.position&&"number"==typeof _.position.start.offset&&(_.position.start.column++,_.position.start.offset++,h.position.start=Object.assign({},_.position.start)))}}this.exit(h)}function listItemWithTaskListItem(h,g,_,E){let A=h.children[0],k="boolean"==typeof h.checked&&A&&"paragraph"===A.type,b="["+(h.checked?"x":" ")+"] ",C=_.createTracker(E);k&&C.move(b);let S=io.listItem(h,g,_,{...E,...C.current()});return k&&(S=S.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,function(h){return h+b})),S}let is={}.hasOwnProperty,il=micromark_util_character_regexCheck(/[A-Za-z]/),ic=micromark_util_character_regexCheck(/[\dA-Za-z]/);function micromark_util_character_markdownLineEndingOrSpace(h){return null!==h&&(h<0||32===h)}micromark_util_character_regexCheck(/[#-'*+\--9=?A-Z^-~]/),micromark_util_character_regexCheck(/\d/),micromark_util_character_regexCheck(/[\dA-Fa-f]/),micromark_util_character_regexCheck(/[!-/:-@[-`{-~]/);let iu=micromark_util_character_regexCheck(/\p{P}|\p{S}/u),id=micromark_util_character_regexCheck(/\s/);function micromark_util_character_regexCheck(h){return function(g){return null!==g&&g>-1&&h.test(String.fromCharCode(g))}}let im={tokenize:function(h,g,_){let E=0;return function wwwPrefixInside(g){return(87===g||119===g)&&E<3?(E++,h.consume(g),wwwPrefixInside):46===g&&3===E?(h.consume(g),wwwPrefixAfter):_(g)};function wwwPrefixAfter(h){return null===h?_(h):g(h)}},partial:!0},ih={tokenize:function(h,g,_){let E,A,k;return domainInside;function domainInside(g){return 46===g||95===g?h.check(ig,domainAfter,domainAtPunctuation)(g):null===g||micromark_util_character_markdownLineEndingOrSpace(g)||id(g)||45!==g&&iu(g)?domainAfter(g):(k=!0,h.consume(g),domainInside)}function domainAtPunctuation(g){return 95===g?E=!0:(A=E,E=void 0),h.consume(g),domainInside}function domainAfter(h){return A||E||!k?_(h):g(h)}},partial:!0},ip={tokenize:function(h,g){let _=0,E=0;return pathInside;function pathInside(A){return 40===A?(_++,h.consume(A),pathInside):41===A&&E<_?pathAtPunctuation(A):33===A||34===A||38===A||39===A||41===A||42===A||44===A||46===A||58===A||59===A||60===A||63===A||93===A||95===A||126===A?h.check(ig,g,pathAtPunctuation)(A):null===A||micromark_util_character_markdownLineEndingOrSpace(A)||id(A)?g(A):(h.consume(A),pathInside)}function pathAtPunctuation(g){return 41===g&&E++,h.consume(g),pathInside}},partial:!0},ig={tokenize:function(h,g,_){return trail;function trail(E){return 33===E||34===E||39===E||41===E||42===E||44===E||46===E||58===E||59===E||63===E||95===E||126===E?(h.consume(E),trail):38===E?(h.consume(E),trailCharRefStart):93===E?(h.consume(E),trailBracketAfter):60===E||null===E||micromark_util_character_markdownLineEndingOrSpace(E)||id(E)?g(E):_(E)}function trailBracketAfter(h){return null===h||40===h||91===h||micromark_util_character_markdownLineEndingOrSpace(h)||id(h)?g(h):trail(h)}function trailCharRefStart(g){return il(g)?function trailCharRefInside(g){return 59===g?(h.consume(g),trail):il(g)?(h.consume(g),trailCharRefInside):_(g)}(g):_(g)}},partial:!0},i_={tokenize:function(h,g,_){return function(g){return h.consume(g),after};function after(h){return ic(h)?_(h):g(h)}},partial:!0},iE={tokenize:function(h,g,_){let E=this;return function(g){return 87!==g&&119!==g||!previousWww.call(E,E.previous)||previousUnbalanced(E.events)?_(g):(h.enter("literalAutolink"),h.enter("literalAutolinkWww"),h.check(im,h.attempt(ih,h.attempt(ip,wwwAfter),_),_)(g))};function wwwAfter(_){return h.exit("literalAutolinkWww"),h.exit("literalAutolink"),g(_)}},previous:previousWww},iT={tokenize:function(h,g,_){let E=this,A="",k=!1;return function(g){return(72===g||104===g)&&previousProtocol.call(E,E.previous)&&!previousUnbalanced(E.events)?(h.enter("literalAutolink"),h.enter("literalAutolinkHttp"),A+=String.fromCodePoint(g),h.consume(g),protocolPrefixInside):_(g)};function protocolPrefixInside(g){if(il(g)&&A.length<5)return A+=String.fromCodePoint(g),h.consume(g),protocolPrefixInside;if(58===g){let _=A.toLowerCase();if("http"===_||"https"===_)return h.consume(g),protocolSlashesInside}return _(g)}function protocolSlashesInside(g){return 47===g?(h.consume(g),k)?afterProtocol:(k=!0,protocolSlashesInside):_(g)}function afterProtocol(g){return null===g||null!==g&&(g<32||127===g)||micromark_util_character_markdownLineEndingOrSpace(g)||id(g)||iu(g)?_(g):h.attempt(ih,h.attempt(ip,protocolAfter),_)(g)}function protocolAfter(_){return h.exit("literalAutolinkHttp"),h.exit("literalAutolink"),g(_)}},previous:previousProtocol},iA={tokenize:function(h,g,_){let E,A;let k=this;return function(g){return!gfmAtext(g)||!previousEmail.call(k,k.previous)||previousUnbalanced(k.events)?_(g):(h.enter("literalAutolink"),h.enter("literalAutolinkEmail"),function atext(g){return gfmAtext(g)?(h.consume(g),atext):64===g?(h.consume(g),emailDomain):_(g)}(g))};function emailDomain(g){return 46===g?h.check(i_,emailDomainAfter,emailDomainDot)(g):45===g||95===g||ic(g)?(A=!0,h.consume(g),emailDomain):emailDomainAfter(g)}function emailDomainDot(g){return h.consume(g),E=!0,emailDomain}function emailDomainAfter(b){return A&&E&&il(k.previous)?(h.exit("literalAutolinkEmail"),h.exit("literalAutolink"),g(b)):_(b)}},previous:previousEmail},iy={},ik=48;for(;ik<123;)iy[ik]=iA,58==++ik?ik=65:91===ik&&(ik=97);function previousWww(h){return null===h||40===h||42===h||95===h||91===h||93===h||126===h||micromark_util_character_markdownLineEndingOrSpace(h)}function previousProtocol(h){return!il(h)}function previousEmail(h){return!(47===h||gfmAtext(h))}function gfmAtext(h){return 43===h||45===h||46===h||95===h||ic(h)}function previousUnbalanced(h){let g=h.length,_=!1;for(;g--;){let E=h[g][1];if(("labelLink"===E.type||"labelImage"===E.type)&&!E._balanced){_=!0;break}if(E._gfmAutolinkLiteralWalkedInto){_=!1;break}}return h.length>0&&!_&&(h[h.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),_}function node_modules_micromark_util_character_markdownLineEndingOrSpace(h){return null!==h&&(h<0||32===h)}function node_modules_micromark_util_character_markdownSpace(h){return -2===h||-1===h||32===h}function node_modules_micromark_util_character_regexCheck(h){return function(g){return null!==g&&g>-1&&h.test(String.fromCharCode(g))}}function factorySpace(h,g,_,E){let A=E?E-1:Number.POSITIVE_INFINITY,k=0;return function(E){return node_modules_micromark_util_character_markdownSpace(E)?(h.enter(_),function prefix(E){return node_modules_micromark_util_character_markdownSpace(E)&&k++<A?(h.consume(E),prefix):(h.exit(_),g(E))}(E)):g(E)}}iy[43]=iA,iy[45]=iA,iy[46]=iA,iy[95]=iA,iy[72]=[iA,iT],iy[104]=[iA,iT],iy[87]=[iA,iE],iy[119]=[iA,iE],node_modules_micromark_util_character_regexCheck(/[A-Za-z]/),node_modules_micromark_util_character_regexCheck(/[\dA-Za-z]/),node_modules_micromark_util_character_regexCheck(/[#-'*+\--9=?A-Z^-~]/),node_modules_micromark_util_character_regexCheck(/\d/),node_modules_micromark_util_character_regexCheck(/[\dA-Fa-f]/),node_modules_micromark_util_character_regexCheck(/[!-/:-@[-`{-~]/),node_modules_micromark_util_character_regexCheck(/\p{P}|\p{S}/u),node_modules_micromark_util_character_regexCheck(/\s/);let iv={tokenize:function(h,g,_){return function(g){return node_modules_micromark_util_character_markdownSpace(g)?factorySpace(h,after,"linePrefix")(g):after(g)};function after(h){return null===h||null!==h&&h<-2?g(h):_(h)}},partial:!0};function micromark_util_normalize_identifier_normalizeIdentifier(h){return h.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}let ib={tokenize:function(h,g,_){let E=this;return factorySpace(h,function(h){let A=E.events[E.events.length-1];return A&&"gfmFootnoteDefinitionIndent"===A[1].type&&4===A[2].sliceSerialize(A[1],!0).length?g(h):_(h)},"gfmFootnoteDefinitionIndent",5)},partial:!0};function tokenizePotentialGfmFootnoteCall(h,g,_){let E;let A=this,k=A.events.length,b=A.parser.gfmFootnotes||(A.parser.gfmFootnotes=[]);for(;k--;){let h=A.events[k][1];if("labelImage"===h.type){E=h;break}if("gfmFootnoteCall"===h.type||"labelLink"===h.type||"label"===h.type||"image"===h.type||"link"===h.type)break}return function(k){if(!E||!E._balanced)return _(k);let C=micromark_util_normalize_identifier_normalizeIdentifier(A.sliceSerialize({start:E.end,end:A.now()}));return 94===C.codePointAt(0)&&b.includes(C.slice(1))?(h.enter("gfmFootnoteCallLabelMarker"),h.consume(k),h.exit("gfmFootnoteCallLabelMarker"),g(k)):_(k)}}function resolveToPotentialGfmFootnoteCall(h,g){let _=h.length;for(;_--;)if("labelImage"===h[_][1].type&&"enter"===h[_][0]){h[_][1];break}h[_+1][1].type="data",h[_+3][1].type="gfmFootnoteCallLabelMarker";let E={type:"gfmFootnoteCall",start:Object.assign({},h[_+3][1].start),end:Object.assign({},h[h.length-1][1].end)},A={type:"gfmFootnoteCallMarker",start:Object.assign({},h[_+3][1].end),end:Object.assign({},h[_+3][1].end)};A.end.column++,A.end.offset++,A.end._bufferIndex++;let k={type:"gfmFootnoteCallString",start:Object.assign({},A.end),end:Object.assign({},h[h.length-1][1].start)},b={type:"chunkString",contentType:"string",start:Object.assign({},k.start),end:Object.assign({},k.end)},C=[h[_+1],h[_+2],["enter",E,g],h[_+3],h[_+4],["enter",A,g],["exit",A,g],["enter",k,g],["enter",b,g],["exit",b,g],["exit",k,g],h[h.length-2],h[h.length-1],["exit",E,g]];return h.splice(_,h.length-_+1,...C),h}function tokenizeGfmFootnoteCall(h,g,_){let E;let A=this,k=A.parser.gfmFootnotes||(A.parser.gfmFootnotes=[]),b=0;return function(g){return h.enter("gfmFootnoteCall"),h.enter("gfmFootnoteCallLabelMarker"),h.consume(g),h.exit("gfmFootnoteCallLabelMarker"),callStart};function callStart(g){return 94!==g?_(g):(h.enter("gfmFootnoteCallMarker"),h.consume(g),h.exit("gfmFootnoteCallMarker"),h.enter("gfmFootnoteCallString"),h.enter("chunkString").contentType="string",callData)}function callData(C){if(b>999||93===C&&!E||null===C||91===C||node_modules_micromark_util_character_markdownLineEndingOrSpace(C))return _(C);if(93===C){h.exit("chunkString");let E=h.exit("gfmFootnoteCallString");return k.includes(micromark_util_normalize_identifier_normalizeIdentifier(A.sliceSerialize(E)))?(h.enter("gfmFootnoteCallLabelMarker"),h.consume(C),h.exit("gfmFootnoteCallLabelMarker"),h.exit("gfmFootnoteCall"),g):_(C)}return node_modules_micromark_util_character_markdownLineEndingOrSpace(C)||(E=!0),b++,h.consume(C),92===C?callEscape:callData}function callEscape(g){return 91===g||92===g||93===g?(h.consume(g),b++,callData):callData(g)}}function tokenizeDefinitionStart(h,g,_){let E,A;let k=this,b=k.parser.gfmFootnotes||(k.parser.gfmFootnotes=[]),C=0;return function(g){return h.enter("gfmFootnoteDefinition")._container=!0,h.enter("gfmFootnoteDefinitionLabel"),h.enter("gfmFootnoteDefinitionLabelMarker"),h.consume(g),h.exit("gfmFootnoteDefinitionLabelMarker"),labelAtMarker};function labelAtMarker(g){return 94===g?(h.enter("gfmFootnoteDefinitionMarker"),h.consume(g),h.exit("gfmFootnoteDefinitionMarker"),h.enter("gfmFootnoteDefinitionLabelString"),h.enter("chunkString").contentType="string",labelInside):_(g)}function labelInside(g){if(C>999||93===g&&!A||null===g||91===g||node_modules_micromark_util_character_markdownLineEndingOrSpace(g))return _(g);if(93===g){h.exit("chunkString");let _=h.exit("gfmFootnoteDefinitionLabelString");return E=micromark_util_normalize_identifier_normalizeIdentifier(k.sliceSerialize(_)),h.enter("gfmFootnoteDefinitionLabelMarker"),h.consume(g),h.exit("gfmFootnoteDefinitionLabelMarker"),h.exit("gfmFootnoteDefinitionLabel"),labelAfter}return node_modules_micromark_util_character_markdownLineEndingOrSpace(g)||(A=!0),C++,h.consume(g),92===g?labelEscape:labelInside}function labelEscape(g){return 91===g||92===g||93===g?(h.consume(g),C++,labelInside):labelInside(g)}function labelAfter(g){return 58===g?(h.enter("definitionMarker"),h.consume(g),h.exit("definitionMarker"),b.includes(E)||b.push(E),factorySpace(h,whitespaceAfter,"gfmFootnoteDefinitionWhitespace")):_(g)}function whitespaceAfter(h){return g(h)}}function tokenizeDefinitionContinuation(h,g,_){return h.check(iv,g,h.attempt(ib,g,_))}function gfmFootnoteDefinitionEnd(h){h.exit("gfmFootnoteDefinition")}function micromark_util_chunked_splice(h,g,_,E){let A;let k=h.length,b=0;if(g=g<0?-g>k?0:k+g:g>k?k:g,_=_>0?_:0,E.length<1e4)(A=Array.from(E)).unshift(g,_),h.splice(...A);else for(_&&h.splice(g,_);b<E.length;)(A=E.slice(b,b+1e4)).unshift(g,0),h.splice(...A),b+=1e4,g+=1e4}micromark_extension_gfm_strikethrough_node_modules_micromark_util_character_regexCheck(/[A-Za-z]/),micromark_extension_gfm_strikethrough_node_modules_micromark_util_character_regexCheck(/[\dA-Za-z]/),micromark_extension_gfm_strikethrough_node_modules_micromark_util_character_regexCheck(/[#-'*+\--9=?A-Z^-~]/),micromark_extension_gfm_strikethrough_node_modules_micromark_util_character_regexCheck(/\d/),micromark_extension_gfm_strikethrough_node_modules_micromark_util_character_regexCheck(/[\dA-Fa-f]/),micromark_extension_gfm_strikethrough_node_modules_micromark_util_character_regexCheck(/[!-/:-@[-`{-~]/);let ix=micromark_extension_gfm_strikethrough_node_modules_micromark_util_character_regexCheck(/\p{P}|\p{S}/u),iC=micromark_extension_gfm_strikethrough_node_modules_micromark_util_character_regexCheck(/\s/);function micromark_extension_gfm_strikethrough_node_modules_micromark_util_character_regexCheck(h){return function(g){return null!==g&&g>-1&&h.test(String.fromCharCode(g))}}function classifyCharacter(h){return null===h||null!==h&&(h<0||32===h)||iC(h)?1:ix(h)?2:void 0}function micromark_extension_gfm_table_node_modules_micromark_util_character_markdownLineEnding(h){return null!==h&&h<-2}function micromark_extension_gfm_table_node_modules_micromark_util_character_markdownLineEndingOrSpace(h){return null!==h&&(h<0||32===h)}function micromark_extension_gfm_table_node_modules_micromark_util_character_markdownSpace(h){return -2===h||-1===h||32===h}function micromark_extension_gfm_table_node_modules_micromark_util_character_regexCheck(h){return function(g){return null!==g&&g>-1&&h.test(String.fromCharCode(g))}}function micromark_factory_space_factorySpace(h,g,_,E){let A=E?E-1:Number.POSITIVE_INFINITY,k=0;return function(E){return micromark_extension_gfm_table_node_modules_micromark_util_character_markdownSpace(E)?(h.enter(_),function prefix(E){return micromark_extension_gfm_table_node_modules_micromark_util_character_markdownSpace(E)&&k++<A?(h.consume(E),prefix):(h.exit(_),g(E))}(E)):g(E)}}micromark_extension_gfm_table_node_modules_micromark_util_character_regexCheck(/[A-Za-z]/),micromark_extension_gfm_table_node_modules_micromark_util_character_regexCheck(/[\dA-Za-z]/),micromark_extension_gfm_table_node_modules_micromark_util_character_regexCheck(/[#-'*+\--9=?A-Z^-~]/),micromark_extension_gfm_table_node_modules_micromark_util_character_regexCheck(/\d/),micromark_extension_gfm_table_node_modules_micromark_util_character_regexCheck(/[\dA-Fa-f]/),micromark_extension_gfm_table_node_modules_micromark_util_character_regexCheck(/[!-/:-@[-`{-~]/),micromark_extension_gfm_table_node_modules_micromark_util_character_regexCheck(/\p{P}|\p{S}/u),micromark_extension_gfm_table_node_modules_micromark_util_character_regexCheck(/\s/);let EditMap=class EditMap{constructor(){this.map=[]}add(h,g,_){!function(h,g,_,E){let A=0;if(0!==_||0!==E.length){for(;A<h.map.length;){if(h.map[A][0]===g){h.map[A][1]+=_,h.map[A][2].push(...E);return}A+=1}h.map.push([g,_,E])}}(this,h,g,_)}consume(h){if(this.map.sort(function(h,g){return h[0]-g[0]}),0===this.map.length)return;let g=this.map.length,_=[];for(;g>0;)g-=1,_.push(h.slice(this.map[g][0]+this.map[g][1]),this.map[g][2]),h.length=this.map[g][0];_.push([...h]),h.length=0;let E=_.pop();for(;E;)h.push(...E),E=_.pop();this.map.length=0}};function tokenizeTable(h,g,_){let E;let A=this,k=0,b=0;return function(h){let g=A.events.length-1;for(;g>-1;){let h=A.events[g][1].type;if("lineEnding"===h||"linePrefix"===h)g--;else break}let E=g>-1?A.events[g][1].type:null,k="tableHead"===E||"tableRow"===E?bodyRowStart:headRowBefore;return k===bodyRowStart&&A.parser.lazy[A.now().line]?_(h):k(h)};function headRowBefore(g){return h.enter("tableHead"),h.enter("tableRow"),124===g||(E=!0,b+=1),headRowBreak(g)}function headRowBreak(g){return null===g?_(g):micromark_extension_gfm_table_node_modules_micromark_util_character_markdownLineEnding(g)?b>1?(b=0,A.interrupt=!0,h.exit("tableRow"),h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),headDelimiterStart):_(g):micromark_extension_gfm_table_node_modules_micromark_util_character_markdownSpace(g)?micromark_factory_space_factorySpace(h,headRowBreak,"whitespace")(g):(b+=1,E&&(E=!1,k+=1),124===g)?(h.enter("tableCellDivider"),h.consume(g),h.exit("tableCellDivider"),E=!0,headRowBreak):(h.enter("data"),headRowData(g))}function headRowData(g){return null===g||124===g||micromark_extension_gfm_table_node_modules_micromark_util_character_markdownLineEndingOrSpace(g)?(h.exit("data"),headRowBreak(g)):(h.consume(g),92===g?headRowEscape:headRowData)}function headRowEscape(g){return 92===g||124===g?(h.consume(g),headRowData):headRowData(g)}function headDelimiterStart(g){return(A.interrupt=!1,A.parser.lazy[A.now().line])?_(g):(h.enter("tableDelimiterRow"),E=!1,micromark_extension_gfm_table_node_modules_micromark_util_character_markdownSpace(g))?micromark_factory_space_factorySpace(h,headDelimiterBefore,"linePrefix",A.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(g):headDelimiterBefore(g)}function headDelimiterBefore(g){return 45===g||58===g?headDelimiterValueBefore(g):124===g?(E=!0,h.enter("tableCellDivider"),h.consume(g),h.exit("tableCellDivider"),headDelimiterCellBefore):_(g)}function headDelimiterCellBefore(g){return micromark_extension_gfm_table_node_modules_micromark_util_character_markdownSpace(g)?micromark_factory_space_factorySpace(h,headDelimiterValueBefore,"whitespace")(g):headDelimiterValueBefore(g)}function headDelimiterValueBefore(g){return 58===g?(b+=1,E=!0,h.enter("tableDelimiterMarker"),h.consume(g),h.exit("tableDelimiterMarker"),headDelimiterLeftAlignmentAfter):45===g?(b+=1,headDelimiterLeftAlignmentAfter(g)):null===g||micromark_extension_gfm_table_node_modules_micromark_util_character_markdownLineEnding(g)?headDelimiterCellAfter(g):_(g)}function headDelimiterLeftAlignmentAfter(g){return 45===g?(h.enter("tableDelimiterFiller"),function headDelimiterFiller(g){return 45===g?(h.consume(g),headDelimiterFiller):58===g?(E=!0,h.exit("tableDelimiterFiller"),h.enter("tableDelimiterMarker"),h.consume(g),h.exit("tableDelimiterMarker"),headDelimiterRightAlignmentAfter):(h.exit("tableDelimiterFiller"),headDelimiterRightAlignmentAfter(g))}(g)):_(g)}function headDelimiterRightAlignmentAfter(g){return micromark_extension_gfm_table_node_modules_micromark_util_character_markdownSpace(g)?micromark_factory_space_factorySpace(h,headDelimiterCellAfter,"whitespace")(g):headDelimiterCellAfter(g)}function headDelimiterCellAfter(A){return 124===A?headDelimiterBefore(A):null===A||micromark_extension_gfm_table_node_modules_micromark_util_character_markdownLineEnding(A)?E&&k===b?(h.exit("tableDelimiterRow"),h.exit("tableHead"),g(A)):_(A):_(A)}function bodyRowStart(g){return h.enter("tableRow"),bodyRowBreak(g)}function bodyRowBreak(_){return 124===_?(h.enter("tableCellDivider"),h.consume(_),h.exit("tableCellDivider"),bodyRowBreak):null===_||micromark_extension_gfm_table_node_modules_micromark_util_character_markdownLineEnding(_)?(h.exit("tableRow"),g(_)):micromark_extension_gfm_table_node_modules_micromark_util_character_markdownSpace(_)?micromark_factory_space_factorySpace(h,bodyRowBreak,"whitespace")(_):(h.enter("data"),bodyRowData(_))}function bodyRowData(g){return null===g||124===g||micromark_extension_gfm_table_node_modules_micromark_util_character_markdownLineEndingOrSpace(g)?(h.exit("data"),bodyRowBreak(g)):(h.consume(g),92===g?bodyRowEscape:bodyRowData)}function bodyRowEscape(g){return 92===g||124===g?(h.consume(g),bodyRowData):bodyRowData(g)}}function resolveTable(h,g){let _,E,A,k=-1,b=!0,C=0,S=[0,0,0,0],w=[0,0,0,0],N=!1,R=0,L=new EditMap;for(;++k<h.length;){let P=h[k],z=P[1];"enter"===P[0]?"tableHead"===z.type?(N=!1,0!==R&&(flushTableEnd(L,g,R,_,E),E=void 0,R=0),_={type:"table",start:Object.assign({},z.start),end:Object.assign({},z.end)},L.add(k,0,[["enter",_,g]])):"tableRow"===z.type||"tableDelimiterRow"===z.type?(b=!0,A=void 0,S=[0,0,0,0],w=[0,k+1,0,0],N&&(N=!1,E={type:"tableBody",start:Object.assign({},z.start),end:Object.assign({},z.end)},L.add(k,0,[["enter",E,g]])),C="tableDelimiterRow"===z.type?2:E?3:1):C&&("data"===z.type||"tableDelimiterMarker"===z.type||"tableDelimiterFiller"===z.type)?(b=!1,0===w[2]&&(0!==S[1]&&(w[0]=w[1],A=flushCell(L,g,S,C,void 0,A),S=[0,0,0,0]),w[2]=k)):"tableCellDivider"===z.type&&(b?b=!1:(0!==S[1]&&(w[0]=w[1],A=flushCell(L,g,S,C,void 0,A)),w=[(S=w)[1],k,0,0])):"tableHead"===z.type?(N=!0,R=k):"tableRow"===z.type||"tableDelimiterRow"===z.type?(R=k,0!==S[1]?(w[0]=w[1],A=flushCell(L,g,S,C,k,A)):0!==w[1]&&(A=flushCell(L,g,w,C,k,A)),C=0):C&&("data"===z.type||"tableDelimiterMarker"===z.type||"tableDelimiterFiller"===z.type)&&(w[3]=k)}for(0!==R&&flushTableEnd(L,g,R,_,E),L.consume(g.events),k=-1;++k<g.events.length;){let h=g.events[k];"enter"===h[0]&&"table"===h[1].type&&(h[1]._align=function(h,g){let _=!1,E=[];for(;g<h.length;){let A=h[g];if(_){if("enter"===A[0])"tableContent"===A[1].type&&E.push("tableDelimiterMarker"===h[g+1][1].type?"left":"none");else if("tableContent"===A[1].type){if("tableDelimiterMarker"===h[g-1][1].type){let h=E.length-1;E[h]="left"===E[h]?"center":"right"}}else if("tableDelimiterRow"===A[1].type)break}else"enter"===A[0]&&"tableDelimiterRow"===A[1].type&&(_=!0);g+=1}return E}(g.events,k))}return h}function flushCell(h,g,_,E,A,k){0!==_[0]&&(k.end=Object.assign({},getPoint(g.events,_[0])),h.add(_[0],0,[["exit",k,g]]));let b=getPoint(g.events,_[1]);if(k={type:1===E?"tableHeader":2===E?"tableDelimiter":"tableData",start:Object.assign({},b),end:Object.assign({},b)},h.add(_[1],0,[["enter",k,g]]),0!==_[2]){let A=getPoint(g.events,_[2]),k=getPoint(g.events,_[3]),b={type:"tableContent",start:Object.assign({},A),end:Object.assign({},k)};if(h.add(_[2],0,[["enter",b,g]]),2!==E){let E=g.events[_[2]],A=g.events[_[3]];if(E[1].end=Object.assign({},A[1].end),E[1].type="chunkText",E[1].contentType="text",_[3]>_[2]+1){let g=_[2]+1,E=_[3]-_[2]-1;h.add(g,E,[])}}h.add(_[3]+1,0,[["exit",b,g]])}return void 0!==A&&(k.end=Object.assign({},getPoint(g.events,A)),h.add(A,0,[["exit",k,g]]),k=void 0),k}function flushTableEnd(h,g,_,E,A){let k=[],b=getPoint(g.events,_);A&&(A.end=Object.assign({},b),k.push(["exit",A,g])),E.end=Object.assign({},b),k.push(["exit",E,g]),h.add(_+1,0,k)}function getPoint(h,g){let _=h[g],E="enter"===_[0]?"start":"end";return _[1][E]}function micromark_extension_gfm_task_list_item_node_modules_micromark_util_character_markdownSpace(h){return -2===h||-1===h||32===h}function micromark_extension_gfm_task_list_item_node_modules_micromark_util_character_regexCheck(h){return function(g){return null!==g&&g>-1&&h.test(String.fromCharCode(g))}}micromark_extension_gfm_task_list_item_node_modules_micromark_util_character_regexCheck(/[A-Za-z]/),micromark_extension_gfm_task_list_item_node_modules_micromark_util_character_regexCheck(/[\dA-Za-z]/),micromark_extension_gfm_task_list_item_node_modules_micromark_util_character_regexCheck(/[#-'*+\--9=?A-Z^-~]/),micromark_extension_gfm_task_list_item_node_modules_micromark_util_character_regexCheck(/\d/),micromark_extension_gfm_task_list_item_node_modules_micromark_util_character_regexCheck(/[\dA-Fa-f]/),micromark_extension_gfm_task_list_item_node_modules_micromark_util_character_regexCheck(/[!-/:-@[-`{-~]/),micromark_extension_gfm_task_list_item_node_modules_micromark_util_character_regexCheck(/\p{P}|\p{S}/u),micromark_extension_gfm_task_list_item_node_modules_micromark_util_character_regexCheck(/\s/);let iS={tokenize:function(h,g,_){let E=this;return function(g){return null===E.previous&&E._gfmTasklistFirstContentOfListItem?(h.enter("taskListCheck"),h.enter("taskListCheckMarker"),h.consume(g),h.exit("taskListCheckMarker"),inside):_(g)};function inside(g){return null!==g&&(g<0||32===g)?(h.enter("taskListCheckValueUnchecked"),h.consume(g),h.exit("taskListCheckValueUnchecked"),close):88===g||120===g?(h.enter("taskListCheckValueChecked"),h.consume(g),h.exit("taskListCheckValueChecked"),close):_(g)}function close(g){return 93===g?(h.enter("taskListCheckMarker"),h.consume(g),h.exit("taskListCheckMarker"),h.exit("taskListCheck"),after):_(g)}function after(E){return null!==E&&E<-2?g(E):micromark_extension_gfm_task_list_item_node_modules_micromark_util_character_markdownSpace(E)?h.check({tokenize:spaceThenNonSpace},g,_)(E):_(E)}}};function spaceThenNonSpace(h,g,_){return function(h,g,_,E){let A=E?E-1:Number.POSITIVE_INFINITY,k=0;return function(E){return micromark_extension_gfm_task_list_item_node_modules_micromark_util_character_markdownSpace(E)?(h.enter(_),function prefix(E){return micromark_extension_gfm_task_list_item_node_modules_micromark_util_character_markdownSpace(E)&&k++<A?(h.consume(E),prefix):(h.exit(_),g(E))}(E)):g(E)}}(h,function(h){return null===h?_(h):g(h)},"whitespace")}let iI={};function remarkGfm(h){let g=h||iI,_=this.data(),E=_.micromarkExtensions||(_.micromarkExtensions=[]),A=_.fromMarkdownExtensions||(_.fromMarkdownExtensions=[]),k=_.toMarkdownExtensions||(_.toMarkdownExtensions=[]);E.push(function(h){let g={},_=-1;for(;++_<h.length;)(function(h,g){let _;for(_ in g){let E;let A=is.call(h,_)?h[_]:void 0,k=A||(h[_]={}),b=g[_];if(b)for(E in b){is.call(k,E)||(k[E]=[]);let h=b[E];(function(h,g){let _=-1,E=[];for(;++_<g.length;)("after"===g[_].add?h:E).push(g[_]);!function(h,g,_,E){let A;let k=h.length,b=0;if(g=g<0?-g>k?0:k+g:g>k?k:g,_=_>0?_:0,E.length<1e4)(A=Array.from(E)).unshift(g,_),h.splice(...A);else for(_&&h.splice(g,_);b<E.length;)(A=E.slice(b,b+1e4)).unshift(g,0),h.splice(...A),b+=1e4,g+=1e4}(h,0,0,E)})(k[E],Array.isArray(h)?h:h?[h]:[])}}})(g,h[_]);return g}([{text:iy},{document:{91:{tokenize:tokenizeDefinitionStart,continuation:{tokenize:tokenizeDefinitionContinuation},exit:gfmFootnoteDefinitionEnd}},text:{91:{tokenize:tokenizeGfmFootnoteCall},93:{add:"after",tokenize:tokenizePotentialGfmFootnoteCall,resolveTo:resolveToPotentialGfmFootnoteCall}}},function(h){let g=(h||{}).singleTilde,_={tokenize:function(h,_,E){let A=this.previous,k=this.events,b=0;return function(C){return 126===A&&"characterEscape"!==k[k.length-1][1].type?E(C):(h.enter("strikethroughSequenceTemporary"),function more(k){let C=classifyCharacter(A);if(126===k)return b>1?E(k):(h.consume(k),b++,more);if(b<2&&!g)return E(k);let S=h.exit("strikethroughSequenceTemporary"),w=classifyCharacter(k);return S._open=!w||2===w&&!!C,S._close=!C||2===C&&!!w,_(k)}(C))}},resolveAll:function(h,g){let _=-1;for(;++_<h.length;)if("enter"===h[_][0]&&"strikethroughSequenceTemporary"===h[_][1].type&&h[_][1]._close){let E=_;for(;E--;)if("exit"===h[E][0]&&"strikethroughSequenceTemporary"===h[E][1].type&&h[E][1]._open&&h[_][1].end.offset-h[_][1].start.offset==h[E][1].end.offset-h[E][1].start.offset){h[_][1].type="strikethroughSequence",h[E][1].type="strikethroughSequence";let A={type:"strikethrough",start:Object.assign({},h[E][1].start),end:Object.assign({},h[_][1].end)},k={type:"strikethroughText",start:Object.assign({},h[E][1].end),end:Object.assign({},h[_][1].start)},b=[["enter",A,g],["enter",h[E][1],g],["exit",h[E][1],g],["enter",k,g]],C=g.parser.constructs.insideSpan.null;C&&micromark_util_chunked_splice(b,b.length,0,function(h,g,_){let E=[],A=-1;for(;++A<h.length;){let k=h[A].resolveAll;k&&!E.includes(k)&&(g=k(g,_),E.push(k))}return g}(C,h.slice(E+1,_),g)),micromark_util_chunked_splice(b,b.length,0,[["exit",k,g],["enter",h[_][1],g],["exit",h[_][1],g],["exit",A,g]]),micromark_util_chunked_splice(h,E-1,_-E+3,b),_=E+b.length-2;break}}for(_=-1;++_<h.length;)"strikethroughSequenceTemporary"===h[_][1].type&&(h[_][1].type="data");return h}};return null==g&&(g=!0),{text:{126:_},insideSpan:{null:[_]},attentionMarkers:{null:[126]}}}(g),{flow:{null:{tokenize:tokenizeTable,resolveAll:resolveTable}}},{text:{91:iS}}])),A.push([{transforms:[transformGfmAutolinkLiterals],enter:{literalAutolink:enterLiteralAutolink,literalAutolinkEmail:enterLiteralAutolinkValue,literalAutolinkHttp:enterLiteralAutolinkValue,literalAutolinkWww:enterLiteralAutolinkValue},exit:{literalAutolink:exitLiteralAutolink,literalAutolinkEmail:exitLiteralAutolinkEmail,literalAutolinkHttp:exitLiteralAutolinkHttp,literalAutolinkWww:exitLiteralAutolinkWww}},{enter:{gfmFootnoteDefinition:enterFootnoteDefinition,gfmFootnoteDefinitionLabelString:enterFootnoteDefinitionLabelString,gfmFootnoteCall:enterFootnoteCall,gfmFootnoteCallString:enterFootnoteCallString},exit:{gfmFootnoteDefinition:exitFootnoteDefinition,gfmFootnoteDefinitionLabelString:exitFootnoteDefinitionLabelString,gfmFootnoteCall:exitFootnoteCall,gfmFootnoteCallString:exitFootnoteCallString}},{canContainEols:["delete"],enter:{strikethrough:enterStrikethrough},exit:{strikethrough:exitStrikethrough}},{enter:{table:enterTable,tableData:enterCell,tableHeader:enterCell,tableRow:enterRow},exit:{codeText:exitCodeText,table:exitTable,tableData:exit,tableHeader:exit,tableRow:exit}},{exit:{taskListCheckValueChecked:exitCheck,taskListCheckValueUnchecked:exitCheck,paragraph:exitParagraphWithTaskListItem}}]),k.push({extensions:[{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:r5,notInConstruct:r6},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:r5,notInConstruct:r6},{character:":",before:"[ps]",after:"\\/",inConstruct:r5,notInConstruct:r6}]},{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition,footnoteReference}},{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:r8}],handlers:{delete:handleDelete}},function(h){let g=h||{},_=g.tableCellPadding,E=g.tablePipeAlign,A=g.stringLength,k=_?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:function(h,g,_){let E=it.inlineCode(h,g,_);return _.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E},table:function(h,g,_,E){return serializeData(function(h,g,_){let E=h.children,A=-1,k=[],b=g.enter("table");for(;++A<E.length;)k[A]=handleTableRowAsData(E[A],g,_);return b(),k}(h,_,E),h.align)},tableCell:handleTableCell,tableRow:function(h,g,_,E){let A=handleTableRowAsData(h,_,E),k=serializeData([A]);return k.slice(0,k.indexOf("\n"))}}};function handleTableCell(h,g,_,E){let A=_.enter("tableCell"),b=_.enter("phrasing"),C=_.containerPhrasing(h,{...E,before:k,after:k});return b(),A(),C}function serializeData(h,g){return function(h,g={}){let _=(g.align||[]).concat(),E=g.stringLength||defaultStringLength,A=[],k=[],b=[],C=[],S=0,w=-1;for(;++w<h.length;){let _=[],A=[],R=-1;for(h[w].length>S&&(S=h[w].length);++R<h[w].length;){var N;let k=null==(N=h[w][R])?"":String(N);if(!1!==g.alignDelimiters){let h=E(k);A[R]=h,(void 0===C[R]||h>C[R])&&(C[R]=h)}_.push(k)}k[w]=_,b[w]=A}let R=-1;if("object"==typeof _&&"length"in _)for(;++R<S;)A[R]=toAlignment(_[R]);else{let h=toAlignment(_);for(;++R<S;)A[R]=h}R=-1;let L=[],P=[];for(;++R<S;){let h=A[R],_="",E="";99===h?(_=":",E=":"):108===h?_=":":114===h&&(E=":");let k=!1===g.alignDelimiters?1:Math.max(1,C[R]-_.length-E.length),b=_+"-".repeat(k)+E;!1!==g.alignDelimiters&&((k=_.length+k+E.length)>C[R]&&(C[R]=k),P[R]=k),L[R]=b}k.splice(1,0,L),b.splice(1,0,P),w=-1;let z=[];for(;++w<k.length;){let h=k[w],_=b[w];R=-1;let E=[];for(;++R<S;){let k=h[R]||"",b="",w="";if(!1!==g.alignDelimiters){let h=C[R]-(_[R]||0),g=A[R];114===g?b=" ".repeat(h):99===g?h%2?(b=" ".repeat(h/2+.5),w=" ".repeat(h/2-.5)):w=b=" ".repeat(h/2):w=" ".repeat(h)}!1===g.delimiterStart||R||E.push("|"),!1!==g.padding&&!(!1===g.alignDelimiters&&""===k)&&(!1!==g.delimiterStart||R)&&E.push(" "),!1!==g.alignDelimiters&&E.push(b),E.push(k),!1!==g.alignDelimiters&&E.push(w),!1!==g.padding&&E.push(" "),(!1!==g.delimiterEnd||R!==S-1)&&E.push("|")}z.push(!1===g.delimiterEnd?E.join("").replace(/ +$/,""):E.join(""))}return z.join("\n")}(h,{align:g,alignDelimiters:E,padding:_,stringLength:A})}function handleTableRowAsData(h,g,_){let E=h.children,A=-1,k=[],b=g.enter("tableRow");for(;++A<E.length;)k[A]=handleTableCell(E[A],h,g,_);return b(),k}}(g),{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:listItemWithTaskListItem}}]})}let iw={};function use_markdown_node_modules_mdast_util_to_string_lib_one(h,g,_){if(h&&"object"==typeof h){if("value"in h)return"html"!==h.type||_?h.value:"";if(g&&"alt"in h&&h.alt)return h.alt;if("children"in h)return use_markdown_node_modules_mdast_util_to_string_lib_all(h.children,g,_)}return Array.isArray(h)?use_markdown_node_modules_mdast_util_to_string_lib_all(h,g,_):""}function use_markdown_node_modules_mdast_util_to_string_lib_all(h,g,_){let E=[],A=-1;for(;++A<h.length;)E[A]=use_markdown_node_modules_mdast_util_to_string_lib_one(h[A],g,_);return E.join("")}function node_modules_micromark_util_chunked_splice(h,g,_,E){let A;let k=h.length,b=0;if(g=g<0?-g>k?0:k+g:g>k?k:g,_=_>0?_:0,E.length<1e4)(A=Array.from(E)).unshift(g,_),h.splice(...A);else for(_&&h.splice(g,_);b<E.length;)(A=E.slice(b,b+1e4)).unshift(g,0),h.splice(...A),b+=1e4,g+=1e4}function node_modules_micromark_util_chunked_push(h,g){return h.length>0?(node_modules_micromark_util_chunked_splice(h,h.length,0,g),h):g}let SpliceBuffer=class SpliceBuffer{constructor(h){this.left=h?[...h]:[],this.right=[]}get(h){if(h<0||h>=this.left.length+this.right.length)throw RangeError("Cannot access index `"+h+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return h<this.left.length?this.left[h]:this.right[this.right.length-h+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(h,g){let _=null==g?Number.POSITIVE_INFINITY:g;return _<this.left.length?this.left.slice(h,_):h>this.left.length?this.right.slice(this.right.length-_+this.left.length,this.right.length-h+this.left.length).reverse():this.left.slice(h).concat(this.right.slice(this.right.length-_+this.left.length).reverse())}splice(h,g,_){let E=g||0;this.setCursor(Math.trunc(h));let A=this.right.splice(this.right.length-E,Number.POSITIVE_INFINITY);return _&&chunkedPush(this.left,_),A.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(h){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(h)}pushMany(h){this.setCursor(Number.POSITIVE_INFINITY),chunkedPush(this.left,h)}unshift(h){this.setCursor(0),this.right.push(h)}unshiftMany(h){this.setCursor(0),chunkedPush(this.right,h.reverse())}setCursor(h){if(h!==this.left.length&&(!(h>this.left.length)||0!==this.right.length)&&(!(h<0)||0!==this.left.length)){if(h<this.left.length){let g=this.left.splice(h,Number.POSITIVE_INFINITY);chunkedPush(this.right,g.reverse())}else{let g=this.right.splice(this.left.length+this.right.length-h,Number.POSITIVE_INFINITY);chunkedPush(this.left,g.reverse())}}}};function chunkedPush(h,g){let _=0;if(g.length<1e4)h.push(...g);else for(;_<g.length;)h.push(...g.slice(_,_+1e4)),_+=1e4}function subtokenize(h){let g,_,E,A,k,b,C;let S={},w=-1,N=new SpliceBuffer(h);for(;++w<N.length;){for(;(w in S);)w=S[w];if(g=N.get(w),w&&"chunkFlow"===g[1].type&&"listItemPrefix"===N.get(w-1)[1].type&&((E=0)<(b=g[1]._tokenizer.events).length&&"lineEndingBlank"===b[E][1].type&&(E+=2),E<b.length&&"content"===b[E][1].type))for(;++E<b.length&&"content"!==b[E][1].type;)"chunkText"===b[E][1].type&&(b[E][1]._isInFirstContentOfListItem=!0,E++);if("enter"===g[0])g[1].contentType&&(Object.assign(S,function(h,g){let _,E;let A=h.get(g)[1],k=h.get(g)[2],b=g-1,C=[],S=A._tokenizer||k.parser[A.contentType](A.start),w=S.events,N=[],R={},L=-1,P=A,z=0,G=0,$=[G];for(;P;){for(;h.get(++b)[1]!==P;);C.push(b),!P._tokenizer&&(_=k.sliceStream(P),P.next||_.push(null),E&&S.defineSkip(P.start),P._isInFirstContentOfListItem&&(S._gfmTasklistFirstContentOfListItem=!0),S.write(_),P._isInFirstContentOfListItem&&(S._gfmTasklistFirstContentOfListItem=void 0)),E=P,P=P.next}for(P=A;++L<w.length;)"exit"===w[L][0]&&"enter"===w[L-1][0]&&w[L][1].type===w[L-1][1].type&&w[L][1].start.line!==w[L][1].end.line&&(G=L+1,$.push(G),P._tokenizer=void 0,P.previous=void 0,P=P.next);for(S.events=[],P?(P._tokenizer=void 0,P.previous=void 0):$.pop(),L=$.length;L--;){let g=w.slice($[L],$[L+1]),_=C.pop();N.push([_,_+g.length-1]),h.splice(_,2,g)}for(N.reverse(),L=-1;++L<N.length;)R[z+N[L][0]]=z+N[L][1],z+=N[L][1]-N[L][0]-1;return R}(N,w)),w=S[w],C=!0);else if(g[1]._container){for(E=w,_=void 0;E--;)if("lineEnding"===(A=N.get(E))[1].type||"lineEndingBlank"===A[1].type)"enter"===A[0]&&(_&&(N.get(_)[1].type="lineEndingBlank"),A[1].type="lineEnding",_=E);else break;_&&(g[1].end=Object.assign({},N.get(_)[1].start),(k=N.slice(_,w)).unshift(g),N.splice(_,w-_+1,k))}}return node_modules_micromark_util_chunked_splice(h,0,Number.POSITIVE_INFINITY,N.slice(0)),!C}let iN={}.hasOwnProperty,iO=use_markdown_node_modules_micromark_util_character_regexCheck(/[A-Za-z]/),iR=use_markdown_node_modules_micromark_util_character_regexCheck(/[\dA-Za-z]/),iD=use_markdown_node_modules_micromark_util_character_regexCheck(/[#-'*+\--9=?A-Z^-~]/);function use_markdown_node_modules_micromark_util_character_asciiControl(h){return null!==h&&(h<32||127===h)}let iL=use_markdown_node_modules_micromark_util_character_regexCheck(/\d/),iP=use_markdown_node_modules_micromark_util_character_regexCheck(/[\dA-Fa-f]/),iM=use_markdown_node_modules_micromark_util_character_regexCheck(/[!-/:-@[-`{-~]/);function use_markdown_node_modules_micromark_util_character_markdownLineEnding(h){return null!==h&&h<-2}function use_markdown_node_modules_micromark_util_character_markdownLineEndingOrSpace(h){return null!==h&&(h<0||32===h)}function use_markdown_node_modules_micromark_util_character_markdownSpace(h){return -2===h||-1===h||32===h}let iF=use_markdown_node_modules_micromark_util_character_regexCheck(/\p{P}|\p{S}/u),iB=use_markdown_node_modules_micromark_util_character_regexCheck(/\s/);function use_markdown_node_modules_micromark_util_character_regexCheck(h){return function(g){return null!==g&&g>-1&&h.test(String.fromCharCode(g))}}function use_markdown_node_modules_micromark_factory_space_factorySpace(h,g,_,E){let A=E?E-1:Number.POSITIVE_INFINITY,k=0;return function(E){return use_markdown_node_modules_micromark_util_character_markdownSpace(E)?(h.enter(_),function prefix(E){return use_markdown_node_modules_micromark_util_character_markdownSpace(E)&&k++<A?(h.consume(E),prefix):(h.exit(_),g(E))}(E)):g(E)}}let iH={tokenize:function(h){let g;let _=h.attempt(this.parser.constructs.contentInitial,function(g){if(null===g){h.consume(g);return}return h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),use_markdown_node_modules_micromark_factory_space_factorySpace(h,_,"linePrefix")},function(_){return h.enter("paragraph"),function lineStart(_){let E=h.enter("chunkText",{contentType:"text",previous:g});return g&&(g.next=E),g=E,function data(g){if(null===g){h.exit("chunkText"),h.exit("paragraph"),h.consume(g);return}return use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(h.consume(g),h.exit("chunkText"),lineStart):(h.consume(g),data)}(_)}(_)});return _}},iU={tokenize:function(h){let g,_,E;let A=this,k=[],b=0;return start;function start(g){if(b<k.length){let _=k[b];return A.containerState=_[1],h.attempt(_[0].continuation,documentContinue,checkNewContainers)(g)}return checkNewContainers(g)}function documentContinue(h){if(b++,A.containerState._closeFlow){let _;A.containerState._closeFlow=void 0,g&&closeFlow();let E=A.events.length,k=E;for(;k--;)if("exit"===A.events[k][0]&&"chunkFlow"===A.events[k][1].type){_=A.events[k][1].end;break}exitContainers(b);let C=E;for(;C<A.events.length;)A.events[C][1].end=Object.assign({},_),C++;return node_modules_micromark_util_chunked_splice(A.events,k+1,0,A.events.slice(E)),A.events.length=C,checkNewContainers(h)}return start(h)}function checkNewContainers(_){if(b===k.length){if(!g)return documentContinued(_);if(g.currentConstruct&&g.currentConstruct.concrete)return flowStart(_);A.interrupt=!!(g.currentConstruct&&!g._gfmTableDynamicInterruptHack)}return A.containerState={},h.check(iz,thereIsANewContainer,thereIsNoNewContainer)(_)}function thereIsANewContainer(h){return g&&closeFlow(),exitContainers(b),documentContinued(h)}function thereIsNoNewContainer(h){return A.parser.lazy[A.now().line]=b!==k.length,E=A.now().offset,flowStart(h)}function documentContinued(g){return A.containerState={},h.attempt(iz,containerContinue,flowStart)(g)}function containerContinue(h){return b++,k.push([A.currentConstruct,A.containerState]),documentContinued(h)}function flowStart(E){if(null===E){g&&closeFlow(),exitContainers(0),h.consume(E);return}return g=g||A.parser.flow(A.now()),h.enter("chunkFlow",{contentType:"flow",previous:_,_tokenizer:g}),function flowContinue(g){if(null===g){writeToChild(h.exit("chunkFlow"),!0),exitContainers(0),h.consume(g);return}return use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(h.consume(g),writeToChild(h.exit("chunkFlow")),b=0,A.interrupt=void 0,start):(h.consume(g),flowContinue)}(E)}function writeToChild(h,k){let C=A.sliceStream(h);if(k&&C.push(null),h.previous=_,_&&(_.next=h),_=h,g.defineSkip(h.start),g.write(C),A.parser.lazy[h.start.line]){let h,_,k=g.events.length;for(;k--;)if(g.events[k][1].start.offset<E&&(!g.events[k][1].end||g.events[k][1].end.offset>E))return;let C=A.events.length,S=C;for(;S--;)if("exit"===A.events[S][0]&&"chunkFlow"===A.events[S][1].type){if(h){_=A.events[S][1].end;break}h=!0}for(exitContainers(b),k=C;k<A.events.length;)A.events[k][1].end=Object.assign({},_),k++;node_modules_micromark_util_chunked_splice(A.events,S+1,0,A.events.slice(C)),A.events.length=k}}function exitContainers(g){let _=k.length;for(;_-- >g;){let g=k[_];A.containerState=g[1],g[0].exit.call(A,h)}k.length=g}function closeFlow(){g.write([null]),_=void 0,g=void 0,A.containerState._closeFlow=void 0}}},iz={tokenize:function(h,g,_){return use_markdown_node_modules_micromark_factory_space_factorySpace(h,h.attempt(this.parser.constructs.document,g,_),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}},iG={tokenize:function(h,g,_){return function(g){return use_markdown_node_modules_micromark_util_character_markdownSpace(g)?use_markdown_node_modules_micromark_factory_space_factorySpace(h,after,"linePrefix")(g):after(g)};function after(h){return null===h||use_markdown_node_modules_micromark_util_character_markdownLineEnding(h)?g(h):_(h)}},partial:!0},i$={tokenize:function(h,g){let _;return function(g){return h.enter("content"),_=h.enter("chunkContent",{contentType:"content"}),chunkInside(g)};function chunkInside(g){return null===g?contentEnd(g):use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?h.check(ij,contentContinue,contentEnd)(g):(h.consume(g),chunkInside)}function contentEnd(_){return h.exit("chunkContent"),h.exit("content"),g(_)}function contentContinue(g){return h.consume(g),h.exit("chunkContent"),_.next=h.enter("chunkContent",{contentType:"content",previous:_}),_=_.next,chunkInside}},resolve:function(h){return subtokenize(h),h}},ij={tokenize:function(h,g,_){let E=this;return function(g){return h.exit("chunkContent"),h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),use_markdown_node_modules_micromark_factory_space_factorySpace(h,prefixed,"linePrefix")};function prefixed(A){if(null===A||use_markdown_node_modules_micromark_util_character_markdownLineEnding(A))return _(A);let k=E.events[E.events.length-1];return!E.parser.constructs.disable.null.includes("codeIndented")&&k&&"linePrefix"===k[1].type&&k[2].sliceSerialize(k[1],!0).length>=4?g(A):h.interrupt(E.parser.constructs.flow,_,g)(A)}},partial:!0},iq={tokenize:function(h){let g=this,_=h.attempt(iG,function(E){if(null===E){h.consume(E);return}return h.enter("lineEndingBlank"),h.consume(E),h.exit("lineEndingBlank"),g.currentConstruct=void 0,_},h.attempt(this.parser.constructs.flowInitial,afterConstruct,use_markdown_node_modules_micromark_factory_space_factorySpace(h,h.attempt(this.parser.constructs.flow,afterConstruct,h.attempt(i$,afterConstruct)),"linePrefix")));return _;function afterConstruct(E){if(null===E){h.consume(E);return}return h.enter("lineEnding"),h.consume(E),h.exit("lineEnding"),g.currentConstruct=void 0,_}}},iV={resolveAll:createResolver()},iY=initializeFactory("string"),iW=initializeFactory("text");function initializeFactory(h){return{tokenize:function(g){let _=this,E=this.parser.constructs[h],A=g.attempt(E,start,notText);return start;function start(h){return atBreak(h)?A(h):notText(h)}function notText(h){if(null===h){g.consume(h);return}return g.enter("data"),g.consume(h),data}function data(h){return atBreak(h)?(g.exit("data"),A(h)):(g.consume(h),data)}function atBreak(h){if(null===h)return!0;let g=E[h],A=-1;if(g)for(;++A<g.length;){let h=g[A];if(!h.previous||h.previous.call(_,_.previous))return!0}return!1}},resolveAll:createResolver("text"===h?resolveAllLineSuffixes:void 0)}}function createResolver(h){return function(g,_){let E,A=-1;for(;++A<=g.length;)void 0===E?g[A]&&"data"===g[A][1].type&&(E=A,A++):g[A]&&"data"===g[A][1].type||(A!==E+2&&(g[E][1].end=g[A-1][1].end,g.splice(E+2,A-E-2),A=E+2),E=void 0);return h?h(g,_):g}}function resolveAllLineSuffixes(h,g){let _=0;for(;++_<=h.length;)if((_===h.length||"lineEnding"===h[_][1].type)&&"data"===h[_-1][1].type){let E;let A=h[_-1][1],k=g.sliceStream(A),b=k.length,C=-1,S=0;for(;b--;){let h=k[b];if("string"==typeof h){for(C=h.length;32===h.charCodeAt(C-1);)S++,C--;if(C)break;C=-1}else if(-2===h)E=!0,S++;else if(-1===h);else{b++;break}}if(S){let k={type:_===h.length||E||S<2?"lineSuffix":"hardBreakTrailing",start:{line:A.end.line,column:A.end.column-S,offset:A.end.offset-S,_index:A.start._index+b,_bufferIndex:b?C:A.start._bufferIndex+C},end:Object.assign({},A.end)};A.end=Object.assign({},k.start),A.start.offset===A.end.offset?Object.assign(A,k):(h.splice(_,0,["enter",k,g],["exit",k,g]),_+=2)}_++}return h}function micromark_util_resolve_all_resolveAll(h,g,_){let E=[],A=-1;for(;++A<h.length;){let k=h[A].resolveAll;k&&!E.includes(k)&&(g=k(g,_),E.push(k))}return g}let iQ={name:"thematicBreak",tokenize:function(h,g,_){let E,A=0;return function(k){return h.enter("thematicBreak"),E=k,function atBreak(k){return k===E?(h.enter("thematicBreakSequence"),function sequence(g){return g===E?(h.consume(g),A++,sequence):(h.exit("thematicBreakSequence"),use_markdown_node_modules_micromark_util_character_markdownSpace(g)?use_markdown_node_modules_micromark_factory_space_factorySpace(h,atBreak,"whitespace")(g):atBreak(g))}(k)):A>=3&&(null===k||use_markdown_node_modules_micromark_util_character_markdownLineEnding(k))?(h.exit("thematicBreak"),g(k)):_(k)}(k)}}},iX={name:"list",tokenize:function(h,g,_){let E=this,A=E.events[E.events.length-1],k=A&&"linePrefix"===A[1].type?A[2].sliceSerialize(A[1],!0).length:0,b=0;return function(g){let A=E.containerState.type||(42===g||43===g||45===g?"listUnordered":"listOrdered");if("listUnordered"===A?!E.containerState.marker||g===E.containerState.marker:iL(g)){if(E.containerState.type||(E.containerState.type=A,h.enter(A,{_container:!0})),"listUnordered"===A)return h.enter("listItemPrefix"),42===g||45===g?h.check(iQ,_,atMarker)(g):atMarker(g);if(!E.interrupt||49===g)return h.enter("listItemPrefix"),h.enter("listItemValue"),function inside(g){return iL(g)&&++b<10?(h.consume(g),inside):(!E.interrupt||b<2)&&(E.containerState.marker?g===E.containerState.marker:41===g||46===g)?(h.exit("listItemValue"),atMarker(g)):_(g)}(g)}return _(g)};function atMarker(g){return h.enter("listItemMarker"),h.consume(g),h.exit("listItemMarker"),E.containerState.marker=E.containerState.marker||g,h.check(iG,E.interrupt?_:onBlank,h.attempt(iK,endOfPrefix,otherPrefix))}function onBlank(h){return E.containerState.initialBlankLine=!0,k++,endOfPrefix(h)}function otherPrefix(g){return use_markdown_node_modules_micromark_util_character_markdownSpace(g)?(h.enter("listItemPrefixWhitespace"),h.consume(g),h.exit("listItemPrefixWhitespace"),endOfPrefix):_(g)}function endOfPrefix(_){return E.containerState.size=k+E.sliceSerialize(h.exit("listItemPrefix"),!0).length,g(_)}},continuation:{tokenize:function(h,g,_){let E=this;return E.containerState._closeFlow=void 0,h.check(iG,function(_){return E.containerState.furtherBlankLines=E.containerState.furtherBlankLines||E.containerState.initialBlankLine,use_markdown_node_modules_micromark_factory_space_factorySpace(h,g,"listItemIndent",E.containerState.size+1)(_)},function(_){return E.containerState.furtherBlankLines||!use_markdown_node_modules_micromark_util_character_markdownSpace(_)?(E.containerState.furtherBlankLines=void 0,E.containerState.initialBlankLine=void 0,notInCurrentItem(_)):(E.containerState.furtherBlankLines=void 0,E.containerState.initialBlankLine=void 0,h.attempt(iZ,g,notInCurrentItem)(_))});function notInCurrentItem(A){return E.containerState._closeFlow=!0,E.interrupt=void 0,use_markdown_node_modules_micromark_factory_space_factorySpace(h,h.attempt(iX,g,_),"linePrefix",E.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A)}}},exit:function(h){h.exit(this.containerState.type)}},iK={tokenize:function(h,g,_){let E=this;return use_markdown_node_modules_micromark_factory_space_factorySpace(h,function(h){let A=E.events[E.events.length-1];return!use_markdown_node_modules_micromark_util_character_markdownSpace(h)&&A&&"listItemPrefixWhitespace"===A[1].type?g(h):_(h)},"listItemPrefixWhitespace",E.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},iZ={tokenize:function(h,g,_){let E=this;return use_markdown_node_modules_micromark_factory_space_factorySpace(h,function(h){let A=E.events[E.events.length-1];return A&&"listItemIndent"===A[1].type&&A[2].sliceSerialize(A[1],!0).length===E.containerState.size?g(h):_(h)},"listItemIndent",E.containerState.size+1)},partial:!0},iJ={name:"blockQuote",tokenize:function(h,g,_){let E=this;return function(g){if(62===g){let _=E.containerState;return _.open||(h.enter("blockQuote",{_container:!0}),_.open=!0),h.enter("blockQuotePrefix"),h.enter("blockQuoteMarker"),h.consume(g),h.exit("blockQuoteMarker"),after}return _(g)};function after(_){return use_markdown_node_modules_micromark_util_character_markdownSpace(_)?(h.enter("blockQuotePrefixWhitespace"),h.consume(_),h.exit("blockQuotePrefixWhitespace"),h.exit("blockQuotePrefix"),g):(h.exit("blockQuotePrefix"),g(_))}},continuation:{tokenize:function(h,g,_){let E=this;return function(g){return use_markdown_node_modules_micromark_util_character_markdownSpace(g)?use_markdown_node_modules_micromark_factory_space_factorySpace(h,contBefore,"linePrefix",E.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(g):contBefore(g)};function contBefore(E){return h.attempt(iJ,g,_)(E)}}},exit:function(h){h.exit("blockQuote")}};function factoryDestination(h,g,_,E,A,k,b,C,S){let w=S||Number.POSITIVE_INFINITY,N=0;return function(g){return 60===g?(h.enter(E),h.enter(A),h.enter(k),h.consume(g),h.exit(k),enclosedBefore):null===g||32===g||41===g||use_markdown_node_modules_micromark_util_character_asciiControl(g)?_(g):(h.enter(E),h.enter(b),h.enter(C),h.enter("chunkString",{contentType:"string"}),raw(g))};function enclosedBefore(_){return 62===_?(h.enter(k),h.consume(_),h.exit(k),h.exit(A),h.exit(E),g):(h.enter(C),h.enter("chunkString",{contentType:"string"}),enclosed(_))}function enclosed(g){return 62===g?(h.exit("chunkString"),h.exit(C),enclosedBefore(g)):null===g||60===g||use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?_(g):(h.consume(g),92===g?enclosedEscape:enclosed)}function enclosedEscape(g){return 60===g||62===g||92===g?(h.consume(g),enclosed):enclosed(g)}function raw(A){return!N&&(null===A||41===A||use_markdown_node_modules_micromark_util_character_markdownLineEndingOrSpace(A))?(h.exit("chunkString"),h.exit(C),h.exit(b),h.exit(E),g(A)):N<w&&40===A?(h.consume(A),N++,raw):41===A?(h.consume(A),N--,raw):null===A||32===A||40===A||use_markdown_node_modules_micromark_util_character_asciiControl(A)?_(A):(h.consume(A),92===A?rawEscape:raw)}function rawEscape(g){return 40===g||41===g||92===g?(h.consume(g),raw):raw(g)}}function factoryLabel(h,g,_,E,A,k){let b;let C=this,S=0;return function(g){return h.enter(E),h.enter(A),h.consume(g),h.exit(A),h.enter(k),atBreak};function atBreak(w){return S>999||null===w||91===w||93===w&&!b||94===w&&!S&&"_hiddenFootnoteSupport"in C.parser.constructs?_(w):93===w?(h.exit(k),h.enter(A),h.consume(w),h.exit(A),h.exit(E),g):use_markdown_node_modules_micromark_util_character_markdownLineEnding(w)?(h.enter("lineEnding"),h.consume(w),h.exit("lineEnding"),atBreak):(h.enter("chunkString",{contentType:"string"}),labelInside(w))}function labelInside(g){return null===g||91===g||93===g||use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)||S++>999?(h.exit("chunkString"),atBreak(g)):(h.consume(g),b||(b=!use_markdown_node_modules_micromark_util_character_markdownSpace(g)),92===g?labelEscape:labelInside)}function labelEscape(g){return 91===g||92===g||93===g?(h.consume(g),S++,labelInside):labelInside(g)}}function factoryTitle(h,g,_,E,A,k){let b;return function(g){return 34===g||39===g||40===g?(h.enter(E),h.enter(A),h.consume(g),h.exit(A),b=40===g?41:g,begin):_(g)};function begin(_){return _===b?(h.enter(A),h.consume(_),h.exit(A),h.exit(E),g):(h.enter(k),atBreak(_))}function atBreak(g){return g===b?(h.exit(k),begin(b)):null===g?_(g):use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),use_markdown_node_modules_micromark_factory_space_factorySpace(h,atBreak,"linePrefix")):(h.enter("chunkString",{contentType:"string"}),inside(g))}function inside(g){return g===b||null===g||use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(h.exit("chunkString"),atBreak(g)):(h.consume(g),92===g?escape:inside)}function escape(g){return g===b||92===g?(h.consume(g),inside):inside(g)}}function factoryWhitespace(h,g){let _;return function start(E){return use_markdown_node_modules_micromark_util_character_markdownLineEnding(E)?(h.enter("lineEnding"),h.consume(E),h.exit("lineEnding"),_=!0,start):use_markdown_node_modules_micromark_util_character_markdownSpace(E)?use_markdown_node_modules_micromark_factory_space_factorySpace(h,start,_?"linePrefix":"lineSuffix")(E):g(E)}}function node_modules_micromark_util_normalize_identifier_normalizeIdentifier(h){return h.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}let i0={tokenize:function(h,g,_){return function(g){return use_markdown_node_modules_micromark_util_character_markdownLineEndingOrSpace(g)?factoryWhitespace(h,beforeMarker)(g):_(g)};function beforeMarker(g){return factoryTitle(h,titleAfter,_,"definitionTitle","definitionTitleMarker","definitionTitleString")(g)}function titleAfter(g){return use_markdown_node_modules_micromark_util_character_markdownSpace(g)?use_markdown_node_modules_micromark_factory_space_factorySpace(h,titleAfterOptionalWhitespace,"whitespace")(g):titleAfterOptionalWhitespace(g)}function titleAfterOptionalWhitespace(h){return null===h||use_markdown_node_modules_micromark_util_character_markdownLineEnding(h)?g(h):_(h)}},partial:!0},i1={name:"codeIndented",tokenize:function(h,g,_){let E=this;return function(g){return h.enter("codeIndented"),use_markdown_node_modules_micromark_factory_space_factorySpace(h,afterPrefix,"linePrefix",5)(g)};function afterPrefix(g){let A=E.events[E.events.length-1];return A&&"linePrefix"===A[1].type&&A[2].sliceSerialize(A[1],!0).length>=4?function atBreak(g){return null===g?after(g):use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?h.attempt(i2,atBreak,after)(g):(h.enter("codeFlowValue"),function inside(g){return null===g||use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(h.exit("codeFlowValue"),atBreak(g)):(h.consume(g),inside)}(g))}(g):_(g)}function after(_){return h.exit("codeIndented"),g(_)}}},i2={tokenize:function(h,g,_){let E=this;return furtherStart;function furtherStart(g){return E.parser.lazy[E.now().line]?_(g):use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),furtherStart):use_markdown_node_modules_micromark_factory_space_factorySpace(h,afterPrefix,"linePrefix",5)(g)}function afterPrefix(h){let A=E.events[E.events.length-1];return A&&"linePrefix"===A[1].type&&A[2].sliceSerialize(A[1],!0).length>=4?g(h):use_markdown_node_modules_micromark_util_character_markdownLineEnding(h)?furtherStart(h):_(h)}},partial:!0},i3={name:"setextUnderline",tokenize:function(h,g,_){let E;let A=this;return function(g){let k,b=A.events.length;for(;b--;)if("lineEnding"!==A.events[b][1].type&&"linePrefix"!==A.events[b][1].type&&"content"!==A.events[b][1].type){k="paragraph"===A.events[b][1].type;break}return!A.parser.lazy[A.now().line]&&(A.interrupt||k)?(h.enter("setextHeadingLine"),E=g,h.enter("setextHeadingLineSequence"),function inside(g){return g===E?(h.consume(g),inside):(h.exit("setextHeadingLineSequence"),use_markdown_node_modules_micromark_util_character_markdownSpace(g)?use_markdown_node_modules_micromark_factory_space_factorySpace(h,after,"lineSuffix")(g):after(g))}(g)):_(g)};function after(E){return null===E||use_markdown_node_modules_micromark_util_character_markdownLineEnding(E)?(h.exit("setextHeadingLine"),g(E)):_(E)}},resolveTo:function(h,g){let _,E,A,k=h.length;for(;k--;)if("enter"===h[k][0]){if("content"===h[k][1].type){_=k;break}"paragraph"===h[k][1].type&&(E=k)}else"content"===h[k][1].type&&h.splice(k,1),A||"definition"!==h[k][1].type||(A=k);let b={type:"setextHeading",start:Object.assign({},h[E][1].start),end:Object.assign({},h[h.length-1][1].end)};return h[E][1].type="setextHeadingText",A?(h.splice(E,0,["enter",b,g]),h.splice(A+1,0,["exit",h[_][1],g]),h[_][1].end=Object.assign({},h[A][1].end)):h[_][1]=b,h.push(["exit",b,g]),h}},i4=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],i5=["pre","script","style","textarea"],i6={tokenize:function(h,g,_){return function(E){return h.enter("lineEnding"),h.consume(E),h.exit("lineEnding"),h.attempt(iG,g,_)}},partial:!0},i8={tokenize:function(h,g,_){let E=this;return function(g){return use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),after):_(g)};function after(h){return E.parser.lazy[E.now().line]?_(h):g(h)}},partial:!0},i9={tokenize:function(h,g,_){let E=this;return function(g){return null===g?_(g):(h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),lineStart)};function lineStart(h){return E.parser.lazy[E.now().line]?_(h):g(h)}},partial:!0},i7={name:"codeFenced",tokenize:function(h,g,_){let E;let A=this,k={tokenize:function(h,g,_){let k=0;return function(g){return h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),start};function start(g){return h.enter("codeFencedFence"),use_markdown_node_modules_micromark_util_character_markdownSpace(g)?use_markdown_node_modules_micromark_factory_space_factorySpace(h,beforeSequenceClose,"linePrefix",A.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(g):beforeSequenceClose(g)}function beforeSequenceClose(g){return g===E?(h.enter("codeFencedFenceSequence"),function sequenceClose(g){return g===E?(k++,h.consume(g),sequenceClose):k>=C?(h.exit("codeFencedFenceSequence"),use_markdown_node_modules_micromark_util_character_markdownSpace(g)?use_markdown_node_modules_micromark_factory_space_factorySpace(h,sequenceCloseAfter,"whitespace")(g):sequenceCloseAfter(g)):_(g)}(g)):_(g)}function sequenceCloseAfter(E){return null===E||use_markdown_node_modules_micromark_util_character_markdownLineEnding(E)?(h.exit("codeFencedFence"),g(E)):_(E)}},partial:!0},b=0,C=0;return function(g){return function(g){let k=A.events[A.events.length-1];return b=k&&"linePrefix"===k[1].type?k[2].sliceSerialize(k[1],!0).length:0,E=g,h.enter("codeFenced"),h.enter("codeFencedFence"),h.enter("codeFencedFenceSequence"),function sequenceOpen(g){return g===E?(C++,h.consume(g),sequenceOpen):C<3?_(g):(h.exit("codeFencedFenceSequence"),use_markdown_node_modules_micromark_util_character_markdownSpace(g)?use_markdown_node_modules_micromark_factory_space_factorySpace(h,infoBefore,"whitespace")(g):infoBefore(g))}(g)}(g)};function infoBefore(k){return null===k||use_markdown_node_modules_micromark_util_character_markdownLineEnding(k)?(h.exit("codeFencedFence"),A.interrupt?g(k):h.check(i9,atNonLazyBreak,after)(k)):(h.enter("codeFencedFenceInfo"),h.enter("chunkString",{contentType:"string"}),function info(g){return null===g||use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(h.exit("chunkString"),h.exit("codeFencedFenceInfo"),infoBefore(g)):use_markdown_node_modules_micromark_util_character_markdownSpace(g)?(h.exit("chunkString"),h.exit("codeFencedFenceInfo"),use_markdown_node_modules_micromark_factory_space_factorySpace(h,metaBefore,"whitespace")(g)):96===g&&g===E?_(g):(h.consume(g),info)}(k))}function metaBefore(g){return null===g||use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?infoBefore(g):(h.enter("codeFencedFenceMeta"),h.enter("chunkString",{contentType:"string"}),function meta(g){return null===g||use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(h.exit("chunkString"),h.exit("codeFencedFenceMeta"),infoBefore(g)):96===g&&g===E?_(g):(h.consume(g),meta)}(g))}function atNonLazyBreak(g){return h.attempt(k,after,contentBefore)(g)}function contentBefore(g){return h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),contentStart}function contentStart(g){return b>0&&use_markdown_node_modules_micromark_util_character_markdownSpace(g)?use_markdown_node_modules_micromark_factory_space_factorySpace(h,beforeContentChunk,"linePrefix",b+1)(g):beforeContentChunk(g)}function beforeContentChunk(g){return null===g||use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?h.check(i9,atNonLazyBreak,after)(g):(h.enter("codeFlowValue"),function contentChunk(g){return null===g||use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(h.exit("codeFlowValue"),beforeContentChunk(g)):(h.consume(g),contentChunk)}(g))}function after(_){return h.exit("codeFenced"),g(_)}},concrete:!0},ae=document.createElement("i");function decodeNamedCharacterReference(h){let g="&"+h+";";ae.innerHTML=g;let _=ae.textContent;return(59!==_.charCodeAt(_.length-1)||"semi"===h)&&_!==g&&_}let at={name:"characterReference",tokenize:function(h,g,_){let E,A;let k=this,b=0;return function(g){return h.enter("characterReference"),h.enter("characterReferenceMarker"),h.consume(g),h.exit("characterReferenceMarker"),open};function open(g){return 35===g?(h.enter("characterReferenceMarkerNumeric"),h.consume(g),h.exit("characterReferenceMarkerNumeric"),numeric):(h.enter("characterReferenceValue"),E=31,A=iR,value(g))}function numeric(g){return 88===g||120===g?(h.enter("characterReferenceMarkerHexadecimal"),h.consume(g),h.exit("characterReferenceMarkerHexadecimal"),h.enter("characterReferenceValue"),E=6,A=iP,value):(h.enter("characterReferenceValue"),E=7,A=iL,value(g))}function value(C){if(59===C&&b){let E=h.exit("characterReferenceValue");return A!==iR||decodeNamedCharacterReference(k.sliceSerialize(E))?(h.enter("characterReferenceMarker"),h.consume(C),h.exit("characterReferenceMarker"),h.exit("characterReference"),g):_(C)}return A(C)&&b++<E?(h.consume(C),value):_(C)}}},an={name:"characterEscape",tokenize:function(h,g,_){return function(g){return h.enter("characterEscape"),h.enter("escapeMarker"),h.consume(g),h.exit("escapeMarker"),inside};function inside(E){return iM(E)?(h.enter("characterEscapeValue"),h.consume(E),h.exit("characterEscapeValue"),h.exit("characterEscape"),g):_(E)}}},ar={name:"lineEnding",tokenize:function(h,g){return function(_){return h.enter("lineEnding"),h.consume(_),h.exit("lineEnding"),use_markdown_node_modules_micromark_factory_space_factorySpace(h,g,"linePrefix")}}},ai={name:"labelEnd",tokenize:function(h,g,_){let E,A;let k=this,b=k.events.length;for(;b--;)if(("labelImage"===k.events[b][1].type||"labelLink"===k.events[b][1].type)&&!k.events[b][1]._balanced){E=k.events[b][1];break}return function(g){return E?E._inactive?labelEndNok(g):(A=k.parser.defined.includes(node_modules_micromark_util_normalize_identifier_normalizeIdentifier(k.sliceSerialize({start:E.end,end:k.now()}))),h.enter("labelEnd"),h.enter("labelMarker"),h.consume(g),h.exit("labelMarker"),h.exit("labelEnd"),after):_(g)};function after(g){return 40===g?h.attempt(ao,labelEndOk,A?labelEndOk:labelEndNok)(g):91===g?h.attempt(al,labelEndOk,A?referenceNotFull:labelEndNok)(g):A?labelEndOk(g):labelEndNok(g)}function referenceNotFull(g){return h.attempt(ac,labelEndOk,labelEndNok)(g)}function labelEndOk(h){return g(h)}function labelEndNok(h){return E._balanced=!0,_(h)}},resolveTo:function(h,g){let _,E,A,k,b=h.length,C=0;for(;b--;)if(_=h[b][1],E){if("link"===_.type||"labelLink"===_.type&&_._inactive)break;"enter"===h[b][0]&&"labelLink"===_.type&&(_._inactive=!0)}else if(A){if("enter"===h[b][0]&&("labelImage"===_.type||"labelLink"===_.type)&&!_._balanced&&(E=b,"labelLink"!==_.type)){C=2;break}}else"labelEnd"===_.type&&(A=b);let S={type:"labelLink"===h[E][1].type?"link":"image",start:Object.assign({},h[E][1].start),end:Object.assign({},h[h.length-1][1].end)},w={type:"label",start:Object.assign({},h[E][1].start),end:Object.assign({},h[A][1].end)},N={type:"labelText",start:Object.assign({},h[E+C+2][1].end),end:Object.assign({},h[A-2][1].start)};return k=node_modules_micromark_util_chunked_push(k=[["enter",S,g],["enter",w,g]],h.slice(E+1,E+C+3)),k=node_modules_micromark_util_chunked_push(k,[["enter",N,g]]),k=node_modules_micromark_util_chunked_push(k,micromark_util_resolve_all_resolveAll(g.parser.constructs.insideSpan.null,h.slice(E+C+4,A-3),g)),k=node_modules_micromark_util_chunked_push(k,[["exit",N,g],h[A-2],h[A-1],["exit",w,g]]),k=node_modules_micromark_util_chunked_push(k,h.slice(A+1)),k=node_modules_micromark_util_chunked_push(k,[["exit",S,g]]),node_modules_micromark_util_chunked_splice(h,E,h.length,k),h},resolveAll:function(h){let g=-1;for(;++g<h.length;){let _=h[g][1];("labelImage"===_.type||"labelLink"===_.type||"labelEnd"===_.type)&&(h.splice(g+1,"labelImage"===_.type?4:2),_.type="data",g++)}return h}},ao={tokenize:function(h,g,_){return function(g){return h.enter("resource"),h.enter("resourceMarker"),h.consume(g),h.exit("resourceMarker"),resourceBefore};function resourceBefore(g){return use_markdown_node_modules_micromark_util_character_markdownLineEndingOrSpace(g)?factoryWhitespace(h,resourceOpen)(g):resourceOpen(g)}function resourceOpen(g){return 41===g?resourceEnd(g):factoryDestination(h,resourceDestinationAfter,resourceDestinationMissing,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function resourceDestinationAfter(g){return use_markdown_node_modules_micromark_util_character_markdownLineEndingOrSpace(g)?factoryWhitespace(h,resourceBetween)(g):resourceEnd(g)}function resourceDestinationMissing(h){return _(h)}function resourceBetween(g){return 34===g||39===g||40===g?factoryTitle(h,resourceTitleAfter,_,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):resourceEnd(g)}function resourceTitleAfter(g){return use_markdown_node_modules_micromark_util_character_markdownLineEndingOrSpace(g)?factoryWhitespace(h,resourceEnd)(g):resourceEnd(g)}function resourceEnd(E){return 41===E?(h.enter("resourceMarker"),h.consume(E),h.exit("resourceMarker"),h.exit("resource"),g):_(E)}}},al={tokenize:function(h,g,_){let E=this;return function(g){return factoryLabel.call(E,h,referenceFullAfter,referenceFullMissing,"reference","referenceMarker","referenceString")(g)};function referenceFullAfter(h){return E.parser.defined.includes(node_modules_micromark_util_normalize_identifier_normalizeIdentifier(E.sliceSerialize(E.events[E.events.length-1][1]).slice(1,-1)))?g(h):_(h)}function referenceFullMissing(h){return _(h)}}},ac={tokenize:function(h,g,_){return function(g){return h.enter("reference"),h.enter("referenceMarker"),h.consume(g),h.exit("referenceMarker"),referenceCollapsedOpen};function referenceCollapsedOpen(E){return 93===E?(h.enter("referenceMarker"),h.consume(E),h.exit("referenceMarker"),h.exit("reference"),g):_(E)}}},au={name:"labelStartImage",tokenize:function(h,g,_){let E=this;return function(g){return h.enter("labelImage"),h.enter("labelImageMarker"),h.consume(g),h.exit("labelImageMarker"),open};function open(g){return 91===g?(h.enter("labelMarker"),h.consume(g),h.exit("labelMarker"),h.exit("labelImage"),after):_(g)}function after(h){return 94===h&&"_hiddenFootnoteSupport"in E.parser.constructs?_(h):g(h)}},resolveAll:ai.resolveAll};function micromark_util_classify_character_classifyCharacter(h){return null===h||use_markdown_node_modules_micromark_util_character_markdownLineEndingOrSpace(h)||iB(h)?1:iF(h)?2:void 0}let ad={name:"attention",tokenize:function(h,g){let _;let E=this.parser.constructs.attentionMarkers.null,A=this.previous,k=micromark_util_classify_character_classifyCharacter(A);return function(b){return _=b,h.enter("attentionSequence"),function inside(b){if(b===_)return h.consume(b),inside;let C=h.exit("attentionSequence"),S=micromark_util_classify_character_classifyCharacter(b),w=!S||2===S&&k||E.includes(b),N=!k||2===k&&S||E.includes(A);return C._open=!!(42===_?w:w&&(k||!N)),C._close=!!(42===_?N:N&&(S||!w)),g(b)}(b)}},resolveAll:function(h,g){let _,E,A,k,b,C,S,w,N=-1;for(;++N<h.length;)if("enter"===h[N][0]&&"attentionSequence"===h[N][1].type&&h[N][1]._close){for(_=N;_--;)if("exit"===h[_][0]&&"attentionSequence"===h[_][1].type&&h[_][1]._open&&g.sliceSerialize(h[_][1]).charCodeAt(0)===g.sliceSerialize(h[N][1]).charCodeAt(0)){if((h[_][1]._close||h[N][1]._open)&&(h[N][1].end.offset-h[N][1].start.offset)%3&&!((h[_][1].end.offset-h[_][1].start.offset+h[N][1].end.offset-h[N][1].start.offset)%3))continue;C=h[_][1].end.offset-h[_][1].start.offset>1&&h[N][1].end.offset-h[N][1].start.offset>1?2:1;let R=Object.assign({},h[_][1].end),L=Object.assign({},h[N][1].start);movePoint(R,-C),movePoint(L,C),k={type:C>1?"strongSequence":"emphasisSequence",start:R,end:Object.assign({},h[_][1].end)},b={type:C>1?"strongSequence":"emphasisSequence",start:Object.assign({},h[N][1].start),end:L},A={type:C>1?"strongText":"emphasisText",start:Object.assign({},h[_][1].end),end:Object.assign({},h[N][1].start)},E={type:C>1?"strong":"emphasis",start:Object.assign({},k.start),end:Object.assign({},b.end)},h[_][1].end=Object.assign({},k.start),h[N][1].start=Object.assign({},b.end),S=[],h[_][1].end.offset-h[_][1].start.offset&&(S=node_modules_micromark_util_chunked_push(S,[["enter",h[_][1],g],["exit",h[_][1],g]])),S=node_modules_micromark_util_chunked_push(S,[["enter",E,g],["enter",k,g],["exit",k,g],["enter",A,g]]),S=node_modules_micromark_util_chunked_push(S,micromark_util_resolve_all_resolveAll(g.parser.constructs.insideSpan.null,h.slice(_+1,N),g)),S=node_modules_micromark_util_chunked_push(S,[["exit",A,g],["enter",b,g],["exit",b,g],["exit",E,g]]),h[N][1].end.offset-h[N][1].start.offset?(w=2,S=node_modules_micromark_util_chunked_push(S,[["enter",h[N][1],g],["exit",h[N][1],g]])):w=0,node_modules_micromark_util_chunked_splice(h,_-1,N-_+3,S),N=_+S.length-w-2;break}}for(N=-1;++N<h.length;)"attentionSequence"===h[N][1].type&&(h[N][1].type="data");return h}};function movePoint(h,g){h.column+=g,h.offset+=g,h._bufferIndex+=g}let am={name:"labelStartLink",tokenize:function(h,g,_){let E=this;return function(g){return h.enter("labelLink"),h.enter("labelMarker"),h.consume(g),h.exit("labelMarker"),h.exit("labelLink"),after};function after(h){return 94===h&&"_hiddenFootnoteSupport"in E.parser.constructs?_(h):g(h)}},resolveAll:ai.resolveAll},ah={42:iX,43:iX,45:iX,48:iX,49:iX,50:iX,51:iX,52:iX,53:iX,54:iX,55:iX,56:iX,57:iX,62:iJ},ap={91:{name:"definition",tokenize:function(h,g,_){let E;let A=this;return function(g){return h.enter("definition"),factoryLabel.call(A,h,labelAfter,_,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)};function labelAfter(g){return(E=node_modules_micromark_util_normalize_identifier_normalizeIdentifier(A.sliceSerialize(A.events[A.events.length-1][1]).slice(1,-1)),58===g)?(h.enter("definitionMarker"),h.consume(g),h.exit("definitionMarker"),markerAfter):_(g)}function markerAfter(g){return use_markdown_node_modules_micromark_util_character_markdownLineEndingOrSpace(g)?factoryWhitespace(h,destinationBefore)(g):destinationBefore(g)}function destinationBefore(g){return factoryDestination(h,destinationAfter,_,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function destinationAfter(g){return h.attempt(i0,after,after)(g)}function after(g){return use_markdown_node_modules_micromark_util_character_markdownSpace(g)?use_markdown_node_modules_micromark_factory_space_factorySpace(h,afterWhitespace,"whitespace")(g):afterWhitespace(g)}function afterWhitespace(k){return null===k||use_markdown_node_modules_micromark_util_character_markdownLineEnding(k)?(h.exit("definition"),A.parser.defined.push(E),g(k)):_(k)}}}},af={[-2]:i1,[-1]:i1,32:i1},ag={35:{name:"headingAtx",tokenize:function(h,g,_){let E=0;return function(A){return h.enter("atxHeading"),h.enter("atxHeadingSequence"),function sequenceOpen(A){return 35===A&&E++<6?(h.consume(A),sequenceOpen):null===A||use_markdown_node_modules_micromark_util_character_markdownLineEndingOrSpace(A)?(h.exit("atxHeadingSequence"),function atBreak(_){return 35===_?(h.enter("atxHeadingSequence"),function sequenceFurther(g){return 35===g?(h.consume(g),sequenceFurther):(h.exit("atxHeadingSequence"),atBreak(g))}(_)):null===_||use_markdown_node_modules_micromark_util_character_markdownLineEnding(_)?(h.exit("atxHeading"),g(_)):use_markdown_node_modules_micromark_util_character_markdownSpace(_)?use_markdown_node_modules_micromark_factory_space_factorySpace(h,atBreak,"whitespace")(_):(h.enter("atxHeadingText"),function data(g){return null===g||35===g||use_markdown_node_modules_micromark_util_character_markdownLineEndingOrSpace(g)?(h.exit("atxHeadingText"),atBreak(g)):(h.consume(g),data)}(_))}(A)):_(A)}(A)}},resolve:function(h,g){let _,E,A=h.length-2,k=3;return"whitespace"===h[3][1].type&&(k+=2),A-2>k&&"whitespace"===h[A][1].type&&(A-=2),"atxHeadingSequence"===h[A][1].type&&(k===A-1||A-4>k&&"whitespace"===h[A-2][1].type)&&(A-=k+1===A?2:4),A>k&&(_={type:"atxHeadingText",start:h[k][1].start,end:h[A][1].end},E={type:"chunkText",start:h[k][1].start,end:h[A][1].end,contentType:"text"},node_modules_micromark_util_chunked_splice(h,k,A-k+1,[["enter",_,g],["enter",E,g],["exit",E,g],["exit",_,g]])),h}},42:iQ,45:[i3,iQ],60:{name:"htmlFlow",tokenize:function(h,g,_){let E,A,k,b,C;let S=this;return function(g){return h.enter("htmlFlow"),h.enter("htmlFlowData"),h.consume(g),open};function open(b){return 33===b?(h.consume(b),declarationOpen):47===b?(h.consume(b),A=!0,tagCloseStart):63===b?(h.consume(b),E=3,S.interrupt?g:continuationDeclarationInside):iO(b)?(h.consume(b),k=String.fromCharCode(b),tagName):_(b)}function declarationOpen(A){return 45===A?(h.consume(A),E=2,commentOpenInside):91===A?(h.consume(A),E=5,b=0,cdataOpenInside):iO(A)?(h.consume(A),E=4,S.interrupt?g:continuationDeclarationInside):_(A)}function commentOpenInside(E){return 45===E?(h.consume(E),S.interrupt?g:continuationDeclarationInside):_(E)}function cdataOpenInside(E){let A="CDATA[";return E===A.charCodeAt(b++)?(h.consume(E),b===A.length)?S.interrupt?g:continuation:cdataOpenInside:_(E)}function tagCloseStart(g){return iO(g)?(h.consume(g),k=String.fromCharCode(g),tagName):_(g)}function tagName(b){if(null===b||47===b||62===b||use_markdown_node_modules_micromark_util_character_markdownLineEndingOrSpace(b)){let C=47===b,w=k.toLowerCase();return!C&&!A&&i5.includes(w)?(E=1,S.interrupt?g(b):continuation(b)):i4.includes(k.toLowerCase())?(E=6,C)?(h.consume(b),basicSelfClosing):S.interrupt?g(b):continuation(b):(E=7,S.interrupt&&!S.parser.lazy[S.now().line]?_(b):A?function completeClosingTagAfter(g){return use_markdown_node_modules_micromark_util_character_markdownSpace(g)?(h.consume(g),completeClosingTagAfter):completeEnd(g)}(b):completeAttributeNameBefore(b))}return 45===b||iR(b)?(h.consume(b),k+=String.fromCharCode(b),tagName):_(b)}function basicSelfClosing(E){return 62===E?(h.consume(E),S.interrupt?g:continuation):_(E)}function completeAttributeNameBefore(g){return 47===g?(h.consume(g),completeEnd):58===g||95===g||iO(g)?(h.consume(g),completeAttributeName):use_markdown_node_modules_micromark_util_character_markdownSpace(g)?(h.consume(g),completeAttributeNameBefore):completeEnd(g)}function completeAttributeName(g){return 45===g||46===g||58===g||95===g||iR(g)?(h.consume(g),completeAttributeName):completeAttributeNameAfter(g)}function completeAttributeNameAfter(g){return 61===g?(h.consume(g),completeAttributeValueBefore):use_markdown_node_modules_micromark_util_character_markdownSpace(g)?(h.consume(g),completeAttributeNameAfter):completeAttributeNameBefore(g)}function completeAttributeValueBefore(g){return null===g||60===g||61===g||62===g||96===g?_(g):34===g||39===g?(h.consume(g),C=g,completeAttributeValueQuoted):use_markdown_node_modules_micromark_util_character_markdownSpace(g)?(h.consume(g),completeAttributeValueBefore):function completeAttributeValueUnquoted(g){return null===g||34===g||39===g||47===g||60===g||61===g||62===g||96===g||use_markdown_node_modules_micromark_util_character_markdownLineEndingOrSpace(g)?completeAttributeNameAfter(g):(h.consume(g),completeAttributeValueUnquoted)}(g)}function completeAttributeValueQuoted(g){return g===C?(h.consume(g),C=null,completeAttributeValueQuotedAfter):null===g||use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?_(g):(h.consume(g),completeAttributeValueQuoted)}function completeAttributeValueQuotedAfter(h){return 47===h||62===h||use_markdown_node_modules_micromark_util_character_markdownSpace(h)?completeAttributeNameBefore(h):_(h)}function completeEnd(g){return 62===g?(h.consume(g),completeAfter):_(g)}function completeAfter(g){return null===g||use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?continuation(g):use_markdown_node_modules_micromark_util_character_markdownSpace(g)?(h.consume(g),completeAfter):_(g)}function continuation(g){return 45===g&&2===E?(h.consume(g),continuationCommentInside):60===g&&1===E?(h.consume(g),continuationRawTagOpen):62===g&&4===E?(h.consume(g),continuationClose):63===g&&3===E?(h.consume(g),continuationDeclarationInside):93===g&&5===E?(h.consume(g),continuationCdataInside):use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)&&(6===E||7===E)?(h.exit("htmlFlowData"),h.check(i6,continuationAfter,continuationStart)(g)):null===g||use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(h.exit("htmlFlowData"),continuationStart(g)):(h.consume(g),continuation)}function continuationStart(g){return h.check(i8,continuationStartNonLazy,continuationAfter)(g)}function continuationStartNonLazy(g){return h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),continuationBefore}function continuationBefore(g){return null===g||use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?continuationStart(g):(h.enter("htmlFlowData"),continuation(g))}function continuationCommentInside(g){return 45===g?(h.consume(g),continuationDeclarationInside):continuation(g)}function continuationRawTagOpen(g){return 47===g?(h.consume(g),k="",continuationRawEndTag):continuation(g)}function continuationRawEndTag(g){if(62===g){let _=k.toLowerCase();return i5.includes(_)?(h.consume(g),continuationClose):continuation(g)}return iO(g)&&k.length<8?(h.consume(g),k+=String.fromCharCode(g),continuationRawEndTag):continuation(g)}function continuationCdataInside(g){return 93===g?(h.consume(g),continuationDeclarationInside):continuation(g)}function continuationDeclarationInside(g){return 62===g?(h.consume(g),continuationClose):45===g&&2===E?(h.consume(g),continuationDeclarationInside):continuation(g)}function continuationClose(g){return null===g||use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(h.exit("htmlFlowData"),continuationAfter(g)):(h.consume(g),continuationClose)}function continuationAfter(_){return h.exit("htmlFlow"),g(_)}},resolveTo:function(h){let g=h.length;for(;g--&&("enter"!==h[g][0]||"htmlFlow"!==h[g][1].type););return g>1&&"linePrefix"===h[g-2][1].type&&(h[g][1].start=h[g-2][1].start,h[g+1][1].start=h[g-2][1].start,h.splice(g-2,2)),h},concrete:!0},61:i3,95:iQ,96:i7,126:i7},a_={38:at,92:an},aE={[-5]:ar,[-4]:ar,[-3]:ar,33:au,38:at,42:ad,60:[{name:"autolink",tokenize:function(h,g,_){let E=0;return function(g){return h.enter("autolink"),h.enter("autolinkMarker"),h.consume(g),h.exit("autolinkMarker"),h.enter("autolinkProtocol"),open};function open(g){return iO(g)?(h.consume(g),schemeOrEmailAtext):64===g?_(g):emailAtext(g)}function schemeOrEmailAtext(g){return 43===g||45===g||46===g||iR(g)?(E=1,function schemeInsideOrEmailAtext(g){return 58===g?(h.consume(g),E=0,urlInside):(43===g||45===g||46===g||iR(g))&&E++<32?(h.consume(g),schemeInsideOrEmailAtext):(E=0,emailAtext(g))}(g)):emailAtext(g)}function urlInside(E){return 62===E?(h.exit("autolinkProtocol"),h.enter("autolinkMarker"),h.consume(E),h.exit("autolinkMarker"),h.exit("autolink"),g):null===E||32===E||60===E||use_markdown_node_modules_micromark_util_character_asciiControl(E)?_(E):(h.consume(E),urlInside)}function emailAtext(g){return 64===g?(h.consume(g),emailAtSignOrDot):iD(g)?(h.consume(g),emailAtext):_(g)}function emailAtSignOrDot(A){return iR(A)?function emailLabel(A){return 46===A?(h.consume(A),E=0,emailAtSignOrDot):62===A?(h.exit("autolinkProtocol").type="autolinkEmail",h.enter("autolinkMarker"),h.consume(A),h.exit("autolinkMarker"),h.exit("autolink"),g):function emailValue(g){if((45===g||iR(g))&&E++<63){let _=45===g?emailValue:emailLabel;return h.consume(g),_}return _(g)}(A)}(A):_(A)}}},{name:"htmlText",tokenize:function(h,g,_){let E,A,k;let b=this;return function(g){return h.enter("htmlText"),h.enter("htmlTextData"),h.consume(g),open};function open(g){return 33===g?(h.consume(g),declarationOpen):47===g?(h.consume(g),tagCloseStart):63===g?(h.consume(g),instruction):iO(g)?(h.consume(g),tagOpen):_(g)}function declarationOpen(g){return 45===g?(h.consume(g),commentOpenInside):91===g?(h.consume(g),A=0,cdataOpenInside):iO(g)?(h.consume(g),declaration):_(g)}function commentOpenInside(g){return 45===g?(h.consume(g),commentEnd):_(g)}function comment(g){return null===g?_(g):45===g?(h.consume(g),commentClose):use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(k=comment,lineEndingBefore(g)):(h.consume(g),comment)}function commentClose(g){return 45===g?(h.consume(g),commentEnd):comment(g)}function commentEnd(h){return 62===h?end(h):45===h?commentClose(h):comment(h)}function cdataOpenInside(g){let E="CDATA[";return g===E.charCodeAt(A++)?(h.consume(g),A===E.length?cdata:cdataOpenInside):_(g)}function cdata(g){return null===g?_(g):93===g?(h.consume(g),cdataClose):use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(k=cdata,lineEndingBefore(g)):(h.consume(g),cdata)}function cdataClose(g){return 93===g?(h.consume(g),cdataEnd):cdata(g)}function cdataEnd(g){return 62===g?end(g):93===g?(h.consume(g),cdataEnd):cdata(g)}function declaration(g){return null===g||62===g?end(g):use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(k=declaration,lineEndingBefore(g)):(h.consume(g),declaration)}function instruction(g){return null===g?_(g):63===g?(h.consume(g),instructionClose):use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(k=instruction,lineEndingBefore(g)):(h.consume(g),instruction)}function instructionClose(h){return 62===h?end(h):instruction(h)}function tagCloseStart(g){return iO(g)?(h.consume(g),tagClose):_(g)}function tagClose(g){return 45===g||iR(g)?(h.consume(g),tagClose):function tagCloseBetween(g){return use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(k=tagCloseBetween,lineEndingBefore(g)):use_markdown_node_modules_micromark_util_character_markdownSpace(g)?(h.consume(g),tagCloseBetween):end(g)}(g)}function tagOpen(g){return 45===g||iR(g)?(h.consume(g),tagOpen):47===g||62===g||use_markdown_node_modules_micromark_util_character_markdownLineEndingOrSpace(g)?tagOpenBetween(g):_(g)}function tagOpenBetween(g){return 47===g?(h.consume(g),end):58===g||95===g||iO(g)?(h.consume(g),tagOpenAttributeName):use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(k=tagOpenBetween,lineEndingBefore(g)):use_markdown_node_modules_micromark_util_character_markdownSpace(g)?(h.consume(g),tagOpenBetween):end(g)}function tagOpenAttributeName(g){return 45===g||46===g||58===g||95===g||iR(g)?(h.consume(g),tagOpenAttributeName):function tagOpenAttributeNameAfter(g){return 61===g?(h.consume(g),tagOpenAttributeValueBefore):use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(k=tagOpenAttributeNameAfter,lineEndingBefore(g)):use_markdown_node_modules_micromark_util_character_markdownSpace(g)?(h.consume(g),tagOpenAttributeNameAfter):tagOpenBetween(g)}(g)}function tagOpenAttributeValueBefore(g){return null===g||60===g||61===g||62===g||96===g?_(g):34===g||39===g?(h.consume(g),E=g,tagOpenAttributeValueQuoted):use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(k=tagOpenAttributeValueBefore,lineEndingBefore(g)):use_markdown_node_modules_micromark_util_character_markdownSpace(g)?(h.consume(g),tagOpenAttributeValueBefore):(h.consume(g),tagOpenAttributeValueUnquoted)}function tagOpenAttributeValueQuoted(g){return g===E?(h.consume(g),E=void 0,tagOpenAttributeValueQuotedAfter):null===g?_(g):use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(k=tagOpenAttributeValueQuoted,lineEndingBefore(g)):(h.consume(g),tagOpenAttributeValueQuoted)}function tagOpenAttributeValueUnquoted(g){return null===g||34===g||39===g||60===g||61===g||96===g?_(g):47===g||62===g||use_markdown_node_modules_micromark_util_character_markdownLineEndingOrSpace(g)?tagOpenBetween(g):(h.consume(g),tagOpenAttributeValueUnquoted)}function tagOpenAttributeValueQuotedAfter(h){return 47===h||62===h||use_markdown_node_modules_micromark_util_character_markdownLineEndingOrSpace(h)?tagOpenBetween(h):_(h)}function end(E){return 62===E?(h.consume(E),h.exit("htmlTextData"),h.exit("htmlText"),g):_(E)}function lineEndingBefore(g){return h.exit("htmlTextData"),h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),lineEndingAfter}function lineEndingAfter(g){return use_markdown_node_modules_micromark_util_character_markdownSpace(g)?use_markdown_node_modules_micromark_factory_space_factorySpace(h,lineEndingAfterPrefix,"linePrefix",b.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(g):lineEndingAfterPrefix(g)}function lineEndingAfterPrefix(g){return h.enter("htmlTextData"),k(g)}}}],91:am,92:[{name:"hardBreakEscape",tokenize:function(h,g,_){return function(g){return h.enter("hardBreakEscape"),h.consume(g),after};function after(E){return use_markdown_node_modules_micromark_util_character_markdownLineEnding(E)?(h.exit("hardBreakEscape"),g(E)):_(E)}}},an],93:ai,95:ad,96:{name:"codeText",tokenize:function(h,g,_){let E,A,k=0;return function(g){return h.enter("codeText"),h.enter("codeTextSequence"),function sequenceOpen(g){return 96===g?(h.consume(g),k++,sequenceOpen):(h.exit("codeTextSequence"),between(g))}(g)};function between(b){return null===b?_(b):32===b?(h.enter("space"),h.consume(b),h.exit("space"),between):96===b?(A=h.enter("codeTextSequence"),E=0,function sequenceClose(_){return 96===_?(h.consume(_),E++,sequenceClose):E===k?(h.exit("codeTextSequence"),h.exit("codeText"),g(_)):(A.type="codeTextData",data(_))}(b)):use_markdown_node_modules_micromark_util_character_markdownLineEnding(b)?(h.enter("lineEnding"),h.consume(b),h.exit("lineEnding"),between):(h.enter("codeTextData"),data(b))}function data(g){return null===g||32===g||96===g||use_markdown_node_modules_micromark_util_character_markdownLineEnding(g)?(h.exit("codeTextData"),between(g)):(h.consume(g),data)}},resolve:function(h){let g,_,E=h.length-4,A=3;if(("lineEnding"===h[3][1].type||"space"===h[A][1].type)&&("lineEnding"===h[E][1].type||"space"===h[E][1].type)){for(g=A;++g<E;)if("codeTextData"===h[g][1].type){h[A][1].type="codeTextPadding",h[E][1].type="codeTextPadding",A+=2,E-=2;break}}for(g=A-1,E++;++g<=E;)void 0===_?g!==E&&"lineEnding"!==h[g][1].type&&(_=g):(g===E||"lineEnding"===h[g][1].type)&&(h[_][1].type="codeTextData",g!==_+2&&(h[_][1].end=h[g-1][1].end,h.splice(_+2,g-_-2),E-=g-_-2,g=_+2),_=void 0);return h},previous:function(h){return 96!==h||"characterEscape"===this.events[this.events.length-1][1].type}}},aT={null:[ad,iV]},aA={null:[42,95]},ay={null:[]},ak=/[\0\t\n\r]/g;function decodeNumericCharacterReference(h,g){let _=Number.parseInt(h,g);return _<9||11===_||_>13&&_<32||_>126&&_<160||_>55295&&_<57344||_>64975&&_<65008||(65535&_)==65535||(65535&_)==65534||_>1114111?"":String.fromCodePoint(_)}let av=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function decode(h,g,_){if(g)return g;let E=_.charCodeAt(0);if(35===E){let h=_.charCodeAt(1),g=120===h||88===h;return decodeNumericCharacterReference(_.slice(g?2:1),g?16:10)}return decodeNamedCharacterReference(_)||h}function stringifyPosition(h){return h&&"object"==typeof h?"position"in h||"type"in h?unist_util_stringify_position_lib_position(h.position):"start"in h||"end"in h?unist_util_stringify_position_lib_position(h):"line"in h||"column"in h?unist_util_stringify_position_lib_point(h):"":""}function unist_util_stringify_position_lib_point(h){return index(h&&h.line)+":"+index(h&&h.column)}function unist_util_stringify_position_lib_position(h){return unist_util_stringify_position_lib_point(h&&h.start)+"-"+unist_util_stringify_position_lib_point(h&&h.end)}function index(h){return h&&"number"==typeof h?h:1}let ab={}.hasOwnProperty;function mdast_util_from_markdown_lib_point(h){return{line:h.line,column:h.column,offset:h.offset}}function defaultOnError(h,g){if(h)throw Error("Cannot close `"+h.type+"` ("+stringifyPosition({start:h.start,end:h.end})+"): a different token (`"+g.type+"`, "+stringifyPosition({start:g.start,end:g.end})+") is open");throw Error("Cannot close document, a token (`"+g.type+"`, "+stringifyPosition({start:g.start,end:g.end})+") is still open")}function remarkParse(h){let g=this;g.parser=function(_){var E,A;let k,b,C,S;return"string"!=typeof(E={...g.data("settings"),...h,extensions:g.data("micromarkExtensions")||[],mdastExtensions:g.data("fromMarkdownExtensions")||[]})&&(A=E,E=void 0),(function(h){let g={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:opener(link),autolinkProtocol:onenterdata,autolinkEmail:onenterdata,atxHeading:opener(heading),blockQuote:opener(function(){return{type:"blockquote",children:[]}}),characterEscape:onenterdata,characterReference:onenterdata,codeFenced:opener(codeFlow),codeFencedFenceInfo:buffer,codeFencedFenceMeta:buffer,codeIndented:opener(codeFlow,buffer),codeText:opener(function(){return{type:"inlineCode",value:""}},buffer),codeTextData:onenterdata,data:onenterdata,codeFlowValue:onenterdata,definition:opener(function(){return{type:"definition",identifier:"",label:null,title:null,url:""}}),definitionDestinationString:buffer,definitionLabelString:buffer,definitionTitleString:buffer,emphasis:opener(function(){return{type:"emphasis",children:[]}}),hardBreakEscape:opener(hardBreak),hardBreakTrailing:opener(hardBreak),htmlFlow:opener(html,buffer),htmlFlowData:onenterdata,htmlText:opener(html,buffer),htmlTextData:onenterdata,image:opener(function(){return{type:"image",title:null,url:"",alt:null}}),label:buffer,link:opener(link),listItem:opener(function(h){return{type:"listItem",spread:h._spread,checked:null,children:[]}}),listItemValue:function(h){if(this.data.expectingFirstListItemValue){let g=this.stack[this.stack.length-2];g.start=Number.parseInt(this.sliceSerialize(h),10),this.data.expectingFirstListItemValue=void 0}},listOrdered:opener(list,function(){this.data.expectingFirstListItemValue=!0}),listUnordered:opener(list),paragraph:opener(function(){return{type:"paragraph",children:[]}}),reference:function(){this.data.referenceType="collapsed"},referenceString:buffer,resourceDestinationString:buffer,resourceTitleString:buffer,setextHeading:opener(heading),strong:opener(function(){return{type:"strong",children:[]}}),thematicBreak:opener(function(){return{type:"thematicBreak"}})},exit:{atxHeading:closer(),atxHeadingSequence:function(h){let g=this.stack[this.stack.length-1];if(!g.depth){let _=this.sliceSerialize(h).length;g.depth=_}},autolink:closer(),autolinkEmail:function(h){onexitdata.call(this,h);let g=this.stack[this.stack.length-1];g.url="mailto:"+this.sliceSerialize(h)},autolinkProtocol:function(h){onexitdata.call(this,h);let g=this.stack[this.stack.length-1];g.url=this.sliceSerialize(h)},blockQuote:closer(),characterEscapeValue:onexitdata,characterReferenceMarkerHexadecimal:onexitcharacterreferencemarker,characterReferenceMarkerNumeric:onexitcharacterreferencemarker,characterReferenceValue:function(h){let g;let _=this.sliceSerialize(h),E=this.data.characterReferenceType;if(E)g=decodeNumericCharacterReference(_,"characterReferenceMarkerNumeric"===E?10:16),this.data.characterReferenceType=void 0;else{let h=decodeNamedCharacterReference(_);g=h}let A=this.stack.pop();A.value+=g,A.position.end=mdast_util_from_markdown_lib_point(h.end)},codeFenced:closer(function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.value=h.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}),codeFencedFence:function(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)},codeFencedFenceInfo:function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.lang=h},codeFencedFenceMeta:function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.meta=h},codeFlowValue:onexitdata,codeIndented:closer(function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.value=h.replace(/(\r?\n|\r)$/g,"")}),codeText:closer(function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.value=h}),codeTextData:onexitdata,data:onexitdata,definition:closer(),definitionDestinationString:function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.url=h},definitionLabelString:function(h){let g=this.resume(),_=this.stack[this.stack.length-1];_.label=g,_.identifier=node_modules_micromark_util_normalize_identifier_normalizeIdentifier(this.sliceSerialize(h)).toLowerCase()},definitionTitleString:function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.title=h},emphasis:closer(),hardBreakEscape:closer(onexithardbreak),hardBreakTrailing:closer(onexithardbreak),htmlFlow:closer(function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.value=h}),htmlFlowData:onexitdata,htmlText:closer(function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.value=h}),htmlTextData:onexitdata,image:closer(function(){let h=this.stack[this.stack.length-1];if(this.data.inReference){let g=this.data.referenceType||"shortcut";h.type+="Reference",h.referenceType=g,delete h.url,delete h.title}else delete h.identifier,delete h.label;this.data.referenceType=void 0}),label:function(){let h=this.stack[this.stack.length-1],g=this.resume(),_=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===_.type){let g=h.children;_.children=g}else _.alt=g},labelText:function(h){let g=this.sliceSerialize(h),_=this.stack[this.stack.length-2];_.label=g.replace(av,decode),_.identifier=node_modules_micromark_util_normalize_identifier_normalizeIdentifier(g).toLowerCase()},lineEnding:function(h){let _=this.stack[this.stack.length-1];if(this.data.atHardBreak){let g=_.children[_.children.length-1];g.position.end=mdast_util_from_markdown_lib_point(h.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&g.canContainEols.includes(_.type)&&(onenterdata.call(this,h),onexitdata.call(this,h))},link:closer(function(){let h=this.stack[this.stack.length-1];if(this.data.inReference){let g=this.data.referenceType||"shortcut";h.type+="Reference",h.referenceType=g,delete h.url,delete h.title}else delete h.identifier,delete h.label;this.data.referenceType=void 0}),listItem:closer(),listOrdered:closer(),listUnordered:closer(),paragraph:closer(),referenceString:function(h){let g=this.resume(),_=this.stack[this.stack.length-1];_.label=g,_.identifier=node_modules_micromark_util_normalize_identifier_normalizeIdentifier(this.sliceSerialize(h)).toLowerCase(),this.data.referenceType="full"},resourceDestinationString:function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.url=h},resourceTitleString:function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.title=h},resource:function(){this.data.inReference=void 0},setextHeading:closer(function(){this.data.setextHeadingSlurpLineEnding=void 0}),setextHeadingLineSequence:function(h){let g=this.stack[this.stack.length-1];g.depth=61===this.sliceSerialize(h).codePointAt(0)?1:2},setextHeadingText:function(){this.data.setextHeadingSlurpLineEnding=!0},strong:closer(),thematicBreak:closer()}};(function configure(h,g){let _=-1;for(;++_<g.length;){let E=g[_];Array.isArray(E)?configure(h,E):function(h,g){let _;for(_ in g)if(ab.call(g,_))switch(_){case"canContainEols":{let E=g[_];E&&h[_].push(...E);break}case"transforms":{let E=g[_];E&&h[_].push(...E);break}case"enter":case"exit":{let E=g[_];E&&Object.assign(h[_],E)}}}(h,E)}})(g,(h||{}).mdastExtensions||[]);let _={};return function(h){let E={type:"root",children:[]},A={stack:[E],tokenStack:[],config:g,enter,exit,buffer,resume,data:_},k=[],b=-1;for(;++b<h.length;)if("listOrdered"===h[b][1].type||"listUnordered"===h[b][1].type){if("enter"===h[b][0])k.push(b);else{let g=k.pop();b=function(h,g,_){let E,A,k,b,C=g-1,S=-1,w=!1;for(;++C<=_;){let g=h[C];switch(g[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===g[0]?S++:S--,b=void 0;break;case"lineEndingBlank":"enter"===g[0]&&(!E||b||S||k||(k=C),b=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:b=void 0}if(!S&&"enter"===g[0]&&"listItemPrefix"===g[1].type||-1===S&&"exit"===g[0]&&("listUnordered"===g[1].type||"listOrdered"===g[1].type)){if(E){let b=C;for(A=void 0;b--;){let g=h[b];if("lineEnding"===g[1].type||"lineEndingBlank"===g[1].type){if("exit"===g[0])continue;A&&(h[A][1].type="lineEndingBlank",w=!0),g[1].type="lineEnding",A=b}else if("linePrefix"===g[1].type||"blockQuotePrefix"===g[1].type||"blockQuotePrefixWhitespace"===g[1].type||"blockQuoteMarker"===g[1].type||"listItemIndent"===g[1].type);else break}k&&(!A||k<A)&&(E._spread=!0),E.end=Object.assign({},A?h[A][1].start:g[1].end),h.splice(A||C,0,["exit",E,g[2]]),C++,_++}if("listItemPrefix"===g[1].type){let A={type:"listItem",_spread:!1,start:Object.assign({},g[1].start),end:void 0};E=A,h.splice(C,0,["enter",A,g[2]]),C++,_++,k=void 0,b=!0}}}return h[g][1]._spread=w,_}(h,g,b)}}for(b=-1;++b<h.length;){let _=g[h[b][0]];ab.call(_,h[b][1].type)&&_[h[b][1].type].call(Object.assign({sliceSerialize:h[b][2].sliceSerialize},A),h[b][1])}if(A.tokenStack.length>0){let h=A.tokenStack[A.tokenStack.length-1],g=h[1]||defaultOnError;g.call(A,void 0,h[0])}for(E.position={start:mdast_util_from_markdown_lib_point(h.length>0?h[0][1].start:{line:1,column:1,offset:0}),end:mdast_util_from_markdown_lib_point(h.length>0?h[h.length-2][1].end:{line:1,column:1,offset:0})},b=-1;++b<g.transforms.length;)E=g.transforms[b](E)||E;return E};function opener(h,g){return function(_){enter.call(this,h(_),_),g&&g.call(this,_)}}function buffer(){this.stack.push({type:"fragment",children:[]})}function enter(h,g,_){let E=this.stack[this.stack.length-1],A=E.children;A.push(h),this.stack.push(h),this.tokenStack.push([g,_]),h.position={start:mdast_util_from_markdown_lib_point(g.start),end:void 0}}function closer(h){return function(g){h&&h.call(this,g),exit.call(this,g)}}function exit(h,g){let _=this.stack.pop(),E=this.tokenStack.pop();if(E){if(E[0].type!==h.type){if(g)g.call(this,h,E[0]);else{let g=E[1]||defaultOnError;g.call(this,h,E[0])}}}else throw Error("Cannot close `"+h.type+"` ("+stringifyPosition({start:h.start,end:h.end})+"): its not open");_.position.end=mdast_util_from_markdown_lib_point(h.end)}function resume(){return function(h,g){let _="boolean"!=typeof iw.includeImageAlt||iw.includeImageAlt,E="boolean"!=typeof iw.includeHtml||iw.includeHtml;return use_markdown_node_modules_mdast_util_to_string_lib_one(h,_,E)}(this.stack.pop())}function onenterdata(h){let g=this.stack[this.stack.length-1],_=g.children,E=_[_.length-1];E&&"text"===E.type||((E={type:"text",value:""}).position={start:mdast_util_from_markdown_lib_point(h.start),end:void 0},_.push(E)),this.stack.push(E)}function onexitdata(h){let g=this.stack.pop();g.value+=this.sliceSerialize(h),g.position.end=mdast_util_from_markdown_lib_point(h.end)}function onexithardbreak(){this.data.atHardBreak=!0}function onexitcharacterreferencemarker(h){this.data.characterReferenceType=h.type}function codeFlow(){return{type:"code",lang:null,meta:null,value:""}}function heading(){return{type:"heading",depth:0,children:[]}}function hardBreak(){return{type:"break"}}function html(){return{type:"html",value:""}}function link(){return{type:"link",title:null,url:"",children:[]}}function list(h){return{type:"list",ordered:"listOrdered"===h.type,start:null,spread:h._spread,children:[]}}})(A)(function(h){for(;!subtokenize(h););return h}((function(h){let g=function(h){let g={},_=-1;for(;++_<h.length;)(function(h,g){let _;for(_ in g){let E;let A=iN.call(h,_)?h[_]:void 0,k=A||(h[_]={}),b=g[_];if(b)for(E in b){iN.call(k,E)||(k[E]=[]);let h=b[E];(function(h,g){let _=-1,E=[];for(;++_<g.length;)("after"===g[_].add?h:E).push(g[_]);node_modules_micromark_util_chunked_splice(h,0,0,E)})(k[E],Array.isArray(h)?h:h?[h]:[])}}})(g,h[_]);return g}([eS,...(h||{}).extensions||[]]),_={defined:[],lazy:{},constructs:g,content:create(iH),document:create(iU),flow:create(iq),string:create(iY),text:create(iW)};return _;function create(h){return function(g){return function(h,g,_){let E=Object.assign(_?Object.assign({},_):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1}),A={},k=[],b=[],C=[],S={consume:function(h){use_markdown_node_modules_micromark_util_character_markdownLineEnding(h)?(E.line++,E.column=1,E.offset+=-3===h?2:1,accountForPotentialSkip()):-1!==h&&(E.column++,E.offset++),E._bufferIndex<0?E._index++:(E._bufferIndex++,E._bufferIndex===b[E._index].length&&(E._bufferIndex=-1,E._index++)),w.previous=h},enter:function(h,g){let _=g||{};return _.type=h,_.start=now(),w.events.push(["enter",_,w]),C.push(_),_},exit:function(h){let g=C.pop();return g.end=now(),w.events.push(["exit",g,w]),g},attempt:constructFactory(function(h,g){addResult(h,g.from)}),check:constructFactory(onsuccessfulcheck),interrupt:constructFactory(onsuccessfulcheck,{interrupt:!0})},w={previous:null,code:null,containerState:{},events:[],parser:h,sliceStream,sliceSerialize:function(h,g){return function(h,g){let _,E=-1,A=[];for(;++E<h.length;){let k;let b=h[E];if("string"==typeof b)k=b;else switch(b){case -5:k="\r";break;case -4:k="\n";break;case -3:k="\r\n";break;case -2:k=g?" ":"	";break;case -1:if(!g&&_)continue;k=" ";break;default:k=String.fromCharCode(b)}_=-2===b,A.push(k)}return A.join("")}(sliceStream(h),g)},now,defineSkip:function(h){A[h.line]=h.column,accountForPotentialSkip()},write:function(h){return(b=node_modules_micromark_util_chunked_push(b,h),function(){let h;for(;E._index<b.length;){var g;let _=b[E._index];if("string"==typeof _)for(h=E._index,E._bufferIndex<0&&(E._bufferIndex=0);E._index===h&&E._bufferIndex<_.length;)g=_.charCodeAt(E._bufferIndex),N=N(g);else N=N(_)}}(),null!==b[b.length-1])?[]:(addResult(g,0),w.events=micromark_util_resolve_all_resolveAll(k,w.events,w),w.events)}},N=g.tokenize.call(w,S);return g.resolveAll&&k.push(g),w;function sliceStream(h){return function(h,g){let _;let E=g.start._index,A=g.start._bufferIndex,k=g.end._index,b=g.end._bufferIndex;if(E===k)_=[h[E].slice(A,b)];else{if(_=h.slice(E,k),A>-1){let h=_[0];"string"==typeof h?_[0]=h.slice(A):_.shift()}b>0&&_.push(h[k].slice(0,b))}return _}(b,h)}function now(){let{line:h,column:g,offset:_,_index:A,_bufferIndex:k}=E;return{line:h,column:g,offset:_,_index:A,_bufferIndex:k}}function onsuccessfulcheck(h,g){g.restore()}function constructFactory(h,g){return function(_,A,k){let b,N,R,L;return Array.isArray(_)?handleListOfConstructs(_):"tokenize"in _?handleListOfConstructs([_]):function(h){let g=null!==h&&_[h],E=null!==h&&_.null,A=[...Array.isArray(g)?g:g?[g]:[],...Array.isArray(E)?E:E?[E]:[]];return handleListOfConstructs(A)(h)};function handleListOfConstructs(h){return(b=h,N=0,0===h.length)?k:handleConstruct(h[N])}function handleConstruct(h){return function(_){return(L=function(){let h=now(),g=w.previous,_=w.currentConstruct,A=w.events.length,k=Array.from(C);return{restore:function(){E=h,w.previous=g,w.currentConstruct=_,w.events.length=A,C=k,accountForPotentialSkip()},from:A}}(),R=h,h.partial||(w.currentConstruct=h),h.name&&w.parser.constructs.disable.null.includes(h.name))?nok(_):h.tokenize.call(g?Object.assign(Object.create(w),g):w,S,ok,nok)(_)}}function ok(g){return h(R,L),A}function nok(h){return(L.restore(),++N<b.length)?handleConstruct(b[N]):k}}}function addResult(h,g){h.resolveAll&&!k.includes(h)&&k.push(h),h.resolve&&node_modules_micromark_util_chunked_splice(w.events,g,w.events.length-g,h.resolve(w.events.slice(g),w)),h.resolveTo&&(w.events=h.resolveTo(w.events,w))}function accountForPotentialSkip(){E.line in A&&E.column<2&&(E.column=A[E.line],E.offset+=A[E.line]-1)}}(_,h,g)}}})(A).document().write((b=1,C="",S=!0,function(h,g,_){let E,A,w,N,R;let L=[];for(h=C+("string"==typeof h?h.toString():new TextDecoder(g||void 0).decode(h)),w=0,C="",S&&(65279===h.charCodeAt(0)&&w++,S=void 0);w<h.length;){if(ak.lastIndex=w,N=(E=ak.exec(h))&&void 0!==E.index?E.index:h.length,R=h.charCodeAt(N),!E){C=h.slice(w);break}if(10===R&&w===N&&k)L.push(-3),k=void 0;else switch(k&&(L.push(-5),k=void 0),w<N&&(L.push(h.slice(w,N)),b+=N-w),R){case 0:L.push(65533),b++;break;case 9:for(A=4*Math.ceil(b/4),L.push(-2);b++<A;)L.push(-1);break;case 10:L.push(-4),b=1;break;default:k=!0,b=1}w=N+1}return _&&(k&&L.push(-5),C&&L.push(C),L.push(null)),L})(_,E,!0))))}}function normalizeUri(h){let g=[],_=-1,E=0,A=0;for(;++_<h.length;){let k=h.charCodeAt(_),b="";if(37===k&&iR(h.charCodeAt(_+1))&&iR(h.charCodeAt(_+2)))A=2;else if(k<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(k))||(b=String.fromCharCode(k));else if(k>55295&&k<57344){let g=h.charCodeAt(_+1);k<56320&&g>56319&&g<57344?(b=String.fromCharCode(k,g),A=1):b=""}else b=String.fromCharCode(k);b&&(g.push(h.slice(E,_),encodeURIComponent(b)),E=_+A+1,b=""),A&&(_+=A,A=0)}return g.join("")+h.slice(E)}function defaultFootnoteBackContent(h,g){let _=[{type:"text",value:""}];return g>1&&_.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(g)}]}),_}function defaultFootnoteBackLabel(h,g){return"Back to reference "+(h+1)+(g>1?"-"+g:"")}let use_markdown_node_modules_unist_util_is_lib_convert=function(h){if(null==h)return use_markdown_node_modules_unist_util_is_lib_ok;if("function"==typeof h)return use_markdown_node_modules_unist_util_is_lib_castFactory(h);if("object"==typeof h)return Array.isArray(h)?function(h){let g=[],_=-1;for(;++_<h.length;)g[_]=use_markdown_node_modules_unist_util_is_lib_convert(h[_]);return use_markdown_node_modules_unist_util_is_lib_castFactory(function(...h){let _=-1;for(;++_<g.length;)if(g[_].apply(this,h))return!0;return!1})}(h):use_markdown_node_modules_unist_util_is_lib_castFactory(function(g){let _;for(_ in h)if(g[_]!==h[_])return!1;return!0});if("string"==typeof h)return use_markdown_node_modules_unist_util_is_lib_castFactory(function(g){return g&&g.type===h});throw Error("Expected function, string, or object as test")};function use_markdown_node_modules_unist_util_is_lib_castFactory(h){return function(g,_,E){var A;return!!(null!==(A=g)&&"object"==typeof A&&"type"in A&&h.call(this,g,"number"==typeof _?_:void 0,E||void 0))}}function use_markdown_node_modules_unist_util_is_lib_ok(){return!0}let ax=[],aC=unist_util_position_lib_point("end"),aS=unist_util_position_lib_point("start");function unist_util_position_lib_point(h){return function(g){let _=g&&g.position&&g.position[h]||{};if("number"==typeof _.line&&_.line>0&&"number"==typeof _.column&&_.column>0)return{line:_.line,column:_.column,offset:"number"==typeof _.offset&&_.offset>-1?_.offset:void 0}}}function revert(h,g){let _=g.referenceType,E="]";if("collapsed"===_?E+="[]":"full"===_&&(E+="["+(g.label||g.identifier)+"]"),"imageReference"===g.type)return[{type:"text",value:"!["+g.alt+E}];let A=h.all(g),k=A[0];k&&"text"===k.type?k.value="["+k.value:A.unshift({type:"text",value:"["});let b=A[A.length-1];return b&&"text"===b.type?b.value+=E:A.push({type:"text",value:E}),A}function listItemLoose(h){let g=h.spread;return null==g?h.children.length>1:g}function trimLine(h,g,_){let E=0,A=h.length;if(g){let g=h.codePointAt(E);for(;9===g||32===g;)E++,g=h.codePointAt(E)}if(_){let g=h.codePointAt(A-1);for(;9===g||32===g;)A--,g=h.codePointAt(A-1)}return A>E?h.slice(E,A):""}let aI={blockquote:function(h,g){let _={type:"element",tagName:"blockquote",properties:{},children:h.wrap(h.all(g),!0)};return h.patch(g,_),h.applyData(g,_)},break:function(h,g){let _={type:"element",tagName:"br",properties:{},children:[]};return h.patch(g,_),[h.applyData(g,_),{type:"text",value:"\n"}]},code:function(h,g){let _=g.value?g.value+"\n":"",E={};g.lang&&(E.className=["language-"+g.lang]);let A={type:"element",tagName:"code",properties:E,children:[{type:"text",value:_}]};return g.meta&&(A.data={meta:g.meta}),h.patch(g,A),A={type:"element",tagName:"pre",properties:{},children:[A=h.applyData(g,A)]},h.patch(g,A),A},delete:function(h,g){let _={type:"element",tagName:"del",properties:{},children:h.all(g)};return h.patch(g,_),h.applyData(g,_)},emphasis:function(h,g){let _={type:"element",tagName:"em",properties:{},children:h.all(g)};return h.patch(g,_),h.applyData(g,_)},footnoteReference:function(h,g){let _;let E="string"==typeof h.options.clobberPrefix?h.options.clobberPrefix:"user-content-",A=String(g.identifier).toUpperCase(),k=normalizeUri(A.toLowerCase()),b=h.footnoteOrder.indexOf(A),C=h.footnoteCounts.get(A);void 0===C?(C=0,h.footnoteOrder.push(A),_=h.footnoteOrder.length):_=b+1,C+=1,h.footnoteCounts.set(A,C);let S={type:"element",tagName:"a",properties:{href:"#"+E+"fn-"+k,id:E+"fnref-"+k+(C>1?"-"+C:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(_)}]};h.patch(g,S);let w={type:"element",tagName:"sup",properties:{},children:[S]};return h.patch(g,w),h.applyData(g,w)},heading:function(h,g){let _={type:"element",tagName:"h"+g.depth,properties:{},children:h.all(g)};return h.patch(g,_),h.applyData(g,_)},html:function(h,g){if(h.options.allowDangerousHtml){let _={type:"raw",value:g.value};return h.patch(g,_),h.applyData(g,_)}},imageReference:function(h,g){let _=String(g.identifier).toUpperCase(),E=h.definitionById.get(_);if(!E)return revert(h,g);let A={src:normalizeUri(E.url||""),alt:g.alt};null!==E.title&&void 0!==E.title&&(A.title=E.title);let k={type:"element",tagName:"img",properties:A,children:[]};return h.patch(g,k),h.applyData(g,k)},image:function(h,g){let _={src:normalizeUri(g.url)};null!==g.alt&&void 0!==g.alt&&(_.alt=g.alt),null!==g.title&&void 0!==g.title&&(_.title=g.title);let E={type:"element",tagName:"img",properties:_,children:[]};return h.patch(g,E),h.applyData(g,E)},inlineCode:function(h,g){let _={type:"text",value:g.value.replace(/\r?\n|\r/g," ")};h.patch(g,_);let E={type:"element",tagName:"code",properties:{},children:[_]};return h.patch(g,E),h.applyData(g,E)},linkReference:function(h,g){let _=String(g.identifier).toUpperCase(),E=h.definitionById.get(_);if(!E)return revert(h,g);let A={href:normalizeUri(E.url||"")};null!==E.title&&void 0!==E.title&&(A.title=E.title);let k={type:"element",tagName:"a",properties:A,children:h.all(g)};return h.patch(g,k),h.applyData(g,k)},link:function(h,g){let _={href:normalizeUri(g.url)};null!==g.title&&void 0!==g.title&&(_.title=g.title);let E={type:"element",tagName:"a",properties:_,children:h.all(g)};return h.patch(g,E),h.applyData(g,E)},listItem:function(h,g,_){let E=h.all(g),A=_?function(h){let g=!1;if("list"===h.type){g=h.spread||!1;let _=h.children,E=-1;for(;!g&&++E<_.length;)g=listItemLoose(_[E])}return g}(_):listItemLoose(g),k={},b=[];if("boolean"==typeof g.checked){let h;let _=E[0];_&&"element"===_.type&&"p"===_.tagName?h=_:(h={type:"element",tagName:"p",properties:{},children:[]},E.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:g.checked,disabled:!0},children:[]}),k.className=["task-list-item"]}let C=-1;for(;++C<E.length;){let h=E[C];(A||0!==C||"element"!==h.type||"p"!==h.tagName)&&b.push({type:"text",value:"\n"}),"element"!==h.type||"p"!==h.tagName||A?b.push(h):b.push(...h.children)}let S=E[E.length-1];S&&(A||"element"!==S.type||"p"!==S.tagName)&&b.push({type:"text",value:"\n"});let w={type:"element",tagName:"li",properties:k,children:b};return h.patch(g,w),h.applyData(g,w)},list:function(h,g){let _={},E=h.all(g),A=-1;for("number"==typeof g.start&&1!==g.start&&(_.start=g.start);++A<E.length;){let h=E[A];if("element"===h.type&&"li"===h.tagName&&h.properties&&Array.isArray(h.properties.className)&&h.properties.className.includes("task-list-item")){_.className=["contains-task-list"];break}}let k={type:"element",tagName:g.ordered?"ol":"ul",properties:_,children:h.wrap(E,!0)};return h.patch(g,k),h.applyData(g,k)},paragraph:function(h,g){let _={type:"element",tagName:"p",properties:{},children:h.all(g)};return h.patch(g,_),h.applyData(g,_)},root:function(h,g){let _={type:"root",children:h.wrap(h.all(g))};return h.patch(g,_),h.applyData(g,_)},strong:function(h,g){let _={type:"element",tagName:"strong",properties:{},children:h.all(g)};return h.patch(g,_),h.applyData(g,_)},table:function(h,g){let _=h.all(g),E=_.shift(),A=[];if(E){let _={type:"element",tagName:"thead",properties:{},children:h.wrap([E],!0)};h.patch(g.children[0],_),A.push(_)}if(_.length>0){let E={type:"element",tagName:"tbody",properties:{},children:h.wrap(_,!0)},k=aS(g.children[1]),b=aC(g.children[g.children.length-1]);k&&b&&(E.position={start:k,end:b}),A.push(E)}let k={type:"element",tagName:"table",properties:{},children:h.wrap(A,!0)};return h.patch(g,k),h.applyData(g,k)},tableCell:function(h,g){let _={type:"element",tagName:"td",properties:{},children:h.all(g)};return h.patch(g,_),h.applyData(g,_)},tableRow:function(h,g,_){let E=_?_.children:void 0,A=E?E.indexOf(g):1,k=0===A?"th":"td",b=_&&"table"===_.type?_.align:void 0,C=b?b.length:g.children.length,S=-1,w=[];for(;++S<C;){let _=g.children[S],E={},A=b?b[S]:void 0;A&&(E.align=A);let C={type:"element",tagName:k,properties:E,children:[]};_&&(C.children=h.all(_),h.patch(_,C),C=h.applyData(_,C)),w.push(C)}let N={type:"element",tagName:"tr",properties:{},children:h.wrap(w,!0)};return h.patch(g,N),h.applyData(g,N)},text:function(h,g){let _={type:"text",value:function(h){let g=String(h),_=/\r?\n|\r/g,E=_.exec(g),A=0,k=[];for(;E;)k.push(trimLine(g.slice(A,E.index),A>0,!0),E[0]),A=E.index+E[0].length,E=_.exec(g);return k.push(trimLine(g.slice(A),A>0,!1)),k.join("")}(String(g.value))};return h.patch(g,_),h.applyData(g,_)},thematicBreak:function(h,g){let _={type:"element",tagName:"hr",properties:{},children:[]};return h.patch(g,_),h.applyData(g,_)},toml:ignore,yaml:ignore,definition:ignore,footnoteDefinition:ignore};function ignore(){}let aw={}.hasOwnProperty,aN={};function state_patch(h,g){h.position&&(g.position=function(h){let g=aS(h),_=aC(h);if(g&&_)return{start:g,end:_}}(h))}function applyData(h,g){let _=g;if(h&&h.data){let g=h.data.hName,E=h.data.hChildren,A=h.data.hProperties;if("string"==typeof g){if("element"===_.type)_.tagName=g;else{let h="children"in _?_.children:[_];_={type:"element",tagName:g,properties:{},children:h}}}"element"===_.type&&A&&Object.assign(_.properties,nT(A)),"children"in _&&_.children&&null!=E&&(_.children=E)}return _}function defaultUnknownHandler(h,g){let _=g.data||{},E="value"in g&&!(aw.call(_,"hProperties")||aw.call(_,"hChildren"))?{type:"text",value:g.value}:{type:"element",tagName:"div",properties:{},children:h.all(g)};return h.patch(g,E),h.applyData(g,E)}function wrap(h,g){let _=[],E=-1;for(g&&_.push({type:"text",value:"\n"});++E<h.length;)E&&_.push({type:"text",value:"\n"}),_.push(h[E]);return g&&h.length>0&&_.push({type:"text",value:"\n"}),_}function trimMarkdownSpaceStart(h){let g=0,_=h.charCodeAt(g);for(;9===_||32===_;)g++,_=h.charCodeAt(g);return h.slice(g)}function toHast(h,g){let _=function(h,g){var _,E;let A,k,b;let C=g||aN,S=new Map,w=new Map,N=new Map,R={...aI,...C.handlers},L={all:function(h){let g=[];if("children"in h){let _=h.children,E=-1;for(;++E<_.length;){let A=L.one(_[E],h);if(A){if(E&&"break"===_[E-1].type&&(Array.isArray(A)||"text"!==A.type||(A.value=trimMarkdownSpaceStart(A.value)),!Array.isArray(A)&&"element"===A.type)){let h=A.children[0];h&&"text"===h.type&&(h.value=trimMarkdownSpaceStart(h.value))}Array.isArray(A)?g.push(...A):g.push(A)}}}return g},applyData,definitionById:S,footnoteById:w,footnoteCounts:N,footnoteOrder:[],handlers:R,one:function(h,g){let _=h.type,E=L.handlers[_];if(aw.call(L.handlers,_)&&E)return E(L,h,g);if(L.options.passThrough&&L.options.passThrough.includes(_)){if("children"in h){let{children:g,..._}=h,E=nT(_);return E.children=L.all(h),E}return nT(h)}let A=L.options.unknownHandler||defaultUnknownHandler;return A(L,h,g)},options:C,patch:state_patch,wrap};return"function"==typeof(_=function(h){if("definition"===h.type||"footnoteDefinition"===h.type){let g="definition"===h.type?S:w,_=String(h.identifier).toUpperCase();g.has(_)||g.set(_,h)}})&&"function"!=typeof E?(k=void 0,b=_,A=E):(k=_,b=E,A=void 0),function(h,g,_,E){let A;"function"==typeof g&&"function"!=typeof _?(E=_,_=g):A=g;let k=use_markdown_node_modules_unist_util_is_lib_convert(A),b=E?-1:1;(function factory(h,A,C){let S=h&&"object"==typeof h?h:{};if("string"==typeof S.type){let g="string"==typeof S.tagName?S.tagName:"string"==typeof S.name?S.name:void 0;Object.defineProperty(visit,"name",{value:"node ("+h.type+(g?"<"+g+">":"")+")"})}return visit;function visit(){var S;let w,N,R,L=ax;if((!g||k(h,A,C[C.length-1]||void 0))&&!1===(L=Array.isArray(S=_(h,C))?S:"number"==typeof S?[!0,S]:null==S?ax:[S])[0])return L;if("children"in h&&h.children&&h.children&&"skip"!==L[0])for(N=(E?h.children.length:-1)+b,R=C.concat(h);N>-1&&N<h.children.length;){let g=h.children[N];if(!1===(w=factory(g,N,R)())[0])return w;N="number"==typeof w[1]?w[1]:N+b}return L}})(h,void 0,[])()}(h,k,function(h,g){let _=g[g.length-1],E=_?_.children.indexOf(h):void 0;return b(h,E,_)},A),L}(h,g),E=_.one(h,void 0),A=function(h){let g="string"==typeof h.options.clobberPrefix?h.options.clobberPrefix:"user-content-",_=h.options.footnoteBackContent||defaultFootnoteBackContent,E=h.options.footnoteBackLabel||defaultFootnoteBackLabel,A=h.options.footnoteLabel||"Footnotes",k=h.options.footnoteLabelTagName||"h2",b=h.options.footnoteLabelProperties||{className:["sr-only"]},C=[],S=-1;for(;++S<h.footnoteOrder.length;){let A=h.footnoteById.get(h.footnoteOrder[S]);if(!A)continue;let k=h.all(A),b=String(A.identifier).toUpperCase(),w=normalizeUri(b.toLowerCase()),N=0,R=[],L=h.footnoteCounts.get(b);for(;void 0!==L&&++N<=L;){R.length>0&&R.push({type:"text",value:" "});let h="string"==typeof _?_:_(S,N);"string"==typeof h&&(h={type:"text",value:h}),R.push({type:"element",tagName:"a",properties:{href:"#"+g+"fnref-"+w+(N>1?"-"+N:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof E?E:E(S,N),className:["data-footnote-backref"]},children:Array.isArray(h)?h:[h]})}let P=k[k.length-1];if(P&&"element"===P.type&&"p"===P.tagName){let h=P.children[P.children.length-1];h&&"text"===h.type?h.value+=" ":P.children.push({type:"text",value:" "}),P.children.push(...R)}else k.push(...R);let z={type:"element",tagName:"li",properties:{id:g+"fn-"+w},children:h.wrap(k,!0)};h.patch(A,z),C.push(z)}if(0!==C.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:k,properties:{...nT(b),id:"footnote-label"},children:[{type:"text",value:A}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:h.wrap(C,!0)},{type:"text",value:"\n"}]}}(_),k=Array.isArray(E)?{type:"root",children:E}:E||{type:"root",children:[]};return A&&k.children.push({type:"text",value:"\n"},A),k}function remarkRehype(h,g){return h&&"run"in h?async function(_,E){let A=toHast(_,{file:E,...g});await h.run(A,E)}:function(_,E){return toHast(_,{file:E,...g||h})}}function bail(h){if(h)throw h}var aO=_(4470);function is_plain_obj_isPlainObject(h){if("object"!=typeof h||null===h)return!1;let g=Object.getPrototypeOf(h);return(null===g||g===Object.prototype||null===Object.getPrototypeOf(g))&&!(Symbol.toStringTag in h)&&!(Symbol.iterator in h)}let VFileMessage=class VFileMessage extends Error{constructor(h,g,_){super(),"string"==typeof g&&(_=g,g=void 0);let E="",A={},k=!1;if(g&&(A="line"in g&&"column"in g?{place:g}:"start"in g&&"end"in g?{place:g}:"type"in g?{ancestors:[g],place:g.position}:{...g}),"string"==typeof h?E=h:!A.cause&&h&&(k=!0,E=h.message,A.cause=h),!A.ruleId&&!A.source&&"string"==typeof _){let h=_.indexOf(":");-1===h?A.ruleId=_:(A.source=_.slice(0,h),A.ruleId=_.slice(h+1))}if(!A.place&&A.ancestors&&A.ancestors){let h=A.ancestors[A.ancestors.length-1];h&&(A.place=h.position)}let b=A.place&&"start"in A.place?A.place.start:A.place;this.ancestors=A.ancestors||void 0,this.cause=A.cause||void 0,this.column=b?b.column:void 0,this.fatal=void 0,this.file,this.message=E,this.line=b?b.line:void 0,this.name=stringifyPosition(A.place)||"1:1",this.place=A.place||void 0,this.reason=this.message,this.ruleId=A.ruleId||void 0,this.source=A.source||void 0,this.stack=k&&A.cause&&"string"==typeof A.cause.stack?A.cause.stack:"",this.actual,this.expected,this.note,this.url}};VFileMessage.prototype.file="",VFileMessage.prototype.name="",VFileMessage.prototype.reason="",VFileMessage.prototype.message="",VFileMessage.prototype.stack="",VFileMessage.prototype.column=void 0,VFileMessage.prototype.line=void 0,VFileMessage.prototype.ancestors=void 0,VFileMessage.prototype.cause=void 0,VFileMessage.prototype.fatal=void 0,VFileMessage.prototype.place=void 0,VFileMessage.prototype.ruleId=void 0,VFileMessage.prototype.source=void 0;let aR={basename:function(h,g){let _;if(void 0!==g&&"string"!=typeof g)throw TypeError('"ext" argument must be a string');assertPath(h);let E=0,A=-1,k=h.length;if(void 0===g||0===g.length||g.length>h.length){for(;k--;)if(47===h.codePointAt(k)){if(_){E=k+1;break}}else A<0&&(_=!0,A=k+1);return A<0?"":h.slice(E,A)}if(g===h)return"";let b=-1,C=g.length-1;for(;k--;)if(47===h.codePointAt(k)){if(_){E=k+1;break}}else b<0&&(_=!0,b=k+1),C>-1&&(h.codePointAt(k)===g.codePointAt(C--)?C<0&&(A=k):(C=-1,A=b));return E===A?A=b:A<0&&(A=h.length),h.slice(E,A)},dirname:function(h){let g;if(assertPath(h),0===h.length)return".";let _=-1,E=h.length;for(;--E;)if(47===h.codePointAt(E)){if(g){_=E;break}}else g||(g=!0);return _<0?47===h.codePointAt(0)?"/":".":1===_&&47===h.codePointAt(0)?"//":h.slice(0,_)},extname:function(h){let g;assertPath(h);let _=h.length,E=-1,A=0,k=-1,b=0;for(;_--;){let C=h.codePointAt(_);if(47===C){if(g){A=_+1;break}continue}E<0&&(g=!0,E=_+1),46===C?k<0?k=_:1!==b&&(b=1):k>-1&&(b=-1)}return k<0||E<0||0===b||1===b&&k===E-1&&k===A+1?"":h.slice(k,E)},join:function(...h){let g,_=-1;for(;++_<h.length;)assertPath(h[_]),h[_]&&(g=void 0===g?h[_]:g+"/"+h[_]);return void 0===g?".":function(h){assertPath(h);let g=47===h.codePointAt(0),_=function(h,g){let _,E,A="",k=0,b=-1,C=0,S=-1;for(;++S<=h.length;){if(S<h.length)_=h.codePointAt(S);else if(47===_)break;else _=47;if(47===_){if(b===S-1||1===C);else if(b!==S-1&&2===C){if(A.length<2||2!==k||46!==A.codePointAt(A.length-1)||46!==A.codePointAt(A.length-2)){if(A.length>2){if((E=A.lastIndexOf("/"))!==A.length-1){E<0?(A="",k=0):k=(A=A.slice(0,E)).length-1-A.lastIndexOf("/"),b=S,C=0;continue}}else if(A.length>0){A="",k=0,b=S,C=0;continue}}g&&(A=A.length>0?A+"/..":"..",k=2)}else A.length>0?A+="/"+h.slice(b+1,S):A=h.slice(b+1,S),k=S-b-1;b=S,C=0}else 46===_&&C>-1?C++:C=-1}return A}(h,!g);return 0!==_.length||g||(_="."),_.length>0&&47===h.codePointAt(h.length-1)&&(_+="/"),g?"/"+_:_}(g)},sep:"/"};function assertPath(h){if("string"!=typeof h)throw TypeError("Path must be a string. Received "+JSON.stringify(h))}function isUrl(h){return!!(null!==h&&"object"==typeof h&&"href"in h&&h.href&&"protocol"in h&&h.protocol&&void 0===h.auth)}let aD=["history","path","basename","stem","extname","dirname"];let VFile=class VFile{constructor(h){let g,_;g=h?isUrl(h)?{path:h}:"string"==typeof h||h&&"object"==typeof h&&"byteLength"in h&&"byteOffset"in h?{value:h}:h:{},this.cwd="/",this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let E=-1;for(;++E<aD.length;){let h=aD[E];h in g&&void 0!==g[h]&&null!==g[h]&&(this[h]="history"===h?[...g[h]]:g[h])}for(_ in g)aD.includes(_)||(this[_]=g[_])}get basename(){return"string"==typeof this.path?aR.basename(this.path):void 0}set basename(h){assertNonEmpty(h,"basename"),assertPart(h,"basename"),this.path=aR.join(this.dirname||"",h)}get dirname(){return"string"==typeof this.path?aR.dirname(this.path):void 0}set dirname(h){lib_assertPath(this.basename,"dirname"),this.path=aR.join(h||"",this.basename)}get extname(){return"string"==typeof this.path?aR.extname(this.path):void 0}set extname(h){if(assertPart(h,"extname"),lib_assertPath(this.dirname,"extname"),h){if(46!==h.codePointAt(0))throw Error("`extname` must start with `.`");if(h.includes(".",1))throw Error("`extname` cannot contain multiple dots")}this.path=aR.join(this.dirname,this.stem+(h||""))}get path(){return this.history[this.history.length-1]}set path(h){isUrl(h)&&(h=function(h){if("string"==typeof h)h=new URL(h);else if(!isUrl(h)){let g=TypeError('The "path" argument must be of type string or an instance of URL. Received `'+h+"`");throw g.code="ERR_INVALID_ARG_TYPE",g}if("file:"!==h.protocol){let h=TypeError("The URL must be of scheme file");throw h.code="ERR_INVALID_URL_SCHEME",h}return function(h){if(""!==h.hostname){let h=TypeError('File URL host must be "localhost" or empty on darwin');throw h.code="ERR_INVALID_FILE_URL_HOST",h}let g=h.pathname,_=-1;for(;++_<g.length;)if(37===g.codePointAt(_)&&50===g.codePointAt(_+1)){let h=g.codePointAt(_+2);if(70===h||102===h){let h=TypeError("File URL path must not include encoded / characters");throw h.code="ERR_INVALID_FILE_URL_PATH",h}}return decodeURIComponent(g)}(h)}(h)),assertNonEmpty(h,"path"),this.path!==h&&this.history.push(h)}get stem(){return"string"==typeof this.path?aR.basename(this.path,this.extname):void 0}set stem(h){assertNonEmpty(h,"stem"),assertPart(h,"stem"),this.path=aR.join(this.dirname||"",h+(this.extname||""))}fail(h,g,_){let E=this.message(h,g,_);throw E.fatal=!0,E}info(h,g,_){let E=this.message(h,g,_);return E.fatal=void 0,E}message(h,g,_){let E=new VFileMessage(h,g,_);return this.path&&(E.name=this.path+":"+E.name,E.file=this.path),E.fatal=!1,this.messages.push(E),E}toString(h){if(void 0===this.value)return"";if("string"==typeof this.value)return this.value;let g=new TextDecoder(h||void 0);return g.decode(this.value)}};function assertPart(h,g){if(h&&h.includes(aR.sep))throw Error("`"+g+"` cannot be a path: did not expect `"+aR.sep+"`")}function assertNonEmpty(h,g){if(!h)throw Error("`"+g+"` cannot be empty")}function lib_assertPath(h,g){if(!h)throw Error("Setting `"+g+"` requires `path` to be set too")}let CallableInstance=function(h){let g=this.constructor,_=g.prototype,E=_[h],apply=function(){return E.apply(apply,arguments)};Object.setPrototypeOf(apply,_);let A=Object.getOwnPropertyNames(E);for(let h of A){let g=Object.getOwnPropertyDescriptor(E,h);g&&Object.defineProperty(apply,h,g)}return apply},aL={}.hasOwnProperty;let Processor=class Processor extends CallableInstance{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=function(){let h=[],g={run:function(...g){let _=-1,E=g.pop();if("function"!=typeof E)throw TypeError("Expected function as last argument, not "+E);(function next(A,...k){let b=h[++_],C=-1;if(A){E(A);return}for(;++C<g.length;)(null===k[C]||void 0===k[C])&&(k[C]=g[C]);g=k,b?(function(h,g){let _;return function(...g){let E;let A=h.length>g.length;A&&g.push(done);try{E=h.apply(this,g)}catch(h){if(A&&_)throw h;return done(h)}A||(E instanceof Promise?E.then(then,done):E instanceof Error?done(E):then(E))};function done(h,...E){_||(_=!0,g(h,...E))}function then(h){done(null,h)}})(b,next)(...k):E(null,...k)})(null,...g)},use:function(_){if("function"!=typeof _)throw TypeError("Expected `middelware` to be a function, not "+_);return h.push(_),g}};return g}()}copy(){let h=new Processor,g=-1;for(;++g<this.attachers.length;){let _=this.attachers[g];h.use(..._)}return h.data(aO(!0,{},this.namespace)),h}data(h,g){return"string"==typeof h?2==arguments.length?(assertUnfrozen("data",this.frozen),this.namespace[h]=g,this):aL.call(this.namespace,h)&&this.namespace[h]||void 0:h?(assertUnfrozen("data",this.frozen),this.namespace=h,this):this.namespace}freeze(){if(this.frozen)return this;for(;++this.freezeIndex<this.attachers.length;){let[h,...g]=this.attachers[this.freezeIndex];if(!1===g[0])continue;!0===g[0]&&(g[0]=void 0);let _=h.call(this,...g);"function"==typeof _&&this.transformers.use(_)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(h){this.freeze();let g=vfile(h),_=this.parser||this.Parser;return assertParser("parse",_),_(String(g),g)}process(h,g){let _=this;return this.freeze(),assertParser("process",this.parser||this.Parser),assertCompiler("process",this.compiler||this.Compiler),g?executor(void 0,g):new Promise(executor);function executor(E,A){let k=vfile(h),b=_.parse(k);function realDone(h,_){h||!_?A(h):E?E(_):g(void 0,_)}_.run(b,k,function(h,g,E){if(h||!g||!E)return realDone(h);let A=_.stringify(g,E);"string"==typeof A||A&&"object"==typeof A&&"byteLength"in A&&"byteOffset"in A?E.value=A:E.result=A,realDone(h,E)})}}processSync(h){let g,_=!1;return this.freeze(),assertParser("processSync",this.parser||this.Parser),assertCompiler("processSync",this.compiler||this.Compiler),this.process(h,function(h,E){_=!0,bail(h),g=E}),assertDone("processSync","process",_),g}run(h,g,_){assertNode(h),this.freeze();let E=this.transformers;return _||"function"!=typeof g||(_=g,g=void 0),_?executor(void 0,_):new Promise(executor);function executor(A,k){let b=vfile(g);E.run(h,b,function(g,E,b){let C=E||h;g?k(g):A?A(C):_(void 0,C,b)})}}runSync(h,g){let _,E=!1;return this.run(h,g,function(h,g){bail(h),_=g,E=!0}),assertDone("runSync","run",E),_}stringify(h,g){this.freeze();let _=vfile(g),E=this.compiler||this.Compiler;return assertCompiler("stringify",E),assertNode(h),E(h,_)}use(h,...g){let _=this.attachers,E=this.namespace;if(assertUnfrozen("use",this.frozen),null==h);else if("function"==typeof h)addPlugin(h,g);else if("object"==typeof h)Array.isArray(h)?addList(h):addPreset(h);else throw TypeError("Expected usable value, not `"+h+"`");return this;function addPreset(h){if(!("plugins"in h)&&!("settings"in h))throw Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");addList(h.plugins),h.settings&&(E.settings=aO(!0,E.settings,h.settings))}function addList(h){let g=-1;if(null==h);else if(Array.isArray(h))for(;++g<h.length;){let _=h[g];!function(h){if("function"==typeof h)addPlugin(h,[]);else if("object"==typeof h){if(Array.isArray(h)){let[g,..._]=h;addPlugin(g,_)}else addPreset(h)}else throw TypeError("Expected usable value, not `"+h+"`")}(_)}else throw TypeError("Expected a list of plugins, not `"+h+"`")}function addPlugin(h,g){let E=-1,A=-1;for(;++E<_.length;)if(_[E][0]===h){A=E;break}if(-1===A)_.push([h,...g]);else if(g.length>0){let[E,...k]=g,b=_[A][1];is_plain_obj_isPlainObject(b)&&is_plain_obj_isPlainObject(E)&&(E=aO(!0,b,E)),_[A]=[h,E,...k]}}}};let aP=new Processor().freeze();function assertParser(h,g){if("function"!=typeof g)throw TypeError("Cannot `"+h+"` without `parser`")}function assertCompiler(h,g){if("function"!=typeof g)throw TypeError("Cannot `"+h+"` without `compiler`")}function assertUnfrozen(h,g){if(g)throw Error("Cannot call `"+h+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function assertNode(h){if(!is_plain_obj_isPlainObject(h)||"string"!=typeof h.type)throw TypeError("Expected node, got `"+h+"`")}function assertDone(h,g,_){if(!_)throw Error("`"+h+"` finished async. Use `"+g+"` instead")}function vfile(h){return h&&"object"==typeof h&&"message"in h&&"messages"in h?h:new VFile(h)}var aM={exports:{}},aF={};aM.exports=function(){if(ek)return aF;ek=1;var h=Symbol.for("react.element"),g=Symbol.for("react.fragment"),_=Object.prototype.hasOwnProperty,E=eO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A={key:!0,ref:!0,__self:!0,__source:!0};function x(g,k,b){var C,S={},w=null,N=null;for(C in void 0!==b&&(w=""+b),void 0!==k.key&&(w=""+k.key),void 0!==k.ref&&(N=k.ref),k)_.call(k,C)&&!A.hasOwnProperty(C)&&(S[C]=k[C]);if(g&&g.defaultProps)for(C in k=g.defaultProps)void 0===S[C]&&(S[C]=k[C]);return{$$typeof:h,type:g,key:w,ref:N,props:S,_owner:E.current}}return aF.Fragment=g,aF.jsx=x,aF.jsxs=x,aF}();var aB=aM.exports;async function mr(h){let g=await aP().use(remarkParse).use(remarkGfm).use(remarkRehype,{allowDangerousHtml:!0}).use(rehypeRaw).use(rehypeStringify).processSync(h);return String(g)}var aH=_(4921);let aU={annotations:[],manifest:void 0,searchString:void 0,options:{offset:0},vault:new Vault};function te(h,g){switch(g.type){case"updateAnnotations":return{...h,annotations:g.payload};case"updateSearchString":return{...h,searchString:g.payload};default:return h}}let az=(0,eO.createContext)({dispatch:()=>null,state:aU}),scroll_re=h=>{let{children:g,manifest:_}=h,E={...aU.options,...h.options},[A,k]=(0,eO.useReducer)(te,aU);return eO.createElement(az.Provider,{value:{state:{...A,manifest:_,options:E},dispatch:k}},g)},scroll_ne=(h,g="none")=>{if(!h)return null;if("string"==typeof h)return[h];if(!h[g]){let g=Object.getOwnPropertyNames(h);if(g.length>0)return h[g[0]]}return h[g]&&Array.isArray(h[g])?h[g]:null},scroll_A=(h,g="none",_=", ")=>{let E=scroll_ne(h,g);return Array.isArray(E)?E.join(`${_}`):E};function scroll_M(h,g){let _=Object.keys(h).filter(h=>g.includes(h)?null:h),E={};return _.forEach(g=>{E[g]=h[g]}),E}let{styled:aG,css:a$,keyframes:aj,createTheme:aq}=(0,eN.Th)({theme:{colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:"hsl(209 100% 38.2%)",accentMuted:"hsl(209 80% 61.8%)",accentAlt:"hsl(209 80% 30%)",secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},media:{xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"}}),aV=aG("span",{}),scroll_F=h=>{let{as:g,label:_}=h,E=scroll_M(h,["as","label"]);return eO.createElement(aV,{as:g,...E},scroll_A(_,E.lang))};aG("img",{objectFit:"cover"}),aG("a",{});let aY={delimiter:", "},aW=(0,eO.createContext)(void 0),de=()=>{let h=(0,eO.useContext)(aW);if(void 0===h)throw Error("usePrimitivesContext must be used with a PrimitivesProvider");return h},me=({children:h,initialState:g=aY})=>{let _=ue(g,"delimiter");return eO.createElement(aW.Provider,{value:{delimiter:_}},h)},ue=(h,g)=>Object.hasOwn(h,g)?h[g].toString():void 0,aQ=aG("span",{}),H=h=>{let{as:g,markup:_}=h,{delimiter:E}=de();if(!_)return eO.createElement(eO.Fragment,null);let A=scroll_M(h,["as","markup"]),k={__html:np(scroll_A(_,A.lang,E),{allowedAttributes:{a:["href"],img:["alt","src","height","width"]},allowedSchemes:["http","https","mailto"],allowedTags:["a","b","br","i","img","p","small","span","sub","sup"]})};return eO.createElement(aQ,{as:g,...A,dangerouslySetInnerHTML:k})},he=h=>eO.useContext(aW)?eO.createElement(H,{...h}):eO.createElement(me,null,eO.createElement(H,{...h}));aG("span",{}),aG("dl",{}),aG("li",{}),aG("ul",{}),aG("li",{}),aG("ul",{}),aG("dl",{}),aG("li",{}),aG("ul",{});let ge=h=>{let{as:g,summary:_}=h,E=scroll_M(h,["as","customValueDelimiter","summary"]);return eO.createElement(he,{as:g,markup:_,...E})},aX=aG("div",{display:"flex",flexDirection:"column",justifyContent:"space-between"}),aK=aG("aside",{margin:"0",padding:"0",position:"relative",zIndex:2,flexGrow:"1",flexShrink:"0",[`& ${aX}`]:{position:"absolute",width:"50%",top:0},"&.anchor":{[`& ${aX}`]:{position:"fixed",width:"50%"}}}),aZ=aG("header",{display:"flex",justifyContent:"space-between",fontSize:"1",flexGrow:"1",flexShrink:"0",marginBottom:"1.618rem",strong:{fontWeight:"400",fontSize:"1.33rem"}}),aJ=aG("section",{margin:"0",gap:"1rem"}),we=({label:h})=>eO.createElement(aZ,null,eO.createElement("strong",null,eO.createElement(scroll_F,{label:h}))),a0=aG("article",{transition:"all 0.382s ease-in-out",display:"flex",flexDirection:"row",flexWrap:"nowrap",gap:"2.618rem"}),a1=aG("div",{transition:"$all",width:"50%",opacity:0,transform:"translateX(2.618rem)",zIndex:-1}),a2=aG("div",{width:"50%",display:"flex",flexDirection:"column",justifyContent:"flex-start"}),a3=aG("hr",{margin:"0",borderColor:"transparent",height:"1.618rem",position:"relative",zIndex:0,display:"flex",justifyContent:"flex-end",marginTop:"2.618rem","&::before":{content:"attr(aria-label)",position:"absolute",right:"1.618rem",bottom:"0",zIndex:1,display:"flex",fontSize:"0.7222rem",fontWeight:"400",lineHeight:"1rem",background:"inherit",opacity:.7},"&::after":{content:"",width:"100%",position:"absolute",zIndex:0,height:"1px",background:"#6662"}}),a4=aG("div",{position:"relative",zIndex:"1",display:"flex",flexDirection:"column",gap:"2.618rem","&[data-figures-visible='true']":{[`& ${a1}`]:{opacity:1,zIndex:0,transform:"translateX(0)"}}}),Ie=({canvas:h,canvasInfo:{current:g,total:_}})=>eO.createElement("figcaption",null,eO.createElement("em",null,g," / ",_),(null==h?void 0:h.label)&&eO.createElement(scroll_F,{label:null==h?void 0:h.label}),(null==h?void 0:h.summary)&&eO.createElement(ge,{summary:null==h?void 0:h.summary,as:"p"})),a5=window.OpenSeadragon;if(!a5&&!(a5=eI))throw Error("OpenSeadragon is missing.");let a6="http://www.w3.org/2000/svg";a5.Viewer&&(a5.Viewer.prototype.svgOverlay=function(){return this._svgOverlayInfo||(this._svgOverlayInfo=new scroll_V(this)),this._svgOverlayInfo});let scroll_V=function(h){let g=this;this._viewer=h,this._containerWidth=0,this._containerHeight=0,this._svg=document.createElementNS(a6,"svg"),this._svg.style.position="absolute",this._svg.style.left=0,this._svg.style.top=0,this._svg.style.width="100%",this._svg.style.height="100%",this._viewer.canvas.appendChild(this._svg),this._node=document.createElementNS(a6,"g"),this._svg.appendChild(this._node),this._viewer.addHandler("animation",function(){g.resize()}),this._viewer.addHandler("open",function(){g.resize()}),this._viewer.addHandler("rotate",function(){g.resize()}),this._viewer.addHandler("flip",function(){g.resize()}),this._viewer.addHandler("resize",function(){g.resize()}),this.resize()};scroll_V.prototype={node:function(){return this._node},resize:function(){this._containerWidth!==this._viewer.container.clientWidth&&(this._containerWidth=this._viewer.container.clientWidth,this._svg.setAttribute("width",this._containerWidth)),this._containerHeight!==this._viewer.container.clientHeight&&(this._containerHeight=this._viewer.container.clientHeight,this._svg.setAttribute("height",this._containerHeight));let h=this._viewer.viewport.pixelFromPoint(new a5.Point(0,0),!0),g=this._viewer.viewport.getZoom(!0),_=this._viewer.viewport.getRotation(),E=this._viewer.viewport.getFlip(),A=this._viewer.viewport._containerInnerSize.x,k=A*g,b=k;E&&(k=-k,h.x=-h.x+A),this._node.setAttribute("transform","translate("+h.x+","+h.y+") scale("+k+","+b+") rotate("+_+")")},onClick:function(h,g){new a5.MouseTracker({element:h,clickHandler:g}).setTracking(!0)}};let ke=h=>fetch(`${h.replace(/\/$/,"")}/info.json`).then(h=>h.json()).then(h=>h).catch(g=>{console.error(`The IIIF tilesource ${h.replace(/\/$/,"")}/info.json failed to load: ${g}`)}),Ce=h=>{let g,_;return Array.isArray(h)&&(g=h[0])&&(_="@id"in g?g["@id"]:g.id),_};var a8=((et=a8||{}).TiledImage="tiledImage",et.SimpleImage="simpleImage",et);let ze=h=>{let g=Array.isArray(null==h?void 0:h.service)&&(null==h?void 0:h.service.length)>0,_=g?Ce(null==h?void 0:h.service):null==h?void 0:h.id,E=g?a8.TiledImage:a8.SimpleImage;return{uri:_,imageType:E}},$e=(h,g)=>{let _=g?a8.TiledImage:a8.SimpleImage;return{uri:h,imageType:_}},a9=aG("div",{display:"flex",flexDirection:"column",alignItems:"center"}),a7=aG("p",{fontWeight:"bold",fontSize:"x-large"}),oe=aG("span",{fontSize:"medium"}),Ae=({error:h})=>{let{message:g}=h;return eO.createElement(a9,{role:"alert"},eO.createElement(a7,{"data-testid":"headline"},"Something went wrong"),g&&eO.createElement(oe,null,`Error message: ${g}`," "))},ot=aG("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),on=aG("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),oi=aG("div",{width:"100%",height:"100%",maxHeight:"100vh",background:"transparent",backgroundSize:"contain",color:"white",position:"relative",zIndex:"0",overflow:"hidden",variants:{hasNavigator:{true:{[`${ot}`]:{display:"block"}},false:{[`${ot}`]:{display:"none"}}}}}),oa=aG("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",backgroundColor:"$primary",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&[data-button=rotate-right]":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=rotate-left]":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=reset]":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}}),scroll_E=({className:h,id:g,label:_,children:E})=>{let A=_.toLowerCase().replace(/\s/g,"-");return eO.createElement(oa,{id:g,className:h,"data-testid":"openseadragon-button","data-button":A},eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":`${g}-svg-title`,"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},eO.createElement("title",{id:`${g}-svg-title`},_),E))},oo=aG("div",{position:"absolute",zIndex:"1",top:"1rem",right:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),Re=()=>eO.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),scroll_Te=()=>eO.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),We=()=>eO.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),Oe=()=>eO.createElement("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),scroll_T=()=>eO.createElement(eO.Fragment,null,eO.createElement("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),eO.createElement("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})),De=({_cloverViewerHasPlaceholder:h,config:g})=>eO.createElement(oo,{"data-testid":"clover-iiif-image-openseadragon-controls",hasPlaceholder:h},g.showZoomControl&&eO.createElement(eO.Fragment,null,eO.createElement(scroll_E,{id:g.zoomInButton,label:"zoom in"},eO.createElement(Re,null)),eO.createElement(scroll_E,{id:g.zoomOutButton,label:"zoom out"},eO.createElement(scroll_Te,null))),g.showFullPageControl&&eO.createElement(scroll_E,{id:g.fullPageButton,label:"full page"},eO.createElement(We,null)),g.showRotationControl&&eO.createElement(eO.Fragment,null,eO.createElement(scroll_E,{id:g.rotateRightButton,label:"rotate right"},eO.createElement(scroll_T,null)),eO.createElement(scroll_E,{id:g.rotateLeftButton,label:"rotate left"},eO.createElement(scroll_T,null))),g.showHomeControl&&eO.createElement(scroll_E,{id:g.homeButton,label:"reset"},eO.createElement(Oe,null))),je=({ariaLabel:h,config:g,uri:_,_cloverViewerHasPlaceholder:E,imageType:A,openSeadragonCallback:k})=>{let[b,C]=(0,eO.useState)(),[S,w]=(0,eO.useState)(),N=(0,eO.useRef)(!1);return(0,eO.useEffect)(()=>(N.current||(N.current=!0,S||w(eI(g))),()=>null==S?void 0:S.destroy()),[]),(0,eO.useEffect)(()=>{S&&k&&k(S)},[S,k]),(0,eO.useEffect)(()=>{S&&_!==b&&(null==S||S.forceRedraw(),C(_))},[S,b,_]),(0,eO.useEffect)(()=>{if(b&&S)switch(A){case"simpleImage":null==S||S.addSimpleImage({url:b});break;case"tiledImage":ke(b).then(h=>{try{if(!h)throw Error(`No tile source found for ${b}`);null==S||S.addTiledImage({tileSource:h})}catch(h){console.error(h)}});break;default:null==S||S.close(),console.warn(`Unable to render ${b} in OpenSeadragon as type: "${A}"`)}},[A,b]),eO.createElement(oi,{className:"clover-iiif-image-openseadragon","data-testid":"clover-iiif-image-openseadragon","data-openseadragon-instance":g.id,hasNavigator:g.showNavigator},eO.createElement(De,{_cloverViewerHasPlaceholder:E,config:g}),g.showNavigator&&eO.createElement(ot,{id:g.navigatorId,"data-testid":"clover-iiif-image-openseadragon-navigator"}),eO.createElement(on,{id:g.id,"data-testid":"clover-iiif-image-openseadragon-viewport",role:"img",...h&&{"aria-label":h}}))},Ne=({_cloverViewerHasPlaceholder:h=!1,body:g,instanceId:_,isTiledImage:E=!1,label:A,src:k="",openSeadragonCallback:b,openSeadragonConfig:C={}})=>{let S=_||esm_browser_v4(),w="string"==typeof A?A:scroll_A(A),N={id:`openseadragon-${S}`,navigatorId:`openseadragon-navigator-${S}`,loadTilesWithAjax:!0,fullPageButton:`fullPage-${S}`,homeButton:`reset-${S}`,rotateLeftButton:`rotateLeft-${S}`,rotateRightButton:`rotateRight-${S}`,zoomInButton:`zoomIn-${S}`,zoomOutButton:`zoomOut-${S}`,showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!1},...C},{imageType:R,uri:L}=g?ze(g):$e(k,E);return L?eO.createElement(ew.SV,{FallbackComponent:Ae},eO.createElement(je,{_cloverViewerHasPlaceholder:h,ariaLabel:w,config:N,imageType:R,key:S,uri:L,openSeadragonCallback:b})):null},os=aG("div",{width:"100%",height:"400px",background:"#6662",backgroundSize:"contain",color:"white",position:"relative",zIndex:"1",overflow:"hidden"}),Xe=({body:h,label:g})=>eO.createElement(os,{"data-testid":"scroll-figure-image"},eO.createElement(Ne,{body:h,openSeadragonConfig:{showNavigator:!1,showHomeControl:!1},...g&&{label:g}})),ol=aG("figure",{figcaption:{display:"flex",flexDirection:"column",margin:"1.618rem 0 0",opacity:.9,em:{fontSize:"0.9em",fontStyle:"normal",opacity:.7}}}),Ge=(h,g,_,E)=>{var A,k;let b={canvas:void 0,accompanyingCanvas:void 0,annotationPage:void 0,annotations:[]};if(b.canvas=h.get(g),b.canvas&&(b.annotationPage=h.get(b.canvas.items[0]),b.accompanyingCanvas=null!=(A=b.canvas)&&A.accompanyingCanvas?h.get(null==(k=b.canvas)?void 0:k.accompanyingCanvas):void 0),b.annotationPage){let A=h.get(b.annotationPage.items).map(g=>({body:h.get(g.body[0].id),motivation:g.motivation,type:"Annotation"})),k=[];A.forEach(g=>{"Choice"===g.body.type?g.body.items.forEach(_=>k.push({...g,id:_.id,body:h.get(_.id)})):k.push(g)}),b.annotations=k.filter(A=>{if(A){if(!A.body||!A.motivation){console.error("Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'",A);return}let k=A.body;Array.isArray(k)&&(k=k[0]);let b=h.get(k.id);if(b)switch(_){case"painting":return A.target===g.id&&A.motivation&&"painting"===A.motivation[0]&&E.includes(b.type)&&(A.body=b),!!A;case"supplementing":return;default:throw Error("Invalid annotation motivation.")}}})}return b},qe=(h,g)=>{let _=Ge(h,{id:g,type:"Canvas"},"painting",["Image","Sound","Video"]);if(0!==_.annotations.length&&_.annotations&&_.annotations)return _.annotations.map(h=>null==h?void 0:h.body)},Ke=({canvas:h,canvasInfo:g})=>{let{state:_}=(0,eO.useContext)(az),{vault:E}=_,A=qe(E,h.id);return A?eO.createElement(ol,null,null==A?void 0:A.map(g=>eO.createElement(Xe,{body:g,key:null==g?void 0:g.id,label:null==h?void 0:h.label})),eO.createElement(Ie,{canvas:h,canvasInfo:g})):null},oc="255, 197, 32",ou=aG("div",{ul:{padding:"1rem"},li:{listStyleType:"disc",li:{listStyleType:"circle"}},"span.highlight":{position:"relative",fontWeight:"bold","&::before":{top:"0",position:"absolute",display:"inline",content:"",width:"calc(100% + 4px)",height:"calc(100% + 2px) ",marginLeft:"-2px",borderRadius:"3px",border:`1px solid rgba(${oc}, 0.2)`,borderBottom:`1px solid rgba(${oc}, 0.618)`,boxShadow:"1px 1px 1px #6661"},"&::after":{left:"0",top:"0",position:"absolute",display:"inline",content:"",width:"calc(100% + 4px)",height:"calc(100% + 2px) ",marginLeft:"-2px",marginTop:"-1px",borderRadius:"3px",backgroundColor:`rgba(${oc}, 0.2)`,zIndex:-1}}}),Je=({searchString:h="",content:g,stringLength:_=150})=>{let E=g.toLowerCase().indexOf(h.toLowerCase());if(-1!==E){let A=Math.max(0,E-_/2),k=Math.min(g.length,E+h.length+_/2);if(A>0){let h=g.lastIndexOf(" ",A+1);A=h>0?h+1:A}if(k<g.length){let h=g.indexOf(" ",k-1);k=h>-1?h:k}g=(A>0?"... ":"")+g.substring(A,k)+(k<g.length?" ...":"")}else g=g.substring(0,_)+"...";return g},scroll_N=({body:h,stringLength:g,type:_="content"})=>{let E;let{state:A}=(0,eO.useContext)(az),{searchString:k}=A,b=String(h.value);"snippet"==_&&(b=Je({searchString:k,content:b,stringLength:g}));let C=function(h){let[g,_]=eO.useState("");return eO.useEffect(()=>{(async()=>{let g=await mr(h);_(g)})()},[h]),{html:g,jsx:aB.jsx("div",{dangerouslySetInnerHTML:{__html:g}})}}(b);if("text/plain"===h.format&&(E=null==b?void 0:b.replace(/\n/g,"<br />")),"text/markdown"===h.format&&(E=null==C?void 0:C.html),"text/html"===h.format&&(E=b),k&&E){let h=RegExp(`(${k})`,"gi");E=null==E?void 0:E.replace(h,h=>`<span class="highlight">${h}</span>`)}let S=[h.id,_].join("-"),w=["ar"].includes(String(h.language));return E?eO.createElement(ou,{dangerouslySetInnerHTML:{__html:E},"data-body-id":S,"data-testid":"scroll-item-body",id:S,dir:w?"rtl":"ltr",css:{fontSize:w?"1.3em":"1em"}}):null},od=eO.memo(({hasItemBreak:h,isLastItem:g,item:_,itemCount:E,itemNumber:A})=>{var k;let{state:b}=eO.useContext(az),{annotations:C,vault:S}=b,w=null==S?void 0:S.get(_),N=null==(k=null==C?void 0:C.filter(h=>h.target===_.id))?void 0:k.map(h=>{var g;return null==(g=null==h?void 0:h.body)?void 0:g.map((h,g)=>eO.createElement(scroll_N,{body:h,key:g}))}),R={current:A,total:E};return eO.createElement(a0,{"data-page-break":h,"data-page-number":A,"data-last-item":g},eO.createElement(a1,null,w&&eO.createElement(Ke,{canvas:w,canvasInfo:R})),eO.createElement(a2,null,(null==w?void 0:w.label)&&eO.createElement("strong",null,eO.createElement(scroll_F,{label:null==w?void 0:w.label})," ",`(${R.current} / ${R.total})`),eO.createElement("div",null,N||eO.createElement("p",null,"[Blank]")),h&&eO.createElement(a3,{"aria-label":"Page Break"})))}),om="255, 197, 32",oh=aG("span",{fontWeight:"700"}),op=aG("div",{display:"flex",gap:"0.25rem"}),of=aG("div",{fontSize:"0.9rem",padding:"1rem 0.618rem"}),og=aG("div",{display:"flex",flexDirection:"column",gap:"0.5rem",hr:{margin:"0.618rem",border:"none",borderBottom:"1px solid #6662"},button:{backgroundColor:"#6660",opacity:"0.7",transition:"$all",padding:"0.5rem 0.618rem",fontSize:"0.9rem",lineHeight:"1.1rem",textAlign:"left",borderRadius:"6px",border:"1px solid #6662",display:"flex",flexDirection:"column",gap:"0.25rem","&:hover":{opacity:"1",boxShadow:"5px 5px 13px #6662"},"&[data-result=true]":{backgroundColor:`rgba(${om}, 0.2)`,borderColor:`rgba(${om}, 0.2)`,opacity:"1","&:hover":{backgroundColor:`rgba(${om}, 0.2)`}}}}),o_=aG("input",{margin:"0",padding:"0 1rem 0 2rem",background:"none",zIndex:"2",height:"2rem",marginLeft:"1rem",marginTop:"1rem",justifyContent:"center",display:"flex",alignItems:"center",fontSize:"1rem",borderRadius:"2rem",fontFamily:"inherit",backgroundColor:"$primary",border:"none",color:"$secondary",cursor:"text",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important",flexGrow:"0",width:"100%","&:placeholder":{color:"inherit"}}),oE=aG("span",{position:"absolute",zIndex:"3",width:"2rem",height:"2rem",padding:"8px",marginTop:"1rem",marginLeft:"1rem",color:"$secondary",fill:"$secondary",stroke:"$secondary",transition:"$all",cursor:"text"}),oT=aG("button",{opacity:"1",display:"flex",alignItems:"center",borderRadius:"2rem",width:"2rem",height:"2rem",alignSelf:"center",marginTop:"1rem",gap:"0.35rem",backgroundColor:"$accent",fill:"$secondary",flexShrink:"0",svg:{padding:"6px",color:"inherit",fill:"inherit"},'&[aria-disabled="true"]':{opacity:"0",display:"none"}}),oA=aG("form",{display:"flex",justifyContent:"space-between",gap:"1rem",width:"100%",variants:{isPanelExpanded:{true:{[`${oE}`]:{marginLeft:"0"},[`& ${o_}`]:{marginLeft:"0",backgroundColor:"$primary",width:"auto",flexGrow:"1"}},false:{}}}}),oy=aG("div",{}),scroll_W=({annotation:h,isResult:g})=>{var _,E;let A=[null==(_=null==h?void 0:h.body)?void 0:_.id,"content"].join("-"),a=h=>{var g;h&&(null==(g=document.getElementById(h))||g.scrollIntoView({behavior:"smooth"}))};return eO.createElement("button",{"data-result":g?"true":"false",onClick:()=>a(A),key:A},eO.createElement(op,null,eO.createElement(oh,null,h.motivation),eO.createElement("span",null,null==(E=null==h?void 0:h.body)?void 0:E.language)),eO.createElement(scroll_N,{body:h.body,stringLength:144,type:"snippet"}))},st=({results:h})=>eO.createElement(og,null,h.found.map(h=>eO.createElement(scroll_W,{annotation:h,isResult:!0,key:h.id})),eO.createElement("hr",null),h.notFound.map(h=>eO.createElement(scroll_W,{annotation:h,key:h.id}))),ov={charset:"latin:extra, arabic:extra, cyrillic:extra, cjk:extra",optimize:!0,tokenize:"full",resolution:9,document:{id:"id",index:"content"}},scroll_dt=()=>{var h;let{state:g}=(0,eO.useContext)(az),{annotations:_,searchString:E=""}=g,A=new aH.Z.Document(ov),k=[];function i(h){return h.map(h=>null==_?void 0:_.filter(g=>g.body.find(g=>g.id===h)).map(g=>{let _=g.body.findIndex(g=>g.id===h);return{...g,body:g.body[_]}}).shift())}null==_||_.forEach(h=>{var g;null==(g=null==h?void 0:h.body)||g.forEach(h=>{var g;let _=null==(g=null==h?void 0:h.value)?void 0:g.replace(/\n/g,"");k.push(null==h?void 0:h.id),A.add({id:null==h?void 0:h.id,content:_})})});let b=null==A?void 0:A.search(E).reduce((h,g)=>[...new Set([...h,...g.result])],[]),C={found:i(b),notFound:i(k.filter(h=>!b.includes(h)))};return eO.createElement(oy,null,E&&eO.createElement(of,null,null==(h=C.found)?void 0:h.length," results for ",eO.createElement("strong",null,E)),eO.createElement(st,{results:C}))},mt=()=>eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eO.createElement("title",null,"Search"),eO.createElement("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})),ut=()=>eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eO.createElement("title",null,"Close"),eO.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),pt=({togglePanel:h,isPanelExpanded:g})=>{let{dispatch:_,state:E}=(0,eO.useContext)(az),{searchString:A}=E,k=(0,eO.useRef)(null),l=()=>k.current===document.activeElement&&h(!0),s=()=>{var g;null==(g=k.current)||g.blur(),u(),h(!1),_({payload:"",type:"updateSearchString"})},u=()=>{k.current&&(k.current.value="")},p=h=>{"Escape"===h.key&&(h.preventDefault(),s())};return(0,eO.useEffect)(()=>(null==document||document.addEventListener("keydown",p),()=>{null==document||document.removeEventListener("keydown",p)}),[]),(0,eO.useEffect)(()=>{if(null!=k&&k.current)return k.current.addEventListener("focus",l),k.current.addEventListener("blur",l),()=>{k.current&&(k.current.removeEventListener("focus",l),k.current.removeEventListener("blur",l))}},[]),eO.createElement(oA,{id:"scroll-search",autoComplete:"off",isPanelExpanded:g},eO.createElement(oE,{onClick:()=>{var h;return null==(h=null==k?void 0:k.current)?void 0:h.focus()}},eO.createElement(mt,null)),eO.createElement(o_,{ref:k,name:"clover-search",type:"text",placeholder:"Search...",defaultValue:A,onChange:h=>{var g;_({payload:null==(g=null==h?void 0:h.target)?void 0:g.value,type:"updateSearchString"})}}),eO.createElement(oT,{"aria-disabled":!g,"aria-label":"Close search panel",onClick:h=>{h.preventDefault(),s()},disabled:!g},eO.createElement(ut,null)))},ob=aG("div",{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"0",position:"relative",zIndex:"1",maxWidth:"100%",marginTop:"1rem",transition:"$all",variants:{isPanelExpanded:{true:{zIndex:1,opacity:1,transform:"translateX(0)"},false:{zIndex:-1,opacity:0,transform:"translateX(-2.618rem)",transitionDelay:"0",transition:"none"}}}}),gt=h=>{let[g,_]=(0,eO.useState)({top:0,left:0});return(0,eO.useEffect)(()=>{let a=()=>{if(h.current){let g=h.current.getBoundingClientRect();_({top:g.top,left:g.left})}};return window.addEventListener("scroll",a),window.addEventListener("resize",a),a(),()=>{window.removeEventListener("scroll",a),window.removeEventListener("resize",a)}},[h]),g},ft=({isPanelExpanded:h,handlePanel:g})=>{var _;let E=(0,eO.useRef)(null),{state:A}=(0,eO.useContext)(az),{options:k}=A,{offset:b}=k,{top:C}=gt(E),S=!!C&&C<b,w=null==(_=null==E?void 0:E.current)?void 0:_.offsetWidth,N=w&&.5*w,R={top:S?b:0,width:`calc(${N}px - 1.318rem)`,maxWidth:h?"100%":`${N?N-315:180}px`,minWidth:"130px"};return eO.createElement(aK,{ref:E,className:S?"anchor":"","data-testid":"scroll-panel"},eO.createElement(aX,{style:R},eO.createElement(pt,{togglePanel:g,isPanelExpanded:h}),eO.createElement(ob,{"data-testid":"scroll-panel-results","data-panel-expanded":h,isPanelExpanded:h},h&&eO.createElement(scroll_dt,null))))},xt=({items:h})=>{let[g,_]=(0,eO.useState)(!1);return eO.createElement(eO.Fragment,null,eO.createElement(ft,{isPanelExpanded:g,handlePanel:h=>_(h)}),eO.createElement(a4,{"data-figures-visible":!g},h.map((g,_)=>{let E=_+1,A=E===h.length;return eO.createElement(od,{item:g,hasItemBreak:E<h.length,isLastItem:A,key:g.id,itemCount:h.length,itemNumber:E})})))},vt=(h,g)=>{let[_,E]=(0,eO.useState)([]);return(0,eO.useEffect)(()=>{if(!g)return;let _=[];null==h||h.forEach(h=>{var E;let A=g.get(h);null==(E=null==A?void 0:A.annotations)||E.forEach(h=>{var E;let A=g.get(h);null==(E=null==A?void 0:A.items)||E.forEach(h=>{var E;let A=g.get(h);A&&_.push({...A,body:null==(E=null==A?void 0:A.body)?void 0:E.map(h=>g.get(h))})})})});let A=_.reduce((h,g)=>(h.some(h=>h.id===g.id)||h.push(g),h),[]);E(A)},[h,g]),_},wt=({iiifContent:h})=>{let[g,_]=(0,eO.useState)(),{state:E,dispatch:A}=(0,eO.useContext)(az),{vault:k}=E,b=vt(null==g?void 0:g.items,k);return(0,eO.useEffect)(()=>{k&&k.load(h).then(h=>h&&_(h)).catch(g=>console.error(`Manifest ${h} failed to load: ${g}`))},[h,k]),(0,eO.useEffect)(()=>{A({type:"updateAnnotations",payload:b})},[b,A]),g?eO.createElement(aJ,null,g.label&&eO.createElement(we,{label:g.label}),g.items&&eO.createElement(xt,{items:g.items})):null},Ft=({iiifContent:h,options:g})=>eO.createElement(scroll_re,{options:g},eO.createElement(wt,{iiifContent:h}));var ox=_(9897),oC=_(334),oS=_(434),oI=_(150),ow=_(9821),oN=_(1876).Buffer;function esm_p(h){return h.endsWith("info.json")?h:h.endsWith("/")?`${h}info.json`:`${h}/info.json`}let oO="http://library.stanford.edu/iiif/image-api/compliance.html#level1",oR="http://library.stanford.edu/iiif/image-api/compliance.html#level2",oD="http://library.stanford.edu/iiif/image-api/conformance.html#level1",oL="http://library.stanford.edu/iiif/image-api/conformance.html#level2",oP="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",oM="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",oF="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",oB="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",oH="http://iiif.io/api/image/1/level1.json",oU="http://iiif.io/api/image/1/profiles/level1.json",oz="http://iiif.io/api/image/1/level2.json",oG="http://iiif.io/api/image/1/profiles/level2.json",o$="http://iiif.io/api/image/2/level1.json",oj="http://iiif.io/api/image/2/profiles/level1.json",oq="http://iiif.io/api/image/2/level2.json",oV="http://iiif.io/api/image/2/profiles/level2.json",oY="level1",oW="level2",oQ="http://iiif.io/api/image/2/level1",oX="http://iiif.io/api/image/2/level2",oK=[oX,oR,oL,oM,oB,oz,oG,oq,oV,oW],oZ=[...oK,oQ,oO,oD,oP,oF,oH,oU,o$,oj,oY],oJ=["http://iiif.io/api/image/2/level0",oQ,oX,"http://library.stanford.edu/iiif/image-api/compliance.html#level0",oO,oR,"http://library.stanford.edu/iiif/image-api/conformance.html#level0",oD,oL,"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",oP,oM,"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",oF,oB,"http://iiif.io/api/image/1/level0.json","http://iiif.io/api/image/1/profiles/level0.json",oH,oU,oz,oG,"http://iiif.io/api/image/2/level0.json","http://iiif.io/api/image/2/profiles/level0.json",o$,oj,oq,oV,"level0",oY,oW],o0={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["sizeByWhListed"]},o1={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPx","regionSquare","sizeByWhListed","sizeByH","sizeByW","sizeByWh"]},o2={extraFormats:["jpg","png"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPct","regionByPx","regionSquare","rotationBy90s","sizeByWhListed","sizeByConfinedWh","sizeByH","sizeByPct","sizeByW","sizeByWh"]};function esm_h(h){return h["@id"]?h["@id"]:h.id?h.id:void 0}function esm_w(h){if(!h||!h.profile||!esm_h(h))return!1;let g=Array.isArray(h.profile)?h.profile:[h.profile];for(let h of g)if("string"==typeof h&&-1!==oJ.indexOf(h))return!0;return!1}function v(h,g){if(g&&g.profile){let _=g.profile;if(_){let g=Array.isArray(_)?_:[_];return g.includes(`level${h}`)||g.includes(`http://iiif.io/api/image/2/level${h}.json`)||g.includes(`http://iiif.io/api/image/1/level${h}.json`)||g.includes(`http://iiif.io/api/image/1/profiles/level${h}.json`)}}return!1}function esm_F(h){return esm_w(h)?v(0,h)?0:v(1,h)?1:v(2,h)?2:null:null}function esm_X(h){return -1!==(h["@context"]?Array.isArray(h["@context"])?h["@context"]:[h["@context"]]:[]).indexOf("http://iiif.io/api/image/3/context.json")}function esm_Y(h){let g=h.match(/^.*\/(full)\/(((\d+),(\d+)?)|max)\/(\d+)\/default\.(jpg|png|jpeg)$/);if(g){let _=g[1],E=parseInt(g[4],10),A=parseInt(g[5],10),k=g[7];if(("max"===_||"full"===_)&&E&&A&&k)return{type:"fixed",id:h,height:A,width:E}}return{type:"unknown",id:h}}function esm_q(h){let g=[],_=h.length;for(let E=0;E<_;E++){let _=function(h){return esm_w(h)?(h&&h.sizes?h.sizes:[]).map(g=>({id:esm_h(h),type:"fixed-service",height:g.height,width:g.width,level:esm_F(h),version:esm_X(h)?3:2})):[]}(h[E]);_.length&&g.push(..._);let A=function(h){if(!function(h){if(!esm_w(h))return!1;let g=Array.isArray(h.profile)?h.profile:[h.profile];for(let h of g)if("string"==typeof h){if(-1!==oZ.indexOf(h))return!0}else{let g=[...h.supports||[],...h.extraFeatures||[]];if(-1!==g.indexOf("regionByPx")&&(-1!==g.indexOf("sizeByW")||-1!==g.indexOf("sizeByWh")))return!0}return!1}(h))return[];let g=[],_=Array.isArray(h.profile)?h.profile:[h.profile],E=_.length;for(let g=0;g<E;g++){let E=_[g];if("string"!=typeof E&&(E.maxHeight||E.maxWidth))return[{id:esm_h(h),type:"variable",minWidth:0,minHeight:0,maxHeight:E.maxHeight||E.maxWidth,maxWidth:E.maxWidth||E.maxHeight,level:esm_F(h),version:"http://iiif.io/api/image/3/context.json"===h["@context"]?3:2}]}if(h.tiles){let _=h.tiles.length;for(let E=0;E<_;E++){let _=h.tiles[E];(_.height||_.width)&&g.push({id:esm_h(h),type:"variable",minHeight:0,minWidth:0,maxHeight:_.height||_.width,maxWidth:_.width,level:esm_F(h),version:esm_X(h)?3:2})}}return g}(h[E]);A.length&&g.push(...A)}return g}function ee(h){let g=h.service?Array.isArray(h.service)?h.service:[h.service]:[],_=g.length,E=[];for(let h=0;h<_;h++)esm_w(g[h])&&E.push(g[h]);return E}var o3=Object.defineProperty,o4=Object.defineProperties,o5=Object.getOwnPropertyDescriptors,o6=Object.getOwnPropertySymbols,o8=Object.prototype.hasOwnProperty,o9=Object.prototype.propertyIsEnumerable,esm_$e=(h,g,_)=>g in h?o3(h,g,{enumerable:!0,configurable:!0,writable:!0,value:_}):h[g]=_,esm_x=(h,g)=>{for(var _ in g||(g={}))o8.call(g,_)&&esm_$e(h,_,g[_]);if(o6)for(var _ of o6(g))o9.call(g,_)&&esm_$e(h,_,g[_]);return h},I=(h,g)=>o4(h,o5(g));function esm_O(h,g,_){let E=function(h){let g=function(h,g=""){let{path:_,scheme:E,server:A,prefix:k}=function(h,g=""){let _=h.match(/^(([a-zA-Z]+):\/\/([^/]+))?((.*)+)/);if(!_)throw Error(`Invalid or unknown input ${h}`);let E=_[2],A=_[3],k=_[4];if("/"===k[0]&&(k=k.substr(1)),g.length>0){if("/"===g[0]&&(g=g.substr(1)),g!==k.substr(0,g.length))throw Error(`Path does not start with prefix (path: ${k}, prefix: ${g})`);k=k.substr(g.length)}return{scheme:E,server:A,path:k,prefix:g}}(h,g),b=_.split("/").reverse(),[C,S,w,N,...R]=b,L=R.reverse().filter(Boolean).join("/");if(1===b.length||""===C)return{type:"base",scheme:E,server:A,prefix:k,identifier:L};if("info.json"===C){let[,...h]=b;return{type:"info",scheme:E,server:A,prefix:k,identifier:h.reverse().filter(Boolean).join("/")}}let P=C.split(".");return{type:"image",scheme:E,server:A,prefix:k,identifier:L,originalPath:_,region:function(h){try{if("full"===h)return{full:!0};if("square"===h)return{square:!0};let g=h.startsWith("pct:"),_=h.substr(g?4:0).split(",").map(h=>parseFloat(h));return{x:_[0],y:_[1],w:_[2],h:_[3],percent:g}}catch{throw Error("Expected 'full', 'square' or 'x,y,w,h'. Found "+h)}}(N),size:function(h){let g={upscaled:!1,max:!1,confined:!1};if("^"===h[0]&&(g.upscaled=!0,h=h.slice(1)),"max"===h||"full"===h)return g.max=!0,g.serialiseAsFull="full"===h,g;if("!"===h[0]&&(g.confined=!0,h=h.slice(1)),"p"===h[0])return g.percentScale=parseFloat(h.slice(4)),g;let _=h.split(",").map(h=>h.trim());return _.length&&(""!==_[0]&&(g.width=parseInt(_[0],10)),""!==_[1]?(g.height=parseInt(_[1],10),g.version=2):g.version=3),g}(w),rotation:function(h){let g={angle:0};if("!"===h[0]&&(g.mirror=!0,h=h.substr(1)),g.angle=parseFloat(h)%360,Number.isNaN(g.angle))throw Error(`Invalid rotation ${h}`);return g}(S),quality:P[0],format:P[1]}}(esm_p(h.id));if("info"!==g.type)throw Error("Invalid service URL");let _=function(h){let g=h?Array.isArray(h.profile)?h.profile:[h.profile]:[],_={extraQualities:[],extraFormats:[],extraFeatures:[]};for(let h of g){var E;if("string"==typeof h&&(E=h,h=-1!==oK.indexOf(E)?o2:-1!==oZ.indexOf(E)?o1:o0),h){if(h.formats)for(let g of h.formats)-1===_.extraFormats.indexOf(g)&&_.extraFormats.push(g);if(h.qualities)for(let g of h.qualities)-1===_.extraQualities.indexOf(g)&&_.extraQualities.push(g);if(h.supports)for(let g of h.supports)-1===_.extraFeatures.indexOf(g)&&_.extraFeatures.push(g);if(h.maxHeight&&(_.maxHeight=h.maxHeight),h.maxWidth&&(_.maxWidth=h.maxWidth),h.maxArea&&(_.maxArea=h.maxArea),h.extraFormats)for(let g of h.extraFormats)-1===_.extraFormats.indexOf(g)&&_.extraFormats.push(g);if(h.extraQualities)for(let g of h.extraQualities)-1===_.extraQualities.indexOf(g)&&_.extraQualities.push(g);if(h.extraFeatures)for(let g of h.extraFeatures)-1===_.extraFeatures.indexOf(g)&&_.extraFeatures.push(g);h.maxHeight&&(_.maxHeight=h.maxHeight),h.maxWidth&&(_.maxWidth=h.maxWidth),h.maxArea&&(_.maxArea=h.maxArea)}}if(h.extraFormats)for(let g of h.extraFormats)-1===_.extraFormats.indexOf(g)&&_.extraFormats.push(g);if(h.extraFeatures)for(let g of h.extraFeatures)-1===_.extraFeatures.indexOf(g)&&_.extraFeatures.push(g);if(h.extraQualities)for(let g of h.extraQualities)-1===_.extraQualities.indexOf(g)&&_.extraQualities.push(g);return _}(h);return{identifier:g.identifier,originalPath:"",server:g.server,prefix:g.prefix,scheme:g.scheme,type:"image",quality:-1===_.extraQualities.indexOf("default")?_.extraQualities[0]:"default",region:{full:!0},size:{max:!0,upscaled:!1,confined:!1},format:"jpg",rotation:{angle:0}}}({"@context":3===h.version?"http://iiif.io/api/image/3/context.json":"http://iiif.io/api/image/2/context.json",id:esm_p(esm_h(h)),profile:null===h.level||typeof h.level>"u"?"level0":`level${h.level}}`,type:3===h.version?"ImageService3":"ImageService2"});if("image"!==E.type)throw Error("Invalid service");return E.size.max=!1,E.size.width=g,E.size.height=_,{id:function(h,g){let _=h.prefix.startsWith("/")?h.prefix.substr(1):h.prefix,E=`${h.scheme}://${h.server}/${_?`${_}/`:""}${h.identifier}`;if("base"===h.type)return E;if("info"===h.type)return`${E}/info.json`;let{size:A}=h,{region:k,rotation:b,format:C,quality:S}=h;if(g){let h=g["@context"]?Array.isArray(g["@context"])?g["@context"]:[g["@context"]]:[],_=-1!==h.indexOf("http://iiif.io/api/image/2/context.json"),E=-1!==h.indexOf("http://iiif.io/api/image/3/context.json");if((A.width!==g.width||A.height)&&(A.height!==g.height||A.width)&&(A.width!==g.width||A.height!==g.height)||(A=I(esm_x({},A),{max:!0})),_&&(A.max&&!A.serialiseAsFull&&(A=I(esm_x({},A),{serialiseAsFull:!0})),!A.max&&A.width&&A.height&&(A=I(esm_x({},A),{height:void 0})),A=I(esm_x({},A),{version:2})),E){if(A.max&&A.serialiseAsFull&&(A=I(esm_x({},A),{serialiseAsFull:!1})),A.width&&!A.height&&g.width&&g.height){let h=g.height/g.width;A=I(esm_x({},A),{height:Math.ceil(A.width*h)})}A=I(esm_x({},A),{version:3})}}return[E,function({x:h=0,y:g=0,w:_,h:E,full:A,square:k,percent:b}){if(A)return"full";if(k)return"square";if(typeof _>"u"||typeof E>"u")throw Error("RegionParameter: invalid region");let C=`${h},${g},${_},${E}`;return b?`pct:${C}`:C}(k),function({max:h,percentScale:g,upscaled:_,confined:E,width:A,height:k,serialiseAsFull:b,version:C}){let S=[];return _&&S.push("^"),h?S.push(b?"full":"max"):(E&&S.push("!"),g&&S.push(`pct:${g}`),A&&S.push(`${A}`),S.push(","),k&&3===C&&S.push(`${k}`)),S.join("")}(A),`${b.mirror?"!":""}${(b.angle||0)%360}`,`${S}.${C}`].filter(Boolean).join("/")}(E),type:"fixed",width:g,height:_||h.height/(h.width||1)*g,unsafe:h.width>g}}function esm_y(h){let g=h.replace(/(https?:\/\/)?(www.)?/i,"");return -1!==g.indexOf("/")?g.split("/")[0]:g}var o7=Object.defineProperty,se=Object.defineProperties,sn=Object.getOwnPropertyDescriptors,sr=Object.getOwnPropertySymbols,sa=Object.prototype.hasOwnProperty,so=Object.prototype.propertyIsEnumerable,esm_Re=(h,g,_)=>g in h?o7(h,g,{enumerable:!0,configurable:!0,writable:!0,value:_}):h[g]=_,ri=(h,g)=>{for(var _ in g||(g={}))sa.call(g,_)&&esm_Re(h,_,g[_]);if(sr)for(var _ of sr(g))so.call(g,_)&&esm_Re(h,_,g[_]);return h},si=(h,g)=>se(h,sn(g)),esm_=(h,g,_)=>new Promise((E,A)=>{var s=h=>{try{o(_.next(h))}catch(h){A(h)}},a=h=>{try{o(_.throw(h))}catch(h){A(h)}},o=h=>h.done?E(h.value):Promise.resolve(h.value).then(s,a);o((_=_.apply(h,g)).next())});new class{constructor(){this.config={verificationsRequired:1,approximateServices:!0,enableFetching:!0,disableThrottling:!1},this.fetchingCount=0,this.imageServices={},this.knownImageServers={}}setConfig(h){Object.assign(this.config,h)}sample(h,g,_=!0){let E=esm_y(esm_h(h)),A=esm_p(esm_h(h)),k=this.knownImageServers[E];return this.imageServices[A]=Object.assign(h,{real:!0}),k||!h.tiles||v(0,h)?this.verify(h):(this.knownImageServers[E]={verifications:0,malformed:!1,root:E,preLoaded:_,sampledId:esm_h(h),verified:!1,server:null,result:{context:h["@context"]||[],sampledProfile:h.profile,resourceServiceRatio:g&&h.height?g.height/h.height:1,sampledSizes:h.sizes||[],sizeRatios:function(h,g,_){let E=_.length,A=[];for(let g=0;g<E;g++){let E=_[g].width;A.push(h/E)}return A}(h.width,h.height,h.sizes||[]),sampledTiles:h.tiles||[]}},!0)}preLoad(h,g=!0){this.knownImageServers[h.root]=h,g&&(this.knownImageServers[h.root].malformed=!1,this.knownImageServers[h.root].verifications=this.config.verificationsRequired)}predict(h,g=!1,_=!1){let E=null==h?void 0:h.source,A=esm_y(esm_h(h)),k=this.knownImageServers[A];if(!k||!k.result||!((null==E?void 0:E.height)||h.height)||!((null==E?void 0:E.width)||h.width)||!_&&(k.malformed||k.verifications<this.config.verificationsRequired)||v(0,h.source))return null;let b=esm_p(esm_h(h));return this.imageServices[b]||(this.imageServices[b]={"@context":k.result.context,"@id":esm_h(h),id:esm_h(h),protocol:"http://iiif.io/api/image",tiles:(null==E?void 0:E.tiles)||function(h,g,_){let E=h>g?h:g,A=_.length,k=[];for(let h=0;h<A;h++){let g=_[h],A=g.scaleFactors[0],b=E/A,C=[A];for(;b>=g.width;)C.push(A*=2),b/=2;k.push(si(ri({},g),{scaleFactors:C}))}return k}(h.width,h.height,k.result.sampledTiles),sizes:(null==E?void 0:E.sizes)||function(h,g,_){let E=_.length,A=[];for(let k=0;k<E;k++){let E=_[k];A.push({width:Math.floor(h/E),height:Math.floor(g/E)})}return A}(Math.round(h.width/k.result.resourceServiceRatio),Math.round(h.height/k.result.resourceServiceRatio),k.result.sizeRatios),profile:(null==E?void 0:E.profile)||k.result.sampledProfile,height:(null==E?void 0:E.height)||h.height,width:(null==E?void 0:E.width)||h.width,real:!1}),this.imageServices[b]}getThumbnailFromResource(h,g){return esm_(this,arguments,function*(h,g,_=!0,E=[]){let A=h?yield this.getImageCandidates(h,_):[];return function(h,g){let _=[],E=Object.assign({unsafeImageService:!1,atAnyCost:!0,fallback:!0,minHeight:64,minWidth:64,maxHeight:1/0,maxWidth:1/0,returnAllOptions:!1,preferFixedSize:!1,allowUnsafe:!1,explain:!1,height:0,width:0},h),r=(h,g=0)=>E.explain?_.push(Array(g).fill(0).map(h=>"    ").join("")+h().trim()):void 0,A=[],k=[],b=null;r(()=>`Using configuration: ${JSON.stringify(E,null,2)}`);let f=(h,g)=>{if(r(()=>"Swapping choice",3),function(h,g,_){let E=h.width?h.width:h.maxWidth;return _.height<=h.maxHeight&&_.width<=h.maxWidth&&_.height>=h.minHeight&&_.width>=h.minWidth&&(!g||Math.abs(_.width-E)<Math.abs(g.width-E))}(E,g,h)){if(E.preferFixedSize&&h.unsafe){r(()=>`We found an image that was marked as unsafe, but it was the best size. (${h.id})`,4),k.push(h);return}E.returnAllOptions&&g&&k.push(g),r(()=>`We found a new image that was the best size. (${h.id})`,4),b=h}else E.returnAllOptions&&k.push(h)};r(()=>`The input shows we have ${g.length} list(s) of candidates to choose from.`);let C=g.length;for(let h=0;h<C;h++){let _=g[h]();r(()=>`Candidate group ${h}: ${JSON.stringify(_,null,2)}`,1);let k=_.length;r(()=>`Checking candidate list number ${h} and found ${k} potential ways of creating image(s)`,1);for(let h=0;h<k;h++){let g=_[h];if(r(()=>`-> Checking candidate ${h}`,1),"unknown"===g.type&&E.atAnyCost&&(r(()=>'We\'ve found an unknown image type, adding this to the "last resort" list',2),A.push(g)),"fixed"===g.type&&(g.unsafe?(r(()=>'We\'ve found an unsafe fixed image type, adding this to the "last resort" list',2),A.push(g)):(r(()=>"We've found a fixed size image, checking if it matches the request",2),f(g,b))),"fixed-service"===g.type){if(E.unsafeImageService){r(()=>"Checking for an image from the tile source, without calculating the right height and width (unsafeImageService)",2);let h=esm_O(g,E.width,E.height);f(h,b)}else{r(()=>"Checking for an image from the tile source 3",2);let h=esm_O(g,g.width,g.height);f(h,b)}}if("variable"===g.type&&g.maxWidth){let h=esm_O({id:g.id,type:"fixed-service",width:g.maxWidth,height:g.maxWidth,level:g.level,version:g.version},g.maxWidth);f(h,b)}}if(b&&!E.returnAllOptions){if(b.unsafe||E.allowUnsafe)continue;r(()=>`We found a match in choice list number ${h}, no searching any more`);break}}return E.atAnyCost&&0===k.length?(r(()=>b?`We found an image! ${b.id} of type ${b.type}`:'We found no images, but "atAnyCost" is set, so returning that'),{best:b||A[0],fallback:A.slice(1),log:_}):E.returnAllOptions?(r(()=>"Returning all options that we have found"),{best:E.atAnyCost?b||k[0]||A[0]:b||k[0],fallback:[...k,...A],log:_}):(r(()=>"Returning the best image that we found, and a fallback"),{best:b||k[0]||null,fallback:b?k:k.slice(1),log:_})}(g,[()=>E,()=>A])})}getImageCandidates(h,g=!0){return esm_(this,null,function*(){if(g&&h.height&&h.width){let g=ee(h);for(let _ of g){let g={id:esm_h(_),width:_.width?_.width:h.width,height:_.height?_.height:h.height,source:_};yield this.loadService(g)}}return function(h,g=!0,_){let E=[],A=function(h){if("string"==typeof h)return esm_Y(h);let g=h["@type"]?h["@type"]:h.type?h.type:void 0;if("Image"!==g&&"sc:Image"!==g)return null;let _=esm_h(h);return _?_&&h.width&&h.height?{id:_,type:"fixed",width:h.width,height:h.height,unsafe:!0}:esm_Y(_):null}(h);if(null===A)return E;if(E.push(A),g&&h.width&&h.height){let g=[],A=ee(h);for(let E of A){let A={id:esm_h(E),width:h.width,height:h.height};if(_.canLoadSync(A)){let E=_.loadServiceSync(A);E&&(E.height||(E.height=h.height),E.width||(E.width=h.width),g.push(...esm_q([E])))}}if(g.length)return E.push(...g),E}return h.service&&E.push(...esm_q(h.service)),E}(h,g,this)})}verify(h){return esm_(this,null,function*(){let g=this.predict(h,!1,!0),_=yield this.fetchService(esm_h(h));if(!g)return!1;let E=g.height===_.height&&g.width===_.width&&g["@context"]===_["@context"]&&function(h,g){if(h.length!==g.length)return!1;if(0===h.length&&0===g.length)return!0;let _=h.length,E=!0;for(let A=0;A<_;A++){let _=h[A],k=g[A];if(_.width!==k.width||_.height!==k.height){E=!1;break}}if(E)return!0;let A=0;for(let E=0;E<_;E++)for(let k=0;k<_;k++)if(h[E].width===g[k].width&&h[E].height===g[k].height){A++;break}return A===_}(g.sizes||[],_.sizes||[]);if(E){let g=esm_y(esm_h(h));this.knownImageServers[g].verifications+=1,this.knownImageServers[g].verifications>=this.config.verificationsRequired&&(this.knownImageServers[g].verified=!0)}return E})}canLoadSync(h){let g="string"==typeof h?h:esm_h(h),_=esm_p(g);if(this.imageServices[_])return!0;let E=this.knownImageServers[esm_y(g)];return E&&!E.malformed&&E.verifications>=this.config.verificationsRequired}markAsMalformed(h){return esm_(this,null,function*(){return this.knownImageServers[esm_y(esm_h(h))].malformed=!0,this.loadService(h,!0)})}fetchService(h,g=!1){return esm_(this,null,function*(){let _=esm_p(h);if(this.imageServices[_]&&(!g||this.imageServices[_].real))return this.imageServices[_];if(!this.config.enableFetching)throw Error("Fetching is not enabled");let E=yield this.fetch(_).then(h=>h.json());return!E.id&&E["@id"]&&(E.id=E["@id"]),E.id!==h&&(E.id=h,E["@id"]&&(E["@id"]=h)),this.imageServices[_]=Object.assign(E,{real:!0}),this.imageServices[_]})}fetch(h,g){return esm_(this,null,function*(){return fetch(h,g)})}loadService(h,g=!1){return esm_(this,null,function*(){if(!this.config.disableThrottling){let h=!0;for(;h;)if(this.fetchingCount>=this.config.verificationsRequired)yield new Promise(h=>setTimeout(h,500));else{h=!1;break}}let _=this.knownImageServers[esm_y(esm_h(h))];if(_&&!_.malformed&&!g){yield _.result;let g=this.loadServiceSync(h);if(g)return g}this.fetchingCount++;let E=yield this.fetchService(esm_h(h),g);return this.fetchingCount--,E.real&&this.sample(E,h),E})}loadServiceSync(h){let g=esm_p(esm_h(h));return this.imageServices[g]?this.imageServices[g]:this.predict(h)}},Symbol.for("_refs_"),Symbol.for("_reactive_"),Symbol.for("_defined_");var ss=_(6419),sl=_(5059),sc=_(761);let Gt=h=>{let g=h.toString().split(":"),_=Math.ceil(parseInt(g[0])),E=Math.ceil(parseInt(g[1])),A=qt(Math.ceil(parseInt(g[2])),2),k=`${0!==_&&E<10?(E+"").padStart(2,"0"):E}:${A}`;return 0!==_&&(k=`${_}:${k}`),k},viewer_je=h=>{let g=new Date(1e3*h).toISOString().substr(11,8);return Gt(g)},viewer_Ge=(h,g)=>{if("object"!=typeof h||null===h)return g;for(let _ in g)"object"!=typeof g[_]||null===g[_]||Array.isArray(g[_])?h[_]=g[_]:(h[_]||(h[_]={}),h[_]=viewer_Ge(h[_],g[_]));return h},Ut=h=>h.split("").reduce(function(h,g){return(h=(h<<5)-h+g.charCodeAt(0))&h},0),viewer_Ue=(h,g)=>Object.hasOwn(h,g)?h[g].toString():void 0,qt=(h,g)=>String(h).padStart(g,"0"),su={annotationOverlays:{backgroundColor:"#ff6666",borderColor:"#990000",borderType:"solid",borderWidth:"1px",opacity:"0.5",renderOverlays:!0,zoomLevel:2},background:"transparent",canvasBackgroundColor:"#6662",canvasHeight:"500px",ignoreCaptionLabels:[],informationPanel:{vtt:{autoScroll:{enabled:!0,settings:{behavior:"smooth",block:"center"}}},open:!0,renderAbout:!0,renderSupplementing:!0,renderToggle:!0,renderAnnotation:!0},openSeadragon:{},requestHeaders:{"Content-Type":"application/json"},showDownload:!0,showIIIFBadge:!0,showTitle:!0,withCredentials:!1};function viewer_qe(h){let g={...su.informationPanel.vtt.autoScroll};return"object"==typeof h&&(g="enabled"in h?h:{enabled:!0,settings:h}),!1===h&&(g.enabled=!1),function({behavior:h,block:g}){let _=["auto","instant","smooth"],E=["center","end","nearest","start"];if(!_.includes(h))throw TypeError(`'${h}' not in ${_.join(" | ")}`);if(!E.includes(g))throw TypeError(`'${g}' not in ${E.join(" | ")}`)}(g.settings),g}let sd=viewer_qe(null==(eb=null==(ev=null==su?void 0:su.informationPanel)?void 0:ev.vtt)?void 0:eb.autoScroll),sm={activeCanvas:"",activeManifest:"",collection:{},configOptions:su,customDisplays:[],isAutoScrollEnabled:sd.enabled,isAutoScrolling:!1,isInformationOpen:null==(ex=null==su?void 0:su.informationPanel)?void 0:ex.open,isLoaded:!1,isUserScrolling:void 0,vault:new Vault,openSeadragonViewer:null,viewerId:esm_browser_v4()},sh=eO.createContext(sm),sp=eO.createContext(sm);function Jt(h,g){switch(g.type){case"updateActiveCanvas":return g.canvasId||(g.canvasId=""),{...h,activeCanvas:g.canvasId};case"updateActiveManifest":return{...h,activeManifest:g.manifestId};case"updateAutoScrollAnnotationEnabled":return{...h,isAutoScrollEnabled:g.isAutoScrollEnabled};case"updateAutoScrolling":return{...h,isAutoScrolling:g.isAutoScrolling};case"updateCollection":return{...h,collection:g.collection};case"updateConfigOptions":return{...h,configOptions:viewer_Ge(h.configOptions,g.configOptions)};case"updateInformationOpen":return{...h,isInformationOpen:g.isInformationOpen};case"updateIsLoaded":return{...h,isLoaded:g.isLoaded};case"updateUserScrolling":return{...h,isUserScrolling:g.isUserScrolling};case"updateOpenSeadragonViewer":return{...h,openSeadragonViewer:g.openSeadragonViewer};case"updateViewerId":return{...h,viewerId:g.viewerId};default:throw Error(`Unhandled action type: ${g.type}`)}}let Kt=({initialState:h=sm,children:g})=>{let[_,E]=(0,eO.useReducer)(Jt,h);return eO.createElement(sh.Provider,{value:_},eO.createElement(sp.Provider,{value:E},g))};function viewer_$(){let h=eO.useContext(sh);if(void 0===h)throw Error("useViewerState must be used within a ViewerProvider");return h}function viewer_F(){let h=eO.useContext(sp);if(void 0===h)throw Error("useViewerDispatch must be used within a ViewerProvider");return h}let Qt=(h,g)=>{let _=h.get({id:g,type:"Canvas"});return null!=_&&_.annotations&&_.annotations[0]?h.get(_.annotations).filter(h=>!!h.items&&!!h.items.length&&h).map(h=>{let g=h.label||{none:["Annotations"]};return{...h,label:g}}):[]},viewer_Ye=(h,g,_,E)=>{var A,k;let b={canvas:void 0,accompanyingCanvas:void 0,annotationPage:void 0,annotations:[]};if(b.canvas=h.get(g),b.canvas&&(b.annotationPage=h.get(b.canvas.items[0]),b.accompanyingCanvas=null!=(A=b.canvas)&&A.accompanyingCanvas?h.get(null==(k=b.canvas)?void 0:k.accompanyingCanvas):void 0),b.annotationPage){let A=h.get(b.annotationPage.items).map(g=>({body:h.get(g.body[0].id),motivation:g.motivation,type:"Annotation"})),k=[];A.forEach(g=>{"Choice"===g.body.type?g.body.items.forEach(_=>k.push({...g,id:_.id,body:h.get(_.id)})):k.push(g)}),b.annotations=k.filter(A=>{if(A){if(!A.body||!A.motivation){console.error("Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'",A);return}let k=A.body;Array.isArray(k)&&(k=k[0]);let b=h.get(k.id);if(b)switch(_){case"painting":return A.target===g.id&&A.motivation&&"painting"===A.motivation[0]&&E.includes(b.type)&&(A.body=b),!!A;case"supplementing":return;default:throw Error("Invalid annotation motivation.")}}})}return b},viewer_U=(h,g="en")=>{if(!h)return"";if(!h[g]){let g=Object.getOwnPropertyNames(h);if(g.length>0)return h[g[0]]}return h[g]},viewer_q=(h,g)=>{let _=viewer_Ye(h,{id:g,type:"Canvas"},"painting",["Image","Sound","Video"]);if(0!==_.annotations.length&&_.annotations&&_.annotations)return _.annotations.map(h=>null==h?void 0:h.body)},en=(h,g,_,E)=>{let A=[];if(g.canvas&&g.canvas.thumbnail.length>0){let _=h.get(g.canvas.thumbnail[0]);A.push(_)}if(g.annotations[0]){if(g.annotations[0].thumbnail&&g.annotations[0].thumbnail.length>0){let _=h.get(g.annotations[0].thumbnail[0]);A.push(_)}if(!g.annotations[0].body)return;let _=g.annotations[0].body;"Image"===_.type&&A.push(_)}return 0===A.length?void 0:{id:A[0].id,format:A[0].format,type:A[0].type,width:_,height:E}},sf={xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"},{styled:sg,css:s_,keyframes:sE,createTheme:sT}=(0,eN.Th)({theme:{colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:"hsl(209 100% 38.2%)",accentMuted:"hsl(209 80% 61.8%)",accentAlt:"hsl(209 80% 30%)",secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},media:sf}),sA=sg("div",{display:"flex",flexDirection:"column",alignItems:"center"}),sy=sg("p",{fontWeight:"bold",fontSize:"x-large"}),sk=sg("span",{fontSize:"medium"}),viewer_Je=({error:h})=>{let{message:g}=h;return eO.createElement(sA,{role:"alert"},eO.createElement(sy,{"data-testid":"headline"},"Something went wrong"),g&&eO.createElement(sk,null,`Error message: ${g}`," "))},sv=sg("div",{position:"relative",zIndex:"0"}),sb=sg("div",{display:"flex",flexDirection:"row",flexGrow:"1",overflow:"hidden","@sm":{flexDirection:"column"}}),sx=sg("div",{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",width:"61.8%","@sm":{width:"100%"}}),sC=sg(oC.xz,{display:"none",border:"none",padding:"0",transition:"$all",opacity:"1",background:"#6663",margin:"1rem 0",borderRadius:"6px","&[data-information-panel='false']":{opacity:"0",marginTop:"-59px"},"@sm":{display:"flex","> span":{display:"flex",flexGrow:"1",fontSize:"0.8333em",justifyContent:"center",padding:"0.5rem",fontFamily:"inherit"}}}),sS=sg(oC.VY,{width:"100%",display:"flex"}),sI=sg("aside",{display:"flex",flexGrow:"1",flexShrink:"0",width:"38.2%",maxHeight:"100%","@sm":{width:"100%"}}),sw=sg("div",{display:"flex",flexDirection:"column",fontSmooth:"auto",webkitFontSmoothing:"antialiased",'&[data-absolute-position="true"]':{position:"absolute",width:"100%",height:"100%",zIndex:"0"},"> div":{display:"flex",flexDirection:"column",flexGrow:"1",justifyContent:"flex-start",height:"100%",maxHeight:"100%","@sm":{[`& ${sb}`]:{flexGrow:"1"},[`& ${sx}`]:{flexGrow:"0"}}},"@sm":{padding:"0"},"&[data-information-panel-open='true']":{"@sm":{position:"fixed",height:"100%",width:"100%",top:"0",left:"0",zIndex:"2500000000",[`& ${sv}`]:{display:"none"},[`& ${sC}`]:{margin:"1rem"},[`& ${sS}`]:{height:"100%"}}}}),sN=sg(oS.fC,{display:"flex",flexDirection:"column",width:"100%",height:"100%",flexGrow:"1",flexShrink:"0",position:"relative",zIndex:"1",maskImage:"linear-gradient(180deg, rgba(0, 0, 0, 1) calc(100% - 2rem), transparent 100%)","@sm":{marginTop:"0.5rem",boxShadow:"none"}}),sO=sg(oS.aV,{display:"flex",flexGrow:"0",margin:"0 1.618rem",borderBottom:"4px solid #6663","@sm":{margin:"0 1rem"}}),sR=sg(oS.xz,{display:"flex",position:"relative",padding:"0.5rem 1rem",background:"none",backgroundColor:"transparent",fontFamily:"inherit",border:"none",opacity:"0.7",fontSize:"1rem",marginRight:"1rem",lineHeight:"1rem",whiteSpace:"nowrap",cursor:"pointer",fontWeight:400,transition:"$all","&::after":{width:"0",height:"4px",content:"",position:"absolute",bottom:"-4px",left:"0",transition:"$all"},"&[data-state='active']":{opacity:"1",fontWeight:700,"&::after":{width:"100%",backgroundColor:"$accent"}}}),sD=sg(oS.VY,{display:"flex",flexGrow:"1",flexShrink:"0",position:"absolute",top:"0",left:"0","&[data-state='active']":{width:"100%",height:"calc(100% - 2rem)",padding:"1.618rem 0"}}),sL=sg(({handleScroll:h,children:g,className:_})=>eO.createElement("div",{className:_,onScroll:h},g),{position:"relative",height:"100%",width:"100%",overflowY:"scroll"}),sP={position:"relative",cursor:"pointer",display:"flex",width:"100%",justifyContent:"space-between",textAlign:"left",margin:"0",padding:"0.5rem 1.618rem",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",color:"inherit",border:"none",background:"none"},sM=sg("button",{textAlign:"left","&:hover":{color:"$accent"}}),sF=sg("div",{display:"flex",flexDirection:"column",width:"100%"}),sB=sg("div",{...sP}),sH=sg("div",{"&:hover":{color:"$accent"}}),viewer_Ie=({value:h,handleClick:g})=>eO.createElement(sM,{onClick:g},h),hn=({value:h,handleClick:g})=>eO.createElement(sH,{dangerouslySetInnerHTML:{__html:h},onClick:g}),gn=()=>{function e(h){return h.map(h=>{let g=h.identifier||esm_browser_v4();return{...h,identifier:g}})}return{addIdentifiersToParsedCues:e,createNestedCues:function(h){var g;let _=[],E=[],A=e(h);for(let h of A){for(;E.length>0&&E[E.length-1].end<=h.start;)E.pop();E.length>0?(E[E.length-1].children||(E[E.length-1].children=[]),null==(g=E[E.length-1].children)||g.push(h)):_.push(h),E.push(h)}return _},isChild:function(h,g=[]){return g.some(g=>h.start>=g.start&&h.end<=g.end)},orderCuesByTime:function(h=[]){return h.sort((h,g)=>h.start-g.start)}}},sU=sE({from:{transform:"rotate(360deg)"},to:{transform:"rotate(0deg)"}}),sz=sg(oI.fC,{display:"flex",flexDirection:"column",width:"100%"}),sG=sg(oI.ck,{...sP,"@sm":{padding:"0.5rem 1rem",fontSize:"0.8333rem"},"&::before":{content:"",width:"12px",height:"12px",borderRadius:"12px",position:"absolute",backgroundColor:"$primaryMuted",opacity:"0",left:"8px",marginTop:"3px",boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",opacity:"0",clipPath:"polygon(100% 50%, 0 100%, 0 0)",left:"13px",marginTop:"6px",boxSizing:"content-box","@sm":{content:"unset"}},strong:{marginLeft:"1rem"},"&:hover":{color:"$accent","&::before":{backgroundColor:"$accent",opacity:"1"},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",clipPath:"polygon(100% 50%, 0 100%, 0 0)",opacity:"1"}},"&[aria-checked='true']":{backgroundColor:"#6663","&::before":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accentMuted",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1s linear infinite",animationName:sU,boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accent",clipPath:"polygon(100% 0, 100% 100%, 0 0)",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1.5s linear infinite",animationName:sU,boxSizing:"content-box","@sm":{content:"unset"}}}}),xn=h=>{for(;h&&h!==document.body;){let g=window.getComputedStyle(h).overflowY;if("visible"!==g&&"hidden"!==g&&h.scrollHeight>h.clientHeight)return h;h=h.parentNode}return null},bn=({label:h,start:g,end:_})=>{var E,A;let k=viewer_F(),{configOptions:b,isAutoScrollEnabled:C,isUserScrolling:S}=viewer_$(),w=null==(A=null==(E=null==b?void 0:b.informationPanel)?void 0:E.vtt)?void 0:A.autoScroll,[N,R]=(0,eO.useState)(!1),L=(0,eO.useRef)(null),P=document.getElementById("clover-iiif-video");return(0,eO.useEffect)(()=>(null==P||P.addEventListener("timeupdate",()=>{let{currentTime:h}=P;R(g<=h&&h<_)}),()=>document.removeEventListener("timeupdate",()=>{})),[_,g,P]),(0,eO.useEffect)(()=>{var h,g;if(C&&N&&L.current&&!S){let _=L.current;if(_&&_ instanceof HTMLElement){let E=xn(_);if(E&&E instanceof HTMLElement){let A;switch(null==(h=null==w?void 0:w.settings)?void 0:h.block){case"center":let b=E.getBoundingClientRect();A=_.offsetTop+_.offsetHeight-Math.floor((b.bottom-b.top)/2);break;case"end":A=_.offsetTop+_.offsetHeight-(E.clientHeight-_.clientHeight)+2;break;default:A=_.offsetTop-2}k({type:"updateAutoScrolling",isAutoScrolling:!0}),E.scrollTo({top:A,left:0,behavior:null==(g=null==w?void 0:w.settings)?void 0:g.behavior}),setTimeout(()=>k({type:"updateAutoScrolling",isAutoScrolling:!1}),750)}}}},[w,N,S,C,k]),eO.createElement(sG,{ref:L,"aria-checked":N,"data-testid":"information-panel-cue",onClick:()=>{P&&(P.pause(),P.currentTime=g,P.play())},value:h},h,eO.createElement("strong",null,viewer_je(g)))},s$=sg("ul",{listStyle:"none",paddingLeft:"1rem",position:"relative","&&:first-child":{paddingLeft:"0"},"& li ul":{[`& ${sG}`]:{backgroundColor:"unset","&::before":{content:"none"},"&::after":{content:"none"}}},"&:first-child":{margin:"0 0 1.618rem"}}),viewer_it=({items:h})=>eO.createElement(s$,null,h.map(h=>{let{text:g,start:_,end:E,children:A,identifier:k}=h;return eO.createElement("li",{key:k},eO.createElement(bn,{label:g,start:_,end:E}),A&&eO.createElement(viewer_it,{items:A}))})),En=({label:h,vttUri:g})=>{let[_,E]=eO.useState([]),{createNestedCues:A,orderCuesByTime:k}=gn(),[b,C]=eO.useState();return(0,eO.useEffect)(()=>{g&&fetch(g,{headers:{"Content-Type":"text/plain",Accept:"application/json"}}).then(h=>h.text()).then(h=>{let g=(0,ow.parse)(h).cues,_=k(g),b=A(_);E(b)}).catch(h=>{console.error(g,h.toString()),C(h)})},[g]),eO.createElement(sz,{"data-testid":"annotation-item-vtt","aria-label":`navigate ${viewer_U(h,"en")}`},b&&eO.createElement("div",{"data-testid":"error-message"},"Network Error: ",b.toString()),eO.createElement(viewer_it,{items:_}))},viewer_lt=h=>{var g,_;let E={id:"string"==typeof h?h:h.source};if("string"==typeof h){if(h.includes("#xywh=")){let g=h.split("#xywh=");if(g&&g[1]){let[h,_,A,k]=g[1].split(",").map(h=>Number(h));E={id:g[0],rect:{x:h,y:_,w:A,h:k}}}}else if(h.includes("#t=")){let g=h.split("#t=");g&&g[1]&&(E={id:g[0],t:g[1]})}}else"object"==typeof h&&((null==(g=h.selector)?void 0:g.type)==="PointSelector"?E={id:h.source,point:{x:h.selector.x,y:h.selector.y}}:(null==(_=h.selector)?void 0:_.type)==="SvgSelector"&&(E={id:h.source,svg:h.selector.value}));return E},sj=window.OpenSeadragon;if(!sj&&!(sj=eI))throw Error("OpenSeadragon is missing.");let sq="http://www.w3.org/2000/svg";sj.Viewer&&(sj.Viewer.prototype.svgOverlay=function(){return this._svgOverlayInfo||(this._svgOverlayInfo=new viewer_me(this)),this._svgOverlayInfo});let viewer_me=function(h){let g=this;this._viewer=h,this._containerWidth=0,this._containerHeight=0,this._svg=document.createElementNS(sq,"svg"),this._svg.style.position="absolute",this._svg.style.left=0,this._svg.style.top=0,this._svg.style.width="100%",this._svg.style.height="100%",this._viewer.canvas.appendChild(this._svg),this._node=document.createElementNS(sq,"g"),this._svg.appendChild(this._node),this._viewer.addHandler("animation",function(){g.resize()}),this._viewer.addHandler("open",function(){g.resize()}),this._viewer.addHandler("rotate",function(){g.resize()}),this._viewer.addHandler("flip",function(){g.resize()}),this._viewer.addHandler("resize",function(){g.resize()}),this.resize()};viewer_me.prototype={node:function(){return this._node},resize:function(){this._containerWidth!==this._viewer.container.clientWidth&&(this._containerWidth=this._viewer.container.clientWidth,this._svg.setAttribute("width",this._containerWidth)),this._containerHeight!==this._viewer.container.clientHeight&&(this._containerHeight=this._viewer.container.clientHeight,this._svg.setAttribute("height",this._containerHeight));let h=this._viewer.viewport.pixelFromPoint(new sj.Point(0,0),!0),g=this._viewer.viewport.getZoom(!0),_=this._viewer.viewport.getRotation(),E=this._viewer.viewport.getFlip(),A=this._viewer.viewport._containerInnerSize.x,k=A*g,b=k;E&&(k=-k,h.x=-h.x+A),this._node.setAttribute("transform","translate("+h.x+","+h.y+") scale("+k+","+b+") rotate("+_+")")},onClick:function(h,g){new sj.MouseTracker({element:h,clickHandler:g}).setTracking(!0)}};let Sn=h=>new viewer_me(h),Cn=h=>fetch(`${h.replace(/\/$/,"")}/info.json`).then(h=>h.json()).then(h=>h).catch(g=>{console.error(`The IIIF tilesource ${h.replace(/\/$/,"")}/info.json failed to load: ${g}`)}),kn=h=>{let g,_;return Array.isArray(h)&&(g=h[0])&&(_="@id"in g?g["@id"]:g.id),_},viewer_ue=h=>{var g;let _,E;if(Tn(h))_=h,E={};else{let A=JSON.parse(function(h){let g=function(h){let g=h.length%4;if(1===g)throw Error("InvalidLengthError: Input base64url string is the wrong length to determine padding");return h+(g?"====".slice(0,4-g):"")}(h),_=g.replace(/-/g,"+").replace(/_/g,"/"),E="undefined"==typeof atob?oN.from(_,"base64").toString("utf-8"):atob(_);return decodeURIComponent(E).trim()}(h));switch(null==A?void 0:A.type){case"SpecificResource":case"Range":case"Annotation":E={manifest:_=null==A?void 0:A.target.partOf[0].id,canvas:null==A?void 0:A.target.id};break;case"Canvas":E={manifest:_=null==A?void 0:A.partOf[0].id,canvas:null==A?void 0:A.id};break;case"Manifest":_=null==A?void 0:A.id,E={collection:null==(g=null==A?void 0:A.partOf[0])?void 0:g.id,manifest:null==A?void 0:A.id};break;case"Collection":E={collection:_=null==A?void 0:A.id}}}return{resourceId:_,active:E}},In=h=>{let{resourceId:g,active:_}=viewer_ue(h);return _.collection||_.manifest||g},$n=(h,g)=>{let _=g.items.map(h=>h.id),{active:E}=viewer_ue(h),A=E.canvas;return _.includes(A)?A:_[0]},An=(h,g)=>{let{active:_}=viewer_ue(h),E=_.manifest,A=g.items.filter(h=>"Manifest"===h.type).map(h=>h.id);return 0==A.length?null:A.includes(E)?E:A[0]},Tn=h=>{try{new URL(h)}catch{return!1}return!0};var sV=((er=sV||{}).TiledImage="tiledImage",er.SimpleImage="simpleImage",er);function viewer_Te(h,g,_,E){let A=function(h){if(!h)return null;let g=document.createElement("template");return g.innerHTML=h.trim(),g.content.children[0]}(g);if(A)for(let g of A.children)!function viewer_st(h,g,_,E){var A;if("#text"===g.nodeName)g.textContent&&(g.textContent.includes(`
`)||console.log("nodeName:",g.nodeName,", textContent:",g.textContent,", childNodes.length",g.childNodes.length));else{let k=function(h,g,_){var E,A,k,b;let C=!1,S=!1,w=!1,N=!1,R=document.createElementNS("http://www.w3.org/2000/svg",h.nodeName);if(h.attributes.length>0)for(let g=0;g<h.attributes.length;g++){let _=h.attributes[g];switch(_.name){case"fill":w=!0;break;case"stroke":C=!0;break;case"stroke-width":S=!0;break;case"fill-opacity":N=!0}R.setAttribute(_.name,_.textContent)}return C||(R.style.stroke=null==(E=g.annotationOverlays)?void 0:E.borderColor),S||(R.style.strokeWidth=null==(A=g.annotationOverlays)?void 0:A.borderWidth),w||(R.style.fill=null==(k=g.annotationOverlays)?void 0:k.backgroundColor),N||(R.style.fillOpacity=null==(b=g.annotationOverlays)?void 0:b.opacity),R.setAttribute("transform",`scale(${_})`),R}(g,_,E),b=Sn(h);b.node().append(k),null==(A=b._svg)||A.setAttribute("class","annotation-overlay"),g.childNodes.forEach(g=>{viewer_st(h,g,_,E)})}}(h,g,_,E)}let On=h=>{let g=Array.isArray(null==h?void 0:h.service)&&(null==h?void 0:h.service.length)>0,_=g?kn(null==h?void 0:h.service):null==h?void 0:h.id,E=g?sV.TiledImage:sV.SimpleImage;return{uri:_,imageType:E}},Pn=(h,g)=>{let _=g?sV.TiledImage:sV.SimpleImage;return{uri:h,imageType:_}},Vn=({caption:h,handleClick:g,imageUri:_})=>eO.createElement(sM,{onClick:g},eO.createElement("img",{src:_,alt:`A visual annotation for ${h}`}),eO.createElement("span",null,h)),Bn=({annotation:h})=>{var g,_;let{target:E}=h,A=viewer_$(),{openSeadragonViewer:k,vault:b,activeCanvas:C,configOptions:S}=A,w=h.body.map(h=>b.get(h.id)),N=(null==(g=w.find(h=>h.format))?void 0:g.format)||"",R=(null==(_=w.find(h=>h.value))?void 0:_.value)||"",L=b.get({id:C,type:"Canvas"});function p(){var h;if(!E)return;let g=(null==(h=S.annotationOverlays)?void 0:h.zoomLevel)||1,_=viewer_lt(E),{point:A,rect:b,svg:C}=_;if(A||b||C){let h=function(h,g,_){let E,A,k=40,b=40;g.rect&&(E=g.rect.x,A=g.rect.y,k=g.rect.w,b=g.rect.h),g.point&&(E=g.point.x,A=g.point.y);let C=1/h.width;return new eI.Rect(E*C-k*C/2*(_-1),A*C-b*C/2*(_-1),k*C*_,b*C*_)}(L,_,g);null==k||k.viewport.fitBounds(h)}}return eO.createElement(sB,null,function(){var h,g;switch(N){case"text/plain":return eO.createElement(viewer_Ie,{value:R,handleClick:p});case"text/html":return eO.createElement(hn,{value:R,handleClick:p});case"text/vtt":return eO.createElement(En,{label:w[0].label,vttUri:w[0].id||""});case null==(h=N.match(/^image\//))?void 0:h.input:let _=(null==(g=w.find(h=>{var g;return!(null!=(g=h.id)&&g.includes("vault://"))}))?void 0:g.id)||"";return eO.createElement(Vn,{caption:R,handleClick:p,imageUri:_});default:return eO.createElement(viewer_Ie,{value:R,handleClick:p})}}())},_n=({annotationPage:h})=>{var g;let _=viewer_$(),{vault:E}=_;if(!h||!h.items||(null==(g=h.items)?void 0:g.length)===0)return eO.createElement(eO.Fragment,null);let A=h.items.map(h=>E.get(h.id));return A?eO.createElement(sF,{"data-testid":"annotation-page"},null==A?void 0:A.map(h=>eO.createElement(Bn,{key:h.id,annotation:h}))):eO.createElement(eO.Fragment,null)},sY=sg("div",{padding:" 0 1.618rem 2rem",display:"flex",flexDirection:"column",overflow:"scroll",position:"absolute",fontWeight:"400",fontSize:"1rem",zIndex:"0",img:{maxWidth:"100px",maxHeight:"100px",objectFit:"contain",color:"transparent",margin:"0 0 1rem",borderRadius:"3px",backgroundColor:"$secondaryMuted"},video:{display:"none"},"a, a:visited":{color:"$accent"},p:{fontSize:"1rem",lineHeight:"1.45em",margin:"0"},dl:{margin:"0",dt:{fontWeight:"700",margin:"1rem 0 0.25rem"},dd:{margin:"0"}},".manifest-property-title":{fontWeight:"700",margin:"1rem 0 0.25rem"},"ul, ol":{padding:"0",margin:"0",li:{fontSize:"1rem",lineHeight:"1.45em",listStyle:"none",margin:"0.25rem 0 0.25rem"}}}),sW=sg("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),viewer_ct=(h,g="none")=>{if(!h)return null;if("string"==typeof h)return[h];if(!h[g]){let g=Object.getOwnPropertyNames(h);if(g.length>0)return h[g[0]]}return h[g]&&Array.isArray(h[g])?h[g]:null},viewer_T=(h,g="none",_=", ")=>{let E=viewer_ct(h,g);return Array.isArray(E)?E.join(`${_}`):E};function viewer_z(h,g){let _=Object.keys(h).filter(h=>g.includes(h)?null:h),E={};return _.forEach(g=>{E[g]=h[g]}),E}let sQ=sg("span",{}),viewer_=h=>{let{as:g,label:_}=h,E=viewer_z(h,["as","label"]);return eO.createElement(sQ,{as:g,...E},viewer_T(_,E.lang))},Un=(h,g="200,",_="full")=>{let E;Array.isArray(h)&&(h=h[0]);let{id:A,service:k}=h;if(!k)return A;if(Array.isArray(h.service)&&h.service.length>0&&(E=k[0]),E){if(E["@id"])return`${E["@id"]}/${_}/${g}/0/default.jpg`;if(E.id)return`${E.id}/${_}/${g}/0/default.jpg`}},sX=sg("img",{objectFit:"cover"}),qn=h=>{let g;let _=(0,eO.useRef)(null),{contentResource:E,altAsLabel:A,region:k="full"}=h;A&&(g=viewer_T(A));let b=viewer_z(h,["contentResource","altAsLabel"]),{type:C,id:S,width:w=200,height:N=200,duration:R}=E;(0,eO.useEffect)(()=>{if(!S&&!_.current||["Image"].includes(C)||!S.includes("m3u8"))return;let h=new nf.ZP;return _.current&&(h.attachMedia(_.current),h.on(nf.ZP.Events.MEDIA_ATTACHED,function(){h.loadSource(S)})),h.on(nf.ZP.Events.ERROR,function(g,_){if(_.fatal)switch(_.type){case nf.ZP.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${g} network error encountered, try to recover`),h.startLoad();break;case nf.ZP.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${g} media error encountered, try to recover`),h.recoverMediaError();break;default:h.destroy()}}),()=>{h&&(h.detachMedia(),h.destroy())}},[S,C]);let L=(0,eO.useCallback)(()=>{if(!_.current)return;let h=0,g=30;if(R&&(g=R),!S.split("#t=")&&R&&(h=.1*R),S.split("#t=").pop()){let g=S.split("#t=").pop();g&&(h=parseInt(g.split(",")[0]))}let E=_.current;E.autoplay=!0,E.currentTime=h,setTimeout(()=>L(),1e3*g)},[R,S]);(0,eO.useEffect)(()=>L(),[L]);let P=Un(E,`${w},${N}`,k);switch(C){case"Image":return eO.createElement(sX,{as:"img",alt:g,css:{width:w,height:N},key:S,src:P,...b});case"Video":return eO.createElement(sX,{as:"video",css:{width:w,height:N},disablePictureInPicture:!0,key:S,loop:!0,muted:!0,onPause:L,ref:_,src:S});default:return console.warn(`Resource type: ${C} is not valid or not yet supported in Primitives.`),eO.createElement(eO.Fragment,null)}},sK=sg("a",{}),Xn=h=>{let{children:g,homepage:_}=h,E=viewer_z(h,["children","homepage"]);return eO.createElement(eO.Fragment,null,_&&_.map(h=>{let _=viewer_T(h.label,E.lang);return eO.createElement(sK,{"aria-label":g?_:void 0,href:h.id,key:h.id,...E},g||_)}))},sZ={delimiter:", "},sJ=(0,eO.createContext)(void 0),viewer_dt=()=>{let h=(0,eO.useContext)(sJ);if(void 0===h)throw Error("usePrimitivesContext must be used with a PrimitivesProvider");return h},viewer_fe=({children:h,initialState:g=sZ})=>{let _=Jn(g,"delimiter");return eO.createElement(sJ.Provider,{value:{delimiter:_}},h)},Jn=(h,g)=>Object.hasOwn(h,g)?h[g].toString():void 0,s0=sg("span",{}),viewer_Re=h=>{let{as:g,markup:_}=h,{delimiter:E}=viewer_dt();if(!_)return eO.createElement(eO.Fragment,null);let A=viewer_z(h,["as","markup"]),k={__html:np(viewer_T(_,A.lang,E),{allowedAttributes:{a:["href"],img:["alt","src","height","width"]},allowedSchemes:["http","https","mailto"],allowedTags:["a","b","br","i","img","p","small","span","sub","sup"]})};return eO.createElement(s0,{as:g,...A,dangerouslySetInnerHTML:k})},viewer_mt=h=>eO.useContext(sJ)?eO.createElement(viewer_Re,{...h}):eO.createElement(viewer_fe,null,eO.createElement(viewer_Re,{...h})),Qn=({as:h="dd",lang:g,value:_})=>eO.createElement(viewer_mt,{markup:_,as:h,lang:g}),s1=sg("span",{}),viewer_tr=({as:h="dd",customValueContent:g,lang:_,value:E})=>{var A;let{delimiter:k}=viewer_dt(),b=null==(A=viewer_ct(E,_))?void 0:A.map(h=>(0,eO.cloneElement)(g,{value:h}));return eO.createElement(s1,{as:h,lang:_},null==b?void 0:b.map((h,g)=>[g>0&&`${k}`,eO.createElement(eO.Fragment,{key:g},h)]))},viewer_ut=h=>{var g;let{item:_,lang:E,customValueContent:A}=h,{label:k,value:b}=_,C=null==(g=viewer_T(k))?void 0:g.replace(" ","-").toLowerCase();return eO.createElement("div",{role:"group","data-label":C},eO.createElement(viewer_,{as:"dt",label:k,lang:E}),A?eO.createElement(viewer_tr,{as:"dd",customValueContent:A,value:b,lang:E}):eO.createElement(Qn,{as:"dd",value:b,lang:E}))},s2=sg("dl",{}),or=h=>{let{as:g,customValueContent:_,metadata:E}=h;if(!Array.isArray(E))return eO.createElement(eO.Fragment,null);let A=viewer_Ue(h,"customValueDelimiter"),k=viewer_z(h,["as","customValueContent","customValueDelimiter","metadata"]);return eO.createElement(viewer_fe,{..."string"==typeof A?{initialState:{delimiter:A}}:void 0},E.length>0&&eO.createElement(s2,{as:g,...k},E.map((h,g)=>{let E=_?function(h,g){let _=g.filter(g=>{let{matchingLabel:_}=g,E=Object.keys(g.matchingLabel)[0],A=viewer_T(_,E);if(viewer_T(h,E)===A)return!0}).map(h=>h.Content);if(Array.isArray(_))return _[0]}(h.label,_):void 0;return eO.createElement(viewer_ut,{customValueContent:E,item:h,key:g,lang:null==k?void 0:k.lang})})))};sg("li",{}),sg("ul",{});let s3=sg("li",{}),s4=sg("ul",{}),lr=h=>{let{as:g,rendering:_}=h,E=viewer_z(h,["as","rendering"]);return eO.createElement(s4,{as:g},_&&_.map(h=>{let g=viewer_T(h.label,E.lang);return eO.createElement(s3,{key:h.id},eO.createElement("a",{href:h.id,...E,target:"_blank"},g||h.id))}))},s5=sg("dl",{}),cr=h=>{let{as:g,requiredStatement:_}=h;if(!_)return eO.createElement(eO.Fragment,null);let E=viewer_Ue(h,"customValueDelimiter"),A=viewer_z(h,["as","customValueDelimiter","requiredStatement"]);return eO.createElement(viewer_fe,{..."string"==typeof E?{initialState:{delimiter:E}}:void 0},eO.createElement(s5,{as:g,...A},eO.createElement(viewer_ut,{item:_,lang:A.lang})))},s6=sg("li",{}),s8=sg("ul",{}),ur=h=>{let{as:g,seeAlso:_}=h,E=viewer_z(h,["as","seeAlso"]);return eO.createElement(s8,{as:g},_&&_.map(h=>{let g=viewer_T(h.label,E.lang);return eO.createElement(s6,{key:h.id},eO.createElement("a",{href:h.id,...E},g||h.id))}))},viewer_pr=h=>{let{as:g,summary:_}=h,E=viewer_z(h,["as","customValueDelimiter","summary"]);return eO.createElement(viewer_mt,{as:g,markup:_,...E})},viewer_pt=h=>{let{thumbnail:g,region:_}=h,E=viewer_z(h,["thumbnail"]);return eO.createElement(eO.Fragment,null,g&&g.map(h=>eO.createElement(qn,{contentResource:h,key:h.id,region:_,...E})))},fr=({homepage:h})=>(null==h?void 0:h.length)===0?eO.createElement(eO.Fragment,null):eO.createElement(eO.Fragment,null,eO.createElement("span",{className:"manifest-property-title"},"Homepage"),eO.createElement(Xn,{homepage:h})),hr=({id:h,htmlLabel:g,parent:_="manifest"})=>eO.createElement(eO.Fragment,null,eO.createElement("span",{className:"manifest-property-title"},g),eO.createElement("a",{href:h,target:"_blank",id:`iiif-${_}-id`},h)),gr=({metadata:h,parent:g="manifest"})=>h?eO.createElement(eO.Fragment,null,eO.createElement(or,{metadata:h,id:`iiif-${g}-metadata`})):eO.createElement(eO.Fragment,null),viewer_vr=({rendering:h})=>(null==h?void 0:h.length)===0?eO.createElement(eO.Fragment,null):eO.createElement(eO.Fragment,null,eO.createElement("span",{className:"manifest-property-title"},"Alternate formats"),eO.createElement(lr,{rendering:h})),yr=({requiredStatement:h,parent:g="manifest"})=>h?eO.createElement(eO.Fragment,null,eO.createElement(cr,{requiredStatement:h,id:`iiif-${g}-required-statement`})):eO.createElement(eO.Fragment,null),xr=({rights:h})=>h?eO.createElement(eO.Fragment,null,eO.createElement("span",{className:"manifest-property-title"},"Rights"),eO.createElement("a",{href:h,target:"_blank"},h)):eO.createElement(eO.Fragment,null),br=({seeAlso:h})=>(null==h?void 0:h.length)===0?eO.createElement(eO.Fragment,null):eO.createElement(eO.Fragment,null,eO.createElement("span",{className:"manifest-property-title"},"See Also"),eO.createElement(ur,{seeAlso:h})),wr=({summary:h,parent:g="manifest"})=>h?eO.createElement(eO.Fragment,null,eO.createElement(viewer_pr,{summary:h,as:"p",id:`iiif-${g}-summary`})):eO.createElement(eO.Fragment,null),Er=({label:h,thumbnail:g})=>(null==g?void 0:g.length)===0?eO.createElement(eO.Fragment,null):eO.createElement(eO.Fragment,null,eO.createElement(viewer_pt,{altAsLabel:h||{none:["resource"]},thumbnail:g,style:{backgroundColor:"#6663",objectFit:"cover"}})),Sr=()=>{let h=viewer_$(),{activeManifest:g,vault:_}=h,[E,A]=(0,eO.useState)(),[k,b]=(0,eO.useState)([]),[C,S]=(0,eO.useState)([]),[w,N]=(0,eO.useState)([]),[R,L]=(0,eO.useState)([]);return(0,eO.useEffect)(()=>{var h,E,k,C;let w=_.get(g);A(w),(null==(h=w.homepage)?void 0:h.length)>0&&b(_.get(w.homepage)),(null==(E=w.seeAlso)?void 0:E.length)>0&&S(_.get(w.seeAlso)),(null==(k=w.rendering)?void 0:k.length)>0&&N(_.get(w.rendering)),(null==(C=w.thumbnail)?void 0:C.length)>0&&L(_.get(w.thumbnail))},[g,_]),E?eO.createElement(sW,null,eO.createElement(sY,null,eO.createElement(Er,{thumbnail:R,label:E.label}),eO.createElement(wr,{summary:E.summary}),eO.createElement(gr,{metadata:E.metadata}),eO.createElement(yr,{requiredStatement:E.requiredStatement}),eO.createElement(xr,{rights:E.rights}),eO.createElement(fr,{homepage:k}),eO.createElement(br,{seeAlso:C}),eO.createElement(viewer_vr,{rendering:w}),eO.createElement(hr,{id:E.id,htmlLabel:"IIIF Manifest"}))):eO.createElement(eO.Fragment,null)},kr=({activeCanvas:h,annotationResources:g})=>{let _=viewer_F(),E=viewer_$(),{isAutoScrolling:A,configOptions:{informationPanel:k},isUserScrolling:b}=E,[C,S]=(0,eO.useState)(),w=null==k?void 0:k.renderAbout,N=null==k?void 0:k.renderAnnotation;return(0,eO.useEffect)(()=>{w?S("manifest-about"):g&&(null==g?void 0:g.length)>0&&!w&&S(g[0].id)},[h,w,g]),eO.createElement(sN,{"data-testid":"information-panel",defaultValue:C,onValueChange:h=>{S(h)},orientation:"horizontal",value:C,className:"clover-viewer-information-panel"},eO.createElement(sO,{"aria-label":"select chapter","data-testid":"information-panel-list"},w&&eO.createElement(sR,{value:"manifest-about"},"About"),N&&g&&g.map((h,g)=>eO.createElement(sR,{key:g,value:h.id},eO.createElement(viewer_,{label:h.label})))),eO.createElement(sL,{handleScroll:function(){if(!A){clearTimeout(b);let h=setTimeout(()=>{_({type:"updateUserScrolling",isUserScrolling:void 0})},1500);_({type:"updateUserScrolling",isUserScrolling:h})}}},w&&eO.createElement(sD,{value:"manifest-about"},eO.createElement(Sr,null)),N&&g&&g.map(h=>eO.createElement(sD,{key:h.id,value:h.id},eO.createElement(_n,{annotationPage:h})))))},s9=sg("div",{position:"absolute",right:"1rem",top:"1rem",display:"flex",justifyContent:"flex-end",zIndex:"1"}),s7=sg("input",{flexGrow:"1",border:"none",backgroundColor:"$secondaryMuted",color:"$primary",marginRight:"1rem",height:"2rem",padding:"0 1rem",borderRadius:"2rem",fontFamily:"inherit",fontSize:"1rem",lineHeight:"1rem",boxShadow:"inset 1px 1px 2px #0003","&::placeholder":{color:"$primaryMuted"}}),lt=sg("button",{display:"flex",background:"none",border:"none",width:"2rem !important",height:"2rem !important",padding:"0",margin:"0",fontWeight:"700",borderRadius:"2rem",backgroundColor:"$accent",color:"$secondary",cursor:"pointer",boxSizing:"content-box !important",transition:"$all",svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",opacity:"1",filter:"drop-shadow(5px 5px 5px #000D)",boxSizing:"inherit",transition:"$all"},"&:disabled":{backgroundColor:"transparent",boxShadow:"none",svg:{opacity:"0.25"}}}),ln=sg("div",{display:"flex",marginRight:"0.618rem",backgroundColor:"$accentAlt",borderRadius:"2rem",boxShadow:"5px 5px 5px #0003",color:"$secondary",alignItems:"center","> span":{display:"flex",margin:"0 0.5rem",fontSize:"0.7222rem"}}),li=sg("div",{display:"flex",position:"relative",zIndex:"1",width:"100%",padding:"0",transition:"$all",variants:{isToggle:{true:{paddingTop:"2.618rem",[`& ${s9}`]:{width:"calc(100% - 2rem)","@sm":{width:"calc(100% - 2rem)"}}}}}}),viewer_Tr=(h,g)=>{(0,eO.useEffect)(()=>{function r(_){_.key===h&&g()}return window.addEventListener("keyup",r),()=>window.removeEventListener("keyup",r)},[])},Mr=()=>eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eO.createElement("title",null,"Arrow Back"),eO.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M244 400L100 256l144-144M120 256h292"})),Rr=()=>eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eO.createElement("title",null,"Arrow Forward"),eO.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M268 112l144 144-144 144M392 256H100"})),zr=()=>eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eO.createElement("title",null,"Close"),eO.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),Lr=()=>eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eO.createElement("title",null,"Search"),eO.createElement("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})),Fr=({handleCanvasToggle:h,handleFilter:g,activeIndex:_,canvasLength:E})=>{let[A,k]=(0,eO.useState)(!1),[b,C]=(0,eO.useState)(!1),[S,w]=(0,eO.useState)(!1);return(0,eO.useEffect)(()=>{w(0===_),_===E-1?C(!0):C(!1)},[_,E]),viewer_Tr("Escape",()=>{k(!1),g("")}),eO.createElement(li,{isToggle:A},eO.createElement(s9,null,A&&eO.createElement(s7,{autoFocus:!0,onChange:h=>g(h.target.value),placeholder:"Search"}),!A&&eO.createElement(ln,null,eO.createElement(lt,{onClick:()=>h(-1),disabled:S,type:"button"},eO.createElement(Mr,null)),eO.createElement("span",null,_+1," of ",E),eO.createElement(lt,{onClick:()=>h(1),disabled:b,type:"button"},eO.createElement(Rr,null))),eO.createElement(lt,{onClick:()=>{k(h=>!h),g("")},type:"button"},A?eO.createElement(zr,null):eO.createElement(Lr,null))))},la=sg(oI.fC,{display:"flex",flexDirection:"row",flexGrow:"1",padding:"1.618rem",overflowX:"scroll",position:"relative",zIndex:"0"}),lo=sg("svg",{display:"inline-flex",variants:{isLarge:{true:{height:"4rem",width:"4rem"}},isMedium:{true:{height:"2rem",width:"2rem"}},isSmall:{true:{height:"1rem",width:"1rem"}}}}),viewer_I=h=>eO.createElement(lo,{...h,"data-testid":"icon-svg",role:"img",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},h.children);viewer_I.Title=({children:h})=>eO.createElement("title",null,h),viewer_I.Add=()=>eO.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288M400 256H112"}),viewer_I.Audio=()=>eO.createElement(eO.Fragment,null,eO.createElement("path",{d:"M232 416a23.88 23.88 0 01-14.2-4.68 8.27 8.27 0 01-.66-.51L125.76 336H56a24 24 0 01-24-24V200a24 24 0 0124-24h69.75l91.37-74.81a8.27 8.27 0 01.66-.51A24 24 0 01256 120v272a24 24 0 01-24 24zm-106.18-80zm-.27-159.86zM320 336a16 16 0 01-14.29-23.19c9.49-18.87 14.3-38 14.3-56.81 0-19.38-4.66-37.94-14.25-56.73a16 16 0 0128.5-14.54C346.19 208.12 352 231.44 352 256c0 23.86-6 47.81-17.7 71.19A16 16 0 01320 336z"}),eO.createElement("path",{d:"M368 384a16 16 0 01-13.86-24C373.05 327.09 384 299.51 384 256c0-44.17-10.93-71.56-29.82-103.94a16 16 0 0127.64-16.12C402.92 172.11 416 204.81 416 256c0 50.43-13.06 83.29-34.13 120a16 16 0 01-13.87 8z"}),eO.createElement("path",{d:"M416 432a16 16 0 01-13.39-24.74C429.85 365.47 448 323.76 448 256c0-66.5-18.18-108.62-45.49-151.39a16 16 0 1127-17.22C459.81 134.89 480 181.74 480 256c0 64.75-14.66 113.63-50.6 168.74A16 16 0 01416 432z"})),viewer_I.Close=()=>eO.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}),viewer_I.Download=()=>eO.createElement(eO.Fragment,null,eO.createElement("path",{d:"M336 176h40a40 40 0 0140 40v208a40 40 0 01-40 40H136a40 40 0 01-40-40V216a40 40 0 0140-40h40",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),eO.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M176 272l80 80 80-80M256 48v288"})),viewer_I.Image=()=>eO.createElement("path",{d:"M416 64H96a64.07 64.07 0 00-64 64v256a64.07 64.07 0 0064 64h320a64.07 64.07 0 0064-64V128a64.07 64.07 0 00-64-64zm-80 64a48 48 0 11-48 48 48.05 48.05 0 0148-48zM96 416a32 32 0 01-32-32v-67.63l94.84-84.3a48.06 48.06 0 0165.8 1.9l64.95 64.81L172.37 416zm352-32a32 32 0 01-32 32H217.63l121.42-121.42a47.72 47.72 0 0161.64-.16L448 333.84z"}),viewer_I.Video=()=>eO.createElement("path",{d:"M464 384.39a32 32 0 01-13-2.77 15.77 15.77 0 01-2.71-1.54l-82.71-58.22A32 32 0 01352 295.7v-79.4a32 32 0 0113.58-26.16l82.71-58.22a15.77 15.77 0 012.71-1.54 32 32 0 0145 29.24v192.76a32 32 0 01-32 32zM268 400H84a68.07 68.07 0 01-68-68V180a68.07 68.07 0 0168-68h184.48A67.6 67.6 0 01336 179.52V332a68.07 68.07 0 01-68 68z"});let ls=sE({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),ll=sE({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),lc=sg(ss.Eh,{fill:"$secondaryAlt"}),lu=sg(ss.x8,{position:"absolute",right:"0",top:"0",padding:"0.5rem",margin:"0",cursor:"pointer",border:"none",background:"none",fill:"inherit","&:hover":{opacity:"0.75"}}),ld=sg(ss.VY,{border:"none",backgroundColor:"white",fill:"inhrerit",padding:"1rem 2rem 1rem 1rem",width:"auto",minWidth:"200px",maxWidth:"350px",borderRadius:"3px",boxShadow:"5px 5px 13px #0002",animationDuration:"0.3s",animationTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)",'&[data-side="top"]':{animationName:ll},'&[data-side="bottom"]':{animationName:ls},'&[data-align="end"]':{[`& ${lc}`]:{margin:"0 0.7rem"}}}),lm=sg(ss.xz,{display:"inline-flex",padding:"0.5rem 0",margin:"0 0.5rem 0 0",cursor:"pointer",border:"none",background:"none","> button, > span":{margin:"0"}}),lh=sg(ss.fC,{boxSizing:"content-box"}),viewer_V=({children:h})=>eO.createElement(lh,null,h);viewer_V.Trigger=h=>eO.createElement(lm,{...h},h.children),viewer_V.Content=h=>eO.createElement(ld,{...h},eO.createElement(lc,null),eO.createElement(lu,null,eO.createElement(viewer_I,{isSmall:!0},eO.createElement(viewer_I.Close,null))),h.children);let lp=sg("div",{boxSizing:"border-box",display:"inline-flex",alignItems:"center",borderRadius:"5px",padding:"$1",marginBottom:"$2",marginRight:"$2",backgroundColor:"$lightGrey",color:"$richBlack50",textTransform:"uppercase",fontSize:"$2",objectFit:"contain",lineHeight:"1em !important","&:last-child":{marginRight:"0"},[`${lo}`]:{position:"absolute",left:"$1",height:"$3",width:"$3"},variants:{isIcon:{true:{position:"relative",paddingLeft:"$5"}}}}),lf=sg("span",{display:"flex"}),lg=sg("span",{display:"flex",width:"1.2111rem",height:"0.7222rem"}),l_=sg("span",{display:"inline-flex",marginLeft:"5px",marginBottom:"-1px"}),lE=sg(oI.ck,{display:"flex",flexShrink:"0",margin:"0 1.618rem 0 0",padding:"0",cursor:"pointer",background:"none",border:"none",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",textAlign:"left","&:last-child":{marginRight:"1rem"},figure:{margin:"0",width:"161.8px","> div":{position:"relative",display:"flex",backgroundColor:"$secondaryAlt",width:"inherit",height:"100px",overflow:"hidden",borderRadius:"3px",transition:"$all",img:{width:"100%",height:"100%",objectFit:"cover",filter:"blur(0)",transform:"scale3d(1, 1, 1)",transition:"$all",color:"transparent"},[`& ${lf}`]:{position:"absolute",right:"0",bottom:"0",[`& ${lp}`]:{margin:"0",paddingLeft:"0",fontSize:"0.7222rem",backgroundColor:"#000d",color:"$secondary",fill:"$secondary",borderBottomLeftRadius:"0",borderTopRightRadius:"0"}}},figcaption:{marginTop:"0.5rem",fontWeight:"400",fontSize:"0.8333rem",display:"-webkit-box",overflow:"hidden",MozBoxOrient:"vertical",WebkitBoxOrient:"vertical",WebkitLineClamp:"5","@sm":{fontSize:"0.8333rem"}}},"&[aria-checked='true']":{figure:{"> div":{backgroundColor:"$primaryAlt","&::before":{position:"absolute",zIndex:"1",color:"$secondaryMuted",content:"Active Item",textTransform:"uppercase",fontWeight:"700",fontSize:"0.6111rem",letterSpacing:"0.03rem",display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",textAlign:"center",textShadow:"5px 5px 5px #0003"},img:{opacity:"0.3",transform:"scale3d(1.1, 1.1, 1.1)",filter:"blur(2px)"},[`& ${lf}`]:{[`& ${lp}`]:{backgroundColor:"$accent"}}}},figcaption:{fontWeight:"700"}}}),eo=({type:h})=>{switch(h){case"Sound":return eO.createElement(viewer_I.Audio,null);case"Image":default:return eO.createElement(viewer_I.Image,null);case"Video":return eO.createElement(viewer_I.Video,null)}},to=({canvas:h,canvasIndex:g,isActive:_,thumbnail:E,type:A,handleChange:k})=>eO.createElement(lE,{"aria-checked":_,"data-testid":"media-thumbnail","data-canvas":g,onClick:()=>k(h.id),value:h.id},eO.createElement("figure",null,eO.createElement("div",null,(null==E?void 0:E.id)&&eO.createElement("img",{src:E.id,alt:null!=h&&h.label?viewer_U(h.label):""}),eO.createElement(lf,null,eO.createElement(lp,{isIcon:!0,"data-testid":"thumbnail-tag"},eO.createElement(lg,null),eO.createElement(viewer_I,{"aria-label":A},eO.createElement(eo,{type:A})),["Video","Sound"].includes(A)&&eO.createElement(l_,null,viewer_je(h.duration))))),(null==h?void 0:h.label)&&eO.createElement("figcaption",{"data-testid":"fig-caption"},eO.createElement(viewer_,{label:h.label})))),no=h=>h.body?h.body.type:"Image",ro=({items:h})=>{let g=viewer_F(),_=viewer_$(),{activeCanvas:E,vault:A}=_,[k,b]=(0,eO.useState)(""),[C,S]=(0,eO.useState)([]),[w,N]=(0,eO.useState)(0),R=eO.useRef(null),f=h=>{E!==h&&g({type:"updateActiveCanvas",canvasId:h})};return(0,eO.useEffect)(()=>{if(!C.length){let g=["Image","Sound","Video"],_=h.map(h=>viewer_Ye(A,h,"painting",g)).filter(h=>h.annotations.length>0);S(_)}},[h,C.length,A]),(0,eO.useEffect)(()=>{C.forEach((h,g)=>{null!=h&&h.canvas&&h.canvas.id===E&&N(g)})},[E,C]),(0,eO.useEffect)(()=>{let h=document.querySelector(`[data-canvas="${w}"]`);if(h instanceof HTMLElement&&R.current){let g=h.offsetLeft-R.current.offsetWidth/2+h.offsetWidth/2;R.current.scrollTo({left:g,behavior:"smooth"})}},[w]),eO.createElement(eO.Fragment,null,eO.createElement(Fr,{handleFilter:h=>b(h),handleCanvasToggle:h=>{let g=C[w+h];null!=g&&g.canvas&&f(g.canvas.id)},activeIndex:w,canvasLength:C.length}),eO.createElement(la,{"aria-label":"select item","data-testid":"media",ref:R},C.filter(h=>{var g;if(null!=(g=h.canvas)&&g.label){let g=viewer_U(h.canvas.label);if(Array.isArray(g))return g[0].toLowerCase().includes(k.toLowerCase())}}).map((h,g)=>{var _,k;return eO.createElement(to,{canvas:h.canvas,canvasIndex:g,handleChange:f,isActive:E===(null==(_=null==h?void 0:h.canvas)?void 0:_.id),key:null==(k=null==h?void 0:h.canvas)?void 0:k.id,thumbnail:en(A,h,200,200),type:no(h.annotations[0])})})))},lT=sg("button",{position:"absolute",background:"none",border:"none",cursor:"zoom-in",margin:"0",padding:"0",width:"100%",height:"100%",transition:"$all","& img":{width:"100%",height:"100%",objectFit:"contain",color:"transparent",transition:"$all"},variants:{isMedia:{true:{cursor:"pointer"}}}}),lA=sg("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",backgroundColor:"$primary",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&[data-button=rotate-right]":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=rotate-left]":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=reset]":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}}),ly=sg(lA,{position:"absolute",width:"2rem",top:"1rem",right:"1rem",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",transition:"$all",borderRadius:"50%",backgroundColor:"$accent",cursor:"pointer","&:hover, &:focus":{backgroundColor:"$accent !important"},variants:{isInteractive:{true:{"&:hover":{opacity:"1"}},false:{}},isMedia:{true:{cursor:"pointer !important"}}},compoundVariants:[{isInteractive:!1,isMedia:!0,css:{top:"50%",right:"50%",width:"4rem",height:"4rem",transform:"translate(50%,-50%)"}}]}),lk=sg("div",{position:"relative",display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",gap:"1rem",zIndex:"0",overflow:"hidden","&:hover":{[`${ly}`]:{backgroundColor:"$accent"},[`${lT}`]:{backgroundColor:"#6662"}}}),lv=sg("div",{width:"100%",height:"100%"}),lb=sg("svg",{height:"19px",color:"$accent",fill:"$accent",stroke:"$accent",display:"flex",margin:"0.25rem 0.85rem"}),lx=sg(sl.xz,{fontSize:"1.25rem",fontWeight:"400",fontFamily:"inherit",alignSelf:"flex-start",flexGrow:"1",cursor:"pointer",transition:"$all",border:"1px solid #6663",boxShadow:"2px 2px 5px #0001",borderRadius:"3px",display:"flex",alignItems:"center",paddingLeft:"0.5rem",width:"100%","@sm":{fontSize:"1rem"}}),lC=sg(sl.VY,{borderRadius:"3px",boxShadow:"3px 3px 8px #0003",backgroundColor:"$secondary",marginTop:"2.25rem",marginLeft:"6px",paddingBottom:"0.25rem",maxHeight:"calc(61.8vh - 2.5rem) !important",borderTopLeftRadius:"0",border:"1px solid $secondaryMuted",maxWidth:"90vw"}),lS=sg(sl.ck,{display:"flex",alignItems:"center",fontFamily:"inherit",padding:"0.25rem 0.5rem",color:"$primary",fontWeight:"400",fontSize:"0.8333rem",cursor:"pointer",backgroundColor:"$secondary",width:"calc(100% - 1rem)","> span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},'&[data-state="checked"]':{fontWeight:"700",color:"$primary !important"},"&:hover":{color:"$accent"},img:{width:"31px",height:"31px",marginRight:"0.5rem",borderRadius:"3px"}}),lI=sg(sl.__,{color:"$primaryMuted",fontFamily:"inherit",fontSize:"0.85rem",padding:"0.5rem 1rem 0.5rem 0.5rem",display:"flex",alignItems:"center",marginBottom:"0.25rem",borderRadius:"3px",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",backgroundColor:"$secondaryMuted"}),lw=sg(sl.fC,{position:"relative",zIndex:"5",width:"100%"}),viewer_re=({direction:h,title:g})=>eO.createElement(lb,{xmlns:"http://www.w3.org/2000/svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},eO.createElement("title",null,g),"up"===h&&eO.createElement(()=>eO.createElement("path",{d:"M414 321.94L274.22 158.82a24 24 0 00-36.44 0L98 321.94c-13.34 15.57-2.28 39.62 18.22 39.62h279.6c20.5 0 31.56-24.05 18.18-39.62z"}),null),"down"===h&&eO.createElement(()=>eO.createElement("path",{d:"M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z"}),null)),viewer_wt=({children:h,label:g,maxHeight:_,onValueChange:E,value:A})=>eO.createElement(lw,{onValueChange:E,value:A},eO.createElement(lx,{"data-testid":"select-button"},eO.createElement(sl.ki,{"data-testid":"select-button-value"}),eO.createElement(sl.GV,null,eO.createElement(viewer_re,{direction:"down",title:"select"}))),eO.createElement(sl.ue,null,eO.createElement(lC,{css:{maxHeight:`${_} !important`},"data-testid":"select-content"},eO.createElement(sl.Pn,null,eO.createElement(viewer_re,{direction:"up",title:"scroll up for more"})),eO.createElement(sl.Q_,null,eO.createElement(sl.DI,null,g&&eO.createElement(lI,null,eO.createElement(viewer_,{"data-testid":"select-label",label:g})),h)),eO.createElement(sl.Jk,null,eO.createElement(viewer_re,{direction:"down",title:"scroll down for more"}))))),Et=h=>eO.createElement(lS,{...h},h.thumbnail&&eO.createElement(viewer_pt,{thumbnail:h.thumbnail}),eO.createElement(sl.S_,null,eO.createElement(viewer_,{label:h.label})),eO.createElement(sl.o6,null)),lN=sg("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),lO=sg("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),lR=sg("div",{width:"100%",height:"100%",maxHeight:"100vh",background:"transparent",backgroundSize:"contain",color:"white",position:"relative",zIndex:"0",overflow:"hidden",variants:{hasNavigator:{true:{[`${lN}`]:{display:"block"}},false:{[`${lN}`]:{display:"none"}}}}}),viewer_B=({className:h,id:g,label:_,children:E})=>{let A=_.toLowerCase().replace(/\s/g,"-");return eO.createElement(lA,{id:g,className:h,"data-testid":"openseadragon-button","data-button":A},eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":`${g}-svg-title`,"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},eO.createElement("title",{id:`${g}-svg-title`},_),E))},lD=sg("div",{position:"absolute",zIndex:"1",top:"1rem",right:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),ho=()=>eO.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),go=()=>eO.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),vo=()=>eO.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),yo=()=>eO.createElement("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),viewer_ze=()=>eO.createElement(eO.Fragment,null,eO.createElement("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),eO.createElement("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})),xo=({_cloverViewerHasPlaceholder:h,config:g})=>eO.createElement(lD,{"data-testid":"clover-iiif-image-openseadragon-controls",hasPlaceholder:h},g.showZoomControl&&eO.createElement(eO.Fragment,null,eO.createElement(viewer_B,{id:g.zoomInButton,label:"zoom in"},eO.createElement(ho,null)),eO.createElement(viewer_B,{id:g.zoomOutButton,label:"zoom out"},eO.createElement(go,null))),g.showFullPageControl&&eO.createElement(viewer_B,{id:g.fullPageButton,label:"full page"},eO.createElement(vo,null)),g.showRotationControl&&eO.createElement(eO.Fragment,null,eO.createElement(viewer_B,{id:g.rotateRightButton,label:"rotate right"},eO.createElement(viewer_ze,null)),eO.createElement(viewer_B,{id:g.rotateLeftButton,label:"rotate left"},eO.createElement(viewer_ze,null))),g.showHomeControl&&eO.createElement(viewer_B,{id:g.homeButton,label:"reset"},eO.createElement(yo,null))),bo=({ariaLabel:h,config:g,uri:_,_cloverViewerHasPlaceholder:E,imageType:A,openSeadragonCallback:k})=>{let[b,C]=(0,eO.useState)(),[S,w]=(0,eO.useState)(),N=(0,eO.useRef)(!1);return(0,eO.useEffect)(()=>(N.current||(N.current=!0,S||w(eI(g))),()=>null==S?void 0:S.destroy()),[]),(0,eO.useEffect)(()=>{S&&k&&k(S)},[S,k]),(0,eO.useEffect)(()=>{S&&_!==b&&(null==S||S.forceRedraw(),C(_))},[S,b,_]),(0,eO.useEffect)(()=>{if(b&&S)switch(A){case"simpleImage":null==S||S.addSimpleImage({url:b});break;case"tiledImage":Cn(b).then(h=>{try{if(!h)throw Error(`No tile source found for ${b}`);null==S||S.addTiledImage({tileSource:h})}catch(h){console.error(h)}});break;default:null==S||S.close(),console.warn(`Unable to render ${b} in OpenSeadragon as type: "${A}"`)}},[A,b]),eO.createElement(lR,{className:"clover-iiif-image-openseadragon","data-testid":"clover-iiif-image-openseadragon","data-openseadragon-instance":g.id,hasNavigator:g.showNavigator},eO.createElement(xo,{_cloverViewerHasPlaceholder:E,config:g}),g.showNavigator&&eO.createElement(lN,{id:g.navigatorId,"data-testid":"clover-iiif-image-openseadragon-navigator"}),eO.createElement(lO,{id:g.id,"data-testid":"clover-iiif-image-openseadragon-viewport",role:"img",...h&&{"aria-label":h}}))},Eo=({_cloverViewerHasPlaceholder:h=!1,body:g,instanceId:_,isTiledImage:E=!1,label:A,src:k="",openSeadragonCallback:b,openSeadragonConfig:C={}})=>{let S=_||esm_browser_v4(),w="string"==typeof A?A:viewer_T(A),N={id:`openseadragon-${S}`,navigatorId:`openseadragon-navigator-${S}`,loadTilesWithAjax:!0,fullPageButton:`fullPage-${S}`,homeButton:`reset-${S}`,rotateLeftButton:`rotateLeft-${S}`,rotateRightButton:`rotateRight-${S}`,zoomInButton:`zoomIn-${S}`,zoomOutButton:`zoomOut-${S}`,showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!1},...C},{imageType:R,uri:L}=g?On(g):Pn(k,E);return L?eO.createElement(ew.SV,{FallbackComponent:viewer_Je},eO.createElement(bo,{_cloverViewerHasPlaceholder:h,ariaLabel:w,config:N,imageType:R,key:S,uri:L,openSeadragonCallback:b})):null},So=({isMedia:h,label:g,placeholderCanvas:_,setIsInteractive:E})=>{let{vault:A}=viewer_$(),k=viewer_q(A,_),b=k?k[0]:void 0,C=g?viewer_U(g):["placeholder image"];return eO.createElement(lT,{onClick:()=>E(!0),isMedia:h,className:"clover-viewer-placeholder"},eO.createElement("img",{src:(null==b?void 0:b.id)||"",alt:C.join(),height:null==b?void 0:b.height,width:null==b?void 0:b.width}))},lL=sg("canvas",{position:"absolute",width:"100%",height:"100%",zIndex:"0"}),lP=eO.forwardRef((h,g)=>{let _=eO.useRef(null),E=(0,eO.useCallback)(()=>{var h,E;if(null!=(h=g.current)&&h.currentTime&&(null==(E=g.current)?void 0:E.currentTime)>0)return;let A=g.current;if(!A)return;let k=new AudioContext,b=k.createMediaElementSource(A),C=k.createAnalyser(),S=_.current;if(!S)return;S.width=A.offsetWidth,S.height=A.offsetHeight;let w=S.getContext("2d");b.connect(C),C.connect(k.destination),C.fftSize=256;let N=C.frequencyBinCount,R=new Uint8Array(N);setInterval(function(){!function(h,g,_,E,A,k){let b=A/_*2.6,C,S=0;h.getByteFrequencyData(E),g.fillStyle="#000000",g.fillRect(0,0,A,k);for(let h=0;h<_;h++)C=2*E[h],g.fillStyle="rgba(78, 42, 132, 1)",g.fillRect(S,k-C,b,C),S+=b+6}(C,w,N,R,S.width,S.height)},20)},[g]);return eO.useEffect(()=>{g&&g.current&&(g.current.onplay=E)},[E,g]),eO.createElement(lL,{ref:_,role:"presentation"})}),lM=sg("div",{position:"relative",backgroundColor:"$primaryAlt",display:"flex",flexGrow:"0",flexShrink:"1",height:"100%",zIndex:"1",video:{backgroundColor:"transparent",objectFit:"contain",width:"100%",height:"100%",position:"relative",zIndex:"1"}}),$o=({resource:h,ignoreCaptionLabels:g})=>{let _=viewer_U(h.label,"en");return Array.isArray(_)&&_.some(h=>g.includes(h))?null:eO.createElement("track",{key:h.id,src:h.id,label:Array.isArray(_)?_[0]:_,srcLang:"en","data-testid":"player-track"})},lF=["application/vnd.apple.mpegurl","vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"],To=({allSources:h,annotationResources:g,painting:_})=>{let[E,A]=eO.useState(0),[k,b]=eO.useState(),C=eO.useRef(null),S=(null==_?void 0:_.type)==="Sound",w=viewer_$(),{activeCanvas:N,configOptions:R,vault:L}=w;return(0,eO.useEffect)(()=>{if(!_.id||!C.current)return;if(null!=C&&C.current){let h=C.current;h.src=_.id,h.load()}if("m3u8"!==_.id.split(".").pop()&&_.format&&!lF.includes(_.format))return;let h=new nf.ZP({xhrSetup:function(h,g){h.withCredentials=!!R.withCredentials}});return h.attachMedia(C.current),h.on(nf.ZP.Events.MEDIA_ATTACHED,function(){h.loadSource(_.id)}),h.on(nf.ZP.Events.ERROR,function(g,_){if(_.fatal)switch(_.type){case nf.ZP.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${g} network error encountered, try to recover`),h.startLoad();break;case nf.ZP.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${g} media error encountered, try to recover`),h.recoverMediaError();break;default:h.destroy()}}),()=>{if(h&&C.current){let g=C.current;h.detachMedia(),h.destroy(),g.currentTime=0}}},[R.withCredentials,_.id]),(0,eO.useEffect)(()=>{var h,g,_,A;let k=L.get(N),C=null!=(h=k.accompanyingCanvas)&&h.id?viewer_q(L,null==(g=k.accompanyingCanvas)?void 0:g.id):null,S=null!=(_=k.placeholderCanvas)&&_.id?viewer_q(L,null==(A=k.placeholderCanvas)?void 0:A.id):null;C&&S?b(0===E?S[0].id:C[0].id):(C&&b(C[0].id),S&&b(S[0].id))},[N,E,L]),(0,eO.useEffect)(()=>{if(null!=C&&C.current){let h=C.current;return null==h||h.addEventListener("timeupdate",()=>A(h.currentTime)),()=>document.removeEventListener("timeupdate",()=>{})}},[]),eO.createElement(lM,{css:{backgroundColor:R.canvasBackgroundColor,maxHeight:R.canvasHeight,position:"relative"},"data-testid":"player-wrapper",className:"clover-viewer-player-wrapper"},eO.createElement("video",{id:"clover-iiif-video",key:_.id,ref:C,controls:!0,height:_.height,width:_.width,crossOrigin:"anonymous",poster:k,style:{maxHeight:R.canvasHeight,position:"relative",zIndex:"1"}},h.map(h=>eO.createElement("source",{src:h.id,type:h.format,key:h.id})),(null==g?void 0:g.length)>0&&g.map(h=>{let g=[];return h.items.forEach(h=>{L.get(h.id).body.forEach(h=>{let _=L.get(h.id);g.push(_)})}),g.map(h=>eO.createElement($o,{resource:h,ignoreCaptionLabels:R.ignoreCaptionLabels||[],key:h.id}))}),"Sorry, your browser doesn't support embedded videos."),S&&eO.createElement(lP,{ref:C}))},Mo=()=>eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"close-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},eO.createElement("title",{id:"close-svg-title"},"close"),eO.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),Ro=({isMedia:h})=>eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"open-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},eO.createElement("title",{id:"open-svg-title"},"open"),h?eO.createElement("path",{d:"M133 440a35.37 35.37 0 01-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0135.77.45l247.85 148.36a36 36 0 010 61l-247.89 148.4A35.5 35.5 0 01133 440z"}):eO.createElement(eO.Fragment,null,eO.createElement("path",{d:"m456.69,421.39l-94.09-94.09c22.65-30.16,34.88-66.86,34.84-104.58,0-96.34-78.38-174.72-174.72-174.72S48,126.38,48,222.72s78.38,174.72,174.72,174.72c37.72.04,74.42-12.19,104.58-34.84l94.09,94.09c10.29,9.2,26.1,8.32,35.3-1.98,8.48-9.49,8.48-23.83,0-33.32Zm-233.97-73.87c-68.89-.08-124.72-55.91-124.8-124.8h0c0-68.93,55.87-124.8,124.8-124.8s124.8,55.87,124.8,124.8-55.87,124.8-124.8,124.8Z"}),eO.createElement("path",{d:"m279.5,197.76h-3.35s-28.47,0-28.47,0v-31.82c-.77-13.79-12.57-24.33-26.36-23.56-12.71.71-22.85,10.86-23.56,23.56v3.35h0v28.47h-31.82c-13.79.77-24.33,12.57-23.56,26.36.71,12.71,10.86,22.85,23.56,23.56h3.35s28.47,0,28.47,0v31.82c.77,13.79,12.57,24.33,26.36,23.56,12.71-.71,22.85-10.86,23.56-23.56v-3.35h0v-28.47h31.82c13.79-.77,24.33-12.57,23.56-26.36-.71-12.71-10.86-22.85-23.56-23.56Z"}))),zo=({handleToggle:h,isInteractive:g,isMedia:_})=>eO.createElement(ly,{onClick:h,isInteractive:g,isMedia:_,"data-testid":"placeholder-toggle"},g?eO.createElement(Mo,null):eO.createElement(Ro,{isMedia:_})),Lo=({activeCanvas:h,annotationResources:g,isMedia:_,painting:E})=>{var A,k,b,C,S,w;let[N,R]=eO.useState(0),[L,P]=eO.useState(!1),{configOptions:z,customDisplays:G,openSeadragonViewer:$,vault:j,viewerId:W}=viewer_$(),Q=viewer_F(),Z=j.get(h),et=null==(A=null==Z?void 0:Z.placeholderCanvas)?void 0:A.id,er=!!et,ei=(null==E?void 0:E.length)>1,es=et&&!L&&!_,el=`${W}-${Ut(h+N)}`,ec=G.find(g=>{var _;let A=!1,{canvasId:k,paintingFormat:b}=g.target;if(Array.isArray(k)&&k.length>0&&(A=k.includes(h)),Array.isArray(b)&&b.length>0){let h=(null==(_=E[N])?void 0:_.format)||"";A=!!(h&&b.includes(h))}return A}),eu=[];null==(b=null==(k=g[0])?void 0:k.items)||b.forEach(h=>{let g=j.get(h.id);eu.push(g)}),(0,eO.useEffect)(()=>{var h;eu&&$&&null!=(h=z.annotationOverlays)&&h.renderOverlays&&function(h,g,_,E){if(!h)return;let A=1/g.width;E.forEach(g=>{if(!g.target)return;let E=viewer_lt(g.target),{point:k,rect:b,svg:C}=E;if(b){let{x:g,y:E,w:k,h:C}=b;(function(h,g,_,E,A,k){let b=new eI.Rect(g,_,E,A),C=document.createElement("div");if(k.annotationOverlays){let{backgroundColor:h,opacity:g,borderType:_,borderColor:E,borderWidth:A}=k.annotationOverlays;C.style.backgroundColor=h,C.style.opacity=g,C.style.border=`${_} ${A} ${E}`,C.className="annotation-overlay"}h.addOverlay(C,b)})(h,g*A,E*A,k*A,C*A,_)}if(k){let{x:g,y:E}=k,b=`
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg">
          <circle cx="${g}" cy="${E}" r="20" />
        </svg>
      `;viewer_Te(h,b,_,A)}C&&viewer_Te(h,C,_,A)})}($,Z,z,eu)},[null==Z?void 0:Z.id,eu,$,null==(C=z.annotationOverlays)?void 0:C.renderOverlays]);let ed=null==(S=null==ec?void 0:ec.display)?void 0:S.component;return eO.createElement(lk,{className:"clover-viewer-painting"},eO.createElement(lv,{style:{backgroundColor:z.canvasBackgroundColor,height:"auto"===z.canvasHeight?"100%":z.canvasHeight}},et&&!_&&eO.createElement(zo,{handleToggle:()=>P(!L),isInteractive:L,isMedia:_}),es&&!_&&eO.createElement(So,{isMedia:_,label:null==Z?void 0:Z.label,placeholderCanvas:et,setIsInteractive:P}),!es&&!ec&&(_?eO.createElement(To,{allSources:E,painting:E[N],annotationResources:g}):E&&eO.createElement(Eo,{_cloverViewerHasPlaceholder:er,body:E[N],instanceId:el,key:el,openSeadragonCallback:h=>{h&&(null==$?void 0:$.id)!==`openseadragon-${el}`&&Q({type:"updateOpenSeadragonViewer",openSeadragonViewer:h})},openSeadragonConfig:z.openSeadragon})),!es&&ed&&eO.createElement(ed,{id:h,annotationBody:E[N],...null==ec?void 0:ec.display.componentProps})),ei&&eO.createElement(viewer_wt,{value:null==(w=E[N])?void 0:w.id,onValueChange:h=>{let g=E.findIndex(g=>g.id===h);R(g)},maxHeight:"200px"},null==E?void 0:E.map(h=>eO.createElement(Et,{value:null==h?void 0:h.id,key:null==h?void 0:h.id,label:null==h?void 0:h.label}))))},Fo=({activeCanvas:h,annotationResources:g,isAudioVideo:_,items:E,painting:A})=>{let{isInformationOpen:k,configOptions:b}=viewer_$(),{informationPanel:C}=b,S=(null==C?void 0:C.renderAbout)&&k,w=(null==C?void 0:C.renderAnnotation)&&g.length>0&&!C.open;return eO.createElement(sb,{className:"clover-viewer-content","data-testid":"clover-viewer-content"},eO.createElement(sx,null,eO.createElement(Lo,{activeCanvas:h,annotationResources:g,isMedia:_,painting:A}),S&&eO.createElement(sC,null,eO.createElement("span",null,k?"View Items":"More Information")),E.length>1&&eO.createElement(sv,{className:"clover-viewer-media-wrapper"},eO.createElement(ro,{items:E,activeItem:0}))),(S||w)&&eO.createElement(sI,null,eO.createElement(sS,null,eO.createElement(kr,{activeCanvas:h,annotationResources:g}))))},lB=sg(viewer_V.Trigger,{width:"30px",padding:"5px"}),lH=sg(viewer_V.Content,{display:"flex",flexDirection:"column",fontSize:"0.8333rem",border:"none",boxShadow:"2px 2px 5px #0003",zIndex:"2",button:{display:"flex",textDecoration:"none",marginBottom:"0.5em",color:"$accentAlt",cursor:"pointer",background:"$secondary",border:"none","&:last-child":{marginBottom:"0"}}}),lU=sg("span",{fontSize:"1.33rem",alignSelf:"flex-start",flexGrow:"0",flexShrink:"1",padding:"1rem","@sm":{fontSize:"1rem"},"&.visually-hidden":{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"}}),lz=sg("header",{display:"flex",backgroundColor:"transparent !important",justifyContent:"space-between",alignItems:"flex-start",width:"100%",[`> ${lw}`]:{flexGrow:"1",flexShrink:"0"},form:{flexGrow:"0",flexShrink:"1"}}),lG=sg("div",{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",padding:"1rem",flexShrink:"0",flexGrow:"1"}),Bo=()=>{var h;let g=viewer_F(),_=viewer_$(),{activeManifest:E,collection:A,configOptions:k,vault:b}=_,C=null==k?void 0:k.canvasHeight;return eO.createElement("div",{style:{margin:"0.75rem"}},eO.createElement(viewer_wt,{label:A.label,maxHeight:C,value:E,onValueChange:h=>{g({type:"updateActiveManifest",manifestId:h}),g({type:"updateViewerId",viewerId:esm_browser_v4()})}},null==(h=null==A?void 0:A.items)?void 0:h.map(h=>eO.createElement(Et,{value:h.id,key:h.id,thumbnail:null!=h&&h.thumbnail?b.get(null==h?void 0:h.thumbnail):void 0,label:h.label}))))},_o=(h,g=2500)=>{let[_,E]=(0,eO.useState)(),A=(0,eO.useCallback)(()=>{navigator.clipboard.writeText(h).then(()=>E("copied"),()=>E("failed"))},[h]);return(0,eO.useEffect)(()=>{if(!_)return;let h=setTimeout(()=>E(void 0),g);return()=>clearTimeout(h)},[_]),[_,A]},l$=sg("span",{display:"flex",alignContent:"center",alignItems:"center",padding:"0.125rem 0.25rem 0",marginTop:"-0.125rem",marginLeft:"0.5rem",backgroundColor:"$accent",color:"$secondary",borderRadius:"3px",fontSize:"0.6111rem",textTransform:"uppercase",lineHeight:"1em"}),No=({status:h})=>h?eO.createElement(l$,{"data-copy-status":h},h):null,viewer_Le=({textPrompt:h,textToCopy:g})=>{let[_,E]=_o(g);return eO.createElement("button",{onClick:E},h," ",eO.createElement(No,{status:_}))},Wo=()=>{let h="#ed1d33",g="#2873ab";return eO.createElement("svg",{viewBox:"0 0 493.35999 441.33334",id:"iiif-logo",version:"1.1"},eO.createElement("title",null,"IIIF Manifest Options"),eO.createElement("g",{transform:"matrix(1.3333333,0,0,-1.3333333,0,441.33333)"},eO.createElement("g",{transform:"scale(0.1)"},eO.createElement("path",{style:{fill:g},d:"M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5"}),eO.createElement("path",{style:{fill:g},d:"m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18"}),eO.createElement("path",{style:{fill:h},d:"M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5"}),eO.createElement("path",{style:{fill:h},d:"m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18"}),eO.createElement("path",{style:{fill:g},d:"m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5"}),eO.createElement("path",{style:{fill:g},d:"m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18"}),eO.createElement("path",{style:{fill:h},d:"m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950"}))))},lj=sg(sc.fC,{all:"unset",height:"2rem",width:"3.236rem",backgroundColor:"#6663",borderRadius:"9999px",position:"relative",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px $secondaryAlt"},'&[data-state="checked"]':{backgroundColor:"$accent",boxShadow:"inset 2px 2px 5px #0003"}}),lq=sg(sc.bU,{display:"block",height:"calc(2rem - 12px)",width:"calc(2rem - 12px)",backgroundColor:"$secondary",borderRadius:"100%",boxShadow:"2px 2px 5px #0001",transition:"$all",transform:"translateX(6px)",willChange:"transform",'&[data-state="checked"]':{transform:"translateX(calc(1.236rem + 6px))"}}),lV=sg("label",{fontSize:"0.8333rem",fontWeight:"400",lineHeight:"1em",userSelect:"none",cursor:"pointer",paddingRight:"0.618rem"}),lY=sg("form",{display:"flex",flexShrink:"0",flexGrow:"1",alignItems:"center",marginLeft:"1.618rem"}),Zo=()=>{var h;let{configOptions:g}=viewer_$(),_=viewer_F(),[E,A]=(0,eO.useState)(null==(h=null==g?void 0:g.informationPanel)?void 0:h.open);return(0,eO.useEffect)(()=>{_({type:"updateInformationOpen",isInformationOpen:E})},[E,_]),eO.createElement(lY,null,eO.createElement(lV,{htmlFor:"information-toggle",css:E?{opacity:"1"}:{}},"More Information"),eO.createElement(lj,{checked:E,onCheckedChange:()=>A(!E),id:"information-toggle","aria-label":"information panel toggle",name:"toggled?"},eO.createElement(lq,null)))},lW=sg(viewer_V.Trigger,{width:"30px",padding:"5px"}),lQ=sg(lH,{h3:{color:"$primaryAlt",fontSize:"$2",fontWeight:"700",margin:"$2 0"},button:{},"& ul li":{marginBottom:"$1"}});function viewer_Fe(h,g){let _=[];if(!h)return _;for(let E of h)if(E.id){let h=g.get(E.id);h&&_.push(h)}return _}function viewer_He(h,g){return h.map(({format:h,id:_,label:E})=>({format:h,id:_,label:viewer_T(E)||g}))}let Qo=()=>{let{allPages:h,individualPages:g}=function(){let h=function(){let{activeCanvas:h,activeManifest:g,vault:_}=viewer_$(),[E,A]=(0,eO.useState)({root:[],canvas:[]});return(0,eO.useEffect)(()=>{let E=_.get(g),k=_.get(h),b=null==E?void 0:E.rendering,C=null==k?void 0:k.rendering,S=viewer_Fe(b,_),w=viewer_Fe(C,_);A({root:S,canvas:w})},[h,g,_]),{...E}}(),g=viewer_He((null==h?void 0:h.root)||[],"Root Rendering Label"),_=viewer_He((null==h?void 0:h.canvas)||[],"Canvas Rendering Label");return{allPages:g,individualPages:_}}(),_=h.length>0||g.length>0,a=h=>{window.open(h,"_blank")};return _?eO.createElement(viewer_V,null,eO.createElement(lW,{"data-testid":"download-button"},eO.createElement(viewer_I,null,eO.createElement(viewer_I.Download,null))),eO.createElement(lQ,{"data-testid":"download-content"},g.length>0&&eO.createElement(eO.Fragment,null,eO.createElement("h3",null,"Individual Pages"),eO.createElement("ul",null,g.map(({format:h,id:g,label:_})=>eO.createElement("li",{key:_},eO.createElement("button",{onClick:()=>a(g)},_," (",h,")"))))),h.length>0&&eO.createElement(eO.Fragment,null,eO.createElement("h3",null,"All Pages"),eO.createElement("ul",null,h.map(({format:h,id:g,label:_})=>eO.createElement("li",{key:_},eO.createElement("button",{onClick:()=>a(g)},_," (",h,")"))))))):null},Ct=h=>{let n=()=>!!window.matchMedia&&window.matchMedia(h).matches,[g,_]=(0,eO.useState)(n);return(0,eO.useEffect)(()=>{let o=()=>_(n);return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)}),g},ea=({manifestId:h,manifestLabel:g})=>{let _=viewer_$(),{collection:E,configOptions:A}=_,{informationPanel:k,showDownload:b,showIIIFBadge:C,showTitle:S}=A,w=b||C||(null==k?void 0:k.renderToggle),N=Ct(sf.sm);return eO.createElement(lz,{className:"clover-viewer-header"},null!=E&&E.items?eO.createElement(Bo,null):eO.createElement(lU,{className:S?"":"visually-hidden"},S&&eO.createElement(viewer_,{label:g,className:"label"})),w&&eO.createElement(lG,null,b&&eO.createElement(Qo,null),C&&eO.createElement(viewer_V,null,eO.createElement(lB,null,eO.createElement(Wo,null)),eO.createElement(lH,null,(null==E?void 0:E.items)&&eO.createElement("button",{onClick:h=>{h.preventDefault(),window.open(E.id,"_blank")}},"View Collection"),eO.createElement("button",{onClick:g=>{g.preventDefault(),window.open(h,"_blank")}},"View Manifest")," ",(null==E?void 0:E.items)&&eO.createElement(viewer_Le,{textPrompt:"Copy Collection URL",textToCopy:E.id}),eO.createElement(viewer_Le,{textPrompt:"Copy Manifest URL",textToCopy:h}))),(null==k?void 0:k.renderToggle)&&!N&&eO.createElement(Zo,null)))},ta=(h=!1)=>{let[g,_]=(0,eO.useState)(h);return(0,eO.useLayoutEffect)(()=>{if(!g)return;let h=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=h}},[g]),(0,eO.useEffect)(()=>{g!==h&&_(h)},[h]),[g,_]},na=({manifest:h,theme:g})=>{var _;let E=viewer_$(),A=viewer_F(),{activeCanvas:k,isInformationOpen:b,vault:C,configOptions:S}=E,w=(null==S?void 0:S.canvasHeight)&&["100%","auto"].includes(null==S?void 0:S.canvasHeight),[N,R]=(0,eO.useState)(!1),[L,P]=(0,eO.useState)(!1),[z,G]=(0,eO.useState)([]),[$,j]=(0,eO.useState)([]),[W,Q]=ta(!1),Z=Ct(sf.sm),et=(0,eO.useCallback)(h=>{A({type:"updateInformationOpen",isInformationOpen:h})},[A]);return(0,eO.useEffect)(()=>{var h;null!=(h=null==S?void 0:S.informationPanel)&&h.open&&et(!Z)},[Z,null==(_=null==S?void 0:S.informationPanel)?void 0:_.open,et]),(0,eO.useEffect)(()=>{if(!Z){Q(!1);return}Q(b)},[b,Z,Q]),(0,eO.useEffect)(()=>{let h=viewer_q(C,k);h&&(P(["Sound","Video"].indexOf(h[0].type)>-1),G(h));let g=Qt(C,k);g.length>0&&A({type:"updateInformationOpen",isInformationOpen:!0}),j(g),R(0!==g.length)},[k,C,A]),eO.createElement(ew.SV,{FallbackComponent:viewer_Je},eO.createElement(sw,{className:`${g} clover-viewer`,css:{background:null==S?void 0:S.background},"data-body-locked":W,"data-absolute-position":w,"data-information-panel":N,"data-information-panel-open":b},eO.createElement(oC.fC,{open:b,onOpenChange:et},eO.createElement(ea,{manifestLabel:h.label,manifestId:h.id}),eO.createElement(Fo,{activeCanvas:k,painting:z,annotationResources:$,items:h.items,isAudioVideo:L}))))},lX={ignoreCache:!1,headers:{Accept:"application/json, text/javascript, text/plain"},timeout:5e3,withCredentials:!1};function viewer_Pe(h,g=null){return{ok:!1,status:h.status,statusText:h.statusText,headers:h.getAllResponseHeaders(),data:g||h.statusText,json:()=>JSON.parse(g||h.statusText)}}let xa=({canvasIdCallback:h=()=>{},customDisplays:g=[],customTheme:_,iiifContent:E,id:A,manifestId:k,options:b})=>{var C,S,w;let N=E;A&&(N=A),k&&(N=k);let R=viewer_qe(null==(S=null==(C=null==b?void 0:b.informationPanel)?void 0:C.vtt)?void 0:S.autoScroll);return eO.createElement(Kt,{initialState:{...sm,customDisplays:g,isAutoScrollEnabled:R.enabled,isInformationOpen:!!(null!=(w=null==b?void 0:b.informationPanel)&&w.open),vault:new Vault({customFetcher:h=>(function(h,g=lX){let _=g.headers||lX.headers;return new Promise((E,A)=>{let k=new XMLHttpRequest;k.open("get",h),k.withCredentials=g.withCredentials,_&&Object.keys(_).forEach(h=>k.setRequestHeader(h,_[h])),k.onload=()=>{E({ok:k.status>=200&&k.status<300,status:k.status,statusText:k.statusText,headers:k.getAllResponseHeaders(),data:k.responseText,json:()=>JSON.parse(k.responseText)})},k.onerror=()=>{A(viewer_Pe(k,"Failed to make request."))},k.ontimeout=()=>{A(viewer_Pe(k,"Request took longer than expected."))},k.send()})})(h,{withCredentials:null==b?void 0:b.withCredentials,headers:null==b?void 0:b.requestHeaders}).then(h=>JSON.parse(h.data))})}},eO.createElement(aa,{iiifContent:N,canvasIdCallback:h,customTheme:_,options:b}))},aa=({canvasIdCallback:h,customTheme:g,iiifContent:_,options:E})=>{let A=viewer_F(),k=viewer_$(),{activeCanvas:b,activeManifest:C,isLoaded:S,vault:w}=k,[N,R]=(0,eO.useState)(),[L,P]=(0,eO.useState)(),z={};return g&&(z=(0,eN.jG)("custom",g)),(0,eO.useEffect)(()=>{h&&h(b)},[b,h]),(0,eO.useEffect)(()=>{C&&w.loadManifest(C).then(h=>{P(h),A({type:"updateActiveCanvas",canvasId:$n(_,h)})}).catch(h=>{console.error(`Manifest failed to load: ${h}`)}).finally(()=>{A({type:"updateIsLoaded",isLoaded:!0})})},[_,C,A,w]),(0,eO.useEffect)(()=>{A({type:"updateConfigOptions",configOptions:E});let h=In(_);w.load(h).then(h=>{R(h)}).catch(h=>{console.error(`The IIIF resource ${_} failed to load: ${h}`)})},[A,_,E,w]),(0,eO.useEffect)(()=>{if((null==N?void 0:N.type)==="Collection"){A({type:"updateCollection",collection:N});let h=An(_,N);h&&A({type:"updateActiveManifest",manifestId:h})}else(null==N?void 0:N.type)==="Manifest"&&A({type:"updateActiveManifest",manifestId:N.id})},[A,_,N]),S?L&&L.items?0===L.items.length?(console.log(`The IIIF manifest ${_} does not contain canvases.`),eO.createElement(eO.Fragment,null)):eO.createElement(na,{manifest:L,theme:z,key:L.id}):(console.log(`The IIIF manifest ${_} failed to load.`),eO.createElement(eO.Fragment,null)):eO.createElement(eO.Fragment,null,"Loading")};var lK=xa}}]);