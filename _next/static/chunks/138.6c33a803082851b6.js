(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[138],{9821:function(a,m,h){"use strict";let g=h(4579).parse,v=h(7799).compile,b=h(7094).segment,w=h(1105);a.exports={parse:g,compile:v,segment:b,hls:w}},7799:function(a){"use strict";function CompilerError(a,m){this.message=a,this.error=m}function convertTimestamp(a){let m=pad(Math.floor(a/60/60),2),h=pad(Math.floor(a/60)%60,2),g=pad(Math.floor(a%60),2),v=pad(Math.floor(1e3*(a%1).toFixed(4)),3);return`${m}:${h}:${g}.${v}`}function pad(a,m){let h=`${a}`;for(;h.length<m;)h=`0${h}`;return h}CompilerError.prototype=Object.create(Error.prototype),a.exports={CompilerError,compile:function(a){if(!a)throw new CompilerError("Input must be non-null");if("object"!=typeof a)throw new CompilerError("Input must be an object");if(Array.isArray(a))throw new CompilerError("Input cannot be array");if(!a.valid)throw new CompilerError("Input must be valid");let m="WEBVTT\n";if(a.meta){if("object"!=typeof a.meta||Array.isArray(a.meta))throw new CompilerError("Metadata must be an object");Object.entries(a.meta).forEach(a=>{if("string"!=typeof a[1])throw new CompilerError(`Metadata value for "${a[0]}" must be string`);m+=`${a[0]}: ${a[1]}
`})}let h=null;return a.cues.forEach((a,g)=>{if(h&&h>a.start)throw new CompilerError(`Cue number ${g} is not in chronological order`);h=a.start,m+="\n"+function(a){if("object"!=typeof a)throw new CompilerError("Cue malformed: not of type object");if("string"!=typeof a.identifier&&"number"!=typeof a.identifier&&null!==a.identifier)throw new CompilerError(`Cue malformed: identifier value is not a string.
    ${JSON.stringify(a)}`);if(isNaN(a.start))throw new CompilerError(`Cue malformed: null start value.
    ${JSON.stringify(a)}`);if(isNaN(a.end))throw new CompilerError(`Cue malformed: null end value.
    ${JSON.stringify(a)}`);if(a.start>=a.end)throw new CompilerError(`Cue malformed: start timestamp greater than end
    ${JSON.stringify(a)}`);if("string"!=typeof a.text)throw new CompilerError(`Cue malformed: null text value.
    ${JSON.stringify(a)}`);if("string"!=typeof a.styles)throw new CompilerError(`Cue malformed: null styles value.
    ${JSON.stringify(a)}`);let m="";a.identifier.length>0&&(m+=`${a.identifier}
`);let h=convertTimestamp(a.start),g=convertTimestamp(a.end);return m+(`${h} --> ${g}`+(a.styles?` ${a.styles}`:""))+`
${a.text}`}(a)+"\n"}),m}}},1105:function(a,m,h){"use strict";let g=h(7094).segment;function pad(a,m){let h="0".repeat(Math.max(0,m-a.toString().length));return`${h}${a}`}function printableTimestamp(a){let m=(a%1).toFixed(3);a=Math.round(a-m);let h=Math.floor(a/3600),g=Math.floor((a-3600*h)/60),v=a-3600*h-60*g,b=`${pad(h,2)}:`;return`${b}${pad(g,2)}:${pad(v,2)}.${pad(1e3*m,3)}`}a.exports={hlsSegment:function(a,m,h){void 0===h&&(h="900000");let v=g(a,m),b=[];return v.forEach((a,m)=>{let g=`WEBVTT
X-TIMESTAMP-MAP=MPEGTS:${h},LOCAL:00:00:00.000

${function(a){let m=[];return a.forEach(a=>{m.push(function(a){let m=[];a.identifier&&m.push(a.identifier);let h=printableTimestamp(a.start),g=printableTimestamp(a.end),v=a.styles?`${a.styles}`:"";return m.push(`${h} --> ${g} ${v}`),m.push(a.text),m.join("\n")}(a))}),m.join("\n\n")}(a.cues)}
`,v=`${m}.vtt`;b.push({filename:v,content:g})}),b},hlsSegmentPlaylist:function(a,m){let h;let v=g(a,m),b=function(a){let m=[];return a.forEach((a,h)=>{m.push(`#EXTINF:${a.duration.toFixed(5)},
${h}.vtt`)}),m.join("\n")}(v),w=Math.round((h=0,v.forEach(a=>{a.duration>h&&(h=a.duration)}),h)),E=`#EXTM3U
#EXT-X-TARGETDURATION:${w}
#EXT-X-VERSION:3
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-PLAYLIST-TYPE:VOD
${b}
#EXT-X-ENDLIST
`;return E}}},4579:function(a){"use strict";function ParserError(a,m){this.message=a,this.error=m}ParserError.prototype=Object.create(Error.prototype);let m=/([0-9]+)?:?([0-9]{2}):([0-9]{2}\.[0-9]{2,3})/;function parseTimestamp(a){let h=a.match(m);return 3600*parseFloat(h[1]||0)+(60*parseFloat(h[2])+parseFloat(h[3]))}a.exports={ParserError,parse:function(a,h){h||(h={});let{meta:g=!1,strict:v=!0}=h;if("string"!=typeof a)throw new ParserError("Input must be a string");a=(a=(a=a.trim()).replace(/\r\n/g,"\n")).replace(/\r/g,"\n");let b=a.split("\n\n"),w=b.shift();if(!w.startsWith("WEBVTT"))throw new ParserError('Must start with "WEBVTT"');let E=w.split("\n"),C=E[0].replace("WEBVTT","");if(C.length>0&&" "!==C[0]&&"	"!==C[0])throw new ParserError("Header comment must start with space or tab");if(0===b.length&&1===E.length)return{valid:!0,strict:v,cues:[],errors:[]};if(!g&&E.length>1&&""!==E[1])throw new ParserError("Missing blank line after signature");let{cues:$,errors:T}=function(a,h){let g=[],v=a.map((a,v)=>{try{return function(a,h,g){var v,b;let w="",E=0,C=.01,$="",T="",_=a.split("\n").filter(Boolean);if(_.length>0&&_[0].trim().startsWith("NOTE"))return null;if(1===_.length&&!_[0].includes("-->"))throw new ParserError(`Cue identifier cannot be standalone (cue #${h})`);if(_.length>1&&!(_[0].includes("-->")||_[1].includes("-->"))){let a=`Cue identifier needs to be followed by timestamp (cue #${h})`;throw new ParserError(a)}_.length>1&&_[1].includes("-->")&&(w=_.shift());let O="string"==typeof _[0]&&_[0].split(" --> ");if(2!==O.length||(v=O[0],!m.test(v))||(b=O[1],!m.test(b)))throw new ParserError(`Invalid cue timestamp (cue #${h})`);if(E=parseTimestamp(O[0]),C=parseTimestamp(O[1]),g){if(E>C)throw new ParserError(`Start timestamp greater than end (cue #${h})`);if(C<=E)throw new ParserError(`End must be greater than start (cue #${h})`)}if(!g&&C<E)throw new ParserError(`End must be greater or equal to start when not strict (cue #${h})`);return T=O[1].replace(m,"").trim(),_.shift(),!!($=_.join("\n"))&&{identifier:w,start:E,end:C,text:$,styles:T}}(a,v,h)}catch(a){return g.push(a),null}}).filter(Boolean);return{cues:v,errors:g}}(b,v);if(v&&T.length>0)throw T[0];let _=g?function(a){let m={};return a.slice(1).forEach(a=>{let h=a.indexOf(":"),g=a.slice(0,h).trim(),v=a.slice(h+1).trim();m[g]=v}),Object.keys(m).length>0?m:null}(E):null,O={valid:0===T.length,strict:v,cues:$,errors:T};return g&&(O.meta=_),O}}},7094:function(a,m,h){"use strict";let g=h(4579).parse;a.exports={segment:function(a,m){m=m||10;let h=g(a),v=[],b=[],w=null,E=0,C=0;return h.cues.forEach((a,g)=>{let $=0===g,T=g===h.cues.length-1,_=a.start,O=a.end,L=T?1/0:h.cues[g+1].start,D=$?O:O-_,N=$?0:_-h.cues[g-1].end;E=E+D+N,v.length,w&&(b.push(w),E+=w.end-C,w=null),b.push(a);let j=L-O<m&&N<m&&E>m;if(function(a,m,h,g){return(g<=m||g+(m-g%m)+a<h)&&h-a>=m}(C,m,L,N)){var W,H,U,q;let a;let h=(W=m,H=E,U=C,a=W,H>W&&(a=(q=H-W)+(W-q%W)),a=T?parseFloat((O-U).toFixed(2)):Math.round(a));v.push({duration:h,cues:b}),C+=h,E=0,b=[]}else j=!1;j&&(w=a)}),v}}},4887:function(a,m){!function(a){"use strict";function t(a){return null==a}function r(a){throw Error("Argument "+a+" is empty.")}function e(a){return"function"==typeof a&&"getType"in a}function i(a){throw Error("Argument "+a+' is invalid, it should be an action-creator instance from "typesafe-actions"')}function o(a,m){if(null==a)throw Error("Argument contains array with empty element at index "+m);if(null==a.getType)throw Error("Argument contains array with invalid element at index "+m+', it should be an action-creator instance from "typesafe-actions"')}function u(a){return"string"==typeof a||"symbol"==typeof a}function c(a){throw Error("Argument "+a+" is invalid, it should be an action type of type: string | symbol")}function f(a,m){if(null==a)throw Error("Argument contains array with empty element at index "+m);if("string"!=typeof a&&"symbol"!=typeof a)throw Error("Argument contains array with invalid element at index "+m+", it should be of type: string | symbol")}function s(a,m,h,g){return t(a)&&r(1),u(a)||i(1),{type:a,payload:m,meta:h,error:g}}function y(a,m){return t(a)&&r(1),u(a)||c(1),Object.assign(function(){var h=null!=m?m.apply(void 0,arguments):void 0;return Object.assign({type:a},h)},{getType:function(){return a},toString:function(){return a}})}function l(a,m,h){return t(a)&&r(1),u(a)||c(1),function(){return y(a,function(){var a=arguments.length<=0?void 0:arguments[0],g=arguments.length<=1?void 0:arguments[1];return null==m&&null==h||(a=null!=m?m.apply(void 0,arguments):void 0,g=null!=h?h.apply(void 0,arguments):void 0),Object.assign({},void 0!==a&&{payload:a},{},void 0!==g&&{meta:g})})}}function p(a){return t(a)&&r(1),e(a)||i(1),a.getType()}function d(a,m){return t(a)&&r(1),u(a)||c(1),Object.assign(null!=m?m(a):function(){return{type:a}},{getType:function(){return a},toString:function(){return a}})}a.action=s,a.createAction=l,a.createAsyncAction=function(a,m,h,g){return function(){var v=[a,m,h,g].map(function(a,m){return Array.isArray(a)?l(a[0],a[1],a[2])():"string"==typeof a||"symbol"==typeof a?l(a)():void(m<3&&function(a){throw Error("Argument "+a+' is invalid, it should be an action type of "string | symbol" or a tuple of "[string | symbol, Function, Function?]"')}(m))});return{request:v[0],success:v[1],failure:v[2],cancel:v[3]}}},a.createCustomAction=y,a.createReducer=function n(a,m){void 0===m&&(m={});var h=Object.assign({},m),o=function(m,g){var v=Array.isArray(m)?m:[m],b={};return v.map(function(a,m){return e(a)?p(a):u(a)?a:function(a){throw Error("Argument "+a+' is invalid, it should be an action-creator instance from "typesafe-actions" or action type of type: string | symbol')}(m+1)}).forEach(function(a){return b[a]=g}),n(a,Object.assign({},h,{},b))};return Object.assign(function(m,g){if(void 0===m&&(m=a),h.hasOwnProperty(g.type)){var v=h[g.type];if("function"!=typeof v)throw Error('Reducer under "'+g.type+'" key is not a valid reducer');return v(m,g)}return m},{handlers:Object.assign({},h),handleAction:o,handleType:o})},a.deprecated={createAction:function(a,m){return Object.assign(null==m?function(){return s(a)}:m(s.bind(null,a)),{getType:function(){return a},toString:function(){return a}})},createCustomAction:d,createStandardAction:function(a){return t(a)&&r(1),u(a)||c(1),Object.assign(function(){return d(a,function(a){return function(m,h){return{type:a,payload:m,meta:h}}})},{map:function(m){return d(a,function(a){return function(h,g){return Object.assign(m(h,g),{type:a})}})}})}},a.getType=p,a.isActionOf=function(a,m){t(a)&&r(1);var h=Array.isArray(a)?a:[a];h.forEach(o);var u=function(a){return h.some(function(m){return a.type===m.getType()})};return void 0===m?u:u(m)},a.isOfType=function(a,m){t(a)&&r(1);var h=Array.isArray(a)?a:[a];h.forEach(f);var o=function(a){return h.includes(a.type)};return void 0===m?o:o(m)}}(m)},8138:function(a,m,h){"use strict";let g,v,b;h.r(m),h.d(m,{Primitives:function(){return E.default},Slider:function(){return C.default},Viewer:function(){return Or},default:function(){return aO}});var w,E=h(1830),C=h(9897),$=h(7294),T=Object.defineProperty,__defNormalProp=(a,m,h)=>m in a?T(a,m,{enumerable:!0,configurable:!0,writable:!0,value:h}):a[m]=h,__publicField=(a,m,h)=>(__defNormalProp(a,"symbol"!=typeof m?m+"":m,h),h);let _=[];Object.freeze(_);let O={id:"https://iiif-parser/annotation-page",type:"AnnotationPage",behavior:_,motivation:null,label:null,thumbnail:_,summary:null,requiredStatement:null,metadata:_,rights:null,provider:_,items:_,seeAlso:_,homepage:_,logo:_,rendering:_,service:_},L={id:"https://iiif-parser/empty-canvas",type:"Canvas",label:null,behavior:_,motivation:null,thumbnail:_,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:_,rights:null,navDate:null,provider:_,items:_,annotations:_,seeAlso:_,homepage:_,logo:_,partOf:_,rendering:_,service:_,duration:0,height:0,width:0},D={id:"https://iiif-parser/empty-collection",type:"Collection",label:null,viewingDirection:"left-to-right",behavior:_,motivation:null,thumbnail:_,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:_,rights:null,navDate:null,provider:_,items:_,annotations:_,seeAlso:_,homepage:_,logo:_,partOf:_,rendering:_,service:_,services:_},N={id:"https://iiif-parser/empty-manifest",type:"Manifest",annotations:_,behavior:_,homepage:_,items:_,label:null,logo:_,metadata:_,motivation:null,navDate:null,provider:_,partOf:_,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,rendering:_,requiredStatement:null,rights:null,seeAlso:_,service:_,services:_,start:null,structures:_,summary:null,thumbnail:_,viewingDirection:"left-to-right"},j={id:"https://iiif-parser/empty-canvas",type:"Range",label:null,behavior:_,motivation:null,thumbnail:_,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:_,rights:null,navDate:null,provider:_,items:_,annotations:_,seeAlso:_,homepage:_,logo:_,partOf:_,rendering:_,service:_,start:null,supplementary:null,viewingDirection:"left-to-right"},W={id:"https://iiif-parser/empty-agent",type:"Agent",label:{},logo:_,seeAlso:_,homepage:_};function ensureArray$1(a){return Array.isArray(a)?a:[a]}let H=["Collection","Manifest","Canvas","AnnotationPage","AnnotationCollection","Annotation","ContentResource","Range","Service","Selector","Agent"];let Traverse$1=class Traverse$1{constructor(a,m={}){__publicField(this,"traversals"),__publicField(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationCollection:[],annotationPage:[],annotation:[],contentResource:[],choice:[],range:[],service:[],agent:[],...a},this.options={allowUndefinedReturn:!1,...m}}static all(a){return new Traverse$1({collection:[a],manifest:[a],canvas:[a],annotationCollection:[a],annotationPage:[a],annotation:[a],contentResource:[a],choice:[a],range:[a],service:[a]})}traverseDescriptive(a){return a.thumbnail&&(a.thumbnail=a.thumbnail.map(a=>this.traverseType(a,this.traversals.contentResource))),a.provider&&(a.provider=a.provider.map(a=>this.traverseAgent(a))),a}traverseLinking(a){return a.seeAlso&&(a.seeAlso=a.seeAlso.map(a=>this.traverseType(a,this.traversals.contentResource))),a.service&&(a.service=ensureArray$1(a.service).map(a=>this.traverseType(a,this.traversals.service))),a.services&&(a.services=a.services.map(a=>this.traverseType(a,this.traversals.service))),a.logo&&(a.logo=a.logo.map(a=>this.traverseType(a,this.traversals.contentResource))),a.homepage&&(a.homepage=a.homepage.map(a=>this.traverseType(a,this.traversals.contentResource))),a.partOf&&(a.partOf=a.partOf.map(a=>"string"!=typeof a&&a.type?"Canvas"===a.type?this.traverseType(a,this.traversals.canvas):"AnnotationCollection"===a.type?this.traverseType(a,this.traversals.annotationCollection):"Collection"===a.type?this.traverseType(a,this.traversals.collection):this.traverseType(a,this.traversals.contentResource):this.traverseType(a,this.traversals.contentResource))),a.start&&(a.start=a.start?this.traverseType(a.start,this.traversals.canvas):null),a.rendering&&(a.rendering=a.rendering.map(a=>this.traverseType(a,this.traversals.contentResource))),a.supplementary&&(a.supplementary=a.supplementary.map(a=>this.traverseType(a,this.traversals.contentResource))),a}traverseCollectionItems(a){return a.items&&a.items.map(a=>"Collection"===a.type?this.traverseCollection(a):this.traverseManifest(a)),a}traverseCollection(a){return this.traverseType(this.traverseDescriptive(this.traverseInlineAnnotationPages(this.traverseLinking(this.traversePosterCanvas(this.traverseCollectionItems(a))))),this.traversals.collection)}traverseManifestItems(a){return a.items&&(a.items=a.items.map(a=>this.traverseCanvas(a))),a}traverseManifestStructures(a){return a.structures&&(a.structures=a.structures.map(a=>this.traverseRange(a))),a}traverseManifest(a){return this.traverseType(this.traverseInlineAnnotationPages(this.traverseManifestStructures(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(a)))))),this.traversals.manifest)}traverseCanvasItems(a){return a.items=(a.items||[]).map(a=>this.traverseAnnotationPage(a)),a}traverseInlineAnnotationPages(a){return"string"!=typeof a&&a&&a.annotations&&(a.annotations=a.annotations.map(a=>this.traverseAnnotationPage(a))),a}traverseCanvas(a){return this.traverseType(this.traverseInlineAnnotationPages(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(a))))),this.traversals.canvas)}traverseAnnotationPageItems(a){return a.items&&(a.items=a.items.map(a=>this.traverseAnnotation(a))),a}traverseAnnotationPage(a){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationPageItems(a))),this.traversals.annotationPage)}traverseAnnotationBody(a){return Array.isArray(a.body)?a.body=a.body.map(a=>this.traverseContentResource(a)):a.body&&(a.body=this.traverseContentResource(a.body)),a}traversePosterCanvas(a){return a.posterCanvas&&(a.posterCanvas=this.traverseCanvas(a.posterCanvas)),a.placeholderCanvas&&(a.placeholderCanvas=this.traverseCanvas(a.placeholderCanvas)),a.accompanyingCanvas&&(a.accompanyingCanvas=this.traverseCanvas(a.accompanyingCanvas)),a}traverseAnnotation(a){return this.traverseType(this.traverseLinking(this.traverseAnnotationBody(a)),this.traversals.annotation)}traverseContentResourceLinking(a){return"string"!=typeof a&&a&&a&&a.service&&(a.service=ensureArray$1(a.service||[]).map(a=>this.traverseType(a,this.traversals.service))),a}traverseContentResource(a){return"Choice"===a.type&&(a.items=a.items.map(a=>this.traverseContentResource(a))),this.traverseType(this.traverseInlineAnnotationPages(this.traverseContentResourceLinking(a)),this.traversals.contentResource)}traverseRangeRanges(a){return a.items&&(a.items=a.items.map(a=>"string"==typeof a?this.traverseCanvas({id:a,type:"Canvas"}):"Manifest"===a.type?this.traverseManifest(a):this.traverseRange(a))),a}traverseRange(a){return this.traverseType(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseRangeRanges(a)))),this.traversals.range)}traverseAgent(a){return this.traverseType(this.traverseDescriptive(this.traverseLinking(a)),this.traversals.agent)}traverseType(a,m){return m.reduce((a,m)=>{let h=m(a);return void 0!==h||this.options.allowUndefinedReturn?h:a},a)}traverseService(a){return this.traverseType(a,this.traversals.service)}traverseUnknown(a){let m=function(a){if(null==a)throw Error("Null or undefined is not a valid entity.");if(Array.isArray(a))throw Error("Array is not a valid entity");if("object"!=typeof a)throw Error(`${typeof a} is not a valid entity`);if("string"==typeof a.type){let m=H.indexOf(a.type);if(-1!==m)return H[m]}if(a.profile)return"Service";throw Error("Resource type is not known")}(a);switch(m){case"Collection":return this.traverseCollection(a);case"Manifest":return this.traverseManifest(a);case"Canvas":return this.traverseCanvas(a);case"AnnotationPage":return this.traverseAnnotationPage(a);case"Annotation":return this.traverseAnnotation(a);case"ContentResource":return this.traverseContentResource(a);case"Range":return this.traverseRange(a);case"Service":return this.traverseService(a);case"Agent":return this.traverseAgent(a);default:throw Error(`Unknown or unsupported resource type of ${m}`)}}};let U=["sc:Collection","sc:Manifest","sc:Canvas","sc:AnnotationList","oa:Annotation","sc:Range","sc:Layer","sc:Sequence","oa:Choice","Service","ContentResource"];let Traverse=class Traverse{constructor(a,m={}){__publicField(this,"traversals"),__publicField(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationList:[],sequence:[],annotation:[],contentResource:[],choice:[],range:[],service:[],layer:[],...a},this.options={convertPropsToArray:!0,mergeMemberProperties:!0,allowUndefinedReturn:!1,...m}}static all(a){return new Traverse({collection:[a],manifest:[a],canvas:[a],annotationList:[a],sequence:[a],annotation:[a],contentResource:[a],choice:[a],range:[a],service:[a],layer:[a]})}traverseCollection(a){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(a))),this.traversals.collection)}traverseCollectionItems(a){if(this.options.mergeMemberProperties){let m=[...(a.manifests||[]).map(a=>"string"==typeof a?{"@id":a,"@type":"sc:Manifest"}:a),...(a.collections||[]).map(a=>"string"==typeof a?{"@id":a,"@type":"sc:Collection"}:a),...a.members||[]];delete a.collections,delete a.manifests,a.members=m}return a.manifests&&(a.manifests=a.manifests.map(a=>this.traverseManifest("string"==typeof a?{"@id":a,"@type":"sc:Manifest"}:a))),a.collections&&(a.collections=a.collections.map(a=>this.traverseCollection("string"==typeof a?{"@id":a,"@type":"sc:Collection"}:a))),a.members&&(a.members=a.members.map(a=>"string"==typeof a?a:this.traverseUnknown(a))),a}traverseManifest(a){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(a))),this.traversals.manifest)}traverseManifestItems(a){return a.sequences&&(a.sequences=a.sequences.map(a=>this.traverseSequence(a))),a.structures&&(a.structures=a.structures.map(a=>this.traverseRange(a))),a}traverseSequence(a){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(a))),this.traversals.sequence)}traverseSequenceItems(a){return a.canvases&&(a.canvases=a.canvases.map(a=>this.traverseCanvas(a))),a}traverseCanvas(a){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(a))),this.traversals.canvas)}traverseCanvasItems(a){return a.images&&(a.images=a.images.map(a=>this.traverseAnnotation(a))),a.otherContent&&(a.otherContent=a.otherContent.map(a=>this.traverseAnnotationList(a))),a}traverseRange(a){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(a))),this.traversals.range)}traverseRangeItems(a){if(this.options.mergeMemberProperties){let m=[...(a.ranges||[]).map(a=>"string"==typeof a?{"@id":a,"@type":"sc:Range"}:a),...(a.canvases||[]).map(a=>"string"==typeof a?{"@id":a,"@type":"sc:Canvas"}:a),...a.members||[]];delete a.ranges,delete a.canvases,a.members=m.length?m.map(a=>this.traverseUnknown(a)):void 0}return a}traverseAnnotationList(a){let m="string"==typeof a?{"@id":a,"@type":"sc:AnnotationList"}:a;return this.traverseType(this.traverseDescriptive(this.traverseAnnotationListItems(m)),this.traversals.annotationList)}traverseAnnotationListItems(a){return a.resources&&(a.resources=a.resources.map(a=>this.traverseAnnotation(a))),a}traverseAnnotation(a){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(a))),this.traversals.annotation)}traverseAnnotationItems(a){return a.resource&&(Array.isArray(a.resource)?a.resource=a.resource.map(a=>this.traverseContentResource(a)):a.resource=this.traverseContentResource(a.resource)),a.on,a}traverseLayer(a){return this.traverseType(this.traverseLinking(this.traverseLayerItems(a)),this.traversals.layer)}traverseLayerItems(a){return a.otherContent&&(a.otherContent=a.otherContent.map(a=>this.traverseAnnotationList(a))),a}traverseChoice(a){return this.traverseType(this.traverseChoiceItems(a),this.traversals.choice)}traverseChoiceItems(a){return a.default&&"rdf:nil"!==a.default&&(a.default=this.traverseContentResource(a.default)),a.item&&"rdf:nil"!==a.item&&(a.item=a.item.map(a=>this.traverseContentResource(a))),a}traverseService(a){return this.traverseType(this.traverseLinking(a),this.traversals.service)}traverseContentResource(a){return"oa:Choice"===a["@type"]?this.traverseChoice(a):this.traverseType(this.traverseDescriptive(this.traverseLinking(a)),this.traversals.contentResource)}traverseUnknown(a){if(!a["@type"]||"string"==typeof a)return a;switch(function(a){if(null==a)throw Error("Null or undefined is not a valid entity.");if(Array.isArray(a))throw Error("Array is not a valid entity");if("object"!=typeof a)throw Error(`${typeof a} is not a valid entity`);if("string"==typeof a["@type"]){let m=U.indexOf(a["@type"]);if(-1!==m)return U[m]}if(a.profile)return"Service";if(a.format||a["@type"])return"ContentResource";throw Error("Resource type is not known")}(a)){case"sc:Collection":return this.traverseCollection(a);case"sc:Manifest":return this.traverseManifest(a);case"sc:Canvas":return this.traverseCanvas(a);case"sc:Sequence":return this.traverseSequence(a);case"sc:Range":return this.traverseRange(a);case"oa:Annotation":return this.traverseAnnotation(a);case"sc:AnnotationList":return this.traverseAnnotationList(a);case"sc:Layer":return this.traverseLayer(a);case"Service":return this.traverseService(a);case"oa:Choice":return this.traverseChoice(a);case"ContentResource":return this.traverseContentResource(a)}return a.profile?this.traverseService(a):a}traverseImageResource(a){let m=Array.isArray(a),h=Array.isArray(a)?a:[a],g=[];for(let a of h)"string"==typeof a?g.push(this.traverseContentResource({"@id":a,"@type":"dctypes:Image"})):g.push(this.traverseContentResource(a));return m||this.options.convertPropsToArray?g:g[0]}traverseDescriptive(a){return a.thumbnail&&(a.thumbnail=this.traverseImageResource(a.thumbnail)),a.logo&&(a.logo=this.traverseImageResource(a.logo)),a}traverseOneOrMoreServices(a){let m=Array.isArray(a),h=Array.isArray(a)?a:[a],g=[];for(let a of h)g.push(this.traverseService(a));return m||this.options.convertPropsToArray?g:g[0]}traverseLinking(a){return a.related&&(a.related=this.traverseOneOrManyType(a.related,this.traversals.contentResource)),a.rendering&&(a.rendering=this.traverseOneOrManyType(a.rendering,this.traversals.contentResource)),a.service&&(a.service=this.traverseOneOrMoreServices(a.service)),a.seeAlso&&(a.seeAlso=this.traverseOneOrManyType(a.seeAlso,this.traversals.contentResource)),a.within&&("string"==typeof a.within||(a.within=this.traverseOneOrManyType(a.within,this.traversals.contentResource))),a.startCanvas&&("string"==typeof a.startCanvas?a.startCanvas=this.traverseType({"@id":a.startCanvas,"@type":"sc:Canvas"},this.traversals.canvas):a.startCanvas&&this.traverseType(a.startCanvas,this.traversals.canvas)),a.contentLayer&&("string"==typeof a.contentLayer?a.contentLayer=this.traverseLayer({"@id":a.contentLayer,"@type":"sc:Layer"}):a.contentLayer=this.traverseLayer(a.contentLayer)),a}traverseOneOrManyType(a,m){if(!Array.isArray(a)){if(!this.options.convertPropsToArray)return this.traverseType(a,m);a=[a]}return a.map(a=>this.traverseType(a,m))}traverseType(a,m){return m.reduce((a,m)=>{let h=m(a);return void 0!==h||this.options.allowUndefinedReturn?h:a},a)}};let q="http://library.stanford.edu/iiif/image-api/compliance.html#level1",Z="http://library.stanford.edu/iiif/image-api/compliance.html#level2",X="http://library.stanford.edu/iiif/image-api/conformance.html#level1",Y="http://library.stanford.edu/iiif/image-api/conformance.html#level2",Q="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",J="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",ee="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",en="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",ei="http://iiif.io/api/image/1/level1.json",ea="http://iiif.io/api/image/1/profiles/level1.json",eo="http://iiif.io/api/image/1/level2.json",el="http://iiif.io/api/image/1/profiles/level2.json",es="http://iiif.io/api/image/2/level1.json",ec="http://iiif.io/api/image/2/profiles/level1.json",eu="http://iiif.io/api/image/2/level2.json",ed="http://iiif.io/api/image/2/profiles/level2.json",ep="level1",ef="level2",em="http://iiif.io/api/image/2/level1",eh="http://iiif.io/api/image/2/level2",eg=[em,eh,q,Z,X,Y,Q,J,ee,en,ei,ea,eo,el,es,ec,eu,ed,ep,ef],ev=["http://iiif.io/api/image/2/level0",em,eh,"http://library.stanford.edu/iiif/image-api/compliance.html#level0",q,Z,"http://library.stanford.edu/iiif/image-api/conformance.html#level0",X,Y,"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",Q,J,"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",ee,en,"http://iiif.io/api/image/1/level0.json","http://iiif.io/api/image/1/profiles/level0.json",ei,ea,eo,el,"http://iiif.io/api/image/2/level0.json","http://iiif.io/api/image/2/profiles/level0.json",es,ec,eu,ed,"level0",ep,ef],ey={attributionLabel:"Attribution",providerId:"http://example.org/provider",providerName:"Unknown"};function convertLanguageMapping(a,m="none"){if(!a)return{};let h=Array.isArray(a)?a:[a],g={};for(let a of h){if("string"==typeof a){g[m]=g[m]?g[m]:[],g[m].push(a||"");continue}if(!a["@language"]){g[m]=g[m]?g[m]:[],g[m].push(a["@value"]||"");continue}let h=a["@language"];g[h]=g[h]?g[h]:[],g[h].push(a["@value"]||"")}return g}function removePrefix(a){for(let m of["sc","oa","dcterms","dctypes","iiif"])if(a.startsWith(`${m}:`))return a.slice(m.length+1);return a}let eb=["Collection","Manifest","Annotation","AnnotationPage","Range","Service"];function getNewType(a){let m=a["@id"]||a.id,h=a["@type"]||a.type,g=a.profile||void 0,v=a["@context"]||void 0;if(g){let a=function(a){switch(a){case"http://iiif.io/api/image/2/level0.json":case"http://iiif.io/api/image/2/level1.json":case"http://iiif.io/api/image/2/level2.json":return"ImageService2";case"http://iiif.io/api/auth/1/kiosk":case"http://iiif.io/api/auth/1/login":case"http://iiif.io/api/auth/1/clickthrough":case"http://iiif.io/api/auth/1/external":case"http://iiif.io/api/auth/0/kiosk":case"http://iiif.io/api/auth/0/login":case"http://iiif.io/api/auth/0/clickthrough":case"http://iiif.io/api/auth/0/external":return"AuthCookieService1";case"http://iiif.io/api/auth/1/token":case"http://iiif.io/api/auth/0/token":return"AuthTokenService1";case"http://iiif.io/api/auth/1/logout":case"http://iiif.io/api/auth/0/logout":return"AuthLogoutService1";case"http://iiif.io/api/search/1/search":case"http://iiif.io/api/search/0/search":return"SearchService1";case"http://iiif.io/api/search/1/autocomplete":case"http://iiif.io/api/search/0/autocomplete":return"AutoCompleteService1"}}(g);if(a)return a}if(v){let a=function(a){let m=Array.isArray(a)?a:[a];for(let a of m)switch(a){case"http://iiif.io/api/image/2/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2":return"ImageService2";case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":return"ImageService1";case"http://iiif.io/api/annex/openannotation/context.json":return"ImageApiSelector"}}(v);if(a)return a}if(h){if(Array.isArray(h)){if(-1!==h.indexOf("oa:CssStylesheet"))return"CssStylesheet";if(-1!==h.indexOf("cnt:ContentAsText"))return"TextualBody";h=h[0]}for(let a of["sc","oa","dcterms","dctypes","iiif"])if(h.startsWith(`${a}:`)){h=h.slice(a.length+1);break}switch(h){case"Layer":return"AnnotationCollection";case"AnnotationList":return"AnnotationPage";case"cnt:ContentAsText":return"TextualBody"}}if(h&&-1!==eb.indexOf(h))return h;if(a.format){if(a.format.startsWith("image/"))return"Image";if(a.format.startsWith("text/")||"application/pdf"===a.format)return"Text";if(a.format.startsWith("application/"))return"Dataset"}return m&&(m.endsWith(".jpg")||m.endsWith(".png")||m.endsWith(".jpeg"))?"Image":h||"unknown"}let ew=/http(s)?:\/\/(creativecommons.org|rightsstatements.org)[^"'\\<\n]+/gm,eE=["http://iiif.io/api/presentation/2/context.json","http://iiif.io/api/image/2/context.json","http://iiif.io/api/image/1/context.json","http://library.stanford.edu/iiif/image-api/1.1/context.json","http://iiif.io/api/search/1/context.json","http://iiif.io/api/search/0/context.json","http://iiif.io/api/auth/1/context.json","http://iiif.io/api/auth/0/context.json","http://iiif.io/api/annex/openannotation/context.json"];function removeUndefinedProperties(a){for(let m in a)(void 0===a[m]||null===a[m])&&delete a[m];return a}let ex=0;function mintNewIdFromResource(a,m){let h=encodeURI(a.id||a["@id"]||"").trim();return h&&m?`${h}/${m}`:h||(ex++,`http://example.org/${a["@type"]}${m?`/${m}`:""}/${ex}`)}function technicalProperties$2(a){let m;let h=[...a.behavior||[]];return a.viewingHint&&h.push(a.viewingHint),Array.isArray(a.motivation)?m=a.motivation.map(removePrefix):a.motivation&&(m=removePrefix(a.motivation)),{"@context":a["@context"]?function(a){if(a){let m=Array.isArray(a)?a:[a],h=[];for(let a of m)"http://iiif.io/api/presentation/2/context.json"===a&&h.push("http://iiif.io/api/presentation/3/context.json"),-1===eE.indexOf(a)&&h.push(a);if(m.length)return 1===h.length?h[0]:h}}(a["@context"]):void 0,id:(a["@id"]||mintNewIdFromResource(a)).trim(),type:getNewType(a),behavior:h.length?h:void 0,height:a.height?a.height:void 0,width:a.width?a.width:void 0,motivation:m,viewingDirection:a.viewingDirection,profile:a.profile,format:a.format?a.format:void 0,duration:void 0,timeMode:void 0}}function descriptiveProperties$2(a){var m;let[h,g]=function(a,m="Rights/License",h="none"){let g=null,v=[],b=Array.isArray(a)?a:[a];for(let a of b){let b=a?function(a){let m=a.match(ew);return m?m[0]:a}(a):void 0;if(b&&(-1!==b.indexOf("creativecommons.org")||-1!==b.indexOf("rightsstatements.org"))){g=b.startsWith("https://")?`http://${b.slice(8)}`:b;continue}b&&v.push({label:{[h]:[m]},value:{[h]:[b]}})}return[g,v]}(a.license),v=[...a.metadata&&(m=a.metadata)?m.map(a=>({label:convertLanguageMapping(a.label),value:convertLanguageMapping(a.value)})):[],...g];return{rights:h,metadata:v.length?v:void 0,label:a.label?convertLanguageMapping(a.label):void 0,requiredStatement:a.attribution?{label:convertLanguageMapping(ey.attributionLabel),value:convertLanguageMapping(a.attribution)}:void 0,navDate:a.navDate,summary:a.description?convertLanguageMapping(a.description):void 0,thumbnail:a.thumbnail}}function linkingProperties$2(a){let m=a.related?Array.isArray(a.related)?a.related:[a.related]:[],h=a.contentLayer;return{provider:a.logo||m.length?[{id:ey.providerId,type:"Agent",homepage:m.length?[m[0]]:void 0,logo:a.logo?Array.isArray(a.logo)?a.logo:[a.logo]:void 0,label:convertLanguageMapping(ey.providerName)}]:void 0,partOf:function(a){if(!a.within)return;let m=Array.isArray(a.within)?a.within:[a.within],h=[];for(let g of m)"string"==typeof g?g&&"sc:Manifest"===a["@type"]&&h.push({id:g,type:"Collection"}):g["@id"]&&h.push({id:g["@id"],type:getNewType(g)});return h.length?h:void 0}(a),rendering:a.rendering,seeAlso:a.seeAlso,start:a.startCanvas,service:a.service?ensureArray$1(a.service):void 0,supplementary:h?[h]:void 0}}function upgradeContentResource(a){return removeUndefinedProperties({...technicalProperties$2(a),...descriptiveProperties$2(a),...linkingProperties$2(a),chars:a.chars,format:a.format?a.format:void 0,language:a.language})}let eC=new Traverse({collection:[function(a){return removeUndefinedProperties({...technicalProperties$2(a),...descriptiveProperties$2(a),...linkingProperties$2(a),items:a.members})}],manifest:[function(a){let m=[],h=[];for(let g of a.sequences||[])g.canvases.length&&m.push(...g.canvases),g.behavior&&h.push(...g.behavior);let g=technicalProperties$2(a);return h.length&&(g.behavior?g.behavior.push(...h):g.behavior=h),removeUndefinedProperties({...g,...descriptiveProperties$2(a),...linkingProperties$2(a),items:m,structures:a.structures})}],canvas:[function(a){return removeUndefinedProperties({...technicalProperties$2(a),...descriptiveProperties$2(a),...linkingProperties$2(a),annotations:a.otherContent&&a.otherContent.length?a.otherContent:void 0,items:a.images&&a.images.length?[{id:mintNewIdFromResource(a,"annotation-page"),type:"AnnotationPage",items:a.images}]:void 0})}],annotationList:[function(a){return removeUndefinedProperties({...technicalProperties$2(a),...descriptiveProperties$2(a),...linkingProperties$2(a),items:a.resources&&a.resources.length?a.resources:void 0})}],sequence:[function(a){return a.canvases&&0!==a.canvases.length?{canvases:a.canvases,behavior:a.viewingHint?[a.viewingHint]:[]}:{canvases:[],behavior:[]}}],annotation:[function(a){return removeUndefinedProperties({...technicalProperties$2(a),...descriptiveProperties$2(a),...linkingProperties$2(a),target:function upgradeTarget(a){if(Array.isArray(a)){if(a.length>1)return{type:"List",items:a.map(upgradeTarget)};a=a[0]}if("string"==typeof a)return encodeURI(a).trim();if(!("@type"in a))return encodeURI(a["@id"]).trim();{let m;if("string"==typeof a.full)m=a.full;else if("dctypes:Image"===a.full["@type"])m={id:a.full["@id"],type:"Image"};else if("sc:Canvas"===a.full["@type"])m={id:a.full["@id"],type:"Canvas"};else throw Error(`Unsupported source type on annotation: ${a.full["@type"]}`);return{type:"SpecificResource",source:m,selector:function upgradeSelector(a){let m=(Array.isArray(a["@type"])&&a["@type"].includes("oa:SvgSelector")||"oa:SvgSelector"==a["@type"])&&("chars"in a||"value"in a);if(m)return{type:"SvgSelector",value:"chars"in a?a.chars:a.value};if("oa:FragmentSelector"===a["@type"])return{type:"FragmentSelector",value:a.value};if("oa:Choice"===a["@type"])return[upgradeSelector(a.default),...(Array.isArray(a.item)?a.item:[a.item]).map(upgradeSelector)];if("iiif:ImageApiSelector"==a["@type"])return{type:"ImageApiSelector",region:"region"in a?a.region:void 0,rotation:"rotation"in a?a.rotation:void 0};throw Error(`Unsupported selector type: ${a["@type"]}`)}(a.selector)}}}(a.on),body:Array.isArray(a.resource)?a.resource.map(upgradeContentResource):upgradeContentResource(a.resource)})}],contentResource:[upgradeContentResource],choice:[function(a){let m=[];return a.default&&"rdf:nil"!==a.default&&m.push(a.default),a.item&&"rdf:nil"!==a.item&&m.push(...a.item),{...technicalProperties$2(a),...descriptiveProperties$2(a),items:m}}],range:[function(a){return removeUndefinedProperties({...technicalProperties$2(a),...descriptiveProperties$2(a),...linkingProperties$2(a),items:a.members})}],service:[function(a){let{"@id":m,"@type":h,"@context":g,profile:v,...b}=a,w={};return m&&(w["@id"]=m),w["@type"]=getNewType(a),"unknown"===w["@type"]&&(g&&g.length&&(w["@context"]=g),w["@type"]="Service"),v&&(w.profile=function getProfile(a){return Array.isArray(a)?getProfile(a.find(a=>"string"==typeof a)):-1!==ev.indexOf(a)?"level2":-1!==eg.indexOf(a)?"level1":"string"==typeof a?a:void 0}(v)),removeUndefinedProperties({...w,...b})}],layer:[function(a){return removeUndefinedProperties({...technicalProperties$2(a),...descriptiveProperties$2(a),...linkingProperties$2(a)})}]});function getResource(a,m){if("string"==typeof a)return{id:a,type:m};if(!a.id)throw Error(`Invalid resource does not have an ID (${m})`);return a}function addMissingIdToContentResource(a){return m=>"string"==typeof m?{id:m,type:a}:m.id?m.type?m:{type:a,...m}:{id:`vault://${function(a){let m=JSON.stringify(a),h=5381,g=m.length;for(;g;)h=33*h^m.charCodeAt(--g);let v=h>>>0,b=v.toString(16);return b.length%2?"0"+b:b}(m)}`,type:a,...m}}function ensureDefaultFields(a){return m=>({...a,...m})}function ensureArray(a){return Array.isArray(a)?a:[a]}function ensureArrayOnAnnotation(a){return a.body&&(a.body=ensureArray(a.body)),a.seeAlso&&(a.seeAlso=ensureArray(a.seeAlso)),a.body&&(a.body=ensureArray(a.body)),a.audience&&(a.audience=ensureArray(a.audience)),a.accessibility&&(a.accessibility=ensureArray(a.accessibility)),a.motivation&&(a.motivation=ensureArray(a.motivation)),a}let eS="__$UNSET$__",eA="__$UNWRAP$__";function languageString2to3(a){if(!a)return;let m=Object.keys(a);if(0!==m.length){if(1===m.length){let h=m[0];if(!h)return"";let g=(a[h]||[]).join("");return"@none"===h||"none"===h||"en"===h?g:{"@language":h,"@value":g}}return m.map(m=>({"@language":m,"@value":(a[m]||[]).join("")}))}}function unNestArray(a,m=!1){return a?a.length>1&&!m?a:a[0]||void 0:void 0}function convertService(a){if(a){if("string"==typeof a)return{"@id":a};if("@id"in a){let m={...a};return delete m["@type"],m}return{"@context":"http://iiif.io/api/image/2/context.json","@id":a.id,profile:`http://iiif.io/api/image/2/profiles/${a.profile}.json`}}}function technicalProperties$1(a,m){return[["@id",a.id],["@type",m],["format",a.format],["height",a.height],["width",a.width],["viewingDirection","left-to-right"!==a.viewingDirection?a.viewingDirection:void 0]]}function*descriptiveProperties$1(a){let m=a.provider?yield a.provider[0]:void 0;return[["label",languageString2to3(a.label)],["metadata",a.metadata&&a.metadata.length?a.metadata.map(a=>({label:languageString2to3(a.label)||"",value:languageString2to3(a.value)||""})):void 0],["description",languageString2to3(a.summary)],["thumbnail",unNestArray((yield a.thumbnail))],["navDate",a.navDate],["logo",m?unNestArray(m.logo):void 0],["homepage",m?m.homepage:void 0],["attribution",a.requiredStatement?languageString2to3(a.requiredStatement.value):void 0]]}function*linkingProperties$1(a){return[["seeAlso",unNestArray((yield a.seeAlso))],["service",unNestArray((a.service||[]).map(convertService))],["rendering",unNestArray((yield a.rendering))],["startCanvas",a.start?a.start.id:void 0]]}let e$={Manifest:function*(a){return[...technicalProperties$1(a,"sc:Manifest"),...yield*descriptiveProperties$1(a),...yield*linkingProperties$1(a),["sequences",[{"@id":`${a.id}/sequence0`,"@type":"sc:Sequence",canvases:yield a.items}]],["structures",(yield a.structures)]]},Canvas:function*(a){let m=yield a.items,h=m[0];return[...technicalProperties$1(a,"sc:Canvas"),...yield*descriptiveProperties$1(a),...yield*linkingProperties$1(a),["images",h?[h.resources]:void 0],["annotations",a.annotations&&a.annotations.length?unNestArray((yield a.annotations)):void 0]]},AnnotationPage:function*(a){return[...technicalProperties$1(a,"sc:AnnotationList"),...yield*descriptiveProperties$1(a),["resources",a.items&&a.items.length?unNestArray((yield a.items)):void 0]]},Annotation:function*(a){return[["@id",a.id],["@type","oa:Annotation"],["motivation","sc:painting"],["on",function parseCanvasTarget(a){return Array.isArray(a)?a.map(a=>parseCanvasTarget(a)):"string"==typeof a?a:a.type&&"Canvas"===a.type?a.id:a}(a.target)],["resource",unNestArray((yield a.body),!0)]]},ContentResource:function*(a){return"Image"===a.type?[...technicalProperties$1(a,"dctypes:Image"),...yield*descriptiveProperties$1(a),...yield*linkingProperties$1(a)]:[...technicalProperties$1(a,void 0),...yield*descriptiveProperties$1(a)]},AnnotationCollection:function*(a){return[["@id",a.id],["@type","sc:Layer"],["label",languageString2to3(a.label)]]},Collection:function*(a){return[...technicalProperties$1(a,"sc:Collection"),...yield*descriptiveProperties$1(a),...yield*linkingProperties$1(a),["members",(yield*a.items)]]},Range:function*(a){let m=[],h=[];if(a.items)for(let g of a.items){let v=yield g;m.push({"@id":g.id,"@type":g.type,label:v?v.label:void 0,within:a.id}),"Canvas"===g.type&&h.push(g.id)}return[...technicalProperties$1(a,"sc:Range"),...yield*descriptiveProperties$1(a),...yield*linkingProperties$1(a),["canvases",h.length===m.length?h:void 0],["members",h.length!==m.length?m:void 0]]}};function technicalProperties(a){var m;return[["id",(null==(m=a.id)?void 0:m.startsWith("vault://"))?void 0:a.id],["type",a.type],["format",a.format],["profile",a.profile],["height",a.height],["width",a.width],["duration",a.duration||void 0],["viewingDirection","left-to-right"!==a.viewingDirection?a.viewingDirection:void 0],["behavior",a.behavior&&a.behavior.length?a.behavior:void 0],["timeMode",a.timeMode],["motivation",Array.isArray(a.motivation)?a.motivation[0]:a.motivation]]}function filterEmpty(a){if(a&&0!==a.length)return a}function service2compat(a){if(a&&a.type&&"ImageService2"===a.type){let{id:m,type:h,profile:g,...v}=a,b="string"==typeof g?g:Array.isArray(g)?g.find(a=>"string"==typeof a):"";return{"@id":m,"@type":h,profile:b?b.startsWith("http")?b:`http://iiif.io/api/image/2/${b}.json`:"http://iiif.io/api/image/2/level0.json",...v}}return a}function filterService2Compat(a){if(a&&0!==a.length)return a.map(service2compat)}function*descriptiveProperties(a){return[["label",a.label],["metadata",filterEmpty(a.metadata)],["summary",a.summary],["requiredStatement",a.requiredStatement],["rights",a.rights],["navDate",a.navDate],["language",a.language],["thumbnail",filterEmpty((yield a.thumbnail))],["placeholderCanvas",(yield a.placeholderCanvas)],["accompanyingCanvas",(yield a.accompanyingCanvas)],["provider",filterEmpty((yield a.provider))]]}function*linkingProperties(a){return[["seeAlso",filterEmpty((yield a.seeAlso))],["service",filterService2Compat(a.service)],["services",filterService2Compat(a.services)],["rendering",filterEmpty((yield a.rendering))],["supplementary",filterEmpty((yield a.supplementary))],["homepage",filterEmpty((yield a.homepage))],["logo",filterEmpty((yield a.logo))],["partOf",filterEmpty((yield a.partOf))],["start",a.start]]}let eP={Manifest:function*(a,m,{isTopLevel:h}){return h?[["@context","http://iiif.io/api/presentation/3/context.json"],...technicalProperties(a),...yield*descriptiveProperties(a),...yield*linkingProperties(a),["items",(yield a.items)],["structures",filterEmpty((yield a.structures))],["annotations",filterEmpty((yield a.annotations))]]:[...technicalProperties(a),...yield*descriptiveProperties(a)]},Canvas:function*(a){return[...technicalProperties(a),...yield*descriptiveProperties(a),...yield*linkingProperties(a),["items",(yield a.items)],["annotations",filterEmpty((yield a.annotations))]]},Agent:function*(a){return[["id",a.id],["type","Agent"],["label",a.label],...yield*linkingProperties(a)]},AnnotationPage:function*(a){let m=Object.entries(a).map(([a,m])=>[a,Array.isArray(m)?filterEmpty(m):m]).filter(([a,m])=>"items"!==a);return[...m,...yield*linkingProperties(a),["items",(yield a.items)]]},Service:function*(a){return[[eA,service2compat(a)]]},Annotation:function*(a){let m=Object.entries(a).map(([a,m])=>"motivation"===a?[a,Array.isArray(m)?m[0]:m]:[a,Array.isArray(m)?filterEmpty(m):m]).filter(([a])=>"body"!==a),h=yield a.body;return[...m,["body",1===h.length?h[0]:h]]},ContentResource:function*(a){return[...technicalProperties(a),...yield*descriptiveProperties(a),...yield*linkingProperties(a),["annotations",filterEmpty((yield a.annotations))],["items",filterEmpty((yield a.items))]]},AnnotationCollection:function*(a){return[["id",a.id],["type","AnnotationCollection"],["label",a.label]]},Collection:function*(a,m,{isTopLevel:h}){return h?[["@context","http://iiif.io/api/presentation/3/context.json"],...technicalProperties(a),...yield*descriptiveProperties(a),...yield*linkingProperties(a),["items",filterEmpty((yield a.items))]]:[...technicalProperties(a),...yield*descriptiveProperties(a)]},Range:function*(a){let m=[];for(let h of a.items)"Range"===h.type?m.push((yield h)):m.push(h);return[...technicalProperties(a),...yield*descriptiveProperties(a),...yield*linkingProperties(a),["items",m],["annotations",filterEmpty((yield a.annotations))]]}};var eR=h(4887);function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function ownKeys(a,m){var h=Object.keys(a);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(a);m&&(g=g.filter(function(m){return Object.getOwnPropertyDescriptor(a,m).enumerable})),h.push.apply(h,g)}return h}function _objectSpread2(a){for(var m=1;m<arguments.length;m++){var h=null!=arguments[m]?arguments[m]:{};m%2?ownKeys(Object(h),!0).forEach(function(m){!function(a,m,h){var g;g=function(a,m){if("object"!==_typeof(a)||null===a)return a;var h=a[Symbol.toPrimitive];if(void 0!==h){var g=h.call(a,m||"default");if("object"!==_typeof(g))return g;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===m?String:Number)(a)}(m,"string"),(m="symbol"===_typeof(g)?g:String(g))in a?Object.defineProperty(a,m,{value:h,enumerable:!0,configurable:!0,writable:!0}):a[m]=h}(a,m,h[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(h)):ownKeys(Object(h)).forEach(function(m){Object.defineProperty(a,m,Object.getOwnPropertyDescriptor(h,m))})}return a}function formatProdErrorMessage(a){return"Minified Redux error #"+a+"; visit https://redux.js.org/Errors?code="+a+" for the full message or use the non-minified dev environment for full errors. "}var eT="function"==typeof Symbol&&Symbol.observable||"@@observable",randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},e_={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function combineReducers(a){for(var m,h=Object.keys(a),g={},v=0;v<h.length;v++){var b=h[v];"function"==typeof a[b]&&(g[b]=a[b])}var w=Object.keys(g);try{!function(a){Object.keys(a).forEach(function(m){var h=a[m];if(void 0===h(void 0,{type:e_.INIT}))throw Error(formatProdErrorMessage(12));if(void 0===h(void 0,{type:e_.PROBE_UNKNOWN_ACTION()}))throw Error(formatProdErrorMessage(13))})}(g)}catch(a){m=a}return function(a,h){if(void 0===a&&(a={}),m)throw m;for(var v=!1,b={},E=0;E<w.length;E++){var C=w[E],$=g[C],T=a[C],_=$(T,h);if(void 0===_)throw h&&h.type,Error(formatProdErrorMessage(14));b[C]=_,v=v||_!==T}return(v=v||w.length!==Object.keys(a).length)?b:a}}function compose(){for(var a=arguments.length,m=Array(a),h=0;h<a;h++)m[h]=arguments[h];return 0===m.length?function(a){return a}:1===m.length?m[0]:m.reduce(function(a,m){return function(){return a(m.apply(void 0,arguments))}})}function applyMiddleware(){for(var a=arguments.length,m=Array(a),h=0;h<a;h++)m[h]=arguments[h];return function(a){return function(){var h=a.apply(void 0,arguments),_dispatch=function(){throw Error(formatProdErrorMessage(15))},g={getState:h.getState,dispatch:function(){return _dispatch.apply(void 0,arguments)}},v=m.map(function(a){return a(g)});return _dispatch=compose.apply(void 0,v)(h.dispatch),_objectSpread2(_objectSpread2({},h),{},{dispatch:_dispatch})}}}let ek="@iiif/IMPORT_ENTITIES",eO="@iiif/MODIFY_ENTITY_FIELD",eI="@iiif/REORDER_ENTITY_FIELD",eM="@iiif/ADD_REFERENCE",eL="@iiif/REMOVE_REFERENCE",eD=(0,eR.createAction)(ek)(),eF=(0,eR.createAction)(eO)(),eN=(0,eR.createAction)(eI)(),ej=(0,eR.createAction)(eM)(),eW=(0,eR.createAction)(eL)(),eV={importEntities:eD,modifyEntityField:eF,reorderEntityField:eN,addReference:ej,removeReference:eW},ez="@iiif/ADD_MAPPING",eB="@iiif/ADD_MAPPINGS",eH=(0,eR.createAction)(ez)(),eU=(0,eR.createAction)(eB)(),eq="@iiif/SET_META_VALUE",eZ="@iiif/SET_META_VALUE_DYNAMIC",eK="@iiif/UNSET_META_VALUE",eG=(0,eR.createAction)(eq)(),eX=(0,eR.createAction)(eZ)(),eY=(0,eR.createAction)(eK)(),eQ={setMetaValue:eG,setMetaValueDynamic:eX,unsetMetaValue:eY},eJ="RESOURCE_ERROR",e0="RESOURCE_LOADING",e1="RESOURCE_READY",e2="@iiif/REQUEST_RESOURCE",e3="@iiif/REQUEST_ERROR",e4="@iiif/REQUEST_MISMATCH",e6="@iiif/REQUEST_COMPLETE",e5="@iiif/REQUEST_OFFLINE_RESOURCE",e8=(0,eR.createAction)(e2)(),e9=(0,eR.createAction)(e3)(),e7=(0,eR.createAction)(e4)(),te=(0,eR.createAction)(e6)();(0,eR.createAction)(e5)();let tn="@iiif/BATCH",ti="@iiif/BATCH_IMPORT",ta=(0,eR.createAction)(tn)();(0,eR.createAction)(ti)();let actionListFromResource=(a,m)=>{let{entities:h,resource:g,mapping:v}=function(a){let m=a&&a["@context"]&&("http://iiif.io/api/presentation/2/context.json"===a["@context"]||-1!==a["@context"].indexOf("http://iiif.io/api/presentation/2/context.json")||"http://www.shared-canvas.org/ns/context.json"===a["@context"])||"http://iiif.io/api/image/2/context.json"===a["@context"]?eC.traverseUnknown(a):a,h={Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}},g={},addToEntities=(a,m)=>{let g=h[a]?h[a]:{};return h=>{let v=getResource(h,m||a);return v&&v.id&&a?(g[v.id]=g[v.id]?function(a,m){if("string"==typeof a)return a;if(m.id!==a.id||m.type!==a.type)throw Error("Can only merge entities with identical identifiers and type!");return function merge(a,m){if(!m)return a;if(Array.isArray(a)){if(!Array.isArray(m))throw Error("Cannot merge array with non-array");let h=[...a];for(let g of m)if(null!=g){if(Array.isArray(g))h.push(g);else if("object"==typeof g&&g.id&&g.type){let a=h.findIndex(a=>a.id===g.id&&a.type===g.type);a>=0&&(h[a]=merge(h[a],g))}else -1===a.indexOf(g)&&h.push(g)}return h}if("object"==typeof a){if(Array.isArray(m)||"object"!=typeof m)throw Error("Cannot merge object with non-object");let h={...a};for(let[a,g]of Object.entries(m)){let m=h[a];m!==_&&m?h[a]=merge(m,g):h[a]=g}return h}return a||m}({...a},m)}(g[v.id],v):Object.assign({},v),{id:v.id,type:"ContentResource"===a?a:v.type}):v}},addToMapping=(a,m)=>h=>{let{id:v,type:b}=getResource(h,m||a);if(void 0===v)throw Error("Found invalid entity without an ID.");return"ContentResource"===a?g[v]=a:g[v]=b,h},v=new Traverse$1({collection:[ensureDefaultFields(D),addToMapping("Collection"),addToEntities("Collection")],manifest:[ensureDefaultFields(N),addToMapping("Manifest"),addToEntities("Manifest")],canvas:[ensureDefaultFields(L),addToMapping("Canvas"),addToEntities("Canvas")],annotationPage:[addMissingIdToContentResource("AnnotationPage"),ensureDefaultFields(O),addToMapping("AnnotationPage"),addToEntities("AnnotationPage")],annotation:[addMissingIdToContentResource("Annotation"),ensureArrayOnAnnotation,addToMapping("Annotation"),addToEntities("Annotation")],contentResource:[addMissingIdToContentResource("ContentResource"),addToMapping("ContentResource"),addToEntities("ContentResource")],range:[ensureDefaultFields(j),addToMapping("Range","Canvas"),addToEntities("Range","Canvas")],agent:[ensureDefaultFields(W),addToMapping("Agent"),addToEntities("Agent")]}),b=v.traverseUnknown(m);return{entities:h,resource:b,mapping:g}}(m);if(void 0===g.id)return[e9({id:a,message:"ID is not defined in resource."})];let b=[eD({entities:h}),eU({mapping:v})];return g.id!==a&&(b.push(eH({id:a,type:g.type})),b.push(e7({requestId:a,actualId:g.id}))),b.push(te({id:a})),b},to=Number.isNaN||function(a){return"number"==typeof a&&a!=a};function areInputsEqual(a,m){if(!Array.isArray(a)||!Array.isArray(m))return a===m;if(a.length!==m.length)return!1;for(let v=0;v<a.length;v++){var h,g;if(!((h=a[v])===(g=m[v])||to(h)&&to(g)))return!1}return!0}function esm_resolveIfExists(a,m){let h=a.iiif.requests[m],g=a.iiif.mapping[m];if(g&&a.iiif.entities[g][h.resourceUri])return a.iiif.entities[g][h.resourceUri]}function createFetchHelper(a,m,{waitTimeout:h=30}={}){return async(g,v)=>{let b=a.getState(),w=b.iiif.requests[g];if(w)switch(w.loadingState){case eJ:break;case e0:{let m;let v=!1;try{let b=await Promise.race([new Promise((h,b)=>{v||(m=a.subscribe(()=>{let m=a.getState();if(m.iiif.requests[g].loadingState===eJ){b();return}if(m.iiif.requests[g].loadingState===e1){let a=esm_resolveIfExists(m,g);a?h(a):b()}}))}),new Promise((a,m)=>setTimeout(()=>{v=!0,m()},60*h))]);if(m&&m(),b)return b}catch(a){m&&m()}break}case e1:{let a=esm_resolveIfExists(b,g);if(a)return a}}a.dispatch(e8({id:g}));try{let h=await m(g,v);h.id||h["@id"]||(h["@type"]&&(h["@id"]=g),h.id=g);let b=actionListFromResource(g,h);return a.dispatch(ta({actions:b})),esm_resolveIfExists(a.getState(),g)}catch(m){throw a.dispatch(e9({id:g,message:m.toString()})),m}}}function esm_getDefaultEntities(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}function isReferenceList(a,m,h,g){return!(!a[h]||!a[h][m]||!a[h][m][g]||!Array.isArray(a[h][m][g]))}let tl=combineReducers({mapping:(a={},m)=>{switch(m.type){case ez:return{...a,[m.payload.id]:m.payload.type};case eB:return{...a,...m.payload.mapping};default:return a}},entities:(a=esm_getDefaultEntities(),m)=>{switch(m.type){case eO:{if(!a[m.payload.type]||!a[m.payload.type][m.payload.id])return a;let h=a[m.payload.type][m.payload.id];if("string"==typeof h)return a;return{...a,[m.payload.type]:{...a[m.payload.type],[m.payload.id]:{...h,[m.payload.key]:m.payload.value}}}}case eI:{if(!isReferenceList(a,m.payload.id,m.payload.type,m.payload.key))return a;let h=a[m.payload.type][m.payload.id];if("string"==typeof h)return a;let g=Array.from(h[m.payload.key]),[v]=g.splice(m.payload.startIndex,1);return g.splice(m.payload.endIndex,0,v),{...a,[m.payload.type]:{...a[m.payload.type],[m.payload.id]:{...h,[m.payload.key]:g}}}}case ek:{let h=Object.keys(m.payload.entities),g={...a};for(let v of h){let h=m.payload.entities[v],b={...a[v]||{}},w=!1,E=Object.keys(h||{})||[];if(h&&E){for(let m of E)w=!0,b[m]=a[v][m]?function(a,m){let h={},g=[];for(let[v,b]of Object.entries(a||{})){g.push(v);let a=(m||{})[v];if(!a||0===a.length){h[v]=b;continue}h[v]=a}for(let[a,v]of Object.entries(m||{}))-1===g.indexOf(a)&&(h[a]=v);return h}(a[v][m],h[m]):h[m];w&&(g[v]=b)}}return g}case eM:{if(!isReferenceList(a,m.payload.id,m.payload.type,m.payload.key))return a;let h=a[m.payload.type][m.payload.id],g=Array.from(h[m.payload.key]);return g.splice(m.payload.index||g.length+1,0,m.payload.reference),{...a,[m.payload.type]:{...a[m.payload.type],[m.payload.id]:{...h,[m.payload.key]:g}}}}case eL:{if(!isReferenceList(a,m.payload.id,m.payload.type,m.payload.key))return a;let h=a[m.payload.type][m.payload.id],g=Array.from(h[m.payload.key]),v=m.payload.index||g.findIndex(a=>a&&a.id===m.payload.reference.id);if(-1===v||g[v]?.id!==m.payload.reference.id)return a;return g.splice(v,1),{...a,[m.payload.type]:{...a[m.payload.type],[m.payload.id]:{...h,[m.payload.key]:g}}}}default:return a}},requests:(a={},m)=>{switch(m.type){case e2:case e5:return{...a,[m.payload.id]:{requestUri:m.payload.id,loadingState:e0,uriMismatch:!1,resourceUri:m.payload.id}};case e4:return{...a,[m.payload.requestId]:{...a[m.payload.requestId]||{},uriMismatch:!0,resourceUri:m.payload.actualId},[m.payload.actualId]:{requestUri:m.payload.requestId,loadingState:a[m.payload.requestId].loadingState,uriMismatch:!0,resourceUri:m.payload.actualId}};case e3:return{...a,[m.payload.id]:{...a[m.payload.id]||{},loadingState:eJ,error:m.payload.message}};case e6:return{...a,[m.payload.id]:{...a[m.payload.id]||{},loadingState:e1,error:void 0}}}return a},meta:(a={},m)=>{let{id:h,updateValue:g,value:v,meta:b,key:w}=m&&m.payload||{};switch(m.type){case eq:return{...a,[h]:{...a[h]||{},[b]:{...a[h]&&a[h][b]||{},[w]:v}}};case eZ:return{...a,[h]:{...a[h]||{},[b]:{...a[h]&&a[h][b]||{},[w]:g(a[h]&&a[h][b]?a[h][b][w]:void 0)}}};case eK:if(a[h]&&a[h][b]&&a[h][b][w])return{...a,[h]:{...a[h]||{},[b]:{...a[h]&&a[h][b]||{},[w]:void 0}}};return a;default:return a}}}),ts="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||compose;let Vault=class Vault{options;store;emitter;isBatching=!1;batchQueue=[];remoteFetcher;staticFetcher;constructor(a,m){var h;this.options=Object.assign({reducers:{},middleware:[],defaultState:{},customFetcher:this.defaultFetcher,enableDevtools:!0},a||{}),this.store=m||function(a={}){let{enableDevtools:m=!0,iiifStoreName:h="iiif",defaultState:g={},extraMiddleware:v=[],customReducers:b={}}=a,w=combineReducers({[h]:tl,...b}),E=function createStore(a,m,h){if("function"==typeof m&&"function"==typeof h||"function"==typeof h&&"function"==typeof arguments[3])throw Error(formatProdErrorMessage(0));if("function"==typeof m&&void 0===h&&(h=m,m=void 0),void 0!==h){if("function"!=typeof h)throw Error(formatProdErrorMessage(1));return h(createStore)(a,m)}if("function"!=typeof a)throw Error(formatProdErrorMessage(2));var g,v=a,b=m,w=[],E=w,C=!1;function ensureCanMutateNextListeners(){E===w&&(E=w.slice())}function getState(){if(C)throw Error(formatProdErrorMessage(3));return b}function subscribe(a){if("function"!=typeof a)throw Error(formatProdErrorMessage(4));if(C)throw Error(formatProdErrorMessage(5));var m=!0;return ensureCanMutateNextListeners(),E.push(a),function(){if(m){if(C)throw Error(formatProdErrorMessage(6));m=!1,ensureCanMutateNextListeners();var h=E.indexOf(a);E.splice(h,1),w=null}}}function dispatch(a){if(!function(a){if("object"!=typeof a||null===a)return!1;for(var m=a;null!==Object.getPrototypeOf(m);)m=Object.getPrototypeOf(m);return Object.getPrototypeOf(a)===m}(a))throw Error(formatProdErrorMessage(7));if(void 0===a.type)throw Error(formatProdErrorMessage(8));if(C)throw Error(formatProdErrorMessage(9));try{C=!0,b=v(b,a)}finally{C=!1}for(var m=w=E,h=0;h<m.length;h++)(0,m[h])();return a}return dispatch({type:e_.INIT}),(g={dispatch:dispatch,subscribe:subscribe,getState:getState,replaceReducer:function(a){if("function"!=typeof a)throw Error(formatProdErrorMessage(10));v=a,dispatch({type:e_.REPLACE})}})[eT]=function(){var a;return(a={subscribe:function(a){if("object"!=typeof a||null===a)throw Error(formatProdErrorMessage(11));function observeState(){a.next&&a.next(getState())}return observeState(),{unsubscribe:subscribe(observeState)}}})[eT]=function(){return this},a},g}((a,m)=>m&&m.type===tn?m.payload.actions.reduce(w,a):m&&m.type===ti?m.payload.state:w(a,m),g,m?ts(applyMiddleware(...v)):compose(applyMiddleware(...v)));return E}({customReducers:this.options.reducers,extraMiddleware:[...this.options.middleware,this.middleware],defaultState:this.options.defaultState,enableDevtools:this.options.enableDevtools}),this.emitter={all:h=h||new Map,on:function(a,m){var g=h.get(a);g?g.push(m):h.set(a,[m])},off:function(a,m){var g=h.get(a);g&&(m?g.splice(g.indexOf(m)>>>0,1):h.set(a,[]))},emit:function(a,m){var g=h.get(a);g&&g.slice().map(function(a){a(m)}),(g=h.get("*"))&&g.slice().map(function(h){h(a,m)})}},this.remoteFetcher=createFetchHelper(this.store,this.options.customFetcher),this.staticFetcher=createFetchHelper(this.store,(a,m)=>m)}defaultFetcher=a=>fetch(a).then(a=>a.json());batch(a){this.isBatching=!0;try{a(this),this.store.dispatch(ta({actions:this.batchQueue}))}catch(a){throw this.batchQueue=[],this.isBatching=!1,a}this.batchQueue=[],this.isBatching=!1}async asyncBatch(a){this.isBatching=!0;try{await a(this),this.store.dispatch(ta({actions:this.batchQueue}))}catch(a){throw this.batchQueue=[],this.isBatching=!1,a}this.batchQueue=[],this.isBatching=!1}modifyEntityField(a,m,h){this.dispatch(eV.modifyEntityField({id:a.id,type:a.type,key:m,value:h}))}dispatch(a){this.isBatching?this.batchQueue.push(a):this.store.dispatch(a)}middleware=a=>m=>h=>{if(h.type===tn){for(let m of h.payload.actions)this.emitter.emit(m.type,{realAction:m,state:a.getState()});let g=m(h);for(let a of h.payload.actions)this.emitter.emit(`after:${h.type}`,{action:h,state:g});return g}this.emitter.emit(h.type,{action:h,state:a.getState()});let g=m(h);return this.emitter.emit(`after:${h.type}`,{action:h,state:g}),g};serialize(a,m){return function(a,m,h){if(!m.type||!m.id)throw Error("Unknown entity");if(!h[m.type])throw Error(`Serializer not found for ${m.type}`);return function flatten(g){let v=h[g.type];if(!v)return eS;let b=function(a,m){let h=a.requests[m],g=a.mapping[m];if(g&&(!h||!h.resourceUri||a.entities[g][h.resourceUri]))return a.entities[g][h?h.resourceUri:m]}(a,g.id)||(g.id&&g.type?g:null);if(!b)return eS;let w=v(b,a,{isTopLevel:m.id===g.id}),E=w.next();for(;!E.done;){let a=E.value,m=eS;if(a){if(Array.isArray(a)){let h=[];for(let m of a)h.push(flatten(m));m=h}else m=flatten(a)}E=w.next(m)}return E.value===eS?eS:function(a){let m={};for(let[h,g]of a){if(h===eA&&g!==eS)return g;g!==eS&&null!=g&&(m[h]=g)}return m}(E.value)}(m)}(this.getState().iiif,a,m)}toPresentation2(a){return this.serialize(a,e$)}toPresentation3(a){return this.serialize(a,eP)}hydrate(a,m){return this.get(a,m,{skipSelfReturn:!1})}get(a,m,h={}){"string"!=typeof m&&(h=m||{},m=void 0);let{skipSelfReturn:g=!0}=h||{};if(Array.isArray(a))return a.map(a=>this.get(a,h));let v=this.getState();if("string"==typeof a){let h=m||v.iiif.mapping[a];if(!h)return g?null:{id:a,type:"unknown"};a={id:a,type:h}}let b=m||a.type,w=a.id,E=v.iiif.entities[b];if(!E){let m=v.iiif.requests[w];return m&&m.resourceUri!==w?this.get(m.resourceUri,h):g?null:a}return E[a.id]||(g?null:a)}select(a){return a(this.getState())}getStore(){return this.store}getState(){return this.store.getState()}loadManifest(a,m){let h="string"==typeof a?a:a.id;return this.load(h,m)}loadCollection(a,m){let h="string"==typeof a?a:a.id;return this.load(h,m)}load(a,m){let h="string"==typeof a?a:a.id;return m?this.staticFetcher(h,m):this.remoteFetcher(h)}areInputsEqual(a,m){return areInputsEqual(a,m)}subscribe(a,m,h){void 0===h&&(void 0===m||!1===m||!0===m)&&(h=m,m=a,a=a=>a);let g=h?null:a(this.store.getState());return h||m(g,this),this.store.subscribe(()=>{let h=this.store.getState(),v=a(h);g===v||areInputsEqual(g,v)||m(v,this),g=v})}async ensureLoaded(a){let m="string"==typeof a?a:a.id;this.requestStatus(m)||await this.load(m)}requestStatus(a){return this.select(m=>m.iiif.requests[a])}getResourceMeta(a,m){let h=this.getState().iiif.meta[a];return h?m?h[m]:h:void 0}setMetaValue([a,m,h],g){this.dispatch("function"==typeof g?eQ.setMetaValueDynamic({id:a,meta:m,key:h,updateValue:g}):eQ.setMetaValue({id:a,meta:m,key:h,value:g}))}};var tc=h(334),tu=h(4511),td=h(6744),tp=h(7462),tf=h(6206),tm=h(5360),th=h(5936),tg=h(8771),tv=h(1276),ty=h(5320),tb=h(9698),tw=h(7342),tE=h(8990);let tx="rovingFocusGroup.onEntryFocus",tC={bubbles:!1,cancelable:!0},tS="RovingFocusGroup",[tA,t$,tP]=(0,th.B)(tS),[tR,tT]=(0,tm.b)(tS,[tP]),[t_,tk]=tR(tS),tO=(0,$.forwardRef)((a,m)=>(0,$.createElement)(tA.Provider,{scope:a.__scopeRovingFocusGroup},(0,$.createElement)(tA.Slot,{scope:a.__scopeRovingFocusGroup},(0,$.createElement)(tI,(0,tp.Z)({},a,{ref:m}))))),tI=(0,$.forwardRef)((a,m)=>{let{__scopeRovingFocusGroup:h,orientation:g,loop:v=!1,dir:b,currentTabStopId:w,defaultCurrentTabStopId:E,onCurrentTabStopIdChange:C,onEntryFocus:T,..._}=a,O=(0,$.useRef)(null),L=(0,tg.e)(m,O),D=(0,tE.gm)(b),[N=null,j]=(0,tw.T)({prop:w,defaultProp:E,onChange:C}),[W,H]=(0,$.useState)(!1),U=(0,tb.W)(T),q=t$(h),Z=(0,$.useRef)(!1),[X,Y]=(0,$.useState)(0);return(0,$.useEffect)(()=>{let a=O.current;if(a)return a.addEventListener(tx,U),()=>a.removeEventListener(tx,U)},[U]),(0,$.createElement)(t_,{scope:h,orientation:g,dir:D,loop:v,currentTabStopId:N,onItemFocus:(0,$.useCallback)(a=>j(a),[j]),onItemShiftTab:(0,$.useCallback)(()=>H(!0),[]),onFocusableItemAdd:(0,$.useCallback)(()=>Y(a=>a+1),[]),onFocusableItemRemove:(0,$.useCallback)(()=>Y(a=>a-1),[])},(0,$.createElement)(ty.WV.div,(0,tp.Z)({tabIndex:W||0===X?-1:0,"data-orientation":g},_,{ref:L,style:{outline:"none",...a.style},onMouseDown:(0,tf.M)(a.onMouseDown,()=>{Z.current=!0}),onFocus:(0,tf.M)(a.onFocus,a=>{let m=!Z.current;if(a.target===a.currentTarget&&m&&!W){let m=new CustomEvent(tx,tC);if(a.currentTarget.dispatchEvent(m),!m.defaultPrevented){let a=q().filter(a=>a.focusable),m=a.find(a=>a.active),h=a.find(a=>a.id===N),g=[m,h,...a].filter(Boolean),v=g.map(a=>a.ref.current);$d7bdfb9eb0fdf311$var$focusFirst(v)}}Z.current=!1}),onBlur:(0,tf.M)(a.onBlur,()=>H(!1))})))}),tM=(0,$.forwardRef)((a,m)=>{let{__scopeRovingFocusGroup:h,focusable:g=!0,active:v=!1,tabStopId:b,...w}=a,E=(0,tv.M)(),C=b||E,T=tk("RovingFocusGroupItem",h),_=T.currentTabStopId===C,O=t$(h),{onFocusableItemAdd:L,onFocusableItemRemove:D}=T;return(0,$.useEffect)(()=>{if(g)return L(),()=>D()},[g,L,D]),(0,$.createElement)(tA.ItemSlot,{scope:h,id:C,focusable:g,active:v},(0,$.createElement)(ty.WV.span,(0,tp.Z)({tabIndex:_?0:-1,"data-orientation":T.orientation},w,{ref:m,onMouseDown:(0,tf.M)(a.onMouseDown,a=>{g?T.onItemFocus(C):a.preventDefault()}),onFocus:(0,tf.M)(a.onFocus,()=>T.onItemFocus(C)),onKeyDown:(0,tf.M)(a.onKeyDown,a=>{if("Tab"===a.key&&a.shiftKey){T.onItemShiftTab();return}if(a.target!==a.currentTarget)return;let m=function(a,m,h){var g;let v=(g=a.key,"rtl"!==h?g:"ArrowLeft"===g?"ArrowRight":"ArrowRight"===g?"ArrowLeft":g);if(!("vertical"===m&&["ArrowLeft","ArrowRight"].includes(v))&&!("horizontal"===m&&["ArrowUp","ArrowDown"].includes(v)))return tL[v]}(a,T.orientation,T.dir);if(void 0!==m){a.preventDefault();let v=O().filter(a=>a.focusable),b=v.map(a=>a.ref.current);if("last"===m)b.reverse();else if("prev"===m||"next"===m){var h,g;"prev"===m&&b.reverse();let v=b.indexOf(a.currentTarget);b=T.loop?(h=b,g=v+1,h.map((a,m)=>h[(g+m)%h.length])):b.slice(v+1)}setTimeout(()=>$d7bdfb9eb0fdf311$var$focusFirst(b))}})})))}),tL={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $d7bdfb9eb0fdf311$var$focusFirst(a){let m=document.activeElement;for(let h of a)if(h===m||(h.focus(),document.activeElement!==m))return}var tD=h(9115);let tF="Tabs",[tN,tj]=(0,tm.b)(tF,[tT]),tW=tT(),[tV,tz]=tN(tF),tB=(0,$.forwardRef)((a,m)=>{let{__scopeTabs:h,value:g,onValueChange:v,defaultValue:b,orientation:w="horizontal",dir:E,activationMode:C="automatic",...T}=a,_=(0,tE.gm)(E),[O,L]=(0,tw.T)({prop:g,onChange:v,defaultProp:b});return(0,$.createElement)(tV,{scope:h,baseId:(0,tv.M)(),value:O,onValueChange:L,orientation:w,dir:_,activationMode:C},(0,$.createElement)(ty.WV.div,(0,tp.Z)({dir:_,"data-orientation":w},T,{ref:m})))}),tH=(0,$.forwardRef)((a,m)=>{let{__scopeTabs:h,loop:g=!0,...v}=a,b=tz("TabsList",h),w=tW(h);return(0,$.createElement)(tO,(0,tp.Z)({asChild:!0},w,{orientation:b.orientation,dir:b.dir,loop:g}),(0,$.createElement)(ty.WV.div,(0,tp.Z)({role:"tablist","aria-orientation":b.orientation},v,{ref:m})))}),tU=(0,$.forwardRef)((a,m)=>{let{__scopeTabs:h,value:g,disabled:v=!1,...b}=a,w=tz("TabsTrigger",h),E=tW(h),C=$69cb30bb0017df05$var$makeTriggerId(w.baseId,g),T=$69cb30bb0017df05$var$makeContentId(w.baseId,g),_=g===w.value;return(0,$.createElement)(tM,(0,tp.Z)({asChild:!0},E,{focusable:!v,active:_}),(0,$.createElement)(ty.WV.button,(0,tp.Z)({type:"button",role:"tab","aria-selected":_,"aria-controls":T,"data-state":_?"active":"inactive","data-disabled":v?"":void 0,disabled:v,id:C},b,{ref:m,onMouseDown:(0,tf.M)(a.onMouseDown,a=>{v||0!==a.button||!1!==a.ctrlKey?a.preventDefault():w.onValueChange(g)}),onKeyDown:(0,tf.M)(a.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&w.onValueChange(g)}),onFocus:(0,tf.M)(a.onFocus,()=>{let a="manual"!==w.activationMode;_||v||!a||w.onValueChange(g)})})))}),tq=(0,$.forwardRef)((a,m)=>{let{__scopeTabs:h,value:g,forceMount:v,children:b,...w}=a,E=tz("TabsContent",h),C=$69cb30bb0017df05$var$makeTriggerId(E.baseId,g),T=$69cb30bb0017df05$var$makeContentId(E.baseId,g),_=g===E.value,O=(0,$.useRef)(_);return(0,$.useEffect)(()=>{let a=requestAnimationFrame(()=>O.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,$.createElement)(tD.z,{present:v||_},({present:h})=>(0,$.createElement)(ty.WV.div,(0,tp.Z)({"data-state":_?"active":"inactive","data-orientation":E.orientation,role:"tabpanel","aria-labelledby":C,hidden:!h,id:T,tabIndex:0},w,{ref:m,style:{...a.style,animationDuration:O.current?"0s":void 0}}),h&&b))});function $69cb30bb0017df05$var$makeTriggerId(a,m){return`${a}-trigger-${m}`}function $69cb30bb0017df05$var$makeContentId(a,m){return`${a}-content-${m}`}var tZ=h(1036),tK=h(3041);let tG="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var tX={randomUUID:tG};let tY=new Uint8Array(16),tQ=[];for(let a=0;a<256;++a)tQ.push((a+256).toString(16).slice(1));var esm_browser_v4=function(a,m,h){if(tX.randomUUID&&!m&&!a)return tX.randomUUID();a=a||{};let v=a.random||(a.rng||function(){if(!g&&!(g="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return g(tY)})();if(v[6]=15&v[6]|64,v[8]=63&v[8]|128,m){h=h||0;for(let a=0;a<16;++a)m[h+a]=v[a];return m}return function(a,m=0){return tQ[a[m+0]]+tQ[a[m+1]]+tQ[a[m+2]]+tQ[a[m+3]]+"-"+tQ[a[m+4]]+tQ[a[m+5]]+"-"+tQ[a[m+6]]+tQ[a[m+7]]+"-"+tQ[a[m+8]]+tQ[a[m+9]]+"-"+tQ[a[m+10]]+tQ[a[m+11]]+tQ[a[m+12]]+tQ[a[m+13]]+tQ[a[m+14]]+tQ[a[m+15]]}(v)},tJ=h(7546),t0=h(7898);let t1="Radio",[t2,t3]=(0,tm.b)(t1),[t4,t6]=t2(t1),t5=(0,$.forwardRef)((a,m)=>{let{__scopeRadio:h,name:g,checked:v=!1,required:b,disabled:w,value:E="on",onCheck:C,...T}=a,[_,O]=(0,$.useState)(null),L=(0,tg.e)(m,a=>O(a)),D=(0,$.useRef)(!1),N=!_||!!_.closest("form");return(0,$.createElement)(t4,{scope:h,checked:v,disabled:w},(0,$.createElement)(ty.WV.button,(0,tp.Z)({type:"button",role:"radio","aria-checked":v,"data-state":$ce77a8961b41be9e$var$getState(v),"data-disabled":w?"":void 0,disabled:w,value:E},T,{ref:L,onClick:(0,tf.M)(a.onClick,a=>{v||null==C||C(),N&&(D.current=a.isPropagationStopped(),D.current||a.stopPropagation())})})),N&&(0,$.createElement)(t8,{control:_,bubbles:!D.current,name:g,value:E,checked:v,required:b,disabled:w,style:{transform:"translateX(-100%)"}}))}),t8=((a,m)=>{let{__scopeRadio:h,forceMount:g,...v}=a,b=t6("RadioIndicator",h);return(0,$.createElement)(tD.z,{present:g||b.checked},(0,$.createElement)(ty.WV.span,(0,tp.Z)({"data-state":$ce77a8961b41be9e$var$getState(b.checked),"data-disabled":b.disabled?"":void 0},v,{ref:m})))},a=>{let{control:m,checked:h,bubbles:g=!0,...v}=a,b=(0,$.useRef)(null),w=(0,t0.D)(h),E=(0,tJ.t)(m);return(0,$.useEffect)(()=>{let a=b.current,m=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(m,"checked"),E=v.set;if(w!==h&&E){let m=new Event("click",{bubbles:g});E.call(a,h),a.dispatchEvent(m)}},[w,h,g]),(0,$.createElement)("input",(0,tp.Z)({type:"radio","aria-hidden":!0,defaultChecked:h},v,{tabIndex:-1,ref:b,style:{...a.style,...E,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))});function $ce77a8961b41be9e$var$getState(a){return a?"checked":"unchecked"}let t9=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],t7="RadioGroup",[rr,rn]=(0,tm.b)(t7,[tT,t3]),ri=tT(),ra=t3(),[ro,rl]=rr(t7),rs=(0,$.forwardRef)((a,m)=>{let{__scopeRadioGroup:h,name:g,defaultValue:v,value:b,required:w=!1,disabled:E=!1,orientation:C,dir:T,loop:_=!0,onValueChange:O,...L}=a,D=ri(h),N=(0,tE.gm)(T),[j,W]=(0,tw.T)({prop:b,defaultProp:v,onChange:O});return(0,$.createElement)(ro,{scope:h,name:g,required:w,disabled:E,value:j,onValueChange:W},(0,$.createElement)(tO,(0,tp.Z)({asChild:!0},D,{orientation:C,dir:N,loop:_}),(0,$.createElement)(ty.WV.div,(0,tp.Z)({role:"radiogroup","aria-required":w,"aria-orientation":C,"data-disabled":E?"":void 0,dir:N},L,{ref:m}))))}),rc=(0,$.forwardRef)((a,m)=>{let{__scopeRadioGroup:h,disabled:g,...v}=a,b=rl("RadioGroupItem",h),w=b.disabled||g,E=ri(h),C=ra(h),T=(0,$.useRef)(null),_=(0,tg.e)(m,T),O=b.value===v.value,L=(0,$.useRef)(!1);return(0,$.useEffect)(()=>{let handleKeyDown=a=>{t9.includes(a.key)&&(L.current=!0)},handleKeyUp=()=>L.current=!1;return document.addEventListener("keydown",handleKeyDown),document.addEventListener("keyup",handleKeyUp),()=>{document.removeEventListener("keydown",handleKeyDown),document.removeEventListener("keyup",handleKeyUp)}},[]),(0,$.createElement)(tM,(0,tp.Z)({asChild:!0},E,{focusable:!w,active:O}),(0,$.createElement)(t5,(0,tp.Z)({disabled:w,required:b.required,checked:O},C,v,{name:b.name,ref:_,onCheck:()=>b.onValueChange(v.value),onKeyDown:(0,tf.M)(a=>{"Enter"===a.key&&a.preventDefault()}),onFocus:(0,tf.M)(v.onFocus,()=>{var a;L.current&&(null===(a=T.current)||void 0===a||a.click())})})))});var ru=h(9821),rd=h(667),rp=h(7552),rf=h(5420);let rm=["top","right","bottom","left"],rh=Math.min,rg=Math.max,rv=Math.round,ry=Math.floor,createCoords=a=>({x:a,y:a}),rb={left:"right",right:"left",bottom:"top",top:"bottom"},rw={start:"end",end:"start"};function floating_ui_utils_evaluate(a,m){return"function"==typeof a?a(m):a}function floating_ui_utils_getSide(a){return a.split("-")[0]}function floating_ui_utils_getAlignment(a){return a.split("-")[1]}function getOppositeAxis(a){return"x"===a?"y":"x"}function getAxisLength(a){return"y"===a?"height":"width"}function floating_ui_utils_getSideAxis(a){return["top","bottom"].includes(floating_ui_utils_getSide(a))?"y":"x"}function floating_ui_utils_getOppositeAlignmentPlacement(a){return a.replace(/start|end/g,a=>rw[a])}function getOppositePlacement(a){return a.replace(/left|right|bottom|top/g,a=>rb[a])}function floating_ui_utils_getPaddingObject(a){return"number"!=typeof a?{top:0,right:0,bottom:0,left:0,...a}:{top:a,right:a,bottom:a,left:a}}function floating_ui_utils_rectToClientRect(a){return{...a,top:a.y,left:a.x,right:a.x+a.width,bottom:a.y+a.height}}function computeCoordsFromPlacement(a,m,h){let g,{reference:v,floating:b}=a,w=floating_ui_utils_getSideAxis(m),E=getOppositeAxis(floating_ui_utils_getSideAxis(m)),C=getAxisLength(E),$=floating_ui_utils_getSide(m),T="y"===w,_=v.x+v.width/2-b.width/2,O=v.y+v.height/2-b.height/2,L=v[C]/2-b[C]/2;switch($){case"top":g={x:_,y:v.y-b.height};break;case"bottom":g={x:_,y:v.y+v.height};break;case"right":g={x:v.x+v.width,y:O};break;case"left":g={x:v.x-b.width,y:O};break;default:g={x:v.x,y:v.y}}switch(floating_ui_utils_getAlignment(m)){case"start":g[E]-=L*(h&&T?-1:1);break;case"end":g[E]+=L*(h&&T?-1:1)}return g}let computePosition=async(a,m,h)=>{let{placement:g="bottom",strategy:v="absolute",middleware:b=[],platform:w}=h,E=b.filter(Boolean),C=await (null==w.isRTL?void 0:w.isRTL(m)),$=await w.getElementRects({reference:a,floating:m,strategy:v}),{x:T,y:_}=computeCoordsFromPlacement($,g,C),O=g,L={},D=0;for(let h=0;h<E.length;h++){let{name:b,fn:N}=E[h],{x:j,y:W,data:H,reset:U}=await N({x:T,y:_,initialPlacement:g,placement:O,strategy:v,middlewareData:L,rects:$,platform:w,elements:{reference:a,floating:m}});if(T=null!=j?j:T,_=null!=W?W:_,L={...L,[b]:{...L[b],...H}},U&&D<=50){D++,"object"==typeof U&&(U.placement&&(O=U.placement),U.rects&&($=!0===U.rects?await w.getElementRects({reference:a,floating:m,strategy:v}):U.rects),{x:T,y:_}=computeCoordsFromPlacement($,O,C)),h=-1;continue}}return{x:T,y:_,placement:O,strategy:v,middlewareData:L}};async function detectOverflow(a,m){var h;void 0===m&&(m={});let{x:g,y:v,platform:b,rects:w,elements:E,strategy:C}=a,{boundary:$="clippingAncestors",rootBoundary:T="viewport",elementContext:_="floating",altBoundary:O=!1,padding:L=0}=floating_ui_utils_evaluate(m,a),D=floating_ui_utils_getPaddingObject(L),N=E[O?"floating"===_?"reference":"floating":_],j=floating_ui_utils_rectToClientRect(await b.getClippingRect({element:null==(h=await (null==b.isElement?void 0:b.isElement(N)))||h?N:N.contextElement||await (null==b.getDocumentElement?void 0:b.getDocumentElement(E.floating)),boundary:$,rootBoundary:T,strategy:C})),W="floating"===_?{...w.floating,x:g,y:v}:w.reference,H=await (null==b.getOffsetParent?void 0:b.getOffsetParent(E.floating)),U=await (null==b.isElement?void 0:b.isElement(H))&&await (null==b.getScale?void 0:b.getScale(H))||{x:1,y:1},q=floating_ui_utils_rectToClientRect(b.convertOffsetParentRelativeRectToViewportRelativeRect?await b.convertOffsetParentRelativeRectToViewportRelativeRect({rect:W,offsetParent:H,strategy:C}):W);return{top:(j.top-q.top+D.top)/U.y,bottom:(q.bottom-j.bottom+D.bottom)/U.y,left:(j.left-q.left+D.left)/U.x,right:(q.right-j.right+D.right)/U.x}}let arrow=a=>({name:"arrow",options:a,async fn(m){let{x:h,y:g,placement:v,rects:b,platform:w,elements:E,middlewareData:C}=m,{element:$,padding:T=0}=floating_ui_utils_evaluate(a,m)||{};if(null==$)return{};let _=floating_ui_utils_getPaddingObject(T),O={x:h,y:g},L=getOppositeAxis(floating_ui_utils_getSideAxis(v)),D=getAxisLength(L),N=await w.getDimensions($),j="y"===L,W=j?"clientHeight":"clientWidth",H=b.reference[D]+b.reference[L]-O[L]-b.floating[D],U=O[L]-b.reference[L],q=await (null==w.getOffsetParent?void 0:w.getOffsetParent($)),Z=q?q[W]:0;Z&&await (null==w.isElement?void 0:w.isElement(q))||(Z=E.floating[W]||b.floating[D]);let X=Z/2-N[D]/2-1,Y=rh(_[j?"top":"left"],X),Q=rh(_[j?"bottom":"right"],X),J=Z-N[D]-Q,ee=Z/2-N[D]/2+(H/2-U/2),en=rg(Y,rh(ee,J)),ei=!C.arrow&&null!=floating_ui_utils_getAlignment(v)&&ee!=en&&b.reference[D]/2-(ee<Y?Y:Q)-N[D]/2<0,ea=ei?ee<Y?ee-Y:ee-J:0;return{[L]:O[L]+ea,data:{[L]:en,centerOffset:ee-en-ea,...ei&&{alignmentOffset:ea}},reset:ei}}}),flip=function(a){return void 0===a&&(a={}),{name:"flip",options:a,async fn(m){var h,g,v,b,w;let{placement:E,middlewareData:C,rects:$,initialPlacement:T,platform:_,elements:O}=m,{mainAxis:L=!0,crossAxis:D=!0,fallbackPlacements:N,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:W="none",flipAlignment:H=!0,...U}=floating_ui_utils_evaluate(a,m);if(null!=(h=C.arrow)&&h.alignmentOffset)return{};let q=floating_ui_utils_getSide(E),Z=floating_ui_utils_getSide(T)===T,X=await (null==_.isRTL?void 0:_.isRTL(O.floating)),Y=N||(Z||!H?[getOppositePlacement(T)]:function(a){let m=getOppositePlacement(a);return[floating_ui_utils_getOppositeAlignmentPlacement(a),m,floating_ui_utils_getOppositeAlignmentPlacement(m)]}(T));N||"none"===W||Y.push(...function(a,m,h,g){let v=floating_ui_utils_getAlignment(a),b=function(a,m,h){let g=["left","right"],v=["right","left"];switch(a){case"top":case"bottom":if(h)return m?v:g;return m?g:v;case"left":case"right":return m?["top","bottom"]:["bottom","top"];default:return[]}}(floating_ui_utils_getSide(a),"start"===h,g);return v&&(b=b.map(a=>a+"-"+v),m&&(b=b.concat(b.map(floating_ui_utils_getOppositeAlignmentPlacement)))),b}(T,H,W,X));let Q=[T,...Y],J=await detectOverflow(m,U),ee=[],en=(null==(g=C.flip)?void 0:g.overflows)||[];if(L&&ee.push(J[q]),D){let a=function(a,m,h){void 0===h&&(h=!1);let g=floating_ui_utils_getAlignment(a),v=getOppositeAxis(floating_ui_utils_getSideAxis(a)),b=getAxisLength(v),w="x"===v?g===(h?"end":"start")?"right":"left":"start"===g?"bottom":"top";return m.reference[b]>m.floating[b]&&(w=getOppositePlacement(w)),[w,getOppositePlacement(w)]}(E,$,X);ee.push(J[a[0]],J[a[1]])}if(en=[...en,{placement:E,overflows:ee}],!ee.every(a=>a<=0)){let a=((null==(v=C.flip)?void 0:v.index)||0)+1,m=Q[a];if(m)return{data:{index:a,overflows:en},reset:{placement:m}};let h=null==(b=en.filter(a=>a.overflows[0]<=0).sort((a,m)=>a.overflows[1]-m.overflows[1])[0])?void 0:b.placement;if(!h)switch(j){case"bestFit":{let a=null==(w=en.map(a=>[a.placement,a.overflows.filter(a=>a>0).reduce((a,m)=>a+m,0)]).sort((a,m)=>a[1]-m[1])[0])?void 0:w[0];a&&(h=a);break}case"initialPlacement":h=T}if(E!==h)return{reset:{placement:h}}}return{}}}};function getSideOffsets(a,m){return{top:a.top-m.height,right:a.right-m.width,bottom:a.bottom-m.height,left:a.left-m.width}}function isAnySideFullyClipped(a){return rm.some(m=>a[m]>=0)}let hide=function(a){return void 0===a&&(a={}),{name:"hide",options:a,async fn(m){let{rects:h}=m,{strategy:g="referenceHidden",...v}=floating_ui_utils_evaluate(a,m);switch(g){case"referenceHidden":{let a=await detectOverflow(m,{...v,elementContext:"reference"}),g=getSideOffsets(a,h.reference);return{data:{referenceHiddenOffsets:g,referenceHidden:isAnySideFullyClipped(g)}}}case"escaped":{let a=await detectOverflow(m,{...v,altBoundary:!0}),g=getSideOffsets(a,h.floating);return{data:{escapedOffsets:g,escaped:isAnySideFullyClipped(g)}}}default:return{}}}}};async function convertValueToCoords(a,m){let{placement:h,platform:g,elements:v}=a,b=await (null==g.isRTL?void 0:g.isRTL(v.floating)),w=floating_ui_utils_getSide(h),E=floating_ui_utils_getAlignment(h),C="y"===floating_ui_utils_getSideAxis(h),$=["left","top"].includes(w)?-1:1,T=b&&C?-1:1,_=floating_ui_utils_evaluate(m,a),{mainAxis:O,crossAxis:L,alignmentAxis:D}="number"==typeof _?{mainAxis:_,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,..._};return E&&"number"==typeof D&&(L="end"===E?-1*D:D),C?{x:L*T,y:O*$}:{x:O*$,y:L*T}}let offset=function(a){return void 0===a&&(a=0),{name:"offset",options:a,async fn(m){let{x:h,y:g}=m,v=await convertValueToCoords(m,a);return{x:h+v.x,y:g+v.y,data:v}}}},shift=function(a){return void 0===a&&(a={}),{name:"shift",options:a,async fn(m){let{x:h,y:g,placement:v}=m,{mainAxis:b=!0,crossAxis:w=!1,limiter:E={fn:a=>{let{x:m,y:h}=a;return{x:m,y:h}}},...C}=floating_ui_utils_evaluate(a,m),$={x:h,y:g},T=await detectOverflow(m,C),_=floating_ui_utils_getSideAxis(floating_ui_utils_getSide(v)),O=getOppositeAxis(_),L=$[O],D=$[_];if(b){let a=L+T["y"===O?"top":"left"],m=L-T["y"===O?"bottom":"right"];L=rg(a,rh(L,m))}if(w){let a="y"===_?"top":"left",m="y"===_?"bottom":"right",h=D+T[a],g=D-T[m];D=rg(h,rh(D,g))}let N=E.fn({...m,[O]:L,[_]:D});return{...N,data:{x:N.x-h,y:N.y-g}}}}},limitShift=function(a){return void 0===a&&(a={}),{options:a,fn(m){let{x:h,y:g,placement:v,rects:b,middlewareData:w}=m,{offset:E=0,mainAxis:C=!0,crossAxis:$=!0}=floating_ui_utils_evaluate(a,m),T={x:h,y:g},_=floating_ui_utils_getSideAxis(v),O=getOppositeAxis(_),L=T[O],D=T[_],N=floating_ui_utils_evaluate(E,m),j="number"==typeof N?{mainAxis:N,crossAxis:0}:{mainAxis:0,crossAxis:0,...N};if(C){let a="y"===O?"height":"width",m=b.reference[O]-b.floating[a]+j.mainAxis,h=b.reference[O]+b.reference[a]-j.mainAxis;L<m?L=m:L>h&&(L=h)}if($){var W,H;let a="y"===O?"width":"height",m=["top","left"].includes(floating_ui_utils_getSide(v)),h=b.reference[_]-b.floating[a]+(m&&(null==(W=w.offset)?void 0:W[_])||0)+(m?0:j.crossAxis),g=b.reference[_]+b.reference[a]+(m?0:(null==(H=w.offset)?void 0:H[_])||0)-(m?j.crossAxis:0);D<h?D=h:D>g&&(D=g)}return{[O]:L,[_]:D}}}},size=function(a){return void 0===a&&(a={}),{name:"size",options:a,async fn(m){let h,g;let{placement:v,rects:b,platform:w,elements:E}=m,{apply:C=()=>{},...$}=floating_ui_utils_evaluate(a,m),T=await detectOverflow(m,$),_=floating_ui_utils_getSide(v),O=floating_ui_utils_getAlignment(v),L="y"===floating_ui_utils_getSideAxis(v),{width:D,height:N}=b.floating;"top"===_||"bottom"===_?(h=_,g=O===(await (null==w.isRTL?void 0:w.isRTL(E.floating))?"start":"end")?"left":"right"):(g=_,h="end"===O?"top":"bottom");let j=N-T[h],W=D-T[g],H=!m.middlewareData.shift,U=j,q=W;if(L){let a=D-T.left-T.right;q=O||H?rh(W,a):a}else{let a=N-T.top-T.bottom;U=O||H?rh(j,a):a}if(H&&!O){let a=rg(T.left,0),m=rg(T.right,0),h=rg(T.top,0),g=rg(T.bottom,0);L?q=D-2*(0!==a||0!==m?a+m:rg(T.left,T.right)):U=N-2*(0!==h||0!==g?h+g:rg(T.top,T.bottom))}await C({...m,availableWidth:q,availableHeight:U});let Z=await w.getDimensions(E.floating);return D!==Z.width||N!==Z.height?{reset:{rects:!0}}:{}}}};function getNodeName(a){return isNode(a)?(a.nodeName||"").toLowerCase():"#document"}function getWindow(a){var m;return(null==a?void 0:null==(m=a.ownerDocument)?void 0:m.defaultView)||window}function getDocumentElement(a){var m;return null==(m=(isNode(a)?a.ownerDocument:a.document)||window.document)?void 0:m.documentElement}function isNode(a){return a instanceof Node||a instanceof getWindow(a).Node}function isElement(a){return a instanceof Element||a instanceof getWindow(a).Element}function isHTMLElement(a){return a instanceof HTMLElement||a instanceof getWindow(a).HTMLElement}function isShadowRoot(a){return"undefined"!=typeof ShadowRoot&&(a instanceof ShadowRoot||a instanceof getWindow(a).ShadowRoot)}function isOverflowElement(a){let{overflow:m,overflowX:h,overflowY:g,display:v}=floating_ui_utils_dom_getComputedStyle(a);return/auto|scroll|overlay|hidden|clip/.test(m+g+h)&&!["inline","contents"].includes(v)}function isContainingBlock(a){let m=isWebKit(),h=floating_ui_utils_dom_getComputedStyle(a);return"none"!==h.transform||"none"!==h.perspective||!!h.containerType&&"normal"!==h.containerType||!m&&!!h.backdropFilter&&"none"!==h.backdropFilter||!m&&!!h.filter&&"none"!==h.filter||["transform","perspective","filter"].some(a=>(h.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(h.contain||"").includes(a))}function isWebKit(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(a){return["html","body","#document"].includes(getNodeName(a))}function floating_ui_utils_dom_getComputedStyle(a){return getWindow(a).getComputedStyle(a)}function getNodeScroll(a){return isElement(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.pageXOffset,scrollTop:a.pageYOffset}}function getParentNode(a){if("html"===getNodeName(a))return a;let m=a.assignedSlot||a.parentNode||isShadowRoot(a)&&a.host||getDocumentElement(a);return isShadowRoot(m)?m.host:m}function getOverflowAncestors(a,m,h){var g;void 0===m&&(m=[]),void 0===h&&(h=!0);let v=function getNearestOverflowAncestor(a){let m=getParentNode(a);return isLastTraversableNode(m)?a.ownerDocument?a.ownerDocument.body:a.body:isHTMLElement(m)&&isOverflowElement(m)?m:getNearestOverflowAncestor(m)}(a),b=v===(null==(g=a.ownerDocument)?void 0:g.body),w=getWindow(v);return b?m.concat(w,w.visualViewport||[],isOverflowElement(v)?v:[],w.frameElement&&h?getOverflowAncestors(w.frameElement):[]):m.concat(v,getOverflowAncestors(v,[],h))}function getCssDimensions(a){let m=floating_ui_utils_dom_getComputedStyle(a),h=parseFloat(m.width)||0,g=parseFloat(m.height)||0,v=isHTMLElement(a),b=v?a.offsetWidth:h,w=v?a.offsetHeight:g,E=rv(h)!==b||rv(g)!==w;return E&&(h=b,g=w),{width:h,height:g,$:E}}function unwrapElement(a){return isElement(a)?a:a.contextElement}function getScale(a){let m=unwrapElement(a);if(!isHTMLElement(m))return createCoords(1);let h=m.getBoundingClientRect(),{width:g,height:v,$:b}=getCssDimensions(m),w=(b?rv(h.width):h.width)/g,E=(b?rv(h.height):h.height)/v;return w&&Number.isFinite(w)||(w=1),E&&Number.isFinite(E)||(E=1),{x:w,y:E}}let rE=createCoords(0);function getVisualOffsets(a){let m=getWindow(a);return isWebKit()&&m.visualViewport?{x:m.visualViewport.offsetLeft,y:m.visualViewport.offsetTop}:rE}function getBoundingClientRect(a,m,h,g){var v;void 0===m&&(m=!1),void 0===h&&(h=!1);let b=a.getBoundingClientRect(),w=unwrapElement(a),E=createCoords(1);m&&(g?isElement(g)&&(E=getScale(g)):E=getScale(a));let C=(void 0===(v=h)&&(v=!1),g&&(!v||g===getWindow(w))&&v)?getVisualOffsets(w):createCoords(0),$=(b.left+C.x)/E.x,T=(b.top+C.y)/E.y,_=b.width/E.x,O=b.height/E.y;if(w){let a=getWindow(w),m=g&&isElement(g)?getWindow(g):g,h=a.frameElement;for(;h&&g&&m!==a;){let a=getScale(h),m=h.getBoundingClientRect(),g=floating_ui_utils_dom_getComputedStyle(h),v=m.left+(h.clientLeft+parseFloat(g.paddingLeft))*a.x,b=m.top+(h.clientTop+parseFloat(g.paddingTop))*a.y;$*=a.x,T*=a.y,_*=a.x,O*=a.y,$+=v,T+=b,h=getWindow(h).frameElement}}return floating_ui_utils_rectToClientRect({width:_,height:O,x:$,y:T})}function getWindowScrollBarX(a){return getBoundingClientRect(getDocumentElement(a)).left+getNodeScroll(a).scrollLeft}function getClientRectFromClippingAncestor(a,m,h){let g;if("viewport"===m)g=function(a,m){let h=getWindow(a),g=getDocumentElement(a),v=h.visualViewport,b=g.clientWidth,w=g.clientHeight,E=0,C=0;if(v){b=v.width,w=v.height;let a=isWebKit();(!a||a&&"fixed"===m)&&(E=v.offsetLeft,C=v.offsetTop)}return{width:b,height:w,x:E,y:C}}(a,h);else if("document"===m)g=function(a){let m=getDocumentElement(a),h=getNodeScroll(a),g=a.ownerDocument.body,v=rg(m.scrollWidth,m.clientWidth,g.scrollWidth,g.clientWidth),b=rg(m.scrollHeight,m.clientHeight,g.scrollHeight,g.clientHeight),w=-h.scrollLeft+getWindowScrollBarX(a),E=-h.scrollTop;return"rtl"===floating_ui_utils_dom_getComputedStyle(g).direction&&(w+=rg(m.clientWidth,g.clientWidth)-v),{width:v,height:b,x:w,y:E}}(getDocumentElement(a));else if(isElement(m))g=function(a,m){let h=getBoundingClientRect(a,!0,"fixed"===m),g=h.top+a.clientTop,v=h.left+a.clientLeft,b=isHTMLElement(a)?getScale(a):createCoords(1),w=a.clientWidth*b.x,E=a.clientHeight*b.y,C=v*b.x,$=g*b.y;return{width:w,height:E,x:C,y:$}}(m,h);else{let h=getVisualOffsets(a);g={...m,x:m.x-h.x,y:m.y-h.y}}return floating_ui_utils_rectToClientRect(g)}function getTrueOffsetParent(a,m){return isHTMLElement(a)&&"fixed"!==floating_ui_utils_dom_getComputedStyle(a).position?m?m(a):a.offsetParent:null}function getOffsetParent(a,m){let h=getWindow(a);if(!isHTMLElement(a))return h;let g=getTrueOffsetParent(a,m);for(;g&&["table","td","th"].includes(getNodeName(g))&&"static"===floating_ui_utils_dom_getComputedStyle(g).position;)g=getTrueOffsetParent(g,m);return g&&("html"===getNodeName(g)||"body"===getNodeName(g)&&"static"===floating_ui_utils_dom_getComputedStyle(g).position&&!isContainingBlock(g))?h:g||function(a){let m=getParentNode(a);for(;isHTMLElement(m)&&!isLastTraversableNode(m);){if(isContainingBlock(m))return m;m=getParentNode(m)}return null}(a)||h}let getElementRects=async function(a){let{reference:m,floating:h,strategy:g}=a,v=this.getOffsetParent||getOffsetParent,b=this.getDimensions;return{reference:function(a,m,h){let g=isHTMLElement(m),v=getDocumentElement(m),b="fixed"===h,w=getBoundingClientRect(a,!0,b,m),E={scrollLeft:0,scrollTop:0},C=createCoords(0);if(g||!g&&!b){if(("body"!==getNodeName(m)||isOverflowElement(v))&&(E=getNodeScroll(m)),g){let a=getBoundingClientRect(m,!0,b,m);C.x=a.x+m.clientLeft,C.y=a.y+m.clientTop}else v&&(C.x=getWindowScrollBarX(v))}return{x:w.left+E.scrollLeft-C.x,y:w.top+E.scrollTop-C.y,width:w.width,height:w.height}}(m,await v(h),g),floating:{x:0,y:0,...await b(h)}}},rx={convertOffsetParentRelativeRectToViewportRelativeRect:function(a){let{rect:m,offsetParent:h,strategy:g}=a,v=isHTMLElement(h),b=getDocumentElement(h);if(h===b)return m;let w={scrollLeft:0,scrollTop:0},E=createCoords(1),C=createCoords(0);if((v||!v&&"fixed"!==g)&&(("body"!==getNodeName(h)||isOverflowElement(b))&&(w=getNodeScroll(h)),isHTMLElement(h))){let a=getBoundingClientRect(h);E=getScale(h),C.x=a.x+h.clientLeft,C.y=a.y+h.clientTop}return{width:m.width*E.x,height:m.height*E.y,x:m.x*E.x-w.scrollLeft*E.x+C.x,y:m.y*E.y-w.scrollTop*E.y+C.y}},getDocumentElement:getDocumentElement,getClippingRect:function(a){let{element:m,boundary:h,rootBoundary:g,strategy:v}=a,b="clippingAncestors"===h?function(a,m){let h=m.get(a);if(h)return h;let g=getOverflowAncestors(a,[],!1).filter(a=>isElement(a)&&"body"!==getNodeName(a)),v=null,b="fixed"===floating_ui_utils_dom_getComputedStyle(a).position,w=b?getParentNode(a):a;for(;isElement(w)&&!isLastTraversableNode(w);){let m=floating_ui_utils_dom_getComputedStyle(w),h=isContainingBlock(w);h||"fixed"!==m.position||(v=null);let E=b?!h&&!v:!h&&"static"===m.position&&!!v&&["absolute","fixed"].includes(v.position)||isOverflowElement(w)&&!h&&function hasFixedPositionAncestor(a,m){let h=getParentNode(a);return!(h===m||!isElement(h)||isLastTraversableNode(h))&&("fixed"===floating_ui_utils_dom_getComputedStyle(h).position||hasFixedPositionAncestor(h,m))}(a,w);E?g=g.filter(a=>a!==w):v=m,w=getParentNode(w)}return m.set(a,g),g}(m,this._c):[].concat(h),w=[...b,g],E=w[0],C=w.reduce((a,h)=>{let g=getClientRectFromClippingAncestor(m,h,v);return a.top=rg(g.top,a.top),a.right=rh(g.right,a.right),a.bottom=rh(g.bottom,a.bottom),a.left=rg(g.left,a.left),a},getClientRectFromClippingAncestor(m,E,v));return{width:C.right-C.left,height:C.bottom-C.top,x:C.left,y:C.top}},getOffsetParent,getElementRects,getClientRects:function(a){return Array.from(a.getClientRects())},getDimensions:function(a){return getCssDimensions(a)},getScale,isElement:isElement,isRTL:function(a){return"rtl"===floating_ui_utils_dom_getComputedStyle(a).direction}};function autoUpdate(a,m,h,g){let v;void 0===g&&(g={});let{ancestorScroll:b=!0,ancestorResize:w=!0,elementResize:E="function"==typeof ResizeObserver,layoutShift:C="function"==typeof IntersectionObserver,animationFrame:$=!1}=g,T=unwrapElement(a),_=b||w?[...T?getOverflowAncestors(T):[],...getOverflowAncestors(m)]:[];_.forEach(a=>{b&&a.addEventListener("scroll",h,{passive:!0}),w&&a.addEventListener("resize",h)});let O=T&&C?function(a,m){let h,g=null,v=getDocumentElement(a);function cleanup(){clearTimeout(h),g&&g.disconnect(),g=null}return!function refresh(b,w){void 0===b&&(b=!1),void 0===w&&(w=1),cleanup();let{left:E,top:C,width:$,height:T}=a.getBoundingClientRect();if(b||m(),!$||!T)return;let _=ry(C),O=ry(v.clientWidth-(E+$)),L=ry(v.clientHeight-(C+T)),D=ry(E),N={rootMargin:-_+"px "+-O+"px "+-L+"px "+-D+"px",threshold:rg(0,rh(1,w))||1},j=!0;function handleObserve(a){let m=a[0].intersectionRatio;if(m!==w){if(!j)return refresh();m?refresh(!1,m):h=setTimeout(()=>{refresh(!1,1e-7)},100)}j=!1}try{g=new IntersectionObserver(handleObserve,{...N,root:v.ownerDocument})}catch(a){g=new IntersectionObserver(handleObserve,N)}g.observe(a)}(!0),cleanup}(T,h):null,L=-1,D=null;E&&(D=new ResizeObserver(a=>{let[g]=a;g&&g.target===T&&D&&(D.unobserve(m),cancelAnimationFrame(L),L=requestAnimationFrame(()=>{D&&D.observe(m)})),h()}),T&&!$&&D.observe(T),D.observe(m));let N=$?getBoundingClientRect(a):null;return $&&function frameLoop(){let m=getBoundingClientRect(a);N&&(m.x!==N.x||m.y!==N.y||m.width!==N.width||m.height!==N.height)&&h(),N=m,v=requestAnimationFrame(frameLoop)}(),h(),()=>{_.forEach(a=>{b&&a.removeEventListener("scroll",h),w&&a.removeEventListener("resize",h)}),O&&O(),D&&D.disconnect(),D=null,$&&cancelAnimationFrame(v)}}let floating_ui_dom_computePosition=(a,m,h)=>{let g=new Map,v={platform:rx,...h},b={...v.platform,_c:g};return computePosition(a,m,{...v,platform:b})};var rC=h(3935);let floating_ui_react_dom_arrow=a=>({name:"arrow",options:a,fn(m){let{element:h,padding:g}="function"==typeof a?a(m):a;if(h&&({}).hasOwnProperty.call(h,"current")){if(null!=h.current)return arrow({element:h.current,padding:g}).fn(m)}else if(h)return arrow({element:h,padding:g}).fn(m);return{}}});var rS="undefined"!=typeof document?$.useLayoutEffect:$.useEffect;function deepEqual(a,m){let h,g,v;if(a===m)return!0;if(typeof a!=typeof m)return!1;if("function"==typeof a&&a.toString()===m.toString())return!0;if(a&&m&&"object"==typeof a){if(Array.isArray(a)){if((h=a.length)!=m.length)return!1;for(g=h;0!=g--;)if(!deepEqual(a[g],m[g]))return!1;return!0}if((h=(v=Object.keys(a)).length)!==Object.keys(m).length)return!1;for(g=h;0!=g--;)if(!({}).hasOwnProperty.call(m,v[g]))return!1;for(g=h;0!=g--;){let h=v[g];if(("_owner"!==h||!a.$$typeof)&&!deepEqual(a[h],m[h]))return!1}return!0}return a!=a&&m!=m}function getDPR(a){if("undefined"==typeof window)return 1;let m=a.ownerDocument.defaultView||window;return m.devicePixelRatio||1}function roundByDPR(a,m){let h=getDPR(a);return Math.round(m*h)/h}function useLatestRef(a){let m=$.useRef(a);return rS(()=>{m.current=a}),m}function useFloating(a){void 0===a&&(a={});let{placement:m="bottom",strategy:h="absolute",middleware:g=[],platform:v,elements:{reference:b,floating:w}={},transform:E=!0,whileElementsMounted:C,open:T}=a,[_,O]=$.useState({x:0,y:0,strategy:h,placement:m,middlewareData:{},isPositioned:!1}),[L,D]=$.useState(g);deepEqual(L,g)||D(g);let[N,j]=$.useState(null),[W,H]=$.useState(null),U=$.useCallback(a=>{a!=Y.current&&(Y.current=a,j(a))},[j]),q=$.useCallback(a=>{a!==Q.current&&(Q.current=a,H(a))},[H]),Z=b||N,X=w||W,Y=$.useRef(null),Q=$.useRef(null),J=$.useRef(_),ee=useLatestRef(C),en=useLatestRef(v),ei=$.useCallback(()=>{if(!Y.current||!Q.current)return;let a={placement:m,strategy:h,middleware:L};en.current&&(a.platform=en.current),floating_ui_dom_computePosition(Y.current,Q.current,a).then(a=>{let m={...a,isPositioned:!0};ea.current&&!deepEqual(J.current,m)&&(J.current=m,rC.flushSync(()=>{O(m)}))})},[L,m,h,en]);rS(()=>{!1===T&&J.current.isPositioned&&(J.current.isPositioned=!1,O(a=>({...a,isPositioned:!1})))},[T]);let ea=$.useRef(!1);rS(()=>(ea.current=!0,()=>{ea.current=!1}),[]),rS(()=>{if(Z&&(Y.current=Z),X&&(Q.current=X),Z&&X){if(ee.current)return ee.current(Z,X,ei);ei()}},[Z,X,ei,ee]);let eo=$.useMemo(()=>({reference:Y,floating:Q,setReference:U,setFloating:q}),[U,q]),el=$.useMemo(()=>({reference:Z,floating:X}),[Z,X]),es=$.useMemo(()=>{let a={position:h,left:0,top:0};if(!el.floating)return a;let m=roundByDPR(el.floating,_.x),g=roundByDPR(el.floating,_.y);return E?{...a,transform:"translate("+m+"px, "+g+"px)",...getDPR(el.floating)>=1.5&&{willChange:"transform"}}:{position:h,left:m,top:g}},[h,E,el.floating,_.x,_.y]);return $.useMemo(()=>({..._,update:ei,refs:eo,elements:el,floatingStyles:es}),[_,ei,eo,el,es])}let rA=(0,$.forwardRef)((a,m)=>{let{children:h,width:g=10,height:v=5,...b}=a;return(0,$.createElement)(ty.WV.svg,(0,tp.Z)({},b,{ref:m,width:g,height:v,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),a.asChild?h:(0,$.createElement)("polygon",{points:"0,0 30,0 15,10"}))});var r$=h(9981);let rP="Popper",[rR,rT]=(0,tm.b)(rP),[r_,rk]=rR(rP),rO=(0,$.forwardRef)((a,m)=>{let{__scopePopper:h,virtualRef:g,...v}=a,b=rk("PopperAnchor",h),w=(0,$.useRef)(null),E=(0,tg.e)(m,w);return(0,$.useEffect)(()=>{b.onAnchorChange((null==g?void 0:g.current)||w.current)}),g?null:(0,$.createElement)(ty.WV.div,(0,tp.Z)({},v,{ref:E}))}),rI="PopperContent",[rM,rL]=rR(rI),rD=(0,$.forwardRef)((a,m)=>{var h,g,v,b,w,E,C,T;let{__scopePopper:_,side:O="bottom",sideOffset:L=0,align:D="center",alignOffset:N=0,arrowPadding:j=0,avoidCollisions:W=!0,collisionBoundary:H=[],collisionPadding:U=0,sticky:q="partial",hideWhenDetached:Z=!1,updatePositionStrategy:X="optimized",onPlaced:Y,...Q}=a,J=rk(rI,_),[ee,en]=(0,$.useState)(null),ei=(0,tg.e)(m,a=>en(a)),[ea,eo]=(0,$.useState)(null),el=(0,tJ.t)(ea),es=null!==(h=null==el?void 0:el.width)&&void 0!==h?h:0,ec=null!==(g=null==el?void 0:el.height)&&void 0!==g?g:0,eu="number"==typeof U?U:{top:0,right:0,bottom:0,left:0,...U},ed=Array.isArray(H)?H:[H],ep=ed.length>0,ef={padding:eu,boundary:ed.filter($cf1ac5d9fe0e8206$var$isNotNull),altBoundary:ep},{refs:em,floatingStyles:eh,placement:eg,isPositioned:ev,middlewareData:ey}=useFloating({strategy:"fixed",placement:O+("center"!==D?"-"+D:""),whileElementsMounted:(...a)=>{let m=autoUpdate(...a,{animationFrame:"always"===X});return m},elements:{reference:J.anchor},middleware:[offset({mainAxis:L+ec,alignmentAxis:N}),W&&shift({mainAxis:!0,crossAxis:!1,limiter:"partial"===q?limitShift():void 0,...ef}),W&&flip({...ef}),size({...ef,apply:({elements:a,rects:m,availableWidth:h,availableHeight:g})=>{let{width:v,height:b}=m.reference,w=a.floating.style;w.setProperty("--radix-popper-available-width",`${h}px`),w.setProperty("--radix-popper-available-height",`${g}px`),w.setProperty("--radix-popper-anchor-width",`${v}px`),w.setProperty("--radix-popper-anchor-height",`${b}px`)}}),ea&&floating_ui_react_dom_arrow({element:ea,padding:j}),$cf1ac5d9fe0e8206$var$transformOrigin({arrowWidth:es,arrowHeight:ec}),Z&&hide({strategy:"referenceHidden",...ef})]}),[eb,ew]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(eg),eE=(0,tb.W)(Y);(0,r$.b)(()=>{ev&&(null==eE||eE())},[ev,eE]);let ex=null===(v=ey.arrow)||void 0===v?void 0:v.x,eC=null===(b=ey.arrow)||void 0===b?void 0:b.y,eS=(null===(w=ey.arrow)||void 0===w?void 0:w.centerOffset)!==0,[eA,e$]=(0,$.useState)();return(0,r$.b)(()=>{ee&&e$(window.getComputedStyle(ee).zIndex)},[ee]),(0,$.createElement)("div",{ref:em.setFloating,"data-radix-popper-content-wrapper":"",style:{...eh,transform:ev?eh.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:eA,"--radix-popper-transform-origin":[null===(E=ey.transformOrigin)||void 0===E?void 0:E.x,null===(C=ey.transformOrigin)||void 0===C?void 0:C.y].join(" ")},dir:a.dir},(0,$.createElement)(rM,{scope:_,placedSide:eb,onArrowChange:eo,arrowX:ex,arrowY:eC,shouldHideArrow:eS},(0,$.createElement)(ty.WV.div,(0,tp.Z)({"data-side":eb,"data-align":ew},Q,{ref:ei,style:{...Q.style,animation:ev?void 0:"none",opacity:null!==(T=ey.hide)&&void 0!==T&&T.referenceHidden?0:void 0}}))))}),rF={top:"bottom",right:"left",bottom:"top",left:"right"},rN=(0,$.forwardRef)(function(a,m){let{__scopePopper:h,...g}=a,v=rL("PopperArrow",h),b=rF[v.placedSide];return(0,$.createElement)("span",{ref:v.onArrowChange,style:{position:"absolute",left:v.arrowX,top:v.arrowY,[b]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[v.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[v.placedSide],visibility:v.shouldHideArrow?"hidden":void 0}},(0,$.createElement)(rA,(0,tp.Z)({},g,{ref:m,style:{...g.style,display:"block"}})))});function $cf1ac5d9fe0e8206$var$isNotNull(a){return null!==a}let $cf1ac5d9fe0e8206$var$transformOrigin=a=>({name:"transformOrigin",options:a,fn(m){var h,g,v,b,w;let{placement:E,rects:C,middlewareData:$}=m,T=(null===(h=$.arrow)||void 0===h?void 0:h.centerOffset)!==0,_=T?0:a.arrowWidth,O=T?0:a.arrowHeight,[L,D]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(E),N={start:"0%",center:"50%",end:"100%"}[D],j=(null!==(g=null===(v=$.arrow)||void 0===v?void 0:v.x)&&void 0!==g?g:0)+_/2,W=(null!==(b=null===(w=$.arrow)||void 0===w?void 0:w.y)&&void 0!==b?b:0)+O/2,H="",U="";return"bottom"===L?(H=T?N:`${j}px`,U=`${-O}px`):"top"===L?(H=T?N:`${j}px`,U=`${C.floating.height+O}px`):"right"===L?(H=`${-O}px`,U=T?N:`${W}px`):"left"===L&&(H=`${C.floating.width+O}px`,U=T?N:`${W}px`),{data:{x:H,y:U}}}});function $cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(a){let[m,h="center"]=a.split("-");return[m,h]}let $cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9=a=>{let{__scopePopper:m,children:h}=a,[g,v]=(0,$.useState)(null);return(0,$.createElement)(r_,{scope:m,anchor:g,onAnchorChange:v},h)};h(2651);var rj=h(8426),rW=h(3541),rV=h(6223);let rz="Popover",[rB,rH]=(0,tm.b)(rz,[rT]),rU=rT(),[rq,rZ]=rB(rz),rK=(0,$.forwardRef)((a,m)=>{let{__scopePopover:h,...g}=a,v=rZ("PopoverTrigger",h),b=rU(h),w=(0,tg.e)(m,v.triggerRef),E=(0,$.createElement)(ty.WV.button,(0,tp.Z)({type:"button","aria-haspopup":"dialog","aria-expanded":v.open,"aria-controls":v.contentId,"data-state":$cb5cc270b50c6fcd$var$getState(v.open)},g,{ref:w,onClick:(0,tf.M)(a.onClick,v.onOpenToggle)}));return v.hasCustomAnchor?E:(0,$.createElement)(rO,(0,tp.Z)({asChild:!0},b),E)}),[rG,rX]=rB("PopoverPortal",{forceMount:void 0}),rY="PopoverContent",rQ=(0,$.forwardRef)((a,m)=>{let h=rX(rY,a.__scopePopover),{forceMount:g=h.forceMount,...v}=a,b=rZ(rY,a.__scopePopover);return(0,$.createElement)(tD.z,{present:g||b.open},b.modal?(0,$.createElement)(rJ,(0,tp.Z)({},v,{ref:m})):(0,$.createElement)(r0,(0,tp.Z)({},v,{ref:m})))}),rJ=(0,$.forwardRef)((a,m)=>{let h=rZ(rY,a.__scopePopover),g=(0,$.useRef)(null),v=(0,tg.e)(m,g),b=(0,$.useRef)(!1);return(0,$.useEffect)(()=>{let a=g.current;if(a)return(0,rW.Ry)(a)},[]),(0,$.createElement)(rV.Z,{as:rj.g7,allowPinchZoom:!0},(0,$.createElement)(r1,(0,tp.Z)({},a,{ref:v,trapFocus:h.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,tf.M)(a.onCloseAutoFocus,a=>{var m;a.preventDefault(),b.current||null===(m=h.triggerRef.current)||void 0===m||m.focus()}),onPointerDownOutside:(0,tf.M)(a.onPointerDownOutside,a=>{let m=a.detail.originalEvent,h=0===m.button&&!0===m.ctrlKey,g=2===m.button||h;b.current=g},{checkForDefaultPrevented:!1}),onFocusOutside:(0,tf.M)(a.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})))}),r0=(0,$.forwardRef)((a,m)=>{let h=rZ(rY,a.__scopePopover),g=(0,$.useRef)(!1),v=(0,$.useRef)(!1);return(0,$.createElement)(r1,(0,tp.Z)({},a,{ref:m,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:m=>{var b,w;null===(b=a.onCloseAutoFocus)||void 0===b||b.call(a,m),m.defaultPrevented||(g.current||null===(w=h.triggerRef.current)||void 0===w||w.focus(),m.preventDefault()),g.current=!1,v.current=!1},onInteractOutside:m=>{var b,w;null===(b=a.onInteractOutside)||void 0===b||b.call(a,m),m.defaultPrevented||(g.current=!0,"pointerdown"!==m.detail.originalEvent.type||(v.current=!0));let E=m.target,C=null===(w=h.triggerRef.current)||void 0===w?void 0:w.contains(E);C&&m.preventDefault(),"focusin"===m.detail.originalEvent.type&&v.current&&m.preventDefault()}}))}),r1=(0,$.forwardRef)((a,m)=>{let{__scopePopover:h,trapFocus:g,onOpenAutoFocus:v,onCloseAutoFocus:b,disableOutsidePointerEvents:w,onEscapeKeyDown:E,onPointerDownOutside:C,onFocusOutside:T,onInteractOutside:_,...O}=a,L=rZ(rY,h),D=rU(h);return(0,rp.EW)(),(0,$.createElement)(rf.M,{asChild:!0,loop:!0,trapped:g,onMountAutoFocus:v,onUnmountAutoFocus:b},(0,$.createElement)(rd.XB,{asChild:!0,disableOutsidePointerEvents:w,onInteractOutside:_,onEscapeKeyDown:E,onPointerDownOutside:C,onFocusOutside:T,onDismiss:()=>L.onOpenChange(!1)},(0,$.createElement)(rD,(0,tp.Z)({"data-state":$cb5cc270b50c6fcd$var$getState(L.open),role:"dialog",id:L.contentId},D,O,{ref:m,style:{...O.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))}),r2=(0,$.forwardRef)((a,m)=>{let{__scopePopover:h,...g}=a,v=rZ("PopoverClose",h);return(0,$.createElement)(ty.WV.button,(0,tp.Z)({type:"button"},g,{ref:m,onClick:(0,tf.M)(a.onClick,()=>v.onOpenChange(!1))}))}),r3=(0,$.forwardRef)((a,m)=>{let{__scopePopover:h,...g}=a,v=rU(h);return(0,$.createElement)(rN,(0,tp.Z)({},v,g,{ref:m}))});function $cb5cc270b50c6fcd$var$getState(a){return a?"open":"closed"}var r4=h(9203);function $ae6933e535247d3d$export$7d15b64cf5a3a4c4(a,[m,h]){return Math.min(h,Math.max(m,a))}var r6=h(8724);let r5="dismissableLayer.update",r8=(0,$.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),r9=(0,$.forwardRef)((a,m)=>{var h;let{disableOutsidePointerEvents:g=!1,onEscapeKeyDown:b,onPointerDownOutside:w,onFocusOutside:E,onInteractOutside:C,onDismiss:T,..._}=a,O=(0,$.useContext)(r8),[L,D]=(0,$.useState)(null),N=null!==(h=null==L?void 0:L.ownerDocument)&&void 0!==h?h:null==globalThis?void 0:globalThis.document,[,j]=(0,$.useState)({}),W=(0,tg.e)(m,a=>D(a)),H=Array.from(O.layers),[U]=[...O.layersWithOutsidePointerEventsDisabled].slice(-1),q=H.indexOf(U),Z=L?H.indexOf(L):-1,X=O.layersWithOutsidePointerEventsDisabled.size>0,Y=Z>=q,Q=function(a,m=null==globalThis?void 0:globalThis.document){let h=(0,tb.W)(a),g=(0,$.useRef)(!1),v=(0,$.useRef)(()=>{});return(0,$.useEffect)(()=>{let handlePointerDown=a=>{if(a.target&&!g.current){let g={originalEvent:a};function handleAndDispatchPointerDownOutsideEvent(){$5cb92bef7577960e$var$handleAndDispatchCustomEvent("dismissableLayer.pointerDownOutside",h,g,{discrete:!0})}"touch"===a.pointerType?(m.removeEventListener("click",v.current),v.current=handleAndDispatchPointerDownOutsideEvent,m.addEventListener("click",v.current,{once:!0})):handleAndDispatchPointerDownOutsideEvent()}g.current=!1},a=window.setTimeout(()=>{m.addEventListener("pointerdown",handlePointerDown)},0);return()=>{window.clearTimeout(a),m.removeEventListener("pointerdown",handlePointerDown),m.removeEventListener("click",v.current)}},[m,h]),{onPointerDownCapture:()=>g.current=!0}}(a=>{let m=a.target,h=[...O.branches].some(a=>a.contains(m));!Y||h||(null==w||w(a),null==C||C(a),a.defaultPrevented||null==T||T())},N),J=function(a,m=null==globalThis?void 0:globalThis.document){let h=(0,tb.W)(a),g=(0,$.useRef)(!1);return(0,$.useEffect)(()=>{let handleFocus=a=>{a.target&&!g.current&&$5cb92bef7577960e$var$handleAndDispatchCustomEvent("dismissableLayer.focusOutside",h,{originalEvent:a},{discrete:!1})};return m.addEventListener("focusin",handleFocus),()=>m.removeEventListener("focusin",handleFocus)},[m,h]),{onFocusCapture:()=>g.current=!0,onBlurCapture:()=>g.current=!1}}(a=>{let m=a.target,h=[...O.branches].some(a=>a.contains(m));h||(null==E||E(a),null==C||C(a),a.defaultPrevented||null==T||T())},N);return(0,r6.e)(a=>{let m=Z===O.layers.size-1;m&&(null==b||b(a),!a.defaultPrevented&&T&&(a.preventDefault(),T()))},N),(0,$.useEffect)(()=>{if(L)return g&&(0===O.layersWithOutsidePointerEventsDisabled.size&&(v=N.body.style.pointerEvents,N.body.style.pointerEvents="none"),O.layersWithOutsidePointerEventsDisabled.add(L)),O.layers.add(L),$5cb92bef7577960e$var$dispatchUpdate(),()=>{g&&1===O.layersWithOutsidePointerEventsDisabled.size&&(N.body.style.pointerEvents=v)}},[L,N,g,O]),(0,$.useEffect)(()=>()=>{L&&(O.layers.delete(L),O.layersWithOutsidePointerEventsDisabled.delete(L),$5cb92bef7577960e$var$dispatchUpdate())},[L,O]),(0,$.useEffect)(()=>{let handleUpdate=()=>j({});return document.addEventListener(r5,handleUpdate),()=>document.removeEventListener(r5,handleUpdate)},[]),(0,$.createElement)(ty.WV.div,(0,tp.Z)({},_,{ref:W,style:{pointerEvents:X?Y?"auto":"none":void 0,...a.style},onFocusCapture:(0,tf.M)(a.onFocusCapture,J.onFocusCapture),onBlurCapture:(0,tf.M)(a.onBlurCapture,J.onBlurCapture),onPointerDownCapture:(0,tf.M)(a.onPointerDownCapture,Q.onPointerDownCapture)}))});function $5cb92bef7577960e$var$dispatchUpdate(){let a=new CustomEvent(r5);document.dispatchEvent(a)}function $5cb92bef7577960e$var$handleAndDispatchCustomEvent(a,m,h,{discrete:g}){let v=h.originalEvent.target,b=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:h});m&&v.addEventListener(a,m,{once:!0}),g?(0,ty.jH)(v,b):v.dispatchEvent(b)}let r7="focusScope.autoFocusOnMount",ne="focusScope.autoFocusOnUnmount",nr={bubbles:!1,cancelable:!0},nn=(0,$.forwardRef)((a,m)=>{let{loop:h=!1,trapped:g=!1,onMountAutoFocus:v,onUnmountAutoFocus:b,...w}=a,[E,C]=(0,$.useState)(null),T=(0,tb.W)(v),_=(0,tb.W)(b),O=(0,$.useRef)(null),L=(0,tg.e)(m,a=>C(a)),D=(0,$.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,$.useEffect)(()=>{if(g){function handleFocusIn(a){if(D.paused||!E)return;let m=a.target;E.contains(m)?O.current=m:$d3863c46a17e8a28$var$focus(O.current,{select:!0})}function handleFocusOut(a){if(D.paused||!E)return;let m=a.relatedTarget;null===m||E.contains(m)||$d3863c46a17e8a28$var$focus(O.current,{select:!0})}document.addEventListener("focusin",handleFocusIn),document.addEventListener("focusout",handleFocusOut);let a=new MutationObserver(function(a){let m=document.activeElement;for(let h of a)h.removedNodes.length>0&&!(null!=E&&E.contains(m))&&$d3863c46a17e8a28$var$focus(E)});return E&&a.observe(E,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",handleFocusIn),document.removeEventListener("focusout",handleFocusOut),a.disconnect()}}},[g,E,D.paused]),(0,$.useEffect)(()=>{if(E){ni.add(D);let a=document.activeElement,m=E.contains(a);if(!m){let m=new CustomEvent(r7,nr);E.addEventListener(r7,T),E.dispatchEvent(m),m.defaultPrevented||(function(a,{select:m=!1}={}){let h=document.activeElement;for(let g of a)if($d3863c46a17e8a28$var$focus(g,{select:m}),document.activeElement!==h)return}($d3863c46a17e8a28$var$getTabbableCandidates(E).filter(a=>"A"!==a.tagName),{select:!0}),document.activeElement===a&&$d3863c46a17e8a28$var$focus(E))}return()=>{E.removeEventListener(r7,T),setTimeout(()=>{let m=new CustomEvent(ne,nr);E.addEventListener(ne,_),E.dispatchEvent(m),m.defaultPrevented||$d3863c46a17e8a28$var$focus(null!=a?a:document.body,{select:!0}),E.removeEventListener(ne,_),ni.remove(D)},0)}}},[E,T,_,D]);let N=(0,$.useCallback)(a=>{if(!h&&!g||D.paused)return;let m="Tab"===a.key&&!a.altKey&&!a.ctrlKey&&!a.metaKey,v=document.activeElement;if(m&&v){let m=a.currentTarget,[g,b]=function(a){let m=$d3863c46a17e8a28$var$getTabbableCandidates(a),h=$d3863c46a17e8a28$var$findVisible(m,a),g=$d3863c46a17e8a28$var$findVisible(m.reverse(),a);return[h,g]}(m),w=g&&b;w?a.shiftKey||v!==b?a.shiftKey&&v===g&&(a.preventDefault(),h&&$d3863c46a17e8a28$var$focus(b,{select:!0})):(a.preventDefault(),h&&$d3863c46a17e8a28$var$focus(g,{select:!0})):v===m&&a.preventDefault()}},[h,g,D.paused]);return(0,$.createElement)(ty.WV.div,(0,tp.Z)({tabIndex:-1},w,{ref:L,onKeyDown:N}))});function $d3863c46a17e8a28$var$getTabbableCandidates(a){let m=[],h=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{let m="INPUT"===a.tagName&&"hidden"===a.type;return a.disabled||a.hidden||m?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;h.nextNode();)m.push(h.currentNode);return m}function $d3863c46a17e8a28$var$findVisible(a,m){for(let h of a)if(!function(a,{upTo:m}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===m||a!==m);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}(h,{upTo:m}))return h}function $d3863c46a17e8a28$var$focus(a,{select:m=!1}={}){if(a&&a.focus){var h;let g=document.activeElement;a.focus({preventScroll:!0}),a!==g&&(h=a)instanceof HTMLInputElement&&"select"in h&&m&&a.select()}}let ni=(b=[],{add(a){let m=b[0];a!==m&&(null==m||m.pause()),(b=$d3863c46a17e8a28$var$arrayRemove(b,a)).unshift(a)},remove(a){var m;null===(m=(b=$d3863c46a17e8a28$var$arrayRemove(b,a))[0])||void 0===m||m.resume()}});function $d3863c46a17e8a28$var$arrayRemove(a,m){let h=[...a],g=h.indexOf(m);return -1!==g&&h.splice(g,1),h}let na="Popper",[no,nl]=(0,tm.b)(na),[ns,nc]=no(na),nu=(0,$.forwardRef)((a,m)=>{let{__scopePopper:h,virtualRef:g,...v}=a,b=nc("PopperAnchor",h),w=(0,$.useRef)(null),E=(0,tg.e)(m,w);return(0,$.useEffect)(()=>{b.onAnchorChange((null==g?void 0:g.current)||w.current)}),g?null:(0,$.createElement)(ty.WV.div,(0,tp.Z)({},v,{ref:E}))}),nd="PopperContent",[np,nf]=no(nd),nm=(0,$.forwardRef)((a,m)=>{var h,g,v,b,w,E,C,T;let{__scopePopper:_,side:O="bottom",sideOffset:L=0,align:D="center",alignOffset:N=0,arrowPadding:j=0,collisionBoundary:W=[],collisionPadding:H=0,sticky:U="partial",hideWhenDetached:q=!1,avoidCollisions:Z=!0,onPlaced:X,...Y}=a,Q=nc(nd,_),[J,ee]=(0,$.useState)(null),en=(0,tg.e)(m,a=>ee(a)),[ei,ea]=(0,$.useState)(null),eo=(0,tJ.t)(ei),el=null!==(h=null==eo?void 0:eo.width)&&void 0!==h?h:0,es=null!==(g=null==eo?void 0:eo.height)&&void 0!==g?g:0,ec="number"==typeof H?H:{top:0,right:0,bottom:0,left:0,...H},eu=Array.isArray(W)?W:[W],ed=eu.length>0,ep={padding:ec,boundary:eu.filter(dist_$cf1ac5d9fe0e8206$var$isNotNull),altBoundary:ed},{refs:ef,floatingStyles:em,placement:eh,isPositioned:eg,middlewareData:ev}=useFloating({strategy:"fixed",placement:O+("center"!==D?"-"+D:""),whileElementsMounted:autoUpdate,elements:{reference:Q.anchor},middleware:[offset({mainAxis:L+es,alignmentAxis:N}),Z&&shift({mainAxis:!0,crossAxis:!1,limiter:"partial"===U?limitShift():void 0,...ep}),Z&&flip({...ep}),size({...ep,apply:({elements:a,rects:m,availableWidth:h,availableHeight:g})=>{let{width:v,height:b}=m.reference,w=a.floating.style;w.setProperty("--radix-popper-available-width",`${h}px`),w.setProperty("--radix-popper-available-height",`${g}px`),w.setProperty("--radix-popper-anchor-width",`${v}px`),w.setProperty("--radix-popper-anchor-height",`${b}px`)}}),ei&&floating_ui_react_dom_arrow({element:ei,padding:j}),dist_$cf1ac5d9fe0e8206$var$transformOrigin({arrowWidth:el,arrowHeight:es}),q&&hide({strategy:"referenceHidden"})]}),[ey,eb]=dist_$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(eh),ew=(0,tb.W)(X);(0,r$.b)(()=>{eg&&(null==ew||ew())},[eg,ew]);let eE=null===(v=ev.arrow)||void 0===v?void 0:v.x,ex=null===(b=ev.arrow)||void 0===b?void 0:b.y,eC=(null===(w=ev.arrow)||void 0===w?void 0:w.centerOffset)!==0,[eS,eA]=(0,$.useState)();return(0,r$.b)(()=>{J&&eA(window.getComputedStyle(J).zIndex)},[J]),(0,$.createElement)("div",{ref:ef.setFloating,"data-radix-popper-content-wrapper":"",style:{...em,transform:eg?em.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:eS,"--radix-popper-transform-origin":[null===(E=ev.transformOrigin)||void 0===E?void 0:E.x,null===(C=ev.transformOrigin)||void 0===C?void 0:C.y].join(" ")},dir:a.dir},(0,$.createElement)(np,{scope:_,placedSide:ey,onArrowChange:ea,arrowX:eE,arrowY:ex,shouldHideArrow:eC},(0,$.createElement)(ty.WV.div,(0,tp.Z)({"data-side":ey,"data-align":eb},Y,{ref:en,style:{...Y.style,animation:eg?void 0:"none",opacity:null!==(T=ev.hide)&&void 0!==T&&T.referenceHidden?0:void 0}}))))}),nh={top:"bottom",right:"left",bottom:"top",left:"right"};function dist_$cf1ac5d9fe0e8206$var$isNotNull(a){return null!==a}let dist_$cf1ac5d9fe0e8206$var$transformOrigin=a=>({name:"transformOrigin",options:a,fn(m){var h,g,v,b,w;let{placement:E,rects:C,middlewareData:$}=m,T=(null===(h=$.arrow)||void 0===h?void 0:h.centerOffset)!==0,_=T?0:a.arrowWidth,O=T?0:a.arrowHeight,[L,D]=dist_$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(E),N={start:"0%",center:"50%",end:"100%"}[D],j=(null!==(g=null===(v=$.arrow)||void 0===v?void 0:v.x)&&void 0!==g?g:0)+_/2,W=(null!==(b=null===(w=$.arrow)||void 0===w?void 0:w.y)&&void 0!==b?b:0)+O/2,H="",U="";return"bottom"===L?(H=T?N:`${j}px`,U=`${-O}px`):"top"===L?(H=T?N:`${j}px`,U=`${C.floating.height+O}px`):"right"===L?(H=`${-O}px`,U=T?N:`${W}px`):"left"===L&&(H=`${C.floating.width+O}px`,U=T?N:`${W}px`),{data:{x:H,y:U}}}});function dist_$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(a){let[m,h="center"]=a.split("-");return[m,h]}let dist_$cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9=a=>{let{__scopePopper:m,children:h}=a,[g,v]=(0,$.useState)(null);return(0,$.createElement)(ns,{scope:m,anchor:g,onAnchorChange:v},h)},ng=((a,m)=>{var h;let{container:g=null==globalThis?void 0:null===(h=globalThis.document)||void 0===h?void 0:h.body,...v}=a;return g?rC.createPortal((0,$.createElement)(ty.WV.div,(0,tp.Z)({},v,{ref:m})),g):null},(0,$.forwardRef)((a,m)=>(0,$.createElement)(ty.WV.span,(0,tp.Z)({},a,{ref:m,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...a.style}})))),nv=[" ","Enter","ArrowUp","ArrowDown"],ny=[" ","Enter"],nb="Select",[nw,nE,nx]=(0,th.B)(nb),[nC,nS]=(0,tm.b)(nb,[nx,nl]),nA=nl(),[n$,nP]=nC(nb),[nR,nT]=nC(nb),n_=(0,$.forwardRef)((a,m)=>{let{__scopeSelect:h,disabled:g=!1,...v}=a,b=nA(h),w=nP("SelectTrigger",h),E=w.disabled||g,C=(0,tg.e)(m,w.onTriggerChange),T=nE(h),[_,O,L]=$cc7e05a45900e73f$var$useTypeaheadSearch(a=>{let m=T().filter(a=>!a.disabled),h=m.find(a=>a.value===w.value),g=$cc7e05a45900e73f$var$findNextItem(m,a,h);void 0!==g&&w.onValueChange(g.value)}),handleOpen=()=>{E||(w.onOpenChange(!0),L())};return(0,$.createElement)(nu,(0,tp.Z)({asChild:!0},b),(0,$.createElement)(ty.WV.button,(0,tp.Z)({type:"button",role:"combobox","aria-controls":w.contentId,"aria-expanded":w.open,"aria-required":w.required,"aria-autocomplete":"none",dir:w.dir,"data-state":w.open?"open":"closed",disabled:E,"data-disabled":E?"":void 0,"data-placeholder":void 0===w.value?"":void 0},v,{ref:C,onClick:(0,tf.M)(v.onClick,a=>{a.currentTarget.focus()}),onPointerDown:(0,tf.M)(v.onPointerDown,a=>{let m=a.target;m.hasPointerCapture(a.pointerId)&&m.releasePointerCapture(a.pointerId),0===a.button&&!1===a.ctrlKey&&(handleOpen(),w.triggerPointerDownPosRef.current={x:Math.round(a.pageX),y:Math.round(a.pageY)},a.preventDefault())}),onKeyDown:(0,tf.M)(v.onKeyDown,a=>{let m=""!==_.current,h=a.ctrlKey||a.altKey||a.metaKey;h||1!==a.key.length||O(a.key),(!m||" "!==a.key)&&nv.includes(a.key)&&(handleOpen(),a.preventDefault())})})))}),nk=(0,$.forwardRef)((a,m)=>{let{__scopeSelect:h,className:g,style:v,children:b,placeholder:w,...E}=a,C=nP("SelectValue",h),{onValueNodeHasChildrenChange:T}=C,_=void 0!==b,O=(0,tg.e)(m,C.onValueNodeChange);return(0,r$.b)(()=>{T(_)},[T,_]),(0,$.createElement)(ty.WV.span,(0,tp.Z)({},E,{ref:O,style:{pointerEvents:"none"}}),void 0===C.value&&void 0!==w?w:b)}),nO=(0,$.forwardRef)((a,m)=>{let{__scopeSelect:h,children:g,...v}=a;return(0,$.createElement)(ty.WV.span,(0,tp.Z)({"aria-hidden":!0},v,{ref:m}),g||"")}),nI="SelectContent",nM=(0,$.forwardRef)((a,m)=>{let h=nP(nI,a.__scopeSelect),[g,v]=(0,$.useState)();return((0,r$.b)(()=>{v(new DocumentFragment)},[]),h.open)?(0,$.createElement)(nF,(0,tp.Z)({},a,{ref:m})):g?(0,rC.createPortal)((0,$.createElement)(nL,{scope:a.__scopeSelect},(0,$.createElement)(nw.Slot,{scope:a.__scopeSelect},(0,$.createElement)("div",null,a.children))),g):null}),[nL,nD]=nC(nI),nF=(0,$.forwardRef)((a,m)=>{let{__scopeSelect:h,position:g="item-aligned",onCloseAutoFocus:v,onEscapeKeyDown:b,onPointerDownOutside:w,side:E,sideOffset:C,align:T,alignOffset:_,arrowPadding:O,collisionBoundary:L,collisionPadding:D,sticky:N,hideWhenDetached:j,avoidCollisions:W,...H}=a,U=nP(nI,h),[q,Z]=(0,$.useState)(null),[X,Y]=(0,$.useState)(null),Q=(0,tg.e)(m,a=>Z(a)),[J,ee]=(0,$.useState)(null),[en,ei]=(0,$.useState)(null),ea=nE(h),[eo,el]=(0,$.useState)(!1),es=(0,$.useRef)(!1);(0,$.useEffect)(()=>{if(q)return(0,rW.Ry)(q)},[q]),(0,rp.EW)();let ec=(0,$.useCallback)(a=>{let[m,...h]=ea().map(a=>a.ref.current),[g]=h.slice(-1),v=document.activeElement;for(let h of a)if(h===v||(null==h||h.scrollIntoView({block:"nearest"}),h===m&&X&&(X.scrollTop=0),h===g&&X&&(X.scrollTop=X.scrollHeight),null==h||h.focus(),document.activeElement!==v))return},[ea,X]),eu=(0,$.useCallback)(()=>ec([J,q]),[ec,J,q]);(0,$.useEffect)(()=>{eo&&eu()},[eo,eu]);let{onOpenChange:ed,triggerPointerDownPosRef:ep}=U;(0,$.useEffect)(()=>{if(q){let a={x:0,y:0},handlePointerMove=m=>{var h,g,v,b;a={x:Math.abs(Math.round(m.pageX)-(null!==(h=null===(g=ep.current)||void 0===g?void 0:g.x)&&void 0!==h?h:0)),y:Math.abs(Math.round(m.pageY)-(null!==(v=null===(b=ep.current)||void 0===b?void 0:b.y)&&void 0!==v?v:0))}},handlePointerUp=m=>{a.x<=10&&a.y<=10?m.preventDefault():q.contains(m.target)||ed(!1),document.removeEventListener("pointermove",handlePointerMove),ep.current=null};return null!==ep.current&&(document.addEventListener("pointermove",handlePointerMove),document.addEventListener("pointerup",handlePointerUp,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",handlePointerMove),document.removeEventListener("pointerup",handlePointerUp,{capture:!0})}}},[q,ed,ep]),(0,$.useEffect)(()=>{let close=()=>ed(!1);return window.addEventListener("blur",close),window.addEventListener("resize",close),()=>{window.removeEventListener("blur",close),window.removeEventListener("resize",close)}},[ed]);let[ef,em]=$cc7e05a45900e73f$var$useTypeaheadSearch(a=>{let m=ea().filter(a=>!a.disabled),h=m.find(a=>a.ref.current===document.activeElement),g=$cc7e05a45900e73f$var$findNextItem(m,a,h);g&&setTimeout(()=>g.ref.current.focus())}),eh=(0,$.useCallback)((a,m,h)=>{let g=!es.current&&!h,v=void 0!==U.value&&U.value===m;(v||g)&&(ee(a),g&&(es.current=!0))},[U.value]),eg=(0,$.useCallback)(()=>null==q?void 0:q.focus(),[q]),ev=(0,$.useCallback)((a,m,h)=>{let g=!es.current&&!h,v=void 0!==U.value&&U.value===m;(v||g)&&ei(a)},[U.value]),ey="popper"===g?nj:nN,eb=ey===nj?{side:E,sideOffset:C,align:T,alignOffset:_,arrowPadding:O,collisionBoundary:L,collisionPadding:D,sticky:N,hideWhenDetached:j,avoidCollisions:W}:{};return(0,$.createElement)(nL,{scope:h,content:q,viewport:X,onViewportChange:Y,itemRefCallback:eh,selectedItem:J,onItemLeave:eg,itemTextRefCallback:ev,focusSelectedItem:eu,selectedItemText:en,position:g,isPositioned:eo,searchRef:ef},(0,$.createElement)(rV.Z,{as:rj.g7,allowPinchZoom:!0},(0,$.createElement)(nn,{asChild:!0,trapped:U.open,onMountAutoFocus:a=>{a.preventDefault()},onUnmountAutoFocus:(0,tf.M)(v,a=>{var m;null===(m=U.trigger)||void 0===m||m.focus({preventScroll:!0}),a.preventDefault()})},(0,$.createElement)(r9,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:b,onPointerDownOutside:w,onFocusOutside:a=>a.preventDefault(),onDismiss:()=>U.onOpenChange(!1)},(0,$.createElement)(ey,(0,tp.Z)({role:"listbox",id:U.contentId,"data-state":U.open?"open":"closed",dir:U.dir,onContextMenu:a=>a.preventDefault()},H,eb,{onPlaced:()=>el(!0),ref:Q,style:{display:"flex",flexDirection:"column",outline:"none",...H.style},onKeyDown:(0,tf.M)(H.onKeyDown,a=>{let m=a.ctrlKey||a.altKey||a.metaKey;if("Tab"===a.key&&a.preventDefault(),m||1!==a.key.length||em(a.key),["ArrowUp","ArrowDown","Home","End"].includes(a.key)){let m=ea().filter(a=>!a.disabled),h=m.map(a=>a.ref.current);if(["ArrowUp","End"].includes(a.key)&&(h=h.slice().reverse()),["ArrowUp","ArrowDown"].includes(a.key)){let m=a.target,g=h.indexOf(m);h=h.slice(g+1)}setTimeout(()=>ec(h)),a.preventDefault()}})}))))))}),nN=(0,$.forwardRef)((a,m)=>{let{__scopeSelect:h,onPlaced:g,...v}=a,b=nP(nI,h),w=nD(nI,h),[E,C]=(0,$.useState)(null),[T,_]=(0,$.useState)(null),O=(0,tg.e)(m,a=>_(a)),L=nE(h),D=(0,$.useRef)(!1),N=(0,$.useRef)(!0),{viewport:j,selectedItem:W,selectedItemText:H,focusSelectedItem:U}=w,q=(0,$.useCallback)(()=>{if(b.trigger&&b.valueNode&&E&&T&&j&&W&&H){let a=b.trigger.getBoundingClientRect(),m=T.getBoundingClientRect(),h=b.valueNode.getBoundingClientRect(),v=H.getBoundingClientRect();if("rtl"!==b.dir){let g=v.left-m.left,b=h.left-g,w=a.left-b,C=a.width+w,$=Math.max(C,m.width),T=window.innerWidth-10,_=$ae6933e535247d3d$export$7d15b64cf5a3a4c4(b,[10,T-$]);E.style.minWidth=C+"px",E.style.left=_+"px"}else{let g=m.right-v.right,b=window.innerWidth-h.right-g,w=window.innerWidth-a.right-b,C=a.width+w,$=Math.max(C,m.width),T=window.innerWidth-10,_=$ae6933e535247d3d$export$7d15b64cf5a3a4c4(b,[10,T-$]);E.style.minWidth=C+"px",E.style.right=_+"px"}let w=L(),C=window.innerHeight-20,$=j.scrollHeight,_=window.getComputedStyle(T),O=parseInt(_.borderTopWidth,10),N=parseInt(_.paddingTop,10),U=parseInt(_.borderBottomWidth,10),q=parseInt(_.paddingBottom,10),Z=O+N+$+q+U,X=Math.min(5*W.offsetHeight,Z),Y=window.getComputedStyle(j),Q=parseInt(Y.paddingTop,10),J=parseInt(Y.paddingBottom,10),ee=a.top+a.height/2-10,en=W.offsetHeight/2,ei=W.offsetTop+en,ea=O+N+ei;if(ea<=ee){let a=W===w[w.length-1].ref.current;E.style.bottom="0px";let m=T.clientHeight-j.offsetTop-j.offsetHeight;E.style.height=ea+Math.max(C-ee,en+(a?J:0)+m+U)+"px"}else{let a=W===w[0].ref.current;E.style.top="0px";let m=Math.max(ee,O+j.offsetTop+(a?Q:0)+en);E.style.height=m+(Z-ea)+"px",j.scrollTop=ea-ee+j.offsetTop}E.style.margin="10px 0",E.style.minHeight=X+"px",E.style.maxHeight=C+"px",null==g||g(),requestAnimationFrame(()=>D.current=!0)}},[L,b.trigger,b.valueNode,E,T,j,W,H,b.dir,g]);(0,r$.b)(()=>q(),[q]);let[Z,X]=(0,$.useState)();(0,r$.b)(()=>{T&&X(window.getComputedStyle(T).zIndex)},[T]);let Y=(0,$.useCallback)(a=>{a&&!0===N.current&&(q(),null==U||U(),N.current=!1)},[q,U]);return(0,$.createElement)(nW,{scope:h,contentWrapper:E,shouldExpandOnScrollRef:D,onScrollButtonChange:Y},(0,$.createElement)("div",{ref:C,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Z}},(0,$.createElement)(ty.WV.div,(0,tp.Z)({},v,{ref:O,style:{boxSizing:"border-box",maxHeight:"100%",...v.style}}))))}),nj=(0,$.forwardRef)((a,m)=>{let{__scopeSelect:h,align:g="start",collisionPadding:v=10,...b}=a,w=nA(h);return(0,$.createElement)(nm,(0,tp.Z)({},w,b,{ref:m,align:g,collisionPadding:v,style:{boxSizing:"border-box",...b.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[nW,nV]=nC(nI,{}),nz="SelectViewport",nB=(0,$.forwardRef)((a,m)=>{let{__scopeSelect:h,...g}=a,v=nD(nz,h),b=nV(nz,h),w=(0,tg.e)(m,v.onViewportChange),E=(0,$.useRef)(0);return(0,$.createElement)($.Fragment,null,(0,$.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),(0,$.createElement)(nw.Slot,{scope:h},(0,$.createElement)(ty.WV.div,(0,tp.Z)({"data-radix-select-viewport":"",role:"presentation"},g,{ref:w,style:{position:"relative",flex:1,overflow:"auto",...g.style},onScroll:(0,tf.M)(g.onScroll,a=>{let m=a.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:g}=b;if(null!=g&&g.current&&h){let a=Math.abs(E.current-m.scrollTop);if(a>0){let g=window.innerHeight-20,v=parseFloat(h.style.minHeight),b=parseFloat(h.style.height),w=Math.max(v,b);if(w<g){let v=w+a,b=Math.min(g,v),E=v-b;h.style.height=b+"px","0px"===h.style.bottom&&(m.scrollTop=E>0?E:0,h.style.justifyContent="flex-end")}}}E.current=m.scrollTop})}))))}),[nH,nU]=nC("SelectGroup"),nq=(0,$.forwardRef)((a,m)=>{let{__scopeSelect:h,...g}=a,v=(0,tv.M)();return(0,$.createElement)(nH,{scope:h,id:v},(0,$.createElement)(ty.WV.div,(0,tp.Z)({role:"group","aria-labelledby":v},g,{ref:m})))}),nZ=(0,$.forwardRef)((a,m)=>{let{__scopeSelect:h,...g}=a,v=nU("SelectLabel",h);return(0,$.createElement)(ty.WV.div,(0,tp.Z)({id:v.id},g,{ref:m}))}),nK="SelectItem",[nG,nX]=nC(nK),nY=(0,$.forwardRef)((a,m)=>{let{__scopeSelect:h,value:g,disabled:v=!1,textValue:b,...w}=a,E=nP(nK,h),C=nD(nK,h),T=E.value===g,[_,O]=(0,$.useState)(null!=b?b:""),[L,D]=(0,$.useState)(!1),N=(0,tg.e)(m,a=>{var m;return null===(m=C.itemRefCallback)||void 0===m?void 0:m.call(C,a,g,v)}),j=(0,tv.M)(),handleSelect=()=>{v||(E.onValueChange(g),E.onOpenChange(!1))};return(0,$.createElement)(nG,{scope:h,value:g,disabled:v,textId:j,isSelected:T,onItemTextChange:(0,$.useCallback)(a=>{O(m=>{var h;return m||(null!==(h=null==a?void 0:a.textContent)&&void 0!==h?h:"").trim()})},[])},(0,$.createElement)(nw.ItemSlot,{scope:h,value:g,disabled:v,textValue:_},(0,$.createElement)(ty.WV.div,(0,tp.Z)({role:"option","aria-labelledby":j,"data-highlighted":L?"":void 0,"aria-selected":T&&L,"data-state":T?"checked":"unchecked","aria-disabled":v||void 0,"data-disabled":v?"":void 0,tabIndex:v?void 0:-1},w,{ref:N,onFocus:(0,tf.M)(w.onFocus,()=>D(!0)),onBlur:(0,tf.M)(w.onBlur,()=>D(!1)),onPointerUp:(0,tf.M)(w.onPointerUp,handleSelect),onPointerMove:(0,tf.M)(w.onPointerMove,a=>{if(v){var m;null===(m=C.onItemLeave)||void 0===m||m.call(C)}else a.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,tf.M)(w.onPointerLeave,a=>{if(a.currentTarget===document.activeElement){var m;null===(m=C.onItemLeave)||void 0===m||m.call(C)}}),onKeyDown:(0,tf.M)(w.onKeyDown,a=>{var m;let h=(null===(m=C.searchRef)||void 0===m?void 0:m.current)!=="";h&&" "===a.key||(ny.includes(a.key)&&handleSelect()," "===a.key&&a.preventDefault())})}))))}),nQ="SelectItemText",nJ=(0,$.forwardRef)((a,m)=>{let{__scopeSelect:h,className:g,style:v,...b}=a,w=nP(nQ,h),E=nD(nQ,h),C=nX(nQ,h),T=nT(nQ,h),[_,O]=(0,$.useState)(null),L=(0,tg.e)(m,a=>O(a),C.onItemTextChange,a=>{var m;return null===(m=E.itemTextRefCallback)||void 0===m?void 0:m.call(E,a,C.value,C.disabled)}),D=null==_?void 0:_.textContent,N=(0,$.useMemo)(()=>(0,$.createElement)("option",{key:C.value,value:C.value,disabled:C.disabled},D),[C.disabled,C.value,D]),{onNativeOptionAdd:j,onNativeOptionRemove:W}=T;return(0,r$.b)(()=>(j(N),()=>W(N)),[j,W,N]),(0,$.createElement)($.Fragment,null,(0,$.createElement)(ty.WV.span,(0,tp.Z)({id:C.textId},b,{ref:L})),C.isSelected&&w.valueNode&&!w.valueNodeHasChildren?(0,rC.createPortal)(b.children,w.valueNode):null)}),n0=(0,$.forwardRef)((a,m)=>{let{__scopeSelect:h,...g}=a,v=nX("SelectItemIndicator",h);return v.isSelected?(0,$.createElement)(ty.WV.span,(0,tp.Z)({"aria-hidden":!0},g,{ref:m})):null}),n1="SelectScrollUpButton",n2=(0,$.forwardRef)((a,m)=>{let h=nD(n1,a.__scopeSelect),g=nV(n1,a.__scopeSelect),[v,b]=(0,$.useState)(!1),w=(0,tg.e)(m,g.onScrollButtonChange);return(0,r$.b)(()=>{if(h.viewport&&h.isPositioned){let a=h.viewport;function handleScroll(){let m=a.scrollTop>0;b(m)}return handleScroll(),a.addEventListener("scroll",handleScroll),()=>a.removeEventListener("scroll",handleScroll)}},[h.viewport,h.isPositioned]),v?(0,$.createElement)(n6,(0,tp.Z)({},a,{ref:w,onAutoScroll:()=>{let{viewport:a,selectedItem:m}=h;a&&m&&(a.scrollTop=a.scrollTop-m.offsetHeight)}})):null}),n3="SelectScrollDownButton",n4=(0,$.forwardRef)((a,m)=>{let h=nD(n3,a.__scopeSelect),g=nV(n3,a.__scopeSelect),[v,b]=(0,$.useState)(!1),w=(0,tg.e)(m,g.onScrollButtonChange);return(0,r$.b)(()=>{if(h.viewport&&h.isPositioned){let a=h.viewport;function handleScroll(){let m=a.scrollHeight-a.clientHeight,h=Math.ceil(a.scrollTop)<m;b(h)}return handleScroll(),a.addEventListener("scroll",handleScroll),()=>a.removeEventListener("scroll",handleScroll)}},[h.viewport,h.isPositioned]),v?(0,$.createElement)(n6,(0,tp.Z)({},a,{ref:w,onAutoScroll:()=>{let{viewport:a,selectedItem:m}=h;a&&m&&(a.scrollTop=a.scrollTop+m.offsetHeight)}})):null}),n6=(0,$.forwardRef)((a,m)=>{let{__scopeSelect:h,onAutoScroll:g,...v}=a,b=nD("SelectScrollButton",h),w=(0,$.useRef)(null),E=nE(h),C=(0,$.useCallback)(()=>{null!==w.current&&(window.clearInterval(w.current),w.current=null)},[]);return(0,$.useEffect)(()=>()=>C(),[C]),(0,r$.b)(()=>{var a;let m=E().find(a=>a.ref.current===document.activeElement);null==m||null===(a=m.ref.current)||void 0===a||a.scrollIntoView({block:"nearest"})},[E]),(0,$.createElement)(ty.WV.div,(0,tp.Z)({"aria-hidden":!0},v,{ref:m,style:{flexShrink:0,...v.style},onPointerDown:(0,tf.M)(v.onPointerDown,()=>{null===w.current&&(w.current=window.setInterval(g,50))}),onPointerMove:(0,tf.M)(v.onPointerMove,()=>{var a;null===(a=b.onItemLeave)||void 0===a||a.call(b),null===w.current&&(w.current=window.setInterval(g,50))}),onPointerLeave:(0,tf.M)(v.onPointerLeave,()=>{C()})}))}),n5=(0,$.forwardRef)((a,m)=>{let{value:h,...g}=a,v=(0,$.useRef)(null),b=(0,tg.e)(m,v),w=(0,t0.D)(h);return(0,$.useEffect)(()=>{let a=v.current,m=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(m,"value"),b=g.set;if(w!==h&&b){let m=new Event("change",{bubbles:!0});b.call(a,h),a.dispatchEvent(m)}},[w,h]),(0,$.createElement)(ng,{asChild:!0},(0,$.createElement)("select",(0,tp.Z)({},g,{ref:b,defaultValue:h})))});function $cc7e05a45900e73f$var$useTypeaheadSearch(a){let m=(0,tb.W)(a),h=(0,$.useRef)(""),g=(0,$.useRef)(0),v=(0,$.useCallback)(a=>{let v=h.current+a;m(v),function updateSearch(a){h.current=a,window.clearTimeout(g.current),""!==a&&(g.current=window.setTimeout(()=>updateSearch(""),1e3))}(v)},[m]),b=(0,$.useCallback)(()=>{h.current="",window.clearTimeout(g.current)},[]);return(0,$.useEffect)(()=>()=>window.clearTimeout(g.current),[]),[h,v,b]}function $cc7e05a45900e73f$var$findNextItem(a,m,h){var g;let v=m.length>1&&Array.from(m).every(a=>a===m[0]),b=v?m[0]:m,w=h?a.indexOf(h):-1,E=(g=Math.max(w,0),a.map((m,h)=>a[(g+h)%a.length])),C=1===b.length;C&&(E=E.filter(a=>a!==h));let $=E.find(a=>a.textValue.toLowerCase().startsWith(b.toLowerCase()));return $!==h?$:void 0}n5.displayName="BubbleSelect";let $cc7e05a45900e73f$export$be92b6f5f03c0fe9=a=>{let{__scopeSelect:m,children:h,open:g,defaultOpen:v,onOpenChange:b,value:w,defaultValue:E,onValueChange:C,dir:T,name:_,autoComplete:O,disabled:L,required:D}=a,N=nA(m),[j,W]=(0,$.useState)(null),[H,U]=(0,$.useState)(null),[q,Z]=(0,$.useState)(!1),X=(0,tE.gm)(T),[Y=!1,Q]=(0,tw.T)({prop:g,defaultProp:v,onChange:b}),[J,ee]=(0,tw.T)({prop:w,defaultProp:E,onChange:C}),en=(0,$.useRef)(null),ei=!j||!!j.closest("form"),[ea,eo]=(0,$.useState)(new Set),el=Array.from(ea).map(a=>a.props.value).join(";");return(0,$.createElement)(dist_$cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,N,(0,$.createElement)(n$,{required:D,scope:m,trigger:j,onTriggerChange:W,valueNode:H,onValueNodeChange:U,valueNodeHasChildren:q,onValueNodeHasChildrenChange:Z,contentId:(0,tv.M)(),value:J,onValueChange:ee,open:Y,onOpenChange:Q,dir:X,triggerPointerDownPosRef:en,disabled:L},(0,$.createElement)(nw.Provider,{scope:m},(0,$.createElement)(nR,{scope:a.__scopeSelect,onNativeOptionAdd:(0,$.useCallback)(a=>{eo(m=>new Set(m).add(a))},[]),onNativeOptionRemove:(0,$.useCallback)(a=>{eo(m=>{let h=new Set(m);return h.delete(a),h})},[])},h)),ei?(0,$.createElement)(n5,{key:el,"aria-hidden":!0,required:D,tabIndex:-1,name:_,autoComplete:O,value:J,onChange:a=>ee(a.target.value),disabled:L},void 0===J?(0,$.createElement)("option",{value:""}):null,Array.from(ea)):null))},n8="Switch",[n9,n7]=(0,tm.b)(n8),[it,ir]=n9(n8),ii=(0,$.forwardRef)((a,m)=>{let{__scopeSwitch:h,name:g,checked:v,defaultChecked:b,required:w,disabled:E,value:C="on",onCheckedChange:T,..._}=a,[O,L]=(0,$.useState)(null),D=(0,tg.e)(m,a=>L(a)),N=(0,$.useRef)(!1),j=!O||!!O.closest("form"),[W=!1,H]=(0,tw.T)({prop:v,defaultProp:b,onChange:T});return(0,$.createElement)(it,{scope:h,checked:W,disabled:E},(0,$.createElement)(ty.WV.button,(0,tp.Z)({type:"button",role:"switch","aria-checked":W,"aria-required":w,"data-state":$6be4966fd9bbc698$var$getState(W),"data-disabled":E?"":void 0,disabled:E,value:C},_,{ref:D,onClick:(0,tf.M)(a.onClick,a=>{H(a=>!a),j&&(N.current=a.isPropagationStopped(),N.current||a.stopPropagation())})})),j&&(0,$.createElement)($6be4966fd9bbc698$var$BubbleInput,{control:O,bubbles:!N.current,name:g,value:C,checked:W,required:w,disabled:E,style:{transform:"translateX(-100%)"}}))}),ia=(0,$.forwardRef)((a,m)=>{let{__scopeSwitch:h,...g}=a,v=ir("SwitchThumb",h);return(0,$.createElement)(ty.WV.span,(0,tp.Z)({"data-state":$6be4966fd9bbc698$var$getState(v.checked),"data-disabled":v.disabled?"":void 0},g,{ref:m}))}),$6be4966fd9bbc698$var$BubbleInput=a=>{let{control:m,checked:h,bubbles:g=!0,...v}=a,b=(0,$.useRef)(null),w=(0,t0.D)(h),E=(0,tJ.t)(m);return(0,$.useEffect)(()=>{let a=b.current,m=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(m,"checked"),E=v.set;if(w!==h&&E){let m=new Event("click",{bubbles:g});E.call(a,h),a.dispatchEvent(m)}},[w,h,g]),(0,$.createElement)("input",(0,tp.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:h},v,{tabIndex:-1,ref:b,style:{...a.style,...E,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function $6be4966fd9bbc698$var$getState(a){return a?"checked":"unchecked"}let Je=a=>{var m=a.toString().split(":"),h=Math.ceil(parseInt(m[0])),g=Math.ceil(parseInt(m[1])),v=Qe(Math.ceil(parseInt(m[2])),2);let b=`${0!==h&&g<10?(g+"").padStart(2,"0"):g}:${v}`;return 0!==h&&(b=`${h}:${b}`),b},pe=a=>{let m=new Date(1e3*a).toISOString().substr(11,8);return Je(m)},ge=(a,m)=>{if("object"!=typeof a||null===a)return m;for(let h in m)"object"!=typeof m[h]||null===m[h]||Array.isArray(m[h])?a[h]=m[h]:(a[h]||(a[h]={}),a[h]=ge(a[h],m[h]));return a},fe=(a,m)=>Object.hasOwn(a,m)?a[m].toString():void 0,Qe=(a,m)=>String(a).padStart(m,"0"),io={background:"transparent",canvasBackgroundColor:"#6662",canvasHeight:"61.8vh",ignoreCaptionLabels:[],informationPanel:{open:!0,renderAbout:!0,renderSupplementing:!0,renderToggle:!0},openSeadragon:{},requestHeaders:{"Content-Type":"application/json"},showIIIFBadge:!0,showTitle:!0,withCredentials:!1},il={activeCanvas:"",activeManifest:"",collection:{},configOptions:io,informationOpen:null==(w=null==io?void 0:io.informationPanel)?void 0:w.open,isLoaded:!1,vault:new Vault},is=$.createContext(il),ic=$.createContext(il);function et(a,m){switch(m.type){case"updateActiveCanvas":return m.canvasId||(m.canvasId=""),{...a,activeCanvas:m.canvasId};case"updateActiveManifest":return{...a,activeManifest:m.manifestId};case"updateCollection":return{...a,collection:m.collection};case"updateConfigOptions":return{...a,configOptions:ge(a.configOptions,m.configOptions)};case"updateInformationOpen":return{...a,informationOpen:m.informationOpen};case"updateIsLoaded":return{...a,isLoaded:m.isLoaded};default:throw Error(`Unhandled action type: ${m.type}`)}}let tt=({initialState:a=il,children:m})=>{let[h,g]=(0,$.useReducer)(et,a);return $.createElement(is.Provider,{value:h},$.createElement(ic.Provider,{value:g},m))};function k(){let a=$.useContext(is);if(void 0===a)throw Error("useViewerState must be used within a ViewerProvider");return a}function F(){let a=$.useContext(ic);if(void 0===a)throw Error("useViewerDispatch must be used within a ViewerProvider");return a}let ve=(a,m,h,g)=>{var v,b;let w={canvas:void 0,accompanyingCanvas:void 0,annotationPage:void 0,annotations:[]};return w.canvas=a.get(m),w.canvas&&(w.annotationPage=a.get(w.canvas.items[0]),w.accompanyingCanvas=null!=(v=w.canvas)&&v.accompanyingCanvas?a.get(null==(b=w.canvas)?void 0:b.accompanyingCanvas):void 0),w.annotationPage&&(w.annotations=a.get(w.annotationPage.items).filter(v=>{if(v){if(!v.body||!v.motivation){console.error("Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'",v);return}let b=v.body;Array.isArray(b)&&(b=b[0]);let w=a.get(b.id);if(w)switch(h){case"painting":return v.target===m.id&&v.motivation&&"painting"===v.motivation[0]&&g.includes(w.type)&&(v.body=w),!!v;case"supplementing":return;default:throw Error("Invalid annotation motivation.")}}})),w},P=(a,m="en")=>{if(!a)return"";if(!a[m]){let m=Object.getOwnPropertyNames(a);if(m.length>0)return a[m[0]]}return a[m]},B=(a,m)=>{let h=ve(a,{id:m,type:"Canvas"},"painting",["Image","Sound","Video"]);if(0!==h.annotations.length&&h.annotations[0]&&h.annotations[0].body)return h.annotations[0].body},nt=(a,m,h)=>{let g=a.get({id:m,type:"Canvas"});if(!(null!=g&&g.annotations)||!g.annotations[0])return[];let v=a.get(g.annotations[0]),b=a.get(v.items);return Array.isArray(b)?b.filter(m=>{var g;if(m.body&&null!=(g=m.motivation)&&g.includes("supplementing")){let g=m.body;Array.isArray(g)&&(g=g[0]);let v=a.get(g.id);if(v.format===h)return m.body=v,m}}).map(a=>a.body):[]},rt=(a,m,h,g)=>{let v=[];if(m.canvas&&m.canvas.thumbnail.length>0){let h=a.get(m.canvas.thumbnail[0]);v.push(h)}if(m.annotations[0]){if(m.annotations[0].thumbnail&&m.annotations[0].thumbnail.length>0){let h=a.get(m.annotations[0].thumbnail[0]);v.push(h)}if(!m.annotations[0].body)return;let h=m.annotations[0].body;"Image"===h.type&&v.push(h)}return 0===v.length?void 0:{id:v[0].id,format:v[0].format,type:v[0].type,width:h,height:g}},iu={xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"},{styled:id,css:ip,keyframes:im,createTheme:ih}=(0,td.Th)({theme:{colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:"hsl(209 100% 38.2%)",accentMuted:"hsl(209 80% 61.8%)",accentAlt:"hsl(209 80% 30%)",secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},media:iu}),ig=id("div",{display:"flex",flexDirection:"column",alignItems:"center"}),iv=id("p",{fontWeight:"bold",fontSize:"x-large"}),iy=id("span",{fontSize:"medium"}),st=({error:a})=>{let{message:m}=a;return $.createElement(ig,{role:"alert"},$.createElement(iv,{"data-testid":"headline"},"Something went wrong"),m&&$.createElement(iy,null,`Error message: ${m}`," "))},ib=id("div",{position:"relative",zIndex:"0"}),iw=id("div",{display:"flex",flexDirection:"row",overflow:"hidden","@sm":{flexDirection:"column"}}),iE=id("div",{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",width:"61.8%","@sm":{width:"100%"}}),ix=id(tc.xz,{display:"none",border:"none",padding:"0",transition:"$all",opacity:"1",background:"#6663",margin:"1rem 0",borderRadius:"6px","&[data-information-panel='false']":{opacity:"0",marginTop:"-59px"},"@sm":{display:"flex","> span":{display:"flex",flexGrow:"1",fontSize:"0.8333em",justifyContent:"center",padding:"0.5rem",fontFamily:"inherit"}}}),iC=id(tc.VY,{width:"100%",display:"flex"}),iS=id("aside",{display:"flex",flexGrow:"1",flexShrink:"0",width:"38.2%",maxHeight:"100%","@sm":{width:"100%"}}),iA=id("div",{display:"flex",flexDirection:"column",fontSmooth:"auto",webkitFontSmoothing:"antialiased","> div":{display:"flex",flexDirection:"column",flexGrow:"1",justifyContent:"flex-start","@sm":{[`& ${iw}`]:{flexGrow:"1"},[`& ${iE}`]:{flexGrow:"0"}}},"@sm":{padding:"0"},"&[data-information-panel-open='true']":{"@sm":{position:"fixed",height:"100%",width:"100%",top:"0",left:"0",zIndex:"2500000000",[`& ${ib}`]:{display:"none"},[`& ${ix}`]:{margin:"1rem"},[`& ${iC}`]:{height:"100%"}}}}),i$=id(tB,{display:"flex",flexDirection:"column",width:"100%",height:"100%",flexGrow:"1",flexShrink:"0",position:"relative",zIndex:"1",maskImage:"linear-gradient(180deg, rgba(0, 0, 0, 1) calc(100% - 2rem), transparent 100%)","@sm":{marginTop:"0.5rem",boxShadow:"none"}}),iP=id(tH,{display:"flex",flexGrow:"0",margin:"0 1.618rem",borderBottom:"4px solid #6663","@sm":{margin:"0 1rem"}}),iR=id(tU,{display:"flex",position:"relative",padding:"0.5rem 1rem",background:"none",backgroundColor:"transparent",fontFamily:"inherit",border:"none",opacity:"0.7",fontSize:"1rem",marginRight:"1rem",lineHeight:"1rem",whiteSpace:"nowrap",cursor:"pointer",fontWeight:400,transition:"$all","&::after":{width:"0",height:"4px",content:"",position:"absolute",bottom:"-4px",left:"0",transition:"$all"},"&[data-state='active']":{opacity:"1",fontWeight:700,"&::after":{width:"100%",backgroundColor:"$accent"}}}),iT=id(tq,{display:"flex",flexGrow:"1",flexShrink:"0",position:"absolute",top:"0",left:"0","&[data-state='active']":{width:"100%",height:"calc(100% - 2rem)",padding:"1.618rem 0"}}),i_=id("div",{position:"relative",height:"100%",width:"100%",overflowY:"scroll"}),ik=id("div",{padding:" 0 1.618rem 2rem",display:"flex",flexDirection:"column",overflow:"scroll",position:"absolute",fontWeight:"400",fontSize:"1rem",zIndex:"0",img:{maxWidth:"100px",maxHeight:"100px",objectFit:"contain",color:"transparent",margin:"0 0 1rem",borderRadius:"3px",backgroundColor:"$secondaryMuted"},video:{display:"none"},"a, a:visited":{color:"$accent"},p:{fontSize:"1rem",lineHeight:"1.45em",margin:"0"},dl:{margin:"0",dt:{fontWeight:"700",margin:"1rem 0 0.25rem"},dd:{margin:"0"}},".manifest-property-title":{fontWeight:"700",margin:"1rem 0 0.25rem"},"ul, ol":{padding:"0",margin:"0",li:{fontSize:"1rem",lineHeight:"1.45em",listStyle:"none",margin:"0.25rem 0 0.25rem"}}}),iO=id("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),Se=(a,m="none")=>{if(!a)return null;if("string"==typeof a)return[a];if(!a[m]){let m=Object.getOwnPropertyNames(a);if(m.length>0)return a[m[0]]}return a[m]&&Array.isArray(a[m])?a[m]:null},M=(a,m="none",h=", ")=>{let g=Se(a,m);return Array.isArray(g)?g.join(`${h}`):g};function A(a,m){let h=Object.keys(a).filter(a=>m.includes(a)?null:a),g={};return h.forEach(m=>{g[m]=a[m]}),g}let iI=id("span",{}),z=a=>{let{as:m,label:h}=a,g=A(a,["as","label"]);return $.createElement(iI,{as:m,...g},M(h,g.lang))},bt=(a,m="200,",h="full")=>{let g;Array.isArray(a)&&(a=a[0]);let{id:v,service:b}=a;if(!b)return v;if(Array.isArray(a.service)&&a.service.length>0&&(g=b[0]),g){if(g["@id"])return`${g["@id"]}/${h}/${m}/0/default.jpg`;if(g.id)return`${g.id}/${h}/${m}/0/default.jpg`}},iM=id("img",{objectFit:"cover"}),yt=a=>{let m;let h=(0,$.useRef)(null),{contentResource:g,altAsLabel:v,region:b="full"}=a;v&&(m=M(v));let w=A(a,["contentResource","altAsLabel"]),{type:E,id:C,width:T=200,height:_=200,format:O,duration:L}=g;(0,$.useEffect)(()=>{if(!C&&!h.current||["Image"].includes(E)||!C.includes("m3u8"))return;let a=new tK.Z;return h.current&&(a.attachMedia(h.current),a.on(tK.Z.Events.MEDIA_ATTACHED,function(){a.loadSource(C)})),a.on(tK.Z.Events.ERROR,function(m,h){if(h.fatal)switch(h.type){case tK.Z.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${m} network error encountered, try to recover`),a.startLoad();break;case tK.Z.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${m} media error encountered, try to recover`),a.recoverMediaError();break;default:a.destroy()}}),()=>{a&&(a.detachMedia(),a.destroy())}},[]),(0,$.useEffect)(()=>x(),[]);let x=()=>{if(!h.current)return;let a=0,m=30;if(L&&(m=L),!C.split("#t=")&&L&&(a=.1*L),C.split("#t=").pop()){let m=C.split("#t=").pop();m&&(a=parseInt(m.split(",")[0]))}let g=h.current;g.autoplay=!0,g.currentTime=a,setTimeout(()=>x(),1e3*m)};switch(E){case"Image":let D=bt(g,`${T},${_}`,b);return $.createElement(iM,{as:"img",alt:m,css:{width:T,height:_},key:C,src:D,...w});case"Video":return $.createElement(iM,{as:"video",css:{width:T,height:_},disablePictureInPicture:!0,key:C,loop:!0,muted:!0,onPause:x,ref:h,src:C});default:return console.warn(`Resource type: ${E} is not valid or not yet supported in Primitives.`),$.createElement($.Fragment,null)}},iL=id("a",{}),wt=a=>{let{children:m,homepage:h}=a,g=A(a,["children","homepage"]);return $.createElement($.Fragment,null,h&&h.map(a=>{let h=M(a.label,g.lang);return $.createElement(iL,{"aria-label":m?h:void 0,href:a.id,key:a.id,...g},m||h)}))},iD={delimiter:", "},iF=(0,$.createContext)(void 0),ke=()=>{let a=(0,$.useContext)(iF);if(void 0===a)throw Error("usePrimitivesContext must be used with a PrimitivesProvider");return a},K=({children:a,initialState:m=iD})=>{let h=St(m,"delimiter");return $.createElement(iF.Provider,{value:{delimiter:h}},a)},St=(a,m)=>Object.hasOwn(a,m)?a[m].toString():void 0,iN=id("span",{}),re=a=>{let{as:m,markup:h}=a,{delimiter:g}=ke();if(!h)return $.createElement($.Fragment,null);let v=A(a,["as","markup"]),b={__html:tZ(M(h,v.lang,g),{allowedAttributes:{a:["href"],img:["alt","src","height","width"]},allowedSchemes:["http","https","mailto"],allowedTags:["a","b","br","i","img","p","small","span","sub","sup"]})};return $.createElement(iN,{as:m,...v,dangerouslySetInnerHTML:b})},Ie=a=>$.useContext(iF)?$.createElement(re,{...a}):$.createElement(K,null,$.createElement(re,{...a})),It=({as:a="dd",lang:m,value:h})=>$.createElement(Ie,{markup:h,as:a,lang:m}),ij=id("span",{}),Tt=({as:a="dd",customValueContent:m,lang:h,value:g})=>{var v;let{delimiter:b}=ke(),w=null==(v=Se(g,h))?void 0:v.map(a=>(0,$.cloneElement)(m,{value:a}));return $.createElement(ij,{as:a,lang:h},null==w?void 0:w.map((a,m)=>[m>0&&`${b}`,$.createElement($.Fragment,{key:m},a)]))},$e=a=>{var m;let{item:h,lang:g,customValueContent:v}=a,{label:b,value:w}=h,E=null==(m=M(b))?void 0:m.replace(" ","-").toLowerCase();return $.createElement("div",{role:"group","data-label":E},$.createElement(z,{as:"dt",label:b,lang:g}),v?$.createElement(Tt,{as:"dd",customValueContent:v,value:w,lang:g}):$.createElement(It,{as:"dd",value:w,lang:g}))},iW=id("dl",{}),Rt=a=>{let{as:m,customValueContent:h,metadata:g}=a;if(!Array.isArray(g))return $.createElement($.Fragment,null);let v=fe(a,"customValueDelimiter"),b=A(a,["as","customValueContent","customValueDelimiter","metadata"]);return $.createElement(K,{..."string"==typeof v?{initialState:{delimiter:v}}:void 0},g.length>0&&$.createElement(iW,{as:m,...b},g.map((a,m)=>{let g=h?function(a,m){let h=m.filter(m=>{let{matchingLabel:h}=m,g=Object.keys(m.matchingLabel)[0],v=M(h,g);if(M(a,g)===v)return!0}).map(a=>a.Content);if(Array.isArray(h))return h[0]}(a.label,h):void 0;return $.createElement($e,{customValueContent:g,item:a,key:m,lang:null==b?void 0:b.lang})})))};id("li",{}),id("ul",{});let iV=id("dl",{}),Lt=a=>{let{as:m,requiredStatement:h}=a;if(!h)return $.createElement($.Fragment,null);let g=fe(a,"customValueDelimiter"),v=A(a,["as","customValueDelimiter","requiredStatement"]);return $.createElement(K,{..."string"==typeof g?{initialState:{delimiter:g}}:void 0},$.createElement(iV,{as:m,...v},$.createElement($e,{item:h,lang:v.lang})))},iz=id("li",{}),iB=id("ul",{}),Vt=a=>{let{as:m,seeAlso:h}=a,g=A(a,["as","seeAlso"]);return $.createElement(iB,{as:m},h&&h.map(a=>{let m=M(a.label,g.lang);return $.createElement(iz,{key:a.id},$.createElement("a",{href:a.id,...g},m||a.id))}))},Ht=a=>{let{as:m,summary:h}=a,g=A(a,["as","customValueDelimiter","summary"]);return $.createElement(Ie,{as:m,markup:h,...g})},Te=a=>{let{thumbnail:m,region:h}=a,g=A(a,["thumbnail"]);return $.createElement($.Fragment,null,m&&m.map(a=>$.createElement(yt,{contentResource:a,key:a.id,region:h,...g})))},Bt=({homepage:a})=>(null==a?void 0:a.length)===0?$.createElement($.Fragment,null):$.createElement($.Fragment,null,$.createElement("span",{className:"manifest-property-title"},"Homepage"),$.createElement(wt,{homepage:a})),Ot=({id:a,htmlLabel:m,parent:h="manifest"})=>$.createElement($.Fragment,null,$.createElement("span",{className:"manifest-property-title"},m),$.createElement("a",{href:a,target:"_blank",id:`iiif-${h}-id`},a)),Dt=({metadata:a,parent:m="manifest"})=>a?$.createElement($.Fragment,null,$.createElement(Rt,{metadata:a,id:`iiif-${m}-metadata`})):$.createElement($.Fragment,null),Wt=({requiredStatement:a,parent:m="manifest"})=>a?$.createElement($.Fragment,null,$.createElement(Lt,{requiredStatement:a,id:`iiif-${m}-required-statement`})):$.createElement($.Fragment,null),jt=({rights:a})=>a?$.createElement($.Fragment,null,$.createElement("span",{className:"manifest-property-title"},"Rights"),$.createElement("a",{href:a,target:"_blank"},a)):$.createElement($.Fragment,null),Nt=({seeAlso:a})=>(null==a?void 0:a.length)===0?$.createElement($.Fragment,null):$.createElement($.Fragment,null,$.createElement("span",{className:"manifest-property-title"},"See Also"),$.createElement(Vt,{seeAlso:a})),Gt=({summary:a,parent:m="manifest"})=>a?$.createElement($.Fragment,null,$.createElement(Ht,{summary:a,as:"p",id:`iiif-${m}-summary`})):$.createElement($.Fragment,null),qt=({label:a,thumbnail:m})=>(null==m?void 0:m.length)===0?$.createElement($.Fragment,null):$.createElement($.Fragment,null,$.createElement(Te,{altAsLabel:a||{none:["resource"]},thumbnail:m,style:{backgroundColor:"#6663",objectFit:"cover"}})),Ut=()=>{let a=k(),{activeManifest:m,vault:h}=a,[g,v]=(0,$.useState)(),[b,w]=(0,$.useState)([]),[E,C]=(0,$.useState)([]),[T,_]=(0,$.useState)([]);return(0,$.useEffect)(()=>{var a,g,b;let E=h.get(m);v(E),(null==(a=E.homepage)?void 0:a.length)>0&&w(h.get(E.homepage)),(null==(g=E.seeAlso)?void 0:g.length)>0&&C(h.get(E.seeAlso)),(null==(b=E.thumbnail)?void 0:b.length)>0&&_(h.get(E.thumbnail))},[m,h]),g?$.createElement(iO,null,$.createElement(ik,null,$.createElement(qt,{thumbnail:T,label:g.label}),$.createElement(Gt,{summary:g.summary}),$.createElement(Dt,{metadata:g.metadata}),$.createElement(Wt,{requiredStatement:g.requiredStatement}),$.createElement(jt,{rights:g.rights}),$.createElement(Bt,{homepage:b}),$.createElement(Nt,{seeAlso:E}),$.createElement(Ot,{id:g.id,htmlLabel:"IIIF Manifest"}))):$.createElement($.Fragment,null)},_t=()=>{function t(a){return a.map(a=>{let m=a.identifier||esm_browser_v4();return{...a,identifier:m}})}return{addIdentifiersToParsedCues:t,createNestedCues:function(a){var m;let h=[],g=[],v=t(a);for(let a of v){for(;g.length>0&&g[g.length-1].end<=a.start;)g.pop();g.length>0?(g[g.length-1].children||(g[g.length-1].children=[]),null==(m=g[g.length-1].children)||m.push(a)):h.push(a),g.push(a)}return h},isChild:function(a,m=[]){return m.some(m=>a.start>=m.start&&a.end<=m.end)},orderCuesByTime:function(a=[]){return a.sort((a,m)=>a.start-m.start)}}},iH=im({from:{transform:"rotate(360deg)"},to:{transform:"rotate(0deg)"}}),iU=id(rs,{display:"flex",flexDirection:"column",width:"100%"}),iq=id(rc,{position:"relative",cursor:"pointer",display:"flex",width:"100%",justifyContent:"space-between",textAlign:"left",margin:"0",padding:"0.5rem 1.618rem",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",color:"inherit",border:"none",background:"none","@sm":{padding:"0.5rem 1rem",fontSize:"0.8333rem"},"&::before":{content:"",width:"12px",height:"12px",borderRadius:"12px",position:"absolute",backgroundColor:"$primaryMuted",opacity:"0",left:"8px",marginTop:"3px",boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",opacity:"0",clipPath:"polygon(100% 50%, 0 100%, 0 0)",left:"13px",marginTop:"6px",boxSizing:"content-box","@sm":{content:"unset"}},strong:{marginLeft:"1rem"},"&:hover":{color:"$accent","&::before":{backgroundColor:"$accent",opacity:"1"},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",clipPath:"polygon(100% 50%, 0 100%, 0 0)",opacity:"1"}},"&[aria-checked='true']":{backgroundColor:"#6663","&::before":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accentMuted",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1s linear infinite",animationName:iH,boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accent",clipPath:"polygon(100% 0, 100% 100%, 0 0)",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1.5s linear infinite",animationName:iH,boxSizing:"content-box","@sm":{content:"unset"}}}}),Xt=({label:a,start:m,end:h})=>{let[g,v]=(0,$.useState)(!1),b=document.getElementById("clover-iiif-video");return(0,$.useEffect)(()=>(null==b||b.addEventListener("timeupdate",()=>{let{currentTime:a}=b;v(m<=a&&a<h)}),()=>document.removeEventListener("timeupdate",()=>{})),[b]),$.createElement(iq,{"aria-checked":g,"data-testid":"information-panel-cue",onClick:()=>{b&&(b.pause(),b.currentTime=m,b.play())},value:a},a,$.createElement("strong",null,pe(m)))},iZ=id("ul",{listStyle:"none",paddingLeft:"1rem",position:"relative","&&:first-child":{paddingLeft:"0"},"& li ul":{[`& ${iq}`]:{backgroundColor:"unset","&::before":{content:"none"},"&::after":{content:"none"}}},"&:first-child":{margin:"0 0 1.618rem"}}),Me=({items:a})=>$.createElement(iZ,null,a.map(a=>{let{text:m,start:h,end:g,children:v,identifier:b}=a;return $.createElement("li",{key:b},$.createElement(Xt,{label:m,start:h,end:g}),v&&$.createElement(Me,{items:v}))})),Kt=({resource:a})=>{let[m,h]=$.useState([]),{id:g,label:v}=a,{createNestedCues:b,orderCuesByTime:w}=_t();return(0,$.useEffect)(()=>{g&&fetch(g,{headers:{"Content-Type":"text/plain",Accept:"application/json"}}).then(a=>a.text()).then(a=>{let m=(0,ru.parse)(a).cues,g=w(m),v=b(g);h(v)}).catch(a=>console.error(g,a.toString()))},[g]),$.createElement(iU,{"aria-label":`navigate ${P(v,"en")}`},$.createElement(Me,{items:m}))},Jt=({activeCanvas:a,resources:m})=>{let h=k(),{configOptions:g}=h,{informationPanel:v}=g,[b,w]=(0,$.useState)(),E=(null==v?void 0:v.renderAbout)||(null==g?void 0:g.renderAbout),C=null==v?void 0:v.renderSupplementing;return(0,$.useEffect)(()=>{E?w("manifest-about"):m&&(null==m?void 0:m.length)>0&&!E&&w(m[0].id)},[a,m]),m?$.createElement(i$,{"data-testid":"information-panel",defaultValue:b,onValueChange:a=>{w(a)},orientation:"horizontal",value:b},$.createElement(iP,{"aria-label":"select chapter","data-testid":"information-panel-list"},E&&$.createElement(iR,{value:"manifest-about"},"About"),C&&m&&m.map(({id:a,label:m})=>$.createElement(iR,{key:a,value:a},$.createElement(z,{label:m})))),$.createElement(i_,null,E&&$.createElement(iT,{value:"manifest-about"},$.createElement(Ut,null)),C&&m&&m.map(a=>$.createElement(iT,{key:a.id,value:a.id},$.createElement(Kt,{resource:a}))))):$.createElement($.Fragment,null)},iK=id(rs,{display:"flex",flexDirection:"row",flexGrow:"1",padding:"1.618rem",overflowX:"scroll",position:"relative",zIndex:"0"}),iG=id("svg",{display:"inline-flex",variants:{isLarge:{true:{height:"4rem",width:"4rem"}},isMedium:{true:{height:"2rem",width:"2rem"}},isSmall:{true:{height:"1rem",width:"1rem"}}}}),S=a=>$.createElement(iG,{...a,"data-testid":"icon-svg",role:"img",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},a.children);S.Title=({children:a})=>$.createElement("title",null,a),S.Add=()=>$.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288M400 256H112"}),S.Audio=()=>$.createElement($.Fragment,null,$.createElement("path",{d:"M232 416a23.88 23.88 0 01-14.2-4.68 8.27 8.27 0 01-.66-.51L125.76 336H56a24 24 0 01-24-24V200a24 24 0 0124-24h69.75l91.37-74.81a8.27 8.27 0 01.66-.51A24 24 0 01256 120v272a24 24 0 01-24 24zm-106.18-80zm-.27-159.86zM320 336a16 16 0 01-14.29-23.19c9.49-18.87 14.3-38 14.3-56.81 0-19.38-4.66-37.94-14.25-56.73a16 16 0 0128.5-14.54C346.19 208.12 352 231.44 352 256c0 23.86-6 47.81-17.7 71.19A16 16 0 01320 336z"}),$.createElement("path",{d:"M368 384a16 16 0 01-13.86-24C373.05 327.09 384 299.51 384 256c0-44.17-10.93-71.56-29.82-103.94a16 16 0 0127.64-16.12C402.92 172.11 416 204.81 416 256c0 50.43-13.06 83.29-34.13 120a16 16 0 01-13.87 8z"}),$.createElement("path",{d:"M416 432a16 16 0 01-13.39-24.74C429.85 365.47 448 323.76 448 256c0-66.5-18.18-108.62-45.49-151.39a16 16 0 1127-17.22C459.81 134.89 480 181.74 480 256c0 64.75-14.66 113.63-50.6 168.74A16 16 0 01416 432z"})),S.Close=()=>$.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}),S.Image=()=>$.createElement("path",{d:"M416 64H96a64.07 64.07 0 00-64 64v256a64.07 64.07 0 0064 64h320a64.07 64.07 0 0064-64V128a64.07 64.07 0 00-64-64zm-80 64a48 48 0 11-48 48 48.05 48.05 0 0148-48zM96 416a32 32 0 01-32-32v-67.63l94.84-84.3a48.06 48.06 0 0165.8 1.9l64.95 64.81L172.37 416zm352-32a32 32 0 01-32 32H217.63l121.42-121.42a47.72 47.72 0 0161.64-.16L448 333.84z"}),S.Video=()=>$.createElement("path",{d:"M464 384.39a32 32 0 01-13-2.77 15.77 15.77 0 01-2.71-1.54l-82.71-58.22A32 32 0 01352 295.7v-79.4a32 32 0 0113.58-26.16l82.71-58.22a15.77 15.77 0 012.71-1.54 32 32 0 0145 29.24v192.76a32 32 0 01-32 32zM268 400H84a68.07 68.07 0 01-68-68V180a68.07 68.07 0 0168-68h184.48A67.6 67.6 0 01336 179.52V332a68.07 68.07 0 01-68 68z"});let iX=im({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),iY=im({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),iQ=id(r3,{fill:"$secondaryAlt"}),iJ=id(r2,{position:"absolute",right:"0",top:"0",padding:"0.5rem",margin:"0",cursor:"pointer",border:"none",background:"none",fill:"inherit","&:hover":{opacity:"0.75"}}),i0=id(rQ,{border:"none",backgroundColor:"white",fill:"inhrerit",padding:"1rem 2rem 1rem 1rem",width:"auto",minWidth:"200px",maxWidth:"350px",borderRadius:"3px",boxShadow:"5px 5px 13px #0002",animationDuration:"0.3s",animationTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)",'&[data-side="top"]':{animationName:iY},'&[data-side="bottom"]':{animationName:iX},'&[data-align="end"]':{[`& ${iQ}`]:{margin:"0 0.7rem"}}}),i1=id(rK,{display:"inline-flex",padding:"0.5rem 0",margin:"0 0.5rem 0 0",cursor:"pointer",border:"none",background:"none","> button, > span":{margin:"0"}}),i2=id(a=>{let{__scopePopover:m,children:h,open:g,defaultOpen:v,onOpenChange:b,modal:w=!1}=a,E=rU(m),C=(0,$.useRef)(null),[T,_]=(0,$.useState)(!1),[O=!1,L]=(0,tw.T)({prop:g,defaultProp:v,onChange:b});return(0,$.createElement)($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,E,(0,$.createElement)(rq,{scope:m,contentId:(0,tv.M)(),triggerRef:C,open:O,onOpenChange:L,onOpenToggle:(0,$.useCallback)(()=>L(a=>!a),[L]),hasCustomAnchor:T,onCustomAnchorAdd:(0,$.useCallback)(()=>_(!0),[]),onCustomAnchorRemove:(0,$.useCallback)(()=>_(!1),[]),modal:w},h))},{boxSizing:"content-box"}),V=({children:a})=>$.createElement(i2,null,a);V.Trigger=a=>$.createElement(i1,{...a},a.children),V.Content=a=>$.createElement(i0,{...a},$.createElement(iQ,null),$.createElement(iJ,null,$.createElement(S,{isSmall:!0},$.createElement(S.Close,null))),a.children);let i3=id("div",{boxSizing:"border-box",display:"inline-flex",alignItems:"center",borderRadius:"5px",padding:"$1",marginBottom:"$2",marginRight:"$2",backgroundColor:"$lightGrey",color:"$richBlack50",textTransform:"uppercase",fontSize:"$2",objectFit:"contain",lineHeight:"1em !important","&:last-child":{marginRight:"0"},[`${iG}`]:{position:"absolute",left:"$1",height:"$3",width:"$3"},variants:{isIcon:{true:{position:"relative",paddingLeft:"$5"}}}}),i4=id("span",{display:"flex"}),i6=id("span",{display:"flex",width:"1.2111rem",height:"0.7222rem"}),i5=id("span",{display:"inline-flex",marginLeft:"5px",marginBottom:"-1px"}),i8=id(rc,{display:"flex",flexShrink:"0",margin:"0 1.618rem 0 0",padding:"0",cursor:"pointer",background:"none",border:"none",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",textAlign:"left","&:last-child":{marginRight:"1rem"},figure:{margin:"0",width:"161.8px","> div":{position:"relative",display:"flex",backgroundColor:"$secondaryAlt",width:"inherit",height:"100px",overflow:"hidden",borderRadius:"3px",transition:"$all",img:{width:"100%",height:"100%",objectFit:"cover",filter:"blur(0)",transform:"scale3d(1, 1, 1)",transition:"$all",color:"transparent"},[`& ${i4}`]:{position:"absolute",right:"0",bottom:"0",[`& ${i3}`]:{margin:"0",paddingLeft:"0",fontSize:"0.7222rem",backgroundColor:"#000d",color:"$secondary",fill:"$secondary",borderBottomLeftRadius:"0",borderTopRightRadius:"0"}}},figcaption:{marginTop:"0.5rem",fontWeight:"400",fontSize:"0.8333rem",display:"-webkit-box",overflow:"hidden",MozBoxOrient:"vertical",WebkitBoxOrient:"vertical",WebkitLineClamp:"5","@sm":{fontSize:"0.8333rem"}}},"&[aria-checked='true']":{figure:{"> div":{backgroundColor:"$primaryAlt","&::before":{position:"absolute",zIndex:"1",color:"$secondaryMuted",content:"Active Item",textTransform:"uppercase",fontWeight:"700",fontSize:"0.6111rem",letterSpacing:"0.03rem",display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",textAlign:"center",textShadow:"5px 5px 5px #0003"},img:{opacity:"0.3",transform:"scale3d(1.1, 1.1, 1.1)",filter:"blur(2px)"},[`& ${i4}`]:{[`& ${i3}`]:{backgroundColor:"$accent"}}}},figcaption:{fontWeight:"700"}}}),vn=({type:a})=>{switch(a){case"Sound":return $.createElement(S.Audio,null);case"Image":default:return $.createElement(S.Image,null);case"Video":return $.createElement(S.Video,null)}},bn=({canvas:a,canvasIndex:m,isActive:h,thumbnail:g,type:v,handleChange:b})=>$.createElement(i8,{"aria-checked":h,"data-testid":"media-thumbnail","data-canvas":m,onClick:()=>b(a.id),value:a.id},$.createElement("figure",null,$.createElement("div",null,(null==g?void 0:g.id)&&$.createElement("img",{src:g.id,alt:null!=a&&a.label?P(a.label):""}),$.createElement(i4,null,$.createElement(i3,{isIcon:!0,"data-testid":"thumbnail-tag"},$.createElement(i6,null),$.createElement(S,{"aria-label":v},$.createElement(vn,{type:v})),["Video","Sound"].includes(v)&&$.createElement(i5,null,pe(a.duration))))),(null==a?void 0:a.label)&&$.createElement("figcaption",{"data-testid":"fig-caption"},$.createElement(z,{label:a.label})))),yn=a=>a.body?a.body.type:"Image",i9=id("div",{position:"absolute",right:"1rem",top:"1rem",display:"flex",justifyContent:"flex-end",zIndex:"1"}),i7=id("input",{flexGrow:"1",border:"none",backgroundColor:"$secondaryMuted",color:"$primary",marginRight:"1rem",height:"2rem",padding:"0 1rem",borderRadius:"2rem",fontFamily:"inherit",fontSize:"1rem",lineHeight:"1rem",boxShadow:"inset 1px 1px 2px #0003","&::placeholder":{color:"$primaryMuted"}}),at=id("button",{display:"flex",background:"none",border:"none",width:"2rem !important",height:"2rem !important",padding:"0",margin:"0",fontWeight:"700",borderRadius:"2rem",backgroundColor:"$accent",color:"$secondary",cursor:"pointer",boxSizing:"content-box !important",transition:"$all",svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",opacity:"1",filter:"drop-shadow(5px 5px 5px #000D)",boxSizing:"inherit",transition:"$all"},"&:disabled":{backgroundColor:"transparent",boxShadow:"none",svg:{opacity:"0.25"}}}),ar=id("div",{display:"flex",marginRight:"0.618rem",backgroundColor:"$accentAlt",borderRadius:"2rem",boxShadow:"5px 5px 5px #0003",color:"$secondary",alignItems:"center","> span":{display:"flex",margin:"0 0.5rem",fontSize:"0.7222rem"}}),an=id("div",{display:"flex",position:"relative",zIndex:"1",width:"100%",padding:"0",transition:"$all",variants:{isToggle:{true:{paddingTop:"2.618rem",[`& ${i9}`]:{width:"calc(100% - 2rem)","@sm":{width:"calc(100% - 2rem)"}}}}}}),Sn=(a,m)=>{(0,$.useEffect)(()=>{function r(h){h.key===a&&m()}return window.addEventListener("keyup",r),()=>window.removeEventListener("keyup",r)},[])},kn=()=>$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},$.createElement("title",null,"Arrow Back"),$.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M244 400L100 256l144-144M120 256h292"})),In=()=>$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},$.createElement("title",null,"Arrow Forward"),$.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M268 112l144 144-144 144M392 256H100"})),$n=()=>$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},$.createElement("title",null,"Close"),$.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),Tn=()=>$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},$.createElement("title",null,"Search"),$.createElement("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})),An=({handleCanvasToggle:a,handleFilter:m,activeIndex:h,canvasLength:g})=>{let[v,b]=(0,$.useState)(!1),[w,E]=(0,$.useState)(!1),[C,T]=(0,$.useState)(!1);return(0,$.useEffect)(()=>{T(0===h),h===g-1?E(!0):E(!1)},[h]),Sn("Escape",()=>{b(!1),m("")}),$.createElement(an,{isToggle:v},$.createElement(i9,null,v&&$.createElement(i7,{autoFocus:!0,onChange:a=>m(a.target.value),placeholder:"Search"}),!v&&$.createElement(ar,null,$.createElement(at,{onClick:()=>a(-1),disabled:C,type:"button"},$.createElement(kn,null)),$.createElement("span",null,h+1," of ",g),$.createElement(at,{onClick:()=>a(1),disabled:w,type:"button"},$.createElement(In,null))),$.createElement(at,{onClick:()=>{b(a=>!a),m("")},type:"button"},v?$.createElement($n,null):$.createElement(Tn,null))))},Mn=({items:a})=>{let m=F(),h=k(),{activeCanvas:g,vault:v}=h,[b,w]=(0,$.useState)(""),[E,C]=(0,$.useState)([]),[T,_]=(0,$.useState)(0),O=$.useRef(null),L=["Image","Sound","Video"],x=a=>{g!==a&&m({type:"updateActiveCanvas",canvasId:a})};return(0,$.useEffect)(()=>{if(!E.length){let m=a.map(a=>ve(v,a,"painting",L)).filter(a=>a.annotations.length>0);C(m)}},[]),(0,$.useEffect)(()=>{E.forEach((a,m)=>{null!=a&&a.canvas&&a.canvas.id===g&&_(m)})},[g]),(0,$.useEffect)(()=>{let a=document.querySelector(`[data-canvas="${T}"]`);if(a instanceof HTMLElement&&O.current){let m=a.offsetLeft-O.current.offsetWidth/2+a.offsetWidth/2;O.current.scrollTo({left:m,behavior:"smooth"})}},[T]),$.createElement($.Fragment,null,$.createElement(An,{handleFilter:a=>w(a),handleCanvasToggle:a=>{let m=E[T+a];null!=m&&m.canvas&&x(m.canvas.id)},activeIndex:T,canvasLength:E.length}),$.createElement(iK,{"aria-label":"select item","data-testid":"media",ref:O},E.filter(a=>{var m;if(null!=(m=a.canvas)&&m.label){let m=P(a.canvas.label);if(Array.isArray(m))return m[0].toLowerCase().includes(b.toLowerCase())}}).map((a,m)=>{var h,b;return $.createElement(bn,{canvas:a.canvas,canvasIndex:m,handleChange:x,isActive:g===(null==(h=null==a?void 0:a.canvas)?void 0:h.id),key:null==(b=null==a?void 0:a.canvas)?void 0:b.id,thumbnail:rt(v,a,200,200),type:yn(a.annotations[0])})})))},ai=id("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),aa=id("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),ao=id("div",{width:"100%",height:"61.8vh",maxHeight:"100vh",background:"black",backgroundSize:"contain",color:"white",position:"relative",zIndex:"1",overflow:"hidden"}),al=id("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",backgroundColor:"$primary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&#rotateRight":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&#rotateLeft":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&#reset":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}}),R=({id:a,label:m,children:h})=>$.createElement(al,{id:a,"data-testid":"openseadragon-button"},$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":`${a}-svg-title`,"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},$.createElement("title",{id:`${a}-svg-title`},m),h)),as=id("div",{position:"absolute",zIndex:"1",top:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),Pn=()=>$.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),Vn=()=>$.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),Hn=()=>$.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),Bn=()=>$.createElement("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),ae=()=>$.createElement($.Fragment,null,$.createElement("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),$.createElement("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})),On=({hasPlaceholder:a,options:m})=>$.createElement(as,{"data-testid":"openseadragon-controls",hasPlaceholder:a,id:"openseadragon-controls"},m.showZoomControl&&$.createElement($.Fragment,null,$.createElement(R,{id:"zoomIn",label:"zoom in"},$.createElement(Pn,null)),$.createElement(R,{id:"zoomOut",label:"zoom out"},$.createElement(Vn,null))),m.showFullPageControl&&$.createElement(R,{id:"fullPage",label:"full page"},$.createElement(Hn,null)),m.showRotationControl&&$.createElement($.Fragment,null,$.createElement(R,{id:"rotateRight",label:"rotate right"},$.createElement(ae,null)),$.createElement(R,{id:"rotateLeft",label:"rotate left"},$.createElement(ae,null))),m.showHomeControl&&$.createElement(R,{id:"reset",label:"reset"},$.createElement(Bn,null))),Dn=a=>fetch(`${a.replace(/\/$/,"")}/info.json`).then(a=>a.json()).then(a=>a).catch(m=>{console.error(`The IIIF tilesource ${a.replace(/\/$/,"")}/info.json failed to load: ${m}`)}),Wn=a=>{let m,h;return Array.isArray(a)&&(m=a[0])&&(h="@id"in m?m["@id"]:m.id),h},jn=({uri:a,imageType:m,hasPlaceholder:h})=>{let[g,v]=(0,$.useState)(),b=k(),{configOptions:w}=b,E=esm_browser_v4(),C={id:`openseadragon-viewport-${E}`,loadTilesWithAjax:!0,fullPageButton:"fullPage",homeButton:"reset",rotateLeftButton:"rotateLeft",rotateRightButton:"rotateRight",zoomInButton:"zoomIn",zoomOutButton:"zoomOut",showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",navigatorId:`openseadragon-navigator-${E}`,gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!0},...w.openSeadragon,ajaxWithCredentials:w.withCredentials};return(0,$.useEffect)(()=>{a!==g&&v(a)},[]),(0,$.useEffect)(()=>{if(g)switch(m){case"simpleImage":r4(C).addSimpleImage({url:g});break;case"tiledImage":Dn(g).then(a=>r4(C).addTiledImage({tileSource:a}));break;default:console.warn(`Unable to render ${g} in OpenSeadragon as type: "${m}"`)}},[g]),$.createElement(ao,{css:{backgroundColor:w.canvasBackgroundColor,height:w.canvasHeight}},$.createElement(On,{options:C,hasPlaceholder:h}),$.createElement(ai,{id:`openseadragon-navigator-${E}`}),$.createElement(aa,{id:`openseadragon-viewport-${E}`}))},Nn=({body:a,hasPlaceholder:m})=>{let[h,g]=(0,$.useState)(),[v,b]=(0,$.useState)();return(0,$.useEffect)(()=>{Array.isArray(a.service)&&a.service.length>0?(g("tiledImage"),b(Wn(a.service))):(g("simpleImage"),b(a.id))},[a]),$.createElement(jn,{uri:v,key:v,imageType:h,hasPlaceholder:m})},ac=id("button",{background:"none",border:"none",cursor:"zoom-in",width:"100%",height:"100%",margin:"0",padding:"0",display:"flex",transition:"$all","& img":{width:"100%",height:"100%",objectFit:"contain",color:"transparent",transition:"$all"},variants:{isMedia:{true:{cursor:"pointer"}}}}),Gn=({isMedia:a,label:m,placeholderCanvas:h,setIsInteractive:g})=>{let{vault:v}=k(),b=B(v,h),w=m?P(m):["placeholder image"];return $.createElement(ac,{onClick:()=>g(!0),isMedia:a},$.createElement("img",{src:(null==b?void 0:b.id)||"",alt:w.join(),height:null==b?void 0:b.height,width:null==b?void 0:b.width}))},au=id(al,{position:"absolute",width:"2rem",top:"1rem",right:"1rem",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",transition:"$all",borderRadius:"50%",backgroundColor:"$accent",cursor:"pointer","&:hover, &:focus":{backgroundColor:"$accent !important"},variants:{isInteractive:{true:{"&:hover":{opacity:"1"}},false:{}},isMedia:{true:{cursor:"pointer !important"}}},compoundVariants:[{isInteractive:!1,isMedia:!0,css:{top:"50%",right:"50%",width:"4rem",height:"4rem",transform:"translate(50%,-50%)"}}]}),ad=id("div",{position:"relative",zIndex:"0","&:hover":{[`${au}`]:{backgroundColor:"$accent"},[`${ac}`]:{backgroundColor:"#6662",img:{filter:"brightness(0.85)"}}}}),ap=id("div",{position:"relative",backgroundColor:"$primaryAlt",display:"flex",flexGrow:"0",flexShrink:"1",maxHeight:"500px",zIndex:"1",video:{backgroundColor:"transparent",objectFit:"contain",width:"100%",height:"100%",position:"relative",zIndex:"1"}}),af=id("canvas",{position:"absolute",width:"100%",height:"100%",zIndex:"0"}),am=$.forwardRef((a,m)=>{let h=$.useRef(null);function o(){let a=m.current,g=new AudioContext,v=g.createMediaElementSource(a),b=g.createAnalyser(),w=h.current;if(!w)return;w.width=a.offsetWidth,w.height=a.offsetHeight;let E=w.getContext("2d");v.connect(b),b.connect(g.destination),b.fftSize=256;let C=b.frequencyBinCount,$=new Uint8Array(C);setInterval(function(){!function(a,m,h,g,v,b){let w=v/h*2.6,E,C=0;a.getByteFrequencyData(g),m.fillStyle="#000000",m.fillRect(0,0,v,b);for(let a=0;a<h;a++)E=2*g[a],m.fillStyle="rgba(78, 42, 132, 1)",m.fillRect(C,b-E,w,E),C+=w+6}(b,E,C,$,w.width,w.height)},20)}return $.useEffect(()=>{m&&(m.current.onplay=o)},[m]),$.createElement(af,{ref:h})}),Xn=({resource:a,ignoreCaptionLabels:m})=>{let h=P(a.label,"en");return h.some(a=>m.includes(a))?null:$.createElement("track",{key:a.id,src:a.id,label:h,srcLang:"en","data-testid":"player-track"})},Yn=({resources:a,painting:m})=>{var h;let[g,v]=$.useState(0),[b,w]=$.useState(),E=$.useRef(null),C=null==(h=null==m?void 0:m.format)?void 0:h.includes("audio/"),T=k(),{activeCanvas:_,configOptions:O,vault:L}=T;return(0,$.useEffect)(()=>{if(!m.id||!E.current||"m3u8"!==m.id.split(".").pop())return;let a=new tK.Z({xhrSetup:function(a,m){a.withCredentials=O.withCredentials}});return a.attachMedia(E.current),a.on(tK.Z.Events.MEDIA_ATTACHED,function(){a.loadSource(m.id)}),a.on(tK.Z.Events.ERROR,function(m,h){if(h.fatal)switch(h.type){case tK.Z.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${m} network error encountered, try to recover`),a.startLoad();break;case tK.Z.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${m} media error encountered, try to recover`),a.recoverMediaError();break;default:a.destroy()}}),()=>{if(a&&E.current){let m=E.current;a.detachMedia(),a.destroy(),m.currentTime=0}}},[m.id]),(0,$.useEffect)(()=>{var a,m,h,v;let b=L.get(_),E=null!=(a=b.accompanyingCanvas)&&a.id?B(L,null==(m=b.accompanyingCanvas)?void 0:m.id):null,C=null!=(h=b.placeholderCanvas)&&h.id?B(L,null==(v=b.placeholderCanvas)?void 0:v.id):null;E&&C?w(0===g?C.id:E.id):(E&&w(E.id),C&&w(C.id))},[_,g]),(0,$.useEffect)(()=>{if(null!=E&&E.current){let a=E.current;return null==a||a.addEventListener("timeupdate",()=>v(a.currentTime)),()=>document.removeEventListener("timeupdate",()=>{})}},[null==E?void 0:E.current]),$.createElement(ap,{css:{backgroundColor:O.canvasBackgroundColor,maxHeight:O.canvasHeight}},$.createElement("video",{id:"clover-iiif-video",key:m.id,ref:E,controls:!0,height:m.height,width:m.width,crossOrigin:"anonymous",poster:b,style:{maxHeight:O.canvasHeight}},$.createElement("source",{src:m.id,type:m.format}),a.length>0&&a.map(a=>$.createElement(Xn,{resource:a,ignoreCaptionLabels:O.ignoreCaptionLabels,key:a.id})),"Sorry, your browser doesn't support embedded videos."),C&&$.createElement(am,{ref:E}))},Kn=()=>$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"close-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},$.createElement("title",{id:"close-svg-title"},"close"),$.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),Jn=({isMedia:a})=>$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"open-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},$.createElement("title",{id:"open-svg-title"},"open"),a?$.createElement("path",{d:"M133 440a35.37 35.37 0 01-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0135.77.45l247.85 148.36a36 36 0 010 61l-247.89 148.4A35.5 35.5 0 01133 440z"}):$.createElement($.Fragment,null,$.createElement("path",{d:"m456.69,421.39l-94.09-94.09c22.65-30.16,34.88-66.86,34.84-104.58,0-96.34-78.38-174.72-174.72-174.72S48,126.38,48,222.72s78.38,174.72,174.72,174.72c37.72.04,74.42-12.19,104.58-34.84l94.09,94.09c10.29,9.2,26.1,8.32,35.3-1.98,8.48-9.49,8.48-23.83,0-33.32Zm-233.97-73.87c-68.89-.08-124.72-55.91-124.8-124.8h0c0-68.93,55.87-124.8,124.8-124.8s124.8,55.87,124.8,124.8-55.87,124.8-124.8,124.8Z"}),$.createElement("path",{d:"m279.5,197.76h-3.35s-28.47,0-28.47,0v-31.82c-.77-13.79-12.57-24.33-26.36-23.56-12.71.71-22.85,10.86-23.56,23.56v3.35h0v28.47h-31.82c-13.79.77-24.33,12.57-23.56,26.36.71,12.71,10.86,22.85,23.56,23.56h3.35s28.47,0,28.47,0v31.82c.77,13.79,12.57,24.33,26.36,23.56,12.71-.71,22.85-10.86,23.56-23.56v-3.35h0v-28.47h31.82c13.79-.77,24.33-12.57,23.56-26.36-.71-12.71-10.86-22.85-23.56-23.56Z"}))),Qn=({handleToggle:a,isInteractive:m,isMedia:h})=>$.createElement(au,{onClick:a,isInteractive:m,isMedia:h},m?$.createElement(Kn,null):$.createElement(Jn,{isMedia:h})),er=({activeCanvas:a,isMedia:m,painting:h,resources:g})=>{var v;let[b,w]=$.useState(!1),{configOptions:E,vault:C}=k(),T=C.get(a),_=null==(v=null==T?void 0:T.placeholderCanvas)?void 0:v.id,O=!!_,L=_&&!b&&!m;return $.createElement(ad,{css:{maxHeight:E.canvasHeight,backgroundColor:E.canvasBackgroundColor}},_&&!m&&$.createElement(Qn,{handleToggle:()=>w(!b),isInteractive:b,isMedia:m}),L&&!m&&$.createElement(Gn,{isMedia:m,label:null==T?void 0:T.label,placeholderCanvas:_,setIsInteractive:w}),!L&&$.createElement("div",null,m?$.createElement(Yn,{painting:h,resources:g}):h&&$.createElement(Nn,{body:h,hasPlaceholder:O,key:a})))},tr=({activeCanvas:a,painting:m,resources:h,items:g,isAudioVideo:v})=>{let{informationOpen:b,configOptions:w}=k(),{informationPanel:E}=w,C=(null==E?void 0:E.renderAbout)||(null==E?void 0:E.renderSupplementing)&&h.length>0;return $.createElement(iw,{className:"clover-content"},$.createElement(iE,null,$.createElement(er,{activeCanvas:a,isMedia:v,painting:m,resources:h}),C&&$.createElement(ix,null,$.createElement("span",null,b?"View Items":"More Information")),g.length>1&&$.createElement(ib,{className:"clover-canvases"},$.createElement(Mn,{items:g,activeItem:0}))),b&&C&&$.createElement(iS,null,$.createElement(iC,null,$.createElement(Jt,{activeCanvas:a,resources:h}))))},ah=id("svg",{height:"19px",color:"$accent",fill:"$accent",stroke:"$accent",display:"flex",margin:"0.25rem 0.85rem"}),ag=id(n_,{fontSize:"1.25rem",fontWeight:"400",fontFamily:"inherit",alignSelf:"flex-start",flexGrow:"1",backgroundColor:"$secondary",cursor:"pointer",transition:"$all",border:"1px solid $secondaryMuted",boxShadow:"2px 2px 5px #0001",borderRadius:"3px",display:"flex",alignItems:"center",paddingLeft:"0.5rem","@sm":{fontSize:"1rem"}}),av=id(nM,{borderRadius:"3px",boxShadow:"3px 3px 8px #0003",backgroundColor:"$secondary",marginTop:"2.25rem",marginLeft:"6px",paddingBottom:"0.25rem",maxHeight:"calc(61.8vh - 2.5rem) !important",borderTopLeftRadius:"0",border:"1px solid $secondaryMuted",maxWidth:"90vw"}),ay=id(nY,{display:"flex",alignItems:"center",fontFamily:"inherit",padding:"0.25rem 0.5rem",color:"$primary",fontWeight:"400",fontSize:"0.8333rem",cursor:"pointer",backgroundColor:"$secondary",width:"calc(100% - 1rem)","> span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},'&[data-state="checked"]':{fontWeight:"700",color:"$primary !important"},"&:hover":{color:"$accent"},img:{width:"31px",height:"31px",marginRight:"0.5rem",borderRadius:"3px"}}),ab=id(nZ,{color:"$primaryMuted",fontFamily:"inherit",fontSize:"0.85rem",padding:"0.5rem 1rem 0.5rem 0.5rem",display:"flex",alignItems:"center",marginBottom:"0.25rem",borderRadius:"3px",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",backgroundColor:"$secondaryMuted"}),aw=id("div",{position:"relative",zIndex:"5"}),aE=id(V.Trigger,{width:"30px",padding:"5px"}),ax=id(V.Content,{display:"flex",flexDirection:"column",fontSize:"0.8333rem",border:"none",boxShadow:"2px 2px 5px #0003",zIndex:"2",button:{display:"flex",textDecoration:"none",marginBottom:"0.5em",color:"$accentAlt",cursor:"pointer",background:"$secondary",border:"none","&:last-child":{marginBottom:"0"}}}),aC=id("span",{fontSize:"1.33rem",alignSelf:"flex-start",flexGrow:"0",flexShrink:"1",padding:"1rem","@sm":{fontSize:"1rem"},"&.visually-hidden":{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"}}),aS=id("header",{display:"flex",backgroundColor:"transparent !important",justifyContent:"space-between",alignItems:"flex-start",width:"100%",[`> ${aw}`]:{flexGrow:"1",flexShrink:"0"},form:{flexGrow:"0",flexShrink:"1"}}),aA=id("div",{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",padding:"1rem",flexShrink:"0",flexGrow:"1"}),G=({direction:a,title:m})=>$.createElement(ah,{xmlns:"http://www.w3.org/2000/svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},$.createElement("title",null,m),"up"===a&&$.createElement(()=>$.createElement("path",{d:"M414 321.94L274.22 158.82a24 24 0 00-36.44 0L98 321.94c-13.34 15.57-2.28 39.62 18.22 39.62h279.6c20.5 0 31.56-24.05 18.18-39.62z"}),null),"down"===a&&$.createElement(()=>$.createElement("path",{d:"M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z"}),null)),ur=()=>{let a=F(),m=k(),{activeManifest:h,collection:g,configOptions:v,vault:b}=m,w=null==v?void 0:v.canvasHeight;return $.createElement(aw,null,$.createElement($cc7e05a45900e73f$export$be92b6f5f03c0fe9,{value:h,onValueChange:m=>{a({type:"updateActiveManifest",manifestId:m})}},$.createElement(ag,null,$.createElement(nk,null),$.createElement(nO,null,$.createElement(G,{direction:"down",title:"select from collection"}))),$.createElement(av,{css:{maxHeight:`${w} !important`}},$.createElement(n2,null,$.createElement(G,{direction:"up",title:"scroll up for more"})),$.createElement(nB,null,$.createElement(nq,null,$.createElement(ab,null,$.createElement(z,{label:g.label})),g.items.map(a=>$.createElement(ay,{value:a.id,key:a.id},(null==a?void 0:a.thumbnail)&&$.createElement(Te,{thumbnail:b.get(null==a?void 0:a.thumbnail)}),$.createElement(nJ,null,$.createElement(z,{label:a.label})),$.createElement(n0,null))))),$.createElement(n4,null,$.createElement(G,{direction:"down",title:"scroll down for more"})))))},pr=(a,m=2500)=>{let[h,g]=(0,$.useState)(),v=(0,$.useCallback)(()=>{navigator.clipboard.writeText(a).then(()=>g("copied"),()=>g("failed"))},[a]);return(0,$.useEffect)(()=>{if(!h)return;let a=setTimeout(()=>g(void 0),m);return()=>clearTimeout(a)},[h]),[h,v]},a$=id("span",{display:"flex",alignContent:"center",alignItems:"center",padding:"0.125rem 0.25rem 0",marginTop:"-0.125rem",marginLeft:"0.5rem",backgroundColor:"$accent",color:"$secondary",borderRadius:"3px",fontSize:"0.6111rem",textTransform:"uppercase",lineHeight:"1em"}),fr=({status:a})=>a?$.createElement(a$,{"data-copy-status":a},a):null,ie=({textPrompt:a,textToCopy:m})=>{let[h,g]=pr(m);return $.createElement("button",{onClick:g},a," ",$.createElement(fr,{status:h}))},hr=()=>{let a="#ed1d33",m="#2873ab";return $.createElement("svg",{viewBox:"0 0 493.35999 441.33334",id:"iiif-logo",version:"1.1"},$.createElement("title",null,"IIIF Manifest Options"),$.createElement("g",{transform:"matrix(1.3333333,0,0,-1.3333333,0,441.33333)"},$.createElement("g",{transform:"scale(0.1)"},$.createElement("path",{style:{fill:m},d:"M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5"}),$.createElement("path",{style:{fill:m},d:"m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18"}),$.createElement("path",{style:{fill:a},d:"M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5"}),$.createElement("path",{style:{fill:a},d:"m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18"}),$.createElement("path",{style:{fill:m},d:"m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5"}),$.createElement("path",{style:{fill:m},d:"m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18"}),$.createElement("path",{style:{fill:a},d:"m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950"}))))},aP=id(ii,{all:"unset",height:"2rem",width:"3.236rem",backgroundColor:"#6663",borderRadius:"9999px",position:"relative",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px $secondaryAlt"},'&[data-state="checked"]':{backgroundColor:"$accent",boxShadow:"inset 2px 2px 5px #0003"}}),aR=id(ia,{display:"block",height:"calc(2rem - 12px)",width:"calc(2rem - 12px)",backgroundColor:"$secondary",borderRadius:"100%",boxShadow:"2px 2px 5px #0001",transition:"$all",transform:"translateX(6px)",willChange:"transform",'&[data-state="checked"]':{transform:"translateX(calc(1.236rem + 6px))"}}),aT=id("label",{fontSize:"0.8333rem",fontWeight:"400",lineHeight:"1em",userSelect:"none",cursor:"pointer",paddingRight:"0.618rem"}),a_=id("form",{display:"flex",flexShrink:"0",flexGrow:"1",alignItems:"center",marginLeft:"1.618rem"}),Er=()=>{var a;let{configOptions:m}=k(),h=F(),[g,v]=(0,$.useState)(null==(a=null==m?void 0:m.informationPanel)?void 0:a.open);return(0,$.useEffect)(()=>{h({type:"updateInformationOpen",informationOpen:g})},[g]),$.createElement(a_,null,$.createElement(aT,{htmlFor:"information-toggle",css:g?{opacity:"1"}:{}},"More Information"),$.createElement(aP,{checked:g,onCheckedChange:()=>v(!g),id:"information-toggle","aria-label":"information panel toggle",name:"toggled?"},$.createElement(aR,null)))},Be=a=>{let n=()=>!!window.matchMedia&&window.matchMedia(a).matches,[m,h]=(0,$.useState)(n);return(0,$.useEffect)(()=>{let i=()=>h(n);return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)}),m},wr=({manifestId:a,manifestLabel:m})=>{let h=k(),{collection:g,configOptions:v}=h,{showTitle:b,showIIIFBadge:w,informationPanel:E}=v,C=w||(null==E?void 0:E.renderToggle),T=Be(iu.sm);return $.createElement(aS,{className:"clover-header"},null!=g&&g.items?$.createElement(ur,null):$.createElement(aC,{className:b?"":"visually-hidden"},b&&$.createElement(z,{label:m})),C&&$.createElement(aA,null,w&&$.createElement(V,null,$.createElement(aE,null,$.createElement(hr,null)),$.createElement(ax,null,(null==g?void 0:g.items)&&$.createElement("button",{onClick:a=>{a.preventDefault(),window.open(g.id,"_blank")}},"View Collection"),$.createElement("button",{onClick:m=>{m.preventDefault(),window.open(a,"_blank")}},"View Manifest")," ",(null==g?void 0:g.items)&&$.createElement(ie,{textPrompt:"Copy Collection URL",textToCopy:g.id}),$.createElement(ie,{textPrompt:"Copy Manifest URL",textToCopy:a}))),E.renderToggle&&!T&&$.createElement(Er,null)))},Cr=(a=!1)=>{let[m,h]=(0,$.useState)(a);return(0,$.useLayoutEffect)(()=>{if(!m)return;let a=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=a}},[m]),(0,$.useEffect)(()=>{m!==a&&h(a)},[a]),[m,h]},Sr=({manifest:a,theme:m})=>{let h=k(),g=F(),{activeCanvas:v,informationOpen:b,vault:w,configOptions:E}=h,[C,T]=(0,$.useState)(!1),[_,O]=(0,$.useState)(!1),[L,D]=(0,$.useState)(void 0),[N,j]=(0,$.useState)([]),[W,H]=Cr(!1),U=Be(iu.sm),I=a=>{g({type:"updateInformationOpen",informationOpen:a})};return(0,$.useEffect)(()=>{null!=E&&E.informationPanel.open&&I(!U)},[U]),(0,$.useEffect)(()=>{if(!U){H(!1);return}H(b)},[b]),(0,$.useEffect)(()=>{let a=B(w,v),m=nt(w,v,"text/vtt");a&&(O(["Sound","Video"].indexOf(a.type)>-1),D({...a})),j(m),T(0!==m.length)},[v]),$.createElement(tu.SV,{FallbackComponent:st},$.createElement(iA,{className:`${m} clover-iiif`,css:{background:null==E?void 0:E.background},"data-body-locked":W,"data-information-panel":C,"data-information-panel-open":b},$.createElement(tc.fC,{open:b,onOpenChange:I},$.createElement(wr,{manifestLabel:a.label,manifestId:a.id}),$.createElement(tr,{activeCanvas:v,painting:L,resources:N,items:a.items,isAudioVideo:_}))))},ak={ignoreCache:!1,headers:{Accept:"application/json, text/javascript, text/plain"},timeout:5e3,withCredentials:!1};function se(a,m=null){return{ok:!1,status:a.status,statusText:a.statusText,headers:a.getAllResponseHeaders(),data:m||a.statusText,json:()=>JSON.parse(m||a.statusText)}}let Or=({canvasIdCallback:a=()=>{},customTheme:m,iiifContent:h,id:g,manifestId:v,options:b})=>{var w;let E=h;return g&&(E=g),v&&(E=v),$.createElement(tt,{initialState:{...il,informationOpen:!!(null!=(w=null==b?void 0:b.informationPanel)&&w.open),vault:new Vault({customFetcher:a=>(function(a,m=ak){let h=m.headers||ak.headers;return new Promise((g,v)=>{let b=new XMLHttpRequest;b.open("get",a),b.withCredentials=m.withCredentials,h&&Object.keys(h).forEach(a=>b.setRequestHeader(a,h[a])),b.onload=()=>{g({ok:b.status>=200&&b.status<300,status:b.status,statusText:b.statusText,headers:b.getAllResponseHeaders(),data:b.responseText,json:()=>JSON.parse(b.responseText)})},b.onerror=()=>{v(se(b,"Failed to make request."))},b.ontimeout=()=>{v(se(b,"Request took longer than expected."))},b.send()})})(a,{withCredentials:null==b?void 0:b.withCredentials,headers:null==b?void 0:b.requestHeaders}).then(a=>JSON.parse(a.data))})}},$.createElement($r,{iiifContent:E,canvasIdCallback:a,customTheme:m,options:b}))},$r=({canvasIdCallback:a,customTheme:m,iiifContent:h,options:g})=>{let v=F(),b=k(),{activeCanvas:w,activeManifest:E,isLoaded:C,vault:T}=b,[_,O]=(0,$.useState)(),[L,D]=(0,$.useState)(),N={};return m&&(N=(0,td.jG)("custom",m)),(0,$.useEffect)(()=>{a&&a(w)},[w]),(0,$.useEffect)(()=>{E&&T.loadManifest(E).then(a=>{D(a),v({type:"updateActiveCanvas",canvasId:a.items[0]&&a.items[0].id})}).catch(a=>{console.error(`Manifest failed to load: ${a}`)}).finally(()=>{v({type:"updateIsLoaded",isLoaded:!0})})},[E]),(0,$.useEffect)(()=>{v({type:"updateConfigOptions",configOptions:g}),T.load(h).then(a=>{O(a)}).catch(a=>{console.error(`The IIIF resource ${h} failed to load: ${a}`)})},[h,g]),(0,$.useEffect)(()=>{let a=[];(null==_?void 0:_.type)==="Collection"?(v({type:"updateCollection",collection:_}),(a=_.items.filter(a=>"Manifest"===a.type).map(a=>a.id)).length>0&&v({type:"updateActiveManifest",manifestId:a[0]})):(null==_?void 0:_.type)==="Manifest"&&v({type:"updateActiveManifest",manifestId:_.id})},[_]),C?L&&L.items?0===L.items.length?(console.log(`The IIIF manifest ${h} does not contain canvases.`),$.createElement($.Fragment,null)):$.createElement(Sr,{manifest:L,theme:N,key:L.id}):(console.log(`The IIIF manifest ${h} failed to load.`),$.createElement($.Fragment,null)):$.createElement($.Fragment,null,"Loading")};var aO=Or}}]);