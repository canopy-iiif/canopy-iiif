(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[138],{9821:function(m,h,g){"use strict";let v=g(4579).parse,b=g(7799).compile,E=g(7094).segment,x=g(1105);m.exports={parse:v,compile:b,segment:E,hls:x}},7799:function(m){"use strict";function CompilerError(m,h){this.message=m,this.error=h}function convertTimestamp(m){let h=pad(Math.floor(m/60/60),2),g=pad(Math.floor(m/60)%60,2),v=pad(Math.floor(m%60),2),b=pad(Math.floor(1e3*(m%1).toFixed(4)),3);return`${h}:${g}:${v}.${b}`}function pad(m,h){let g=`${m}`;for(;g.length<h;)g=`0${g}`;return g}CompilerError.prototype=Object.create(Error.prototype),m.exports={CompilerError,compile:function(m){if(!m)throw new CompilerError("Input must be non-null");if("object"!=typeof m)throw new CompilerError("Input must be an object");if(Array.isArray(m))throw new CompilerError("Input cannot be array");if(!m.valid)throw new CompilerError("Input must be valid");let h="WEBVTT\n";if(m.meta){if("object"!=typeof m.meta||Array.isArray(m.meta))throw new CompilerError("Metadata must be an object");Object.entries(m.meta).forEach(m=>{if("string"!=typeof m[1])throw new CompilerError(`Metadata value for "${m[0]}" must be string`);h+=`${m[0]}: ${m[1]}
`})}let g=null;return m.cues.forEach((m,v)=>{if(g&&g>m.start)throw new CompilerError(`Cue number ${v} is not in chronological order`);g=m.start,h+="\n"+function(m){if("object"!=typeof m)throw new CompilerError("Cue malformed: not of type object");if("string"!=typeof m.identifier&&"number"!=typeof m.identifier&&null!==m.identifier)throw new CompilerError(`Cue malformed: identifier value is not a string.
    ${JSON.stringify(m)}`);if(isNaN(m.start))throw new CompilerError(`Cue malformed: null start value.
    ${JSON.stringify(m)}`);if(isNaN(m.end))throw new CompilerError(`Cue malformed: null end value.
    ${JSON.stringify(m)}`);if(m.start>=m.end)throw new CompilerError(`Cue malformed: start timestamp greater than end
    ${JSON.stringify(m)}`);if("string"!=typeof m.text)throw new CompilerError(`Cue malformed: null text value.
    ${JSON.stringify(m)}`);if("string"!=typeof m.styles)throw new CompilerError(`Cue malformed: null styles value.
    ${JSON.stringify(m)}`);let h="";m.identifier.length>0&&(h+=`${m.identifier}
`);let g=convertTimestamp(m.start),v=convertTimestamp(m.end);return h+(`${g} --> ${v}`+(m.styles?` ${m.styles}`:""))+`
${m.text}`}(m)+"\n"}),h}}},1105:function(m,h,g){"use strict";let v=g(7094).segment;function pad(m,h){let g="0".repeat(Math.max(0,h-m.toString().length));return`${g}${m}`}function printableTimestamp(m){let h=(m%1).toFixed(3);m=Math.round(m-h);let g=Math.floor(m/3600),v=Math.floor((m-3600*g)/60),b=m-3600*g-60*v,E=`${pad(g,2)}:`;return`${E}${pad(v,2)}:${pad(b,2)}.${pad(1e3*h,3)}`}m.exports={hlsSegment:function(m,h,g){void 0===g&&(g="900000");let b=v(m,h),E=[];return b.forEach((m,h)=>{let v=`WEBVTT
X-TIMESTAMP-MAP=MPEGTS:${g},LOCAL:00:00:00.000

${function(m){let h=[];return m.forEach(m=>{h.push(function(m){let h=[];m.identifier&&h.push(m.identifier);let g=printableTimestamp(m.start),v=printableTimestamp(m.end),b=m.styles?`${m.styles}`:"";return h.push(`${g} --> ${v} ${b}`),h.push(m.text),h.join("\n")}(m))}),h.join("\n\n")}(m.cues)}
`,b=`${h}.vtt`;E.push({filename:b,content:v})}),E},hlsSegmentPlaylist:function(m,h){let g;let b=v(m,h),E=function(m){let h=[];return m.forEach((m,g)=>{h.push(`#EXTINF:${m.duration.toFixed(5)},
${g}.vtt`)}),h.join("\n")}(b),x=Math.round((g=0,b.forEach(m=>{m.duration>g&&(g=m.duration)}),g)),C=`#EXTM3U
#EXT-X-TARGETDURATION:${x}
#EXT-X-VERSION:3
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-PLAYLIST-TYPE:VOD
${E}
#EXT-X-ENDLIST
`;return C}}},4579:function(m){"use strict";function ParserError(m,h){this.message=m,this.error=h}ParserError.prototype=Object.create(Error.prototype);let h=/([0-9]+)?:?([0-9]{2}):([0-9]{2}\.[0-9]{2,3})/;function parseTimestamp(m){let g=m.match(h);return 3600*parseFloat(g[1]||0)+(60*parseFloat(g[2])+parseFloat(g[3]))}m.exports={ParserError,parse:function(m,g){g||(g={});let{meta:v=!1,strict:b=!0}=g;if("string"!=typeof m)throw new ParserError("Input must be a string");m=(m=(m=m.trim()).replace(/\r\n/g,"\n")).replace(/\r/g,"\n");let E=m.split("\n\n"),x=E.shift();if(!x.startsWith("WEBVTT"))throw new ParserError('Must start with "WEBVTT"');let C=x.split("\n"),S=C[0].replace("WEBVTT","");if(S.length>0&&" "!==S[0]&&"	"!==S[0])throw new ParserError("Header comment must start with space or tab");if(0===E.length&&1===C.length)return{valid:!0,strict:b,cues:[],errors:[]};if(!v&&C.length>1&&""!==C[1])throw new ParserError("Missing blank line after signature");let{cues:$,errors:_}=function(m,g){let v=[],b=m.map((m,b)=>{try{return function(m,g,v){var b,E;let x="",C=0,S=.01,$="",_="",M=m.split("\n").filter(Boolean);if(M.length>0&&M[0].trim().startsWith("NOTE"))return null;if(1===M.length&&!M[0].includes("-->"))throw new ParserError(`Cue identifier cannot be standalone (cue #${g})`);if(M.length>1&&!(M[0].includes("-->")||M[1].includes("-->"))){let m=`Cue identifier needs to be followed by timestamp (cue #${g})`;throw new ParserError(m)}M.length>1&&M[1].includes("-->")&&(x=M.shift());let L="string"==typeof M[0]&&M[0].split(" --> ");if(2!==L.length||(b=L[0],!h.test(b))||(E=L[1],!h.test(E)))throw new ParserError(`Invalid cue timestamp (cue #${g})`);if(C=parseTimestamp(L[0]),S=parseTimestamp(L[1]),v){if(C>S)throw new ParserError(`Start timestamp greater than end (cue #${g})`);if(S<=C)throw new ParserError(`End must be greater than start (cue #${g})`)}if(!v&&S<C)throw new ParserError(`End must be greater or equal to start when not strict (cue #${g})`);return _=L[1].replace(h,"").trim(),M.shift(),!!($=M.join("\n"))&&{identifier:x,start:C,end:S,text:$,styles:_}}(m,b,g)}catch(m){return v.push(m),null}}).filter(Boolean);return{cues:b,errors:v}}(E,b);if(b&&_.length>0)throw _[0];let M=v?function(m){let h={};return m.slice(1).forEach(m=>{let g=m.indexOf(":"),v=m.slice(0,g).trim(),b=m.slice(g+1).trim();h[v]=b}),Object.keys(h).length>0?h:null}(C):null,L={valid:0===_.length,strict:b,cues:$,errors:_};return v&&(L.meta=M),L}}},7094:function(m,h,g){"use strict";let v=g(4579).parse;m.exports={segment:function(m,h){h=h||10;let g=v(m),b=[],E=[],x=null,C=0,S=0;return g.cues.forEach((m,v)=>{let $=0===v,_=v===g.cues.length-1,M=m.start,L=m.end,D=_?1/0:g.cues[v+1].start,F=$?L:L-M,N=$?0:M-g.cues[v-1].end;C=C+F+N,b.length,x&&(E.push(x),C+=x.end-S,x=null),E.push(m);let j=D-L<h&&N<h&&C>h;if(function(m,h,g,v){return(v<=h||v+(h-v%h)+m<g)&&g-m>=h}(S,h,D,N)){var W,B,U,Z;let m;let g=(W=h,B=C,U=S,m=W,B>W&&(m=(Z=B-W)+(W-Z%W)),m=_?parseFloat((L-U).toFixed(2)):Math.round(m));b.push({duration:g,cues:E}),S+=g,C=0,E=[]}else j=!1;j&&(x=m)}),b}}},4887:function(m,h){!function(m){"use strict";function t(m){return null==m}function r(m){throw Error("Argument "+m+" is empty.")}function e(m){return"function"==typeof m&&"getType"in m}function i(m){throw Error("Argument "+m+' is invalid, it should be an action-creator instance from "typesafe-actions"')}function o(m,h){if(null==m)throw Error("Argument contains array with empty element at index "+h);if(null==m.getType)throw Error("Argument contains array with invalid element at index "+h+', it should be an action-creator instance from "typesafe-actions"')}function u(m){return"string"==typeof m||"symbol"==typeof m}function c(m){throw Error("Argument "+m+" is invalid, it should be an action type of type: string | symbol")}function f(m,h){if(null==m)throw Error("Argument contains array with empty element at index "+h);if("string"!=typeof m&&"symbol"!=typeof m)throw Error("Argument contains array with invalid element at index "+h+", it should be of type: string | symbol")}function s(m,h,g,v){return t(m)&&r(1),u(m)||i(1),{type:m,payload:h,meta:g,error:v}}function y(m,h){return t(m)&&r(1),u(m)||c(1),Object.assign(function(){var g=null!=h?h.apply(void 0,arguments):void 0;return Object.assign({type:m},g)},{getType:function(){return m},toString:function(){return m}})}function l(m,h,g){return t(m)&&r(1),u(m)||c(1),function(){return y(m,function(){var m=arguments.length<=0?void 0:arguments[0],v=arguments.length<=1?void 0:arguments[1];return null==h&&null==g||(m=null!=h?h.apply(void 0,arguments):void 0,v=null!=g?g.apply(void 0,arguments):void 0),Object.assign({},void 0!==m&&{payload:m},{},void 0!==v&&{meta:v})})}}function p(m){return t(m)&&r(1),e(m)||i(1),m.getType()}function d(m,h){return t(m)&&r(1),u(m)||c(1),Object.assign(null!=h?h(m):function(){return{type:m}},{getType:function(){return m},toString:function(){return m}})}m.action=s,m.createAction=l,m.createAsyncAction=function(m,h,g,v){return function(){var b=[m,h,g,v].map(function(m,h){return Array.isArray(m)?l(m[0],m[1],m[2])():"string"==typeof m||"symbol"==typeof m?l(m)():void(h<3&&function(m){throw Error("Argument "+m+' is invalid, it should be an action type of "string | symbol" or a tuple of "[string | symbol, Function, Function?]"')}(h))});return{request:b[0],success:b[1],failure:b[2],cancel:b[3]}}},m.createCustomAction=y,m.createReducer=function n(m,h){void 0===h&&(h={});var g=Object.assign({},h),o=function(h,v){var b=Array.isArray(h)?h:[h],E={};return b.map(function(m,h){return e(m)?p(m):u(m)?m:function(m){throw Error("Argument "+m+' is invalid, it should be an action-creator instance from "typesafe-actions" or action type of type: string | symbol')}(h+1)}).forEach(function(m){return E[m]=v}),n(m,Object.assign({},g,{},E))};return Object.assign(function(h,v){if(void 0===h&&(h=m),g.hasOwnProperty(v.type)){var b=g[v.type];if("function"!=typeof b)throw Error('Reducer under "'+v.type+'" key is not a valid reducer');return b(h,v)}return h},{handlers:Object.assign({},g),handleAction:o,handleType:o})},m.deprecated={createAction:function(m,h){return Object.assign(null==h?function(){return s(m)}:h(s.bind(null,m)),{getType:function(){return m},toString:function(){return m}})},createCustomAction:d,createStandardAction:function(m){return t(m)&&r(1),u(m)||c(1),Object.assign(function(){return d(m,function(m){return function(h,g){return{type:m,payload:h,meta:g}}})},{map:function(h){return d(m,function(m){return function(g,v){return Object.assign(h(g,v),{type:m})}})}})}},m.getType=p,m.isActionOf=function(m,h){t(m)&&r(1);var g=Array.isArray(m)?m:[m];g.forEach(o);var u=function(m){return g.some(function(h){return m.type===h.getType()})};return void 0===h?u:u(h)},m.isOfType=function(m,h){t(m)&&r(1);var g=Array.isArray(m)?m:[m];g.forEach(f);var o=function(m){return g.includes(m.type)};return void 0===h?o:o(h)}}(h)},8138:function(m,h,g){"use strict";let v,b,E;g.r(h),g.d(h,{Primitives:function(){return C.default},Slider:function(){return S.default},Viewer:function(){return Qr},default:function(){return aF}});var x,C=g(1830),S=g(9897),$=g(7294),_=Object.defineProperty,__defNormalProp=(m,h,g)=>h in m?_(m,h,{enumerable:!0,configurable:!0,writable:!0,value:g}):m[h]=g,__publicField=(m,h,g)=>(__defNormalProp(m,"symbol"!=typeof h?h+"":h,g),g);let M=[];Object.freeze(M);let L={id:"https://iiif-parser/annotation-page",type:"AnnotationPage",behavior:M,motivation:null,label:null,thumbnail:M,summary:null,requiredStatement:null,metadata:M,rights:null,provider:M,items:M,seeAlso:M,homepage:M,logo:M,rendering:M,service:M},D={id:"https://iiif-parser/empty-canvas",type:"Canvas",label:null,behavior:M,motivation:null,thumbnail:M,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:M,rights:null,navDate:null,provider:M,items:M,annotations:M,seeAlso:M,homepage:M,logo:M,partOf:M,rendering:M,service:M,duration:0,height:0,width:0},F={id:"https://iiif-parser/empty-collection",type:"Collection",label:null,viewingDirection:"left-to-right",behavior:M,motivation:null,thumbnail:M,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:M,rights:null,navDate:null,provider:M,items:M,annotations:M,seeAlso:M,homepage:M,logo:M,partOf:M,rendering:M,service:M,services:M},N={id:"https://iiif-parser/empty-manifest",type:"Manifest",annotations:M,behavior:M,homepage:M,items:M,label:null,logo:M,metadata:M,motivation:null,navDate:null,provider:M,partOf:M,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,rendering:M,requiredStatement:null,rights:null,seeAlso:M,service:M,services:M,start:null,structures:M,summary:null,thumbnail:M,viewingDirection:"left-to-right"},j={id:"https://iiif-parser/empty-canvas",type:"Range",label:null,behavior:M,motivation:null,thumbnail:M,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:M,rights:null,navDate:null,provider:M,items:M,annotations:M,seeAlso:M,homepage:M,logo:M,partOf:M,rendering:M,service:M,start:null,supplementary:null,viewingDirection:"left-to-right"},W={id:"https://iiif-parser/empty-agent",type:"Agent",label:{},logo:M,seeAlso:M,homepage:M};function ensureArray$1(m){return Array.isArray(m)?m:[m]}let B=["Collection","Manifest","Canvas","AnnotationPage","AnnotationCollection","Annotation","ContentResource","Range","Service","Selector","Agent"];let Traverse$1=class Traverse$1{constructor(m,h={}){__publicField(this,"traversals"),__publicField(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationCollection:[],annotationPage:[],annotation:[],contentResource:[],choice:[],range:[],service:[],agent:[],...m},this.options={allowUndefinedReturn:!1,...h}}static all(m){return new Traverse$1({collection:[m],manifest:[m],canvas:[m],annotationCollection:[m],annotationPage:[m],annotation:[m],contentResource:[m],choice:[m],range:[m],service:[m]})}traverseDescriptive(m){return m.thumbnail&&(m.thumbnail=m.thumbnail.map(m=>this.traverseType(m,this.traversals.contentResource))),m.provider&&(m.provider=m.provider.map(m=>this.traverseAgent(m))),m}traverseLinking(m){return m.seeAlso&&(m.seeAlso=m.seeAlso.map(m=>this.traverseType(m,this.traversals.contentResource))),m.service&&(m.service=ensureArray$1(m.service).map(m=>this.traverseType(m,this.traversals.service))),m.services&&(m.services=m.services.map(m=>this.traverseType(m,this.traversals.service))),m.logo&&(m.logo=m.logo.map(m=>this.traverseType(m,this.traversals.contentResource))),m.homepage&&(m.homepage=m.homepage.map(m=>this.traverseType(m,this.traversals.contentResource))),m.partOf&&(m.partOf=m.partOf.map(m=>"string"!=typeof m&&m.type?"Canvas"===m.type?this.traverseType(m,this.traversals.canvas):"AnnotationCollection"===m.type?this.traverseType(m,this.traversals.annotationCollection):"Collection"===m.type?this.traverseType(m,this.traversals.collection):this.traverseType(m,this.traversals.contentResource):this.traverseType(m,this.traversals.contentResource))),m.start&&(m.start=m.start?this.traverseType(m.start,this.traversals.canvas):null),m.rendering&&(m.rendering=m.rendering.map(m=>this.traverseType(m,this.traversals.contentResource))),m.supplementary&&(m.supplementary=m.supplementary.map(m=>this.traverseType(m,this.traversals.contentResource))),m}traverseCollectionItems(m){return m.items&&m.items.map(m=>"Collection"===m.type?this.traverseCollection(m):this.traverseManifest(m)),m}traverseCollection(m){return this.traverseType(this.traverseDescriptive(this.traverseInlineAnnotationPages(this.traverseLinking(this.traversePosterCanvas(this.traverseCollectionItems(m))))),this.traversals.collection)}traverseManifestItems(m){return m.items&&(m.items=m.items.map(m=>this.traverseCanvas(m))),m}traverseManifestStructures(m){return m.structures&&(m.structures=m.structures.map(m=>this.traverseRange(m))),m}traverseManifest(m){return this.traverseType(this.traverseInlineAnnotationPages(this.traverseManifestStructures(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(m)))))),this.traversals.manifest)}traverseCanvasItems(m){return m.items=(m.items||[]).map(m=>this.traverseAnnotationPage(m)),m}traverseInlineAnnotationPages(m){return"string"!=typeof m&&m&&m.annotations&&(m.annotations=m.annotations.map(m=>this.traverseAnnotationPage(m))),m}traverseCanvas(m){return this.traverseType(this.traverseInlineAnnotationPages(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(m))))),this.traversals.canvas)}traverseAnnotationPageItems(m){return m.items&&(m.items=m.items.map(m=>this.traverseAnnotation(m))),m}traverseAnnotationPage(m){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationPageItems(m))),this.traversals.annotationPage)}traverseAnnotationBody(m){return Array.isArray(m.body)?m.body=m.body.map(m=>this.traverseContentResource(m)):m.body&&(m.body=this.traverseContentResource(m.body)),m}traversePosterCanvas(m){return m.posterCanvas&&(m.posterCanvas=this.traverseCanvas(m.posterCanvas)),m.placeholderCanvas&&(m.placeholderCanvas=this.traverseCanvas(m.placeholderCanvas)),m.accompanyingCanvas&&(m.accompanyingCanvas=this.traverseCanvas(m.accompanyingCanvas)),m}traverseAnnotation(m){return this.traverseType(this.traverseLinking(this.traverseAnnotationBody(m)),this.traversals.annotation)}traverseContentResourceLinking(m){return"string"!=typeof m&&m&&m&&m.service&&(m.service=ensureArray$1(m.service||[]).map(m=>this.traverseType(m,this.traversals.service))),m}traverseContentResource(m){return"Choice"===m.type&&(m.items=m.items.map(m=>this.traverseContentResource(m))),this.traverseType(this.traverseInlineAnnotationPages(this.traverseContentResourceLinking(m)),this.traversals.contentResource)}traverseRangeRanges(m){return m.items&&(m.items=m.items.map(m=>"string"==typeof m?this.traverseCanvas({id:m,type:"Canvas"}):"Manifest"===m.type?this.traverseManifest(m):this.traverseRange(m))),m}traverseRange(m){return this.traverseType(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseRangeRanges(m)))),this.traversals.range)}traverseAgent(m){return this.traverseType(this.traverseDescriptive(this.traverseLinking(m)),this.traversals.agent)}traverseType(m,h){return h.reduce((m,h)=>{let g=h(m);return void 0!==g||this.options.allowUndefinedReturn?g:m},m)}traverseService(m){return this.traverseType(m,this.traversals.service)}traverseUnknown(m){let h=function(m){if(null==m)throw Error("Null or undefined is not a valid entity.");if(Array.isArray(m))throw Error("Array is not a valid entity");if("object"!=typeof m)throw Error(`${typeof m} is not a valid entity`);if("string"==typeof m.type){let h=B.indexOf(m.type);if(-1!==h)return B[h]}if(m.profile)return"Service";throw Error("Resource type is not known")}(m);switch(h){case"Collection":return this.traverseCollection(m);case"Manifest":return this.traverseManifest(m);case"Canvas":return this.traverseCanvas(m);case"AnnotationPage":return this.traverseAnnotationPage(m);case"Annotation":return this.traverseAnnotation(m);case"ContentResource":return this.traverseContentResource(m);case"Range":return this.traverseRange(m);case"Service":return this.traverseService(m);case"Agent":return this.traverseAgent(m);default:throw Error(`Unknown or unsupported resource type of ${h}`)}}};let U=["sc:Collection","sc:Manifest","sc:Canvas","sc:AnnotationList","oa:Annotation","sc:Range","sc:Layer","sc:Sequence","oa:Choice","Service","ContentResource"];let Traverse=class Traverse{constructor(m,h={}){__publicField(this,"traversals"),__publicField(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationList:[],sequence:[],annotation:[],contentResource:[],choice:[],range:[],service:[],layer:[],...m},this.options={convertPropsToArray:!0,mergeMemberProperties:!0,allowUndefinedReturn:!1,...h}}static all(m){return new Traverse({collection:[m],manifest:[m],canvas:[m],annotationList:[m],sequence:[m],annotation:[m],contentResource:[m],choice:[m],range:[m],service:[m],layer:[m]})}traverseCollection(m){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(m))),this.traversals.collection)}traverseCollectionItems(m){if(this.options.mergeMemberProperties){let h=[...(m.manifests||[]).map(m=>"string"==typeof m?{"@id":m,"@type":"sc:Manifest"}:m),...(m.collections||[]).map(m=>"string"==typeof m?{"@id":m,"@type":"sc:Collection"}:m),...m.members||[]];delete m.collections,delete m.manifests,m.members=h}return m.manifests&&(m.manifests=m.manifests.map(m=>this.traverseManifest("string"==typeof m?{"@id":m,"@type":"sc:Manifest"}:m))),m.collections&&(m.collections=m.collections.map(m=>this.traverseCollection("string"==typeof m?{"@id":m,"@type":"sc:Collection"}:m))),m.members&&(m.members=m.members.map(m=>"string"==typeof m?m:this.traverseUnknown(m))),m}traverseManifest(m){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(m))),this.traversals.manifest)}traverseManifestItems(m){return m.sequences&&(m.sequences=m.sequences.map(m=>this.traverseSequence(m))),m.structures&&(m.structures=m.structures.map(m=>this.traverseRange(m))),m}traverseSequence(m){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(m))),this.traversals.sequence)}traverseSequenceItems(m){return m.canvases&&(m.canvases=m.canvases.map(m=>this.traverseCanvas(m))),m}traverseCanvas(m){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(m))),this.traversals.canvas)}traverseCanvasItems(m){return m.images&&(m.images=m.images.map(m=>this.traverseAnnotation(m))),m.otherContent&&(m.otherContent=m.otherContent.map(m=>this.traverseAnnotationList(m))),m}traverseRange(m){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(m))),this.traversals.range)}traverseRangeItems(m){if(this.options.mergeMemberProperties){let h=[...(m.ranges||[]).map(m=>"string"==typeof m?{"@id":m,"@type":"sc:Range"}:m),...(m.canvases||[]).map(m=>"string"==typeof m?{"@id":m,"@type":"sc:Canvas"}:m),...m.members||[]];delete m.ranges,delete m.canvases,m.members=h.length?h.map(m=>this.traverseUnknown(m)):void 0}return m}traverseAnnotationList(m){let h="string"==typeof m?{"@id":m,"@type":"sc:AnnotationList"}:m;return this.traverseType(this.traverseDescriptive(this.traverseAnnotationListItems(h)),this.traversals.annotationList)}traverseAnnotationListItems(m){return m.resources&&(m.resources=m.resources.map(m=>this.traverseAnnotation(m))),m}traverseAnnotation(m){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(m))),this.traversals.annotation)}traverseAnnotationItems(m){return m.resource&&(Array.isArray(m.resource)?m.resource=m.resource.map(m=>this.traverseContentResource(m)):m.resource=this.traverseContentResource(m.resource)),m.on,m}traverseLayer(m){return this.traverseType(this.traverseLinking(this.traverseLayerItems(m)),this.traversals.layer)}traverseLayerItems(m){return m.otherContent&&(m.otherContent=m.otherContent.map(m=>this.traverseAnnotationList(m))),m}traverseChoice(m){return this.traverseType(this.traverseChoiceItems(m),this.traversals.choice)}traverseChoiceItems(m){return m.default&&"rdf:nil"!==m.default&&(m.default=this.traverseContentResource(m.default)),m.item&&"rdf:nil"!==m.item&&(m.item=m.item.map(m=>this.traverseContentResource(m))),m}traverseService(m){return this.traverseType(this.traverseLinking(m),this.traversals.service)}traverseContentResource(m){return"oa:Choice"===m["@type"]?this.traverseChoice(m):this.traverseType(this.traverseDescriptive(this.traverseLinking(m)),this.traversals.contentResource)}traverseUnknown(m){if(!m["@type"]||"string"==typeof m)return m;switch(function(m){if(null==m)throw Error("Null or undefined is not a valid entity.");if(Array.isArray(m))throw Error("Array is not a valid entity");if("object"!=typeof m)throw Error(`${typeof m} is not a valid entity`);if("string"==typeof m["@type"]){let h=U.indexOf(m["@type"]);if(-1!==h)return U[h]}if(m.profile)return"Service";if(m.format||m["@type"])return"ContentResource";throw Error("Resource type is not known")}(m)){case"sc:Collection":return this.traverseCollection(m);case"sc:Manifest":return this.traverseManifest(m);case"sc:Canvas":return this.traverseCanvas(m);case"sc:Sequence":return this.traverseSequence(m);case"sc:Range":return this.traverseRange(m);case"oa:Annotation":return this.traverseAnnotation(m);case"sc:AnnotationList":return this.traverseAnnotationList(m);case"sc:Layer":return this.traverseLayer(m);case"Service":return this.traverseService(m);case"oa:Choice":return this.traverseChoice(m);case"ContentResource":return this.traverseContentResource(m)}return m.profile?this.traverseService(m):m}traverseImageResource(m){let h=Array.isArray(m),g=Array.isArray(m)?m:[m],v=[];for(let m of g)"string"==typeof m?v.push(this.traverseContentResource({"@id":m,"@type":"dctypes:Image"})):v.push(this.traverseContentResource(m));return h||this.options.convertPropsToArray?v:v[0]}traverseDescriptive(m){return m.thumbnail&&(m.thumbnail=this.traverseImageResource(m.thumbnail)),m.logo&&(m.logo=this.traverseImageResource(m.logo)),m}traverseOneOrMoreServices(m){let h=Array.isArray(m),g=Array.isArray(m)?m:[m],v=[];for(let m of g)v.push(this.traverseService(m));return h||this.options.convertPropsToArray?v:v[0]}traverseLinking(m){return m.related&&(m.related=this.traverseOneOrManyType(m.related,this.traversals.contentResource)),m.rendering&&(m.rendering=this.traverseOneOrManyType(m.rendering,this.traversals.contentResource)),m.service&&(m.service=this.traverseOneOrMoreServices(m.service)),m.seeAlso&&(m.seeAlso=this.traverseOneOrManyType(m.seeAlso,this.traversals.contentResource)),m.within&&("string"==typeof m.within||(m.within=this.traverseOneOrManyType(m.within,this.traversals.contentResource))),m.startCanvas&&("string"==typeof m.startCanvas?m.startCanvas=this.traverseType({"@id":m.startCanvas,"@type":"sc:Canvas"},this.traversals.canvas):m.startCanvas&&this.traverseType(m.startCanvas,this.traversals.canvas)),m.contentLayer&&("string"==typeof m.contentLayer?m.contentLayer=this.traverseLayer({"@id":m.contentLayer,"@type":"sc:Layer"}):m.contentLayer=this.traverseLayer(m.contentLayer)),m}traverseOneOrManyType(m,h){if(!Array.isArray(m)){if(!this.options.convertPropsToArray)return this.traverseType(m,h);m=[m]}return m.map(m=>this.traverseType(m,h))}traverseType(m,h){return h.reduce((m,h)=>{let g=h(m);return void 0!==g||this.options.allowUndefinedReturn?g:m},m)}};let Z="http://library.stanford.edu/iiif/image-api/compliance.html#level1",K="http://library.stanford.edu/iiif/image-api/compliance.html#level2",G="http://library.stanford.edu/iiif/image-api/conformance.html#level1",X="http://library.stanford.edu/iiif/image-api/conformance.html#level2",Y="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",J="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",ee="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",et="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",ei="http://iiif.io/api/image/1/level1.json",ea="http://iiif.io/api/image/1/profiles/level1.json",eo="http://iiif.io/api/image/1/level2.json",el="http://iiif.io/api/image/1/profiles/level2.json",es="http://iiif.io/api/image/2/level1.json",ec="http://iiif.io/api/image/2/profiles/level1.json",eu="http://iiif.io/api/image/2/level2.json",ed="http://iiif.io/api/image/2/profiles/level2.json",ep="level1",ef="level2",em="http://iiif.io/api/image/2/level1",eh="http://iiif.io/api/image/2/level2",eg=[em,eh,Z,K,G,X,Y,J,ee,et,ei,ea,eo,el,es,ec,eu,ed,ep,ef],ev=["http://iiif.io/api/image/2/level0",em,eh,"http://library.stanford.edu/iiif/image-api/compliance.html#level0",Z,K,"http://library.stanford.edu/iiif/image-api/conformance.html#level0",G,X,"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",Y,J,"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",ee,et,"http://iiif.io/api/image/1/level0.json","http://iiif.io/api/image/1/profiles/level0.json",ei,ea,eo,el,"http://iiif.io/api/image/2/level0.json","http://iiif.io/api/image/2/profiles/level0.json",es,ec,eu,ed,"level0",ep,ef],ey={attributionLabel:"Attribution",providerId:"http://example.org/provider",providerName:"Unknown"};function convertLanguageMapping(m,h="none"){if(!m)return{};let g=Array.isArray(m)?m:[m],v={};for(let m of g){if("string"==typeof m){v[h]=v[h]?v[h]:[],v[h].push(m||"");continue}if(!m["@language"]){v[h]=v[h]?v[h]:[],v[h].push(m["@value"]||"");continue}let g=m["@language"];v[g]=v[g]?v[g]:[],v[g].push(m["@value"]||"")}return v}function removePrefix(m){for(let h of["sc","oa","dcterms","dctypes","iiif"])if(m.startsWith(`${h}:`))return m.slice(h.length+1);return m}let eb=["Collection","Manifest","Annotation","AnnotationPage","Range","Service"];function getNewType(m){let h=m["@id"]||m.id,g=m["@type"]||m.type,v=m.profile||void 0,b=m["@context"]||void 0;if(v){let m=function(m){switch(m){case"http://iiif.io/api/image/2/level0.json":case"http://iiif.io/api/image/2/level1.json":case"http://iiif.io/api/image/2/level2.json":return"ImageService2";case"http://iiif.io/api/auth/1/kiosk":case"http://iiif.io/api/auth/1/login":case"http://iiif.io/api/auth/1/clickthrough":case"http://iiif.io/api/auth/1/external":case"http://iiif.io/api/auth/0/kiosk":case"http://iiif.io/api/auth/0/login":case"http://iiif.io/api/auth/0/clickthrough":case"http://iiif.io/api/auth/0/external":return"AuthCookieService1";case"http://iiif.io/api/auth/1/token":case"http://iiif.io/api/auth/0/token":return"AuthTokenService1";case"http://iiif.io/api/auth/1/logout":case"http://iiif.io/api/auth/0/logout":return"AuthLogoutService1";case"http://iiif.io/api/search/1/search":case"http://iiif.io/api/search/0/search":return"SearchService1";case"http://iiif.io/api/search/1/autocomplete":case"http://iiif.io/api/search/0/autocomplete":return"AutoCompleteService1"}}(v);if(m)return m}if(b){let m=function(m){let h=Array.isArray(m)?m:[m];for(let m of h)switch(m){case"http://iiif.io/api/image/2/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2":return"ImageService2";case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":return"ImageService1";case"http://iiif.io/api/annex/openannotation/context.json":return"ImageApiSelector"}}(b);if(m)return m}if(g){if(Array.isArray(g)){if(-1!==g.indexOf("oa:CssStylesheet"))return"CssStylesheet";if(-1!==g.indexOf("cnt:ContentAsText"))return"TextualBody";g=g[0]}for(let m of["sc","oa","dcterms","dctypes","iiif"])if(g.startsWith(`${m}:`)){g=g.slice(m.length+1);break}switch(g){case"Layer":return"AnnotationCollection";case"AnnotationList":return"AnnotationPage";case"cnt:ContentAsText":return"TextualBody"}}if(g&&-1!==eb.indexOf(g))return g;if(m.format){if(m.format.startsWith("image/"))return"Image";if(m.format.startsWith("text/")||"application/pdf"===m.format)return"Text";if(m.format.startsWith("application/"))return"Dataset"}return h&&(h.endsWith(".jpg")||h.endsWith(".png")||h.endsWith(".jpeg"))?"Image":g||"unknown"}let ew=/http(s)?:\/\/(creativecommons.org|rightsstatements.org)[^"'\\<\n]+/gm,eE=["http://iiif.io/api/presentation/2/context.json","http://iiif.io/api/image/2/context.json","http://iiif.io/api/image/1/context.json","http://library.stanford.edu/iiif/image-api/1.1/context.json","http://iiif.io/api/search/1/context.json","http://iiif.io/api/search/0/context.json","http://iiif.io/api/auth/1/context.json","http://iiif.io/api/auth/0/context.json","http://iiif.io/api/annex/openannotation/context.json"];function removeUndefinedProperties(m){for(let h in m)(void 0===m[h]||null===m[h])&&delete m[h];return m}let ex=0;function mintNewIdFromResource(m,h){let g=encodeURI(m.id||m["@id"]||"").trim();return g&&h?`${g}/${h}`:g||(ex++,`http://example.org/${m["@type"]}${h?`/${h}`:""}/${ex}`)}function technicalProperties$2(m){let h;let g=[...m.behavior||[]];return m.viewingHint&&g.push(m.viewingHint),Array.isArray(m.motivation)?h=m.motivation.map(removePrefix):m.motivation&&(h=removePrefix(m.motivation)),{"@context":m["@context"]?function(m){if(m){let h=Array.isArray(m)?m:[m],g=[];for(let m of h)"http://iiif.io/api/presentation/2/context.json"===m&&g.push("http://iiif.io/api/presentation/3/context.json"),-1===eE.indexOf(m)&&g.push(m);if(h.length)return 1===g.length?g[0]:g}}(m["@context"]):void 0,id:(m["@id"]||mintNewIdFromResource(m)).trim(),type:getNewType(m),behavior:g.length?g:void 0,height:m.height?m.height:void 0,width:m.width?m.width:void 0,motivation:h,viewingDirection:m.viewingDirection,profile:m.profile,format:m.format?m.format:void 0,duration:void 0,timeMode:void 0}}function descriptiveProperties$2(m){var h;let[g,v]=function(m,h="Rights/License",g="none"){let v=null,b=[],E=Array.isArray(m)?m:[m];for(let m of E){let E=m?function(m){let h=m.match(ew);return h?h[0]:m}(m):void 0;if(E&&(-1!==E.indexOf("creativecommons.org")||-1!==E.indexOf("rightsstatements.org"))){v=E.startsWith("https://")?`http://${E.slice(8)}`:E;continue}E&&b.push({label:{[g]:[h]},value:{[g]:[E]}})}return[v,b]}(m.license),b=[...m.metadata&&(h=m.metadata)?h.map(m=>({label:convertLanguageMapping(m.label),value:convertLanguageMapping(m.value)})):[],...v];return{rights:g,metadata:b.length?b:void 0,label:m.label?convertLanguageMapping(m.label):void 0,requiredStatement:m.attribution?{label:convertLanguageMapping(ey.attributionLabel),value:convertLanguageMapping(m.attribution)}:void 0,navDate:m.navDate,summary:m.description?convertLanguageMapping(m.description):void 0,thumbnail:m.thumbnail}}function linkingProperties$2(m){let h=m.related?Array.isArray(m.related)?m.related:[m.related]:[],g=m.contentLayer;return{provider:m.logo||h.length?[{id:ey.providerId,type:"Agent",homepage:h.length?[h[0]]:void 0,logo:m.logo?Array.isArray(m.logo)?m.logo:[m.logo]:void 0,label:convertLanguageMapping(ey.providerName)}]:void 0,partOf:function(m){if(!m.within)return;let h=Array.isArray(m.within)?m.within:[m.within],g=[];for(let v of h)"string"==typeof v?v&&"sc:Manifest"===m["@type"]&&g.push({id:v,type:"Collection"}):v["@id"]&&g.push({id:v["@id"],type:getNewType(v)});return g.length?g:void 0}(m),rendering:m.rendering,seeAlso:m.seeAlso,start:m.startCanvas,service:m.service?ensureArray$1(m.service):void 0,supplementary:g?[g]:void 0}}function upgradeContentResource(m){return removeUndefinedProperties({...technicalProperties$2(m),...descriptiveProperties$2(m),...linkingProperties$2(m),chars:m.chars,format:m.format?m.format:void 0,language:m.language})}let eC=new Traverse({collection:[function(m){return removeUndefinedProperties({...technicalProperties$2(m),...descriptiveProperties$2(m),...linkingProperties$2(m),items:m.members})}],manifest:[function(m){let h=[],g=[];for(let v of m.sequences||[])v.canvases.length&&h.push(...v.canvases),v.behavior&&g.push(...v.behavior);let v=technicalProperties$2(m);return g.length&&(v.behavior?v.behavior.push(...g):v.behavior=g),removeUndefinedProperties({...v,...descriptiveProperties$2(m),...linkingProperties$2(m),items:h,structures:m.structures})}],canvas:[function(m){return removeUndefinedProperties({...technicalProperties$2(m),...descriptiveProperties$2(m),...linkingProperties$2(m),annotations:m.otherContent&&m.otherContent.length?m.otherContent:void 0,items:m.images&&m.images.length?[{id:mintNewIdFromResource(m,"annotation-page"),type:"AnnotationPage",items:m.images}]:void 0})}],annotationList:[function(m){return removeUndefinedProperties({...technicalProperties$2(m),...descriptiveProperties$2(m),...linkingProperties$2(m),items:m.resources&&m.resources.length?m.resources:void 0})}],sequence:[function(m){return m.canvases&&0!==m.canvases.length?{canvases:m.canvases,behavior:m.viewingHint?[m.viewingHint]:[]}:{canvases:[],behavior:[]}}],annotation:[function(m){return removeUndefinedProperties({...technicalProperties$2(m),...descriptiveProperties$2(m),...linkingProperties$2(m),target:function upgradeTarget(m){if(Array.isArray(m)){if(m.length>1)return{type:"List",items:m.map(upgradeTarget)};m=m[0]}if("string"==typeof m)return encodeURI(m).trim();if(!("@type"in m))return encodeURI(m["@id"]).trim();{let h;if("string"==typeof m.full)h=m.full;else if("dctypes:Image"===m.full["@type"])h={id:m.full["@id"],type:"Image"};else if("sc:Canvas"===m.full["@type"])h={id:m.full["@id"],type:"Canvas"};else throw Error(`Unsupported source type on annotation: ${m.full["@type"]}`);return{type:"SpecificResource",source:h,selector:function upgradeSelector(m){let h=(Array.isArray(m["@type"])&&m["@type"].includes("oa:SvgSelector")||"oa:SvgSelector"==m["@type"])&&("chars"in m||"value"in m);if(h)return{type:"SvgSelector",value:"chars"in m?m.chars:m.value};if("oa:FragmentSelector"===m["@type"])return{type:"FragmentSelector",value:m.value};if("oa:Choice"===m["@type"])return[upgradeSelector(m.default),...(Array.isArray(m.item)?m.item:[m.item]).map(upgradeSelector)];if("iiif:ImageApiSelector"==m["@type"])return{type:"ImageApiSelector",region:"region"in m?m.region:void 0,rotation:"rotation"in m?m.rotation:void 0};throw Error(`Unsupported selector type: ${m["@type"]}`)}(m.selector)}}}(m.on),body:Array.isArray(m.resource)?m.resource.map(upgradeContentResource):upgradeContentResource(m.resource)})}],contentResource:[upgradeContentResource],choice:[function(m){let h=[];return m.default&&"rdf:nil"!==m.default&&h.push(m.default),m.item&&"rdf:nil"!==m.item&&h.push(...m.item),{...technicalProperties$2(m),...descriptiveProperties$2(m),items:h}}],range:[function(m){return removeUndefinedProperties({...technicalProperties$2(m),...descriptiveProperties$2(m),...linkingProperties$2(m),items:m.members})}],service:[function(m){let{"@id":h,"@type":g,"@context":v,profile:b,...E}=m,x={};return h&&(x["@id"]=h),x["@type"]=getNewType(m),"unknown"===x["@type"]&&(v&&v.length&&(x["@context"]=v),x["@type"]="Service"),b&&(x.profile=function getProfile(m){return Array.isArray(m)?getProfile(m.find(m=>"string"==typeof m)):-1!==ev.indexOf(m)?"level2":-1!==eg.indexOf(m)?"level1":"string"==typeof m?m:void 0}(b)),removeUndefinedProperties({...x,...E})}],layer:[function(m){return removeUndefinedProperties({...technicalProperties$2(m),...descriptiveProperties$2(m),...linkingProperties$2(m)})}]});function getResource(m,h){if("string"==typeof m)return{id:m,type:h};if(!m.id)throw Error(`Invalid resource does not have an ID (${h})`);return m}function addMissingIdToContentResource(m){return h=>"string"==typeof h?{id:h,type:m}:h.id?h.type?h:{type:m,...h}:{id:`vault://${function(m){let h=JSON.stringify(m),g=5381,v=h.length;for(;v;)g=33*g^h.charCodeAt(--v);let b=g>>>0,E=b.toString(16);return E.length%2?"0"+E:E}(h)}`,type:m,...h}}function ensureDefaultFields(m){return h=>({...m,...h})}function ensureArray(m){return Array.isArray(m)?m:[m]}function ensureArrayOnAnnotation(m){return m.body&&(m.body=ensureArray(m.body)),m.seeAlso&&(m.seeAlso=ensureArray(m.seeAlso)),m.body&&(m.body=ensureArray(m.body)),m.audience&&(m.audience=ensureArray(m.audience)),m.accessibility&&(m.accessibility=ensureArray(m.accessibility)),m.motivation&&(m.motivation=ensureArray(m.motivation)),m}let eA="__$UNSET$__",eS="__$UNWRAP$__";function languageString2to3(m){if(!m)return;let h=Object.keys(m);if(0!==h.length){if(1===h.length){let g=h[0];if(!g)return"";let v=(m[g]||[]).join("");return"@none"===g||"none"===g||"en"===g?v:{"@language":g,"@value":v}}return h.map(h=>({"@language":h,"@value":(m[h]||[]).join("")}))}}function unNestArray(m,h=!1){return m?m.length>1&&!h?m:m[0]||void 0:void 0}function convertService(m){if(m){if("string"==typeof m)return{"@id":m};if("@id"in m){let h={...m};return delete h["@type"],h}return{"@context":"http://iiif.io/api/image/2/context.json","@id":m.id,profile:`http://iiif.io/api/image/2/profiles/${m.profile}.json`}}}function technicalProperties$1(m,h){return[["@id",m.id],["@type",h],["format",m.format],["height",m.height],["width",m.width],["viewingDirection","left-to-right"!==m.viewingDirection?m.viewingDirection:void 0]]}function*descriptiveProperties$1(m){let h=m.provider?yield m.provider[0]:void 0;return[["label",languageString2to3(m.label)],["metadata",m.metadata&&m.metadata.length?m.metadata.map(m=>({label:languageString2to3(m.label)||"",value:languageString2to3(m.value)||""})):void 0],["description",languageString2to3(m.summary)],["thumbnail",unNestArray((yield m.thumbnail))],["navDate",m.navDate],["logo",h?unNestArray(h.logo):void 0],["homepage",h?h.homepage:void 0],["attribution",m.requiredStatement?languageString2to3(m.requiredStatement.value):void 0]]}function*linkingProperties$1(m){return[["seeAlso",unNestArray((yield m.seeAlso))],["service",unNestArray((m.service||[]).map(convertService))],["rendering",unNestArray((yield m.rendering))],["startCanvas",m.start?m.start.id:void 0]]}let e$={Manifest:function*(m){return[...technicalProperties$1(m,"sc:Manifest"),...yield*descriptiveProperties$1(m),...yield*linkingProperties$1(m),["sequences",[{"@id":`${m.id}/sequence0`,"@type":"sc:Sequence",canvases:yield m.items}]],["structures",(yield m.structures)]]},Canvas:function*(m){let h=yield m.items,g=h[0];return[...technicalProperties$1(m,"sc:Canvas"),...yield*descriptiveProperties$1(m),...yield*linkingProperties$1(m),["images",g?[g.resources]:void 0],["annotations",m.annotations&&m.annotations.length?unNestArray((yield m.annotations)):void 0]]},AnnotationPage:function*(m){return[...technicalProperties$1(m,"sc:AnnotationList"),...yield*descriptiveProperties$1(m),["resources",m.items&&m.items.length?unNestArray((yield m.items)):void 0]]},Annotation:function*(m){return[["@id",m.id],["@type","oa:Annotation"],["motivation","sc:painting"],["on",function parseCanvasTarget(m){return Array.isArray(m)?m.map(m=>parseCanvasTarget(m)):"string"==typeof m?m:m.type&&"Canvas"===m.type?m.id:m}(m.target)],["resource",unNestArray((yield m.body),!0)]]},ContentResource:function*(m){return"Image"===m.type?[...technicalProperties$1(m,"dctypes:Image"),...yield*descriptiveProperties$1(m),...yield*linkingProperties$1(m)]:[...technicalProperties$1(m,void 0),...yield*descriptiveProperties$1(m)]},AnnotationCollection:function*(m){return[["@id",m.id],["@type","sc:Layer"],["label",languageString2to3(m.label)]]},Collection:function*(m){return[...technicalProperties$1(m,"sc:Collection"),...yield*descriptiveProperties$1(m),...yield*linkingProperties$1(m),["members",(yield*m.items)]]},Range:function*(m){let h=[],g=[];if(m.items)for(let v of m.items){let b=yield v;h.push({"@id":v.id,"@type":v.type,label:b?b.label:void 0,within:m.id}),"Canvas"===v.type&&g.push(v.id)}return[...technicalProperties$1(m,"sc:Range"),...yield*descriptiveProperties$1(m),...yield*linkingProperties$1(m),["canvases",g.length===h.length?g:void 0],["members",g.length!==h.length?h:void 0]]}};function technicalProperties(m){var h;return[["id",(null==(h=m.id)?void 0:h.startsWith("vault://"))?void 0:m.id],["type",m.type],["format",m.format],["profile",m.profile],["height",m.height],["width",m.width],["duration",m.duration||void 0],["viewingDirection","left-to-right"!==m.viewingDirection?m.viewingDirection:void 0],["behavior",m.behavior&&m.behavior.length?m.behavior:void 0],["timeMode",m.timeMode],["motivation",Array.isArray(m.motivation)?m.motivation[0]:m.motivation]]}function filterEmpty(m){if(m&&0!==m.length)return m}function service2compat(m){if(m&&m.type&&"ImageService2"===m.type){let{id:h,type:g,profile:v,...b}=m,E="string"==typeof v?v:Array.isArray(v)?v.find(m=>"string"==typeof m):"";return{"@id":h,"@type":g,profile:E?E.startsWith("http")?E:`http://iiif.io/api/image/2/${E}.json`:"http://iiif.io/api/image/2/level0.json",...b}}return m}function filterService2Compat(m){if(m&&0!==m.length)return m.map(service2compat)}function*descriptiveProperties(m){return[["label",m.label],["metadata",filterEmpty(m.metadata)],["summary",m.summary],["requiredStatement",m.requiredStatement],["rights",m.rights],["navDate",m.navDate],["language",m.language],["thumbnail",filterEmpty((yield m.thumbnail))],["placeholderCanvas",(yield m.placeholderCanvas)],["accompanyingCanvas",(yield m.accompanyingCanvas)],["provider",filterEmpty((yield m.provider))]]}function*linkingProperties(m){return[["seeAlso",filterEmpty((yield m.seeAlso))],["service",filterService2Compat(m.service)],["services",filterService2Compat(m.services)],["rendering",filterEmpty((yield m.rendering))],["supplementary",filterEmpty((yield m.supplementary))],["homepage",filterEmpty((yield m.homepage))],["logo",filterEmpty((yield m.logo))],["partOf",filterEmpty((yield m.partOf))],["start",m.start]]}let eP={Manifest:function*(m,h,{isTopLevel:g}){return g?[["@context","http://iiif.io/api/presentation/3/context.json"],...technicalProperties(m),...yield*descriptiveProperties(m),...yield*linkingProperties(m),["items",(yield m.items)],["structures",filterEmpty((yield m.structures))],["annotations",filterEmpty((yield m.annotations))]]:[...technicalProperties(m),...yield*descriptiveProperties(m)]},Canvas:function*(m){return[...technicalProperties(m),...yield*descriptiveProperties(m),...yield*linkingProperties(m),["items",(yield m.items)],["annotations",filterEmpty((yield m.annotations))]]},Agent:function*(m){return[["id",m.id],["type","Agent"],["label",m.label],...yield*linkingProperties(m)]},AnnotationPage:function*(m){let h=Object.entries(m).map(([m,h])=>[m,Array.isArray(h)?filterEmpty(h):h]).filter(([m,h])=>"items"!==m);return[...h,...yield*linkingProperties(m),["items",(yield m.items)]]},Service:function*(m){return[[eS,service2compat(m)]]},Annotation:function*(m){let h=Object.entries(m).map(([m,h])=>"motivation"===m?[m,Array.isArray(h)?h[0]:h]:[m,Array.isArray(h)?filterEmpty(h):h]).filter(([m])=>"body"!==m),g=yield m.body;return[...h,["body",1===g.length?g[0]:g]]},ContentResource:function*(m){return[...technicalProperties(m),...yield*descriptiveProperties(m),...yield*linkingProperties(m),["annotations",filterEmpty((yield m.annotations))],["items",filterEmpty((yield m.items))]]},AnnotationCollection:function*(m){return[["id",m.id],["type","AnnotationCollection"],["label",m.label]]},Collection:function*(m,h,{isTopLevel:g}){return g?[["@context","http://iiif.io/api/presentation/3/context.json"],...technicalProperties(m),...yield*descriptiveProperties(m),...yield*linkingProperties(m),["items",filterEmpty((yield m.items))]]:[...technicalProperties(m),...yield*descriptiveProperties(m)]},Range:function*(m){let h=[];for(let g of m.items)"Range"===g.type?h.push((yield g)):h.push(g);return[...technicalProperties(m),...yield*descriptiveProperties(m),...yield*linkingProperties(m),["items",h],["annotations",filterEmpty((yield m.annotations))]]}};var eR=g(4887);function _typeof(m){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(m)}function ownKeys(m,h){var g=Object.keys(m);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(m);h&&(v=v.filter(function(h){return Object.getOwnPropertyDescriptor(m,h).enumerable})),g.push.apply(g,v)}return g}function _objectSpread2(m){for(var h=1;h<arguments.length;h++){var g=null!=arguments[h]?arguments[h]:{};h%2?ownKeys(Object(g),!0).forEach(function(h){!function(m,h,g){var v;v=function(m,h){if("object"!==_typeof(m)||null===m)return m;var g=m[Symbol.toPrimitive];if(void 0!==g){var v=g.call(m,h||"default");if("object"!==_typeof(v))return v;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(m)}(h,"string"),(h="symbol"===_typeof(v)?v:String(v))in m?Object.defineProperty(m,h,{value:g,enumerable:!0,configurable:!0,writable:!0}):m[h]=g}(m,h,g[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(g)):ownKeys(Object(g)).forEach(function(h){Object.defineProperty(m,h,Object.getOwnPropertyDescriptor(g,h))})}return m}function formatProdErrorMessage(m){return"Minified Redux error #"+m+"; visit https://redux.js.org/Errors?code="+m+" for the full message or use the non-minified dev environment for full errors. "}var eT="function"==typeof Symbol&&Symbol.observable||"@@observable",randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},e_={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function combineReducers(m){for(var h,g=Object.keys(m),v={},b=0;b<g.length;b++){var E=g[b];"function"==typeof m[E]&&(v[E]=m[E])}var x=Object.keys(v);try{!function(m){Object.keys(m).forEach(function(h){var g=m[h];if(void 0===g(void 0,{type:e_.INIT}))throw Error(formatProdErrorMessage(12));if(void 0===g(void 0,{type:e_.PROBE_UNKNOWN_ACTION()}))throw Error(formatProdErrorMessage(13))})}(v)}catch(m){h=m}return function(m,g){if(void 0===m&&(m={}),h)throw h;for(var b=!1,E={},C=0;C<x.length;C++){var S=x[C],$=v[S],_=m[S],M=$(_,g);if(void 0===M)throw g&&g.type,Error(formatProdErrorMessage(14));E[S]=M,b=b||M!==_}return(b=b||x.length!==Object.keys(m).length)?E:m}}function compose(){for(var m=arguments.length,h=Array(m),g=0;g<m;g++)h[g]=arguments[g];return 0===h.length?function(m){return m}:1===h.length?h[0]:h.reduce(function(m,h){return function(){return m(h.apply(void 0,arguments))}})}function applyMiddleware(){for(var m=arguments.length,h=Array(m),g=0;g<m;g++)h[g]=arguments[g];return function(m){return function(){var g=m.apply(void 0,arguments),_dispatch=function(){throw Error(formatProdErrorMessage(15))},v={getState:g.getState,dispatch:function(){return _dispatch.apply(void 0,arguments)}},b=h.map(function(m){return m(v)});return _dispatch=compose.apply(void 0,b)(g.dispatch),_objectSpread2(_objectSpread2({},g),{},{dispatch:_dispatch})}}}let ek="@iiif/IMPORT_ENTITIES",eI="@iiif/MODIFY_ENTITY_FIELD",eO="@iiif/REORDER_ENTITY_FIELD",eM="@iiif/ADD_REFERENCE",eL="@iiif/REMOVE_REFERENCE",eD=(0,eR.createAction)(ek)(),eF=(0,eR.createAction)(eI)(),eN=(0,eR.createAction)(eO)(),ej=(0,eR.createAction)(eM)(),eW=(0,eR.createAction)(eL)(),eV={importEntities:eD,modifyEntityField:eF,reorderEntityField:eN,addReference:ej,removeReference:eW},ez="@iiif/ADD_MAPPING",eH="@iiif/ADD_MAPPINGS",eB=(0,eR.createAction)(ez)(),eU=(0,eR.createAction)(eH)(),eq="@iiif/SET_META_VALUE",eZ="@iiif/SET_META_VALUE_DYNAMIC",eK="@iiif/UNSET_META_VALUE",eG=(0,eR.createAction)(eq)(),eX=(0,eR.createAction)(eZ)(),eY=(0,eR.createAction)(eK)(),eQ={setMetaValue:eG,setMetaValueDynamic:eX,unsetMetaValue:eY},eJ="RESOURCE_ERROR",e0="RESOURCE_LOADING",e1="RESOURCE_READY",e2="@iiif/REQUEST_RESOURCE",e3="@iiif/REQUEST_ERROR",e4="@iiif/REQUEST_MISMATCH",e6="@iiif/REQUEST_COMPLETE",e5="@iiif/REQUEST_OFFLINE_RESOURCE",e8=(0,eR.createAction)(e2)(),e9=(0,eR.createAction)(e3)(),e7=(0,eR.createAction)(e4)(),te=(0,eR.createAction)(e6)();(0,eR.createAction)(e5)();let tt="@iiif/BATCH",ti="@iiif/BATCH_IMPORT",ta=(0,eR.createAction)(tt)();(0,eR.createAction)(ti)();let actionListFromResource=(m,h)=>{let{entities:g,resource:v,mapping:b}=function(m){let h=m&&m["@context"]&&("http://iiif.io/api/presentation/2/context.json"===m["@context"]||-1!==m["@context"].indexOf("http://iiif.io/api/presentation/2/context.json")||"http://www.shared-canvas.org/ns/context.json"===m["@context"])||"http://iiif.io/api/image/2/context.json"===m["@context"]?eC.traverseUnknown(m):m,g={Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}},v={},addToEntities=(m,h)=>{let v=g[m]?g[m]:{};return g=>{let b=getResource(g,h||m);return b&&b.id&&m?(v[b.id]=v[b.id]?function(m,h){if("string"==typeof m)return m;if(h.id!==m.id||h.type!==m.type)throw Error("Can only merge entities with identical identifiers and type!");return function merge(m,h){if(!h)return m;if(Array.isArray(m)){if(!Array.isArray(h))throw Error("Cannot merge array with non-array");let g=[...m];for(let v of h)if(null!=v){if(Array.isArray(v))g.push(v);else if("object"==typeof v&&v.id&&v.type){let m=g.findIndex(m=>m.id===v.id&&m.type===v.type);m>=0&&(g[m]=merge(g[m],v))}else -1===m.indexOf(v)&&g.push(v)}return g}if("object"==typeof m){if(Array.isArray(h)||"object"!=typeof h)throw Error("Cannot merge object with non-object");let g={...m};for(let[m,v]of Object.entries(h)){let h=g[m];h!==M&&h?g[m]=merge(h,v):g[m]=v}return g}return m||h}({...m},h)}(v[b.id],b):Object.assign({},b),{id:b.id,type:"ContentResource"===m?m:b.type}):b}},addToMapping=(m,h)=>g=>{let{id:b,type:E}=getResource(g,h||m);if(void 0===b)throw Error("Found invalid entity without an ID.");return"ContentResource"===m?v[b]=m:v[b]=E,g},b=new Traverse$1({collection:[ensureDefaultFields(F),addToMapping("Collection"),addToEntities("Collection")],manifest:[ensureDefaultFields(N),addToMapping("Manifest"),addToEntities("Manifest")],canvas:[ensureDefaultFields(D),addToMapping("Canvas"),addToEntities("Canvas")],annotationPage:[addMissingIdToContentResource("AnnotationPage"),ensureDefaultFields(L),addToMapping("AnnotationPage"),addToEntities("AnnotationPage")],annotation:[addMissingIdToContentResource("Annotation"),ensureArrayOnAnnotation,addToMapping("Annotation"),addToEntities("Annotation")],contentResource:[addMissingIdToContentResource("ContentResource"),addToMapping("ContentResource"),addToEntities("ContentResource")],range:[ensureDefaultFields(j),addToMapping("Range","Canvas"),addToEntities("Range","Canvas")],agent:[ensureDefaultFields(W),addToMapping("Agent"),addToEntities("Agent")]}),E=b.traverseUnknown(h);return{entities:g,resource:E,mapping:v}}(h);if(void 0===v.id)return[e9({id:m,message:"ID is not defined in resource."})];let E=[eD({entities:g}),eU({mapping:b})];return v.id!==m&&(E.push(eB({id:m,type:v.type})),E.push(e7({requestId:m,actualId:v.id}))),E.push(te({id:m})),E},to=Number.isNaN||function(m){return"number"==typeof m&&m!=m};function areInputsEqual(m,h){if(!Array.isArray(m)||!Array.isArray(h))return m===h;if(m.length!==h.length)return!1;for(let b=0;b<m.length;b++){var g,v;if(!((g=m[b])===(v=h[b])||to(g)&&to(v)))return!1}return!0}function esm_resolveIfExists(m,h){let g=m.iiif.requests[h],v=m.iiif.mapping[h];if(v&&m.iiif.entities[v][g.resourceUri])return m.iiif.entities[v][g.resourceUri]}function createFetchHelper(m,h,{waitTimeout:g=30}={}){return async(v,b)=>{let E=m.getState(),x=E.iiif.requests[v];if(x)switch(x.loadingState){case eJ:break;case e0:{let h;let b=!1;try{let E=await Promise.race([new Promise((g,E)=>{b||(h=m.subscribe(()=>{let h=m.getState();if(h.iiif.requests[v].loadingState===eJ){E();return}if(h.iiif.requests[v].loadingState===e1){let m=esm_resolveIfExists(h,v);m?g(m):E()}}))}),new Promise((m,h)=>setTimeout(()=>{b=!0,h()},60*g))]);if(h&&h(),E)return E}catch(m){h&&h()}break}case e1:{let m=esm_resolveIfExists(E,v);if(m)return m}}m.dispatch(e8({id:v}));try{let g=await h(v,b);g.id||g["@id"]||(g["@type"]&&(g["@id"]=v),g.id=v);let E=actionListFromResource(v,g);return m.dispatch(ta({actions:E})),esm_resolveIfExists(m.getState(),v)}catch(h){throw m.dispatch(e9({id:v,message:h.toString()})),h}}}function esm_getDefaultEntities(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}function isReferenceList(m,h,g,v){return!(!m[g]||!m[g][h]||!m[g][h][v]||!Array.isArray(m[g][h][v]))}let tl=combineReducers({mapping:(m={},h)=>{switch(h.type){case ez:return{...m,[h.payload.id]:h.payload.type};case eH:return{...m,...h.payload.mapping};default:return m}},entities:(m=esm_getDefaultEntities(),h)=>{switch(h.type){case eI:{if(!m[h.payload.type]||!m[h.payload.type][h.payload.id])return m;let g=m[h.payload.type][h.payload.id];if("string"==typeof g)return m;return{...m,[h.payload.type]:{...m[h.payload.type],[h.payload.id]:{...g,[h.payload.key]:h.payload.value}}}}case eO:{if(!isReferenceList(m,h.payload.id,h.payload.type,h.payload.key))return m;let g=m[h.payload.type][h.payload.id];if("string"==typeof g)return m;let v=Array.from(g[h.payload.key]),[b]=v.splice(h.payload.startIndex,1);return v.splice(h.payload.endIndex,0,b),{...m,[h.payload.type]:{...m[h.payload.type],[h.payload.id]:{...g,[h.payload.key]:v}}}}case ek:{let g=Object.keys(h.payload.entities),v={...m};for(let b of g){let g=h.payload.entities[b],E={...m[b]||{}},x=!1,C=Object.keys(g||{})||[];if(g&&C){for(let h of C)x=!0,E[h]=m[b][h]?function(m,h){let g={},v=[];for(let[b,E]of Object.entries(m||{})){v.push(b);let m=(h||{})[b];if(!m||0===m.length){g[b]=E;continue}g[b]=m}for(let[m,b]of Object.entries(h||{}))-1===v.indexOf(m)&&(g[m]=b);return g}(m[b][h],g[h]):g[h];x&&(v[b]=E)}}return v}case eM:{if(!isReferenceList(m,h.payload.id,h.payload.type,h.payload.key))return m;let g=m[h.payload.type][h.payload.id],v=Array.from(g[h.payload.key]);return v.splice(h.payload.index||v.length+1,0,h.payload.reference),{...m,[h.payload.type]:{...m[h.payload.type],[h.payload.id]:{...g,[h.payload.key]:v}}}}case eL:{if(!isReferenceList(m,h.payload.id,h.payload.type,h.payload.key))return m;let g=m[h.payload.type][h.payload.id],v=Array.from(g[h.payload.key]),b=h.payload.index||v.findIndex(m=>m&&m.id===h.payload.reference.id);if(-1===b||v[b]?.id!==h.payload.reference.id)return m;return v.splice(b,1),{...m,[h.payload.type]:{...m[h.payload.type],[h.payload.id]:{...g,[h.payload.key]:v}}}}default:return m}},requests:(m={},h)=>{switch(h.type){case e2:case e5:return{...m,[h.payload.id]:{requestUri:h.payload.id,loadingState:e0,uriMismatch:!1,resourceUri:h.payload.id}};case e4:return{...m,[h.payload.requestId]:{...m[h.payload.requestId]||{},uriMismatch:!0,resourceUri:h.payload.actualId},[h.payload.actualId]:{requestUri:h.payload.requestId,loadingState:m[h.payload.requestId].loadingState,uriMismatch:!0,resourceUri:h.payload.actualId}};case e3:return{...m,[h.payload.id]:{...m[h.payload.id]||{},loadingState:eJ,error:h.payload.message}};case e6:return{...m,[h.payload.id]:{...m[h.payload.id]||{},loadingState:e1,error:void 0}}}return m},meta:(m={},h)=>{let{id:g,updateValue:v,value:b,meta:E,key:x}=h&&h.payload||{};switch(h.type){case eq:return{...m,[g]:{...m[g]||{},[E]:{...m[g]&&m[g][E]||{},[x]:b}}};case eZ:return{...m,[g]:{...m[g]||{},[E]:{...m[g]&&m[g][E]||{},[x]:v(m[g]&&m[g][E]?m[g][E][x]:void 0)}}};case eK:if(m[g]&&m[g][E]&&m[g][E][x])return{...m,[g]:{...m[g]||{},[E]:{...m[g]&&m[g][E]||{},[x]:void 0}}};return m;default:return m}}}),ts="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||compose;let Vault=class Vault{options;store;emitter;isBatching=!1;batchQueue=[];remoteFetcher;staticFetcher;constructor(m,h){var g;this.options=Object.assign({reducers:{},middleware:[],defaultState:{},customFetcher:this.defaultFetcher,enableDevtools:!0},m||{}),this.store=h||function(m={}){let{enableDevtools:h=!0,iiifStoreName:g="iiif",defaultState:v={},extraMiddleware:b=[],customReducers:E={}}=m,x=combineReducers({[g]:tl,...E}),C=function createStore(m,h,g){if("function"==typeof h&&"function"==typeof g||"function"==typeof g&&"function"==typeof arguments[3])throw Error(formatProdErrorMessage(0));if("function"==typeof h&&void 0===g&&(g=h,h=void 0),void 0!==g){if("function"!=typeof g)throw Error(formatProdErrorMessage(1));return g(createStore)(m,h)}if("function"!=typeof m)throw Error(formatProdErrorMessage(2));var v,b=m,E=h,x=[],C=x,S=!1;function ensureCanMutateNextListeners(){C===x&&(C=x.slice())}function getState(){if(S)throw Error(formatProdErrorMessage(3));return E}function subscribe(m){if("function"!=typeof m)throw Error(formatProdErrorMessage(4));if(S)throw Error(formatProdErrorMessage(5));var h=!0;return ensureCanMutateNextListeners(),C.push(m),function(){if(h){if(S)throw Error(formatProdErrorMessage(6));h=!1,ensureCanMutateNextListeners();var g=C.indexOf(m);C.splice(g,1),x=null}}}function dispatch(m){if(!function(m){if("object"!=typeof m||null===m)return!1;for(var h=m;null!==Object.getPrototypeOf(h);)h=Object.getPrototypeOf(h);return Object.getPrototypeOf(m)===h}(m))throw Error(formatProdErrorMessage(7));if(void 0===m.type)throw Error(formatProdErrorMessage(8));if(S)throw Error(formatProdErrorMessage(9));try{S=!0,E=b(E,m)}finally{S=!1}for(var h=x=C,g=0;g<h.length;g++)(0,h[g])();return m}return dispatch({type:e_.INIT}),(v={dispatch:dispatch,subscribe:subscribe,getState:getState,replaceReducer:function(m){if("function"!=typeof m)throw Error(formatProdErrorMessage(10));b=m,dispatch({type:e_.REPLACE})}})[eT]=function(){var m;return(m={subscribe:function(m){if("object"!=typeof m||null===m)throw Error(formatProdErrorMessage(11));function observeState(){m.next&&m.next(getState())}return observeState(),{unsubscribe:subscribe(observeState)}}})[eT]=function(){return this},m},v}((m,h)=>h&&h.type===tt?h.payload.actions.reduce(x,m):h&&h.type===ti?h.payload.state:x(m,h),v,h?ts(applyMiddleware(...b)):compose(applyMiddleware(...b)));return C}({customReducers:this.options.reducers,extraMiddleware:[...this.options.middleware,this.middleware],defaultState:this.options.defaultState,enableDevtools:this.options.enableDevtools}),this.emitter={all:g=g||new Map,on:function(m,h){var v=g.get(m);v?v.push(h):g.set(m,[h])},off:function(m,h){var v=g.get(m);v&&(h?v.splice(v.indexOf(h)>>>0,1):g.set(m,[]))},emit:function(m,h){var v=g.get(m);v&&v.slice().map(function(m){m(h)}),(v=g.get("*"))&&v.slice().map(function(g){g(m,h)})}},this.remoteFetcher=createFetchHelper(this.store,this.options.customFetcher),this.staticFetcher=createFetchHelper(this.store,(m,h)=>h)}defaultFetcher=m=>fetch(m).then(m=>m.json());batch(m){this.isBatching=!0;try{m(this),this.store.dispatch(ta({actions:this.batchQueue}))}catch(m){throw this.batchQueue=[],this.isBatching=!1,m}this.batchQueue=[],this.isBatching=!1}async asyncBatch(m){this.isBatching=!0;try{await m(this),this.store.dispatch(ta({actions:this.batchQueue}))}catch(m){throw this.batchQueue=[],this.isBatching=!1,m}this.batchQueue=[],this.isBatching=!1}modifyEntityField(m,h,g){this.dispatch(eV.modifyEntityField({id:m.id,type:m.type,key:h,value:g}))}dispatch(m){this.isBatching?this.batchQueue.push(m):this.store.dispatch(m)}middleware=m=>h=>g=>{if(g.type===tt){for(let h of g.payload.actions)this.emitter.emit(h.type,{realAction:h,state:m.getState()});let v=h(g);for(let m of g.payload.actions)this.emitter.emit(`after:${g.type}`,{action:g,state:v});return v}this.emitter.emit(g.type,{action:g,state:m.getState()});let v=h(g);return this.emitter.emit(`after:${g.type}`,{action:g,state:v}),v};serialize(m,h){return function(m,h,g){if(!h.type||!h.id)throw Error("Unknown entity");if(!g[h.type])throw Error(`Serializer not found for ${h.type}`);return function flatten(v){let b=g[v.type];if(!b)return eA;let E=function(m,h){let g=m.requests[h],v=m.mapping[h];if(v&&(!g||!g.resourceUri||m.entities[v][g.resourceUri]))return m.entities[v][g?g.resourceUri:h]}(m,v.id)||(v.id&&v.type?v:null);if(!E)return eA;let x=b(E,m,{isTopLevel:h.id===v.id}),C=x.next();for(;!C.done;){let m=C.value,h=eA;if(m){if(Array.isArray(m)){let g=[];for(let h of m)g.push(flatten(h));h=g}else h=flatten(m)}C=x.next(h)}return C.value===eA?eA:function(m){let h={};for(let[g,v]of m){if(g===eS&&v!==eA)return v;v!==eA&&null!=v&&(h[g]=v)}return h}(C.value)}(h)}(this.getState().iiif,m,h)}toPresentation2(m){return this.serialize(m,e$)}toPresentation3(m){return this.serialize(m,eP)}hydrate(m,h){return this.get(m,h,{skipSelfReturn:!1})}get(m,h,g={}){"string"!=typeof h&&(g=h||{},h=void 0);let{skipSelfReturn:v=!0}=g||{};if(Array.isArray(m))return m.map(m=>this.get(m,g));let b=this.getState();if("string"==typeof m){let g=h||b.iiif.mapping[m];if(!g)return v?null:{id:m,type:"unknown"};m={id:m,type:g}}let E=h||m.type,x=m.id,C=b.iiif.entities[E];if(!C){let h=b.iiif.requests[x];return h&&h.resourceUri!==x?this.get(h.resourceUri,g):v?null:m}return C[m.id]||(v?null:m)}select(m){return m(this.getState())}getStore(){return this.store}getState(){return this.store.getState()}loadManifest(m,h){let g="string"==typeof m?m:m.id;return this.load(g,h)}loadCollection(m,h){let g="string"==typeof m?m:m.id;return this.load(g,h)}load(m,h){let g="string"==typeof m?m:m.id;return h?this.staticFetcher(g,h):this.remoteFetcher(g)}areInputsEqual(m,h){return areInputsEqual(m,h)}subscribe(m,h,g){void 0===g&&(void 0===h||!1===h||!0===h)&&(g=h,h=m,m=m=>m);let v=g?null:m(this.store.getState());return g||h(v,this),this.store.subscribe(()=>{let g=this.store.getState(),b=m(g);v===b||areInputsEqual(v,b)||h(b,this),v=b})}async ensureLoaded(m){let h="string"==typeof m?m:m.id;this.requestStatus(h)||await this.load(h)}requestStatus(m){return this.select(h=>h.iiif.requests[m])}getResourceMeta(m,h){let g=this.getState().iiif.meta[m];return g?h?g[h]:g:void 0}setMetaValue([m,h,g],v){this.dispatch("function"==typeof v?eQ.setMetaValueDynamic({id:m,meta:h,key:g,updateValue:v}):eQ.setMetaValue({id:m,meta:h,key:g,value:v}))}};var tc=g(334),tu=g(4511),td=g(6744),tp=g(7462),tf=g(6206),tm=g(5360),th=g(5936),tg=g(8771),tv=g(1276),ty=g(5320),tb=g(9698),tw=g(7342),tE=g(8990);let tx="rovingFocusGroup.onEntryFocus",tC={bubbles:!1,cancelable:!0},tA="RovingFocusGroup",[tS,t$,tP]=(0,th.B)(tA),[tR,tT]=(0,tm.b)(tA,[tP]),[t_,tk]=tR(tA),tI=(0,$.forwardRef)((m,h)=>(0,$.createElement)(tS.Provider,{scope:m.__scopeRovingFocusGroup},(0,$.createElement)(tS.Slot,{scope:m.__scopeRovingFocusGroup},(0,$.createElement)(tO,(0,tp.Z)({},m,{ref:h}))))),tO=(0,$.forwardRef)((m,h)=>{let{__scopeRovingFocusGroup:g,orientation:v,loop:b=!1,dir:E,currentTabStopId:x,defaultCurrentTabStopId:C,onCurrentTabStopIdChange:S,onEntryFocus:_,...M}=m,L=(0,$.useRef)(null),D=(0,tg.e)(h,L),F=(0,tE.gm)(E),[N=null,j]=(0,tw.T)({prop:x,defaultProp:C,onChange:S}),[W,B]=(0,$.useState)(!1),U=(0,tb.W)(_),Z=t$(g),K=(0,$.useRef)(!1),[G,X]=(0,$.useState)(0);return(0,$.useEffect)(()=>{let m=L.current;if(m)return m.addEventListener(tx,U),()=>m.removeEventListener(tx,U)},[U]),(0,$.createElement)(t_,{scope:g,orientation:v,dir:F,loop:b,currentTabStopId:N,onItemFocus:(0,$.useCallback)(m=>j(m),[j]),onItemShiftTab:(0,$.useCallback)(()=>B(!0),[]),onFocusableItemAdd:(0,$.useCallback)(()=>X(m=>m+1),[]),onFocusableItemRemove:(0,$.useCallback)(()=>X(m=>m-1),[])},(0,$.createElement)(ty.WV.div,(0,tp.Z)({tabIndex:W||0===G?-1:0,"data-orientation":v},M,{ref:D,style:{outline:"none",...m.style},onMouseDown:(0,tf.M)(m.onMouseDown,()=>{K.current=!0}),onFocus:(0,tf.M)(m.onFocus,m=>{let h=!K.current;if(m.target===m.currentTarget&&h&&!W){let h=new CustomEvent(tx,tC);if(m.currentTarget.dispatchEvent(h),!h.defaultPrevented){let m=Z().filter(m=>m.focusable),h=m.find(m=>m.active),g=m.find(m=>m.id===N),v=[h,g,...m].filter(Boolean),b=v.map(m=>m.ref.current);$d7bdfb9eb0fdf311$var$focusFirst(b)}}K.current=!1}),onBlur:(0,tf.M)(m.onBlur,()=>B(!1))})))}),tM=(0,$.forwardRef)((m,h)=>{let{__scopeRovingFocusGroup:g,focusable:v=!0,active:b=!1,tabStopId:E,...x}=m,C=(0,tv.M)(),S=E||C,_=tk("RovingFocusGroupItem",g),M=_.currentTabStopId===S,L=t$(g),{onFocusableItemAdd:D,onFocusableItemRemove:F}=_;return(0,$.useEffect)(()=>{if(v)return D(),()=>F()},[v,D,F]),(0,$.createElement)(tS.ItemSlot,{scope:g,id:S,focusable:v,active:b},(0,$.createElement)(ty.WV.span,(0,tp.Z)({tabIndex:M?0:-1,"data-orientation":_.orientation},x,{ref:h,onMouseDown:(0,tf.M)(m.onMouseDown,m=>{v?_.onItemFocus(S):m.preventDefault()}),onFocus:(0,tf.M)(m.onFocus,()=>_.onItemFocus(S)),onKeyDown:(0,tf.M)(m.onKeyDown,m=>{if("Tab"===m.key&&m.shiftKey){_.onItemShiftTab();return}if(m.target!==m.currentTarget)return;let h=function(m,h,g){var v;let b=(v=m.key,"rtl"!==g?v:"ArrowLeft"===v?"ArrowRight":"ArrowRight"===v?"ArrowLeft":v);if(!("vertical"===h&&["ArrowLeft","ArrowRight"].includes(b))&&!("horizontal"===h&&["ArrowUp","ArrowDown"].includes(b)))return tL[b]}(m,_.orientation,_.dir);if(void 0!==h){m.preventDefault();let b=L().filter(m=>m.focusable),E=b.map(m=>m.ref.current);if("last"===h)E.reverse();else if("prev"===h||"next"===h){var g,v;"prev"===h&&E.reverse();let b=E.indexOf(m.currentTarget);E=_.loop?(g=E,v=b+1,g.map((m,h)=>g[(v+h)%g.length])):E.slice(b+1)}setTimeout(()=>$d7bdfb9eb0fdf311$var$focusFirst(E))}})})))}),tL={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $d7bdfb9eb0fdf311$var$focusFirst(m){let h=document.activeElement;for(let g of m)if(g===h||(g.focus(),document.activeElement!==h))return}var tD=g(9115);let tF="Tabs",[tN,tj]=(0,tm.b)(tF,[tT]),tW=tT(),[tV,tz]=tN(tF),tH=(0,$.forwardRef)((m,h)=>{let{__scopeTabs:g,value:v,onValueChange:b,defaultValue:E,orientation:x="horizontal",dir:C,activationMode:S="automatic",..._}=m,M=(0,tE.gm)(C),[L,D]=(0,tw.T)({prop:v,onChange:b,defaultProp:E});return(0,$.createElement)(tV,{scope:g,baseId:(0,tv.M)(),value:L,onValueChange:D,orientation:x,dir:M,activationMode:S},(0,$.createElement)(ty.WV.div,(0,tp.Z)({dir:M,"data-orientation":x},_,{ref:h})))}),tB=(0,$.forwardRef)((m,h)=>{let{__scopeTabs:g,loop:v=!0,...b}=m,E=tz("TabsList",g),x=tW(g);return(0,$.createElement)(tI,(0,tp.Z)({asChild:!0},x,{orientation:E.orientation,dir:E.dir,loop:v}),(0,$.createElement)(ty.WV.div,(0,tp.Z)({role:"tablist","aria-orientation":E.orientation},b,{ref:h})))}),tU=(0,$.forwardRef)((m,h)=>{let{__scopeTabs:g,value:v,disabled:b=!1,...E}=m,x=tz("TabsTrigger",g),C=tW(g),S=$69cb30bb0017df05$var$makeTriggerId(x.baseId,v),_=$69cb30bb0017df05$var$makeContentId(x.baseId,v),M=v===x.value;return(0,$.createElement)(tM,(0,tp.Z)({asChild:!0},C,{focusable:!b,active:M}),(0,$.createElement)(ty.WV.button,(0,tp.Z)({type:"button",role:"tab","aria-selected":M,"aria-controls":_,"data-state":M?"active":"inactive","data-disabled":b?"":void 0,disabled:b,id:S},E,{ref:h,onMouseDown:(0,tf.M)(m.onMouseDown,m=>{b||0!==m.button||!1!==m.ctrlKey?m.preventDefault():x.onValueChange(v)}),onKeyDown:(0,tf.M)(m.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&x.onValueChange(v)}),onFocus:(0,tf.M)(m.onFocus,()=>{let m="manual"!==x.activationMode;M||b||!m||x.onValueChange(v)})})))}),tq=(0,$.forwardRef)((m,h)=>{let{__scopeTabs:g,value:v,forceMount:b,children:E,...x}=m,C=tz("TabsContent",g),S=$69cb30bb0017df05$var$makeTriggerId(C.baseId,v),_=$69cb30bb0017df05$var$makeContentId(C.baseId,v),M=v===C.value,L=(0,$.useRef)(M);return(0,$.useEffect)(()=>{let m=requestAnimationFrame(()=>L.current=!1);return()=>cancelAnimationFrame(m)},[]),(0,$.createElement)(tD.z,{present:b||M},({present:g})=>(0,$.createElement)(ty.WV.div,(0,tp.Z)({"data-state":M?"active":"inactive","data-orientation":C.orientation,role:"tabpanel","aria-labelledby":S,hidden:!g,id:_,tabIndex:0},x,{ref:h,style:{...m.style,animationDuration:L.current?"0s":void 0}}),g&&E))});function $69cb30bb0017df05$var$makeTriggerId(m,h){return`${m}-trigger-${h}`}function $69cb30bb0017df05$var$makeContentId(m,h){return`${m}-content-${h}`}var tZ=g(1036),tK=g(3041);let tG="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var tX={randomUUID:tG};let tY=new Uint8Array(16),tQ=[];for(let m=0;m<256;++m)tQ.push((m+256).toString(16).slice(1));var esm_browser_v4=function(m,h,g){if(tX.randomUUID&&!h&&!m)return tX.randomUUID();m=m||{};let b=m.random||(m.rng||function(){if(!v&&!(v="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return v(tY)})();if(b[6]=15&b[6]|64,b[8]=63&b[8]|128,h){g=g||0;for(let m=0;m<16;++m)h[g+m]=b[m];return h}return function(m,h=0){return tQ[m[h+0]]+tQ[m[h+1]]+tQ[m[h+2]]+tQ[m[h+3]]+"-"+tQ[m[h+4]]+tQ[m[h+5]]+"-"+tQ[m[h+6]]+tQ[m[h+7]]+"-"+tQ[m[h+8]]+tQ[m[h+9]]+"-"+tQ[m[h+10]]+tQ[m[h+11]]+tQ[m[h+12]]+tQ[m[h+13]]+tQ[m[h+14]]+tQ[m[h+15]]}(b)},tJ=g(7546),t0=g(7898);let t1="Radio",[t2,t3]=(0,tm.b)(t1),[t4,t6]=t2(t1),t5=(0,$.forwardRef)((m,h)=>{let{__scopeRadio:g,name:v,checked:b=!1,required:E,disabled:x,value:C="on",onCheck:S,..._}=m,[M,L]=(0,$.useState)(null),D=(0,tg.e)(h,m=>L(m)),F=(0,$.useRef)(!1),N=!M||!!M.closest("form");return(0,$.createElement)(t4,{scope:g,checked:b,disabled:x},(0,$.createElement)(ty.WV.button,(0,tp.Z)({type:"button",role:"radio","aria-checked":b,"data-state":$ce77a8961b41be9e$var$getState(b),"data-disabled":x?"":void 0,disabled:x,value:C},_,{ref:D,onClick:(0,tf.M)(m.onClick,m=>{b||null==S||S(),N&&(F.current=m.isPropagationStopped(),F.current||m.stopPropagation())})})),N&&(0,$.createElement)(t8,{control:M,bubbles:!F.current,name:v,value:C,checked:b,required:E,disabled:x,style:{transform:"translateX(-100%)"}}))}),t8=((m,h)=>{let{__scopeRadio:g,forceMount:v,...b}=m,E=t6("RadioIndicator",g);return(0,$.createElement)(tD.z,{present:v||E.checked},(0,$.createElement)(ty.WV.span,(0,tp.Z)({"data-state":$ce77a8961b41be9e$var$getState(E.checked),"data-disabled":E.disabled?"":void 0},b,{ref:h})))},m=>{let{control:h,checked:g,bubbles:v=!0,...b}=m,E=(0,$.useRef)(null),x=(0,t0.D)(g),C=(0,tJ.t)(h);return(0,$.useEffect)(()=>{let m=E.current,h=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(h,"checked"),C=b.set;if(x!==g&&C){let h=new Event("click",{bubbles:v});C.call(m,g),m.dispatchEvent(h)}},[x,g,v]),(0,$.createElement)("input",(0,tp.Z)({type:"radio","aria-hidden":!0,defaultChecked:g},b,{tabIndex:-1,ref:E,style:{...m.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))});function $ce77a8961b41be9e$var$getState(m){return m?"checked":"unchecked"}let t9=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],t7="RadioGroup",[re,rt]=(0,tm.b)(t7,[tT,t3]),ri=tT(),ra=t3(),[ro,rl]=re(t7),rs=(0,$.forwardRef)((m,h)=>{let{__scopeRadioGroup:g,name:v,defaultValue:b,value:E,required:x=!1,disabled:C=!1,orientation:S,dir:_,loop:M=!0,onValueChange:L,...D}=m,F=ri(g),N=(0,tE.gm)(_),[j,W]=(0,tw.T)({prop:E,defaultProp:b,onChange:L});return(0,$.createElement)(ro,{scope:g,name:v,required:x,disabled:C,value:j,onValueChange:W},(0,$.createElement)(tI,(0,tp.Z)({asChild:!0},F,{orientation:S,dir:N,loop:M}),(0,$.createElement)(ty.WV.div,(0,tp.Z)({role:"radiogroup","aria-required":x,"aria-orientation":S,"data-disabled":C?"":void 0,dir:N},D,{ref:h}))))}),rc=(0,$.forwardRef)((m,h)=>{let{__scopeRadioGroup:g,disabled:v,...b}=m,E=rl("RadioGroupItem",g),x=E.disabled||v,C=ri(g),S=ra(g),_=(0,$.useRef)(null),M=(0,tg.e)(h,_),L=E.value===b.value,D=(0,$.useRef)(!1);return(0,$.useEffect)(()=>{let handleKeyDown=m=>{t9.includes(m.key)&&(D.current=!0)},handleKeyUp=()=>D.current=!1;return document.addEventListener("keydown",handleKeyDown),document.addEventListener("keyup",handleKeyUp),()=>{document.removeEventListener("keydown",handleKeyDown),document.removeEventListener("keyup",handleKeyUp)}},[]),(0,$.createElement)(tM,(0,tp.Z)({asChild:!0},C,{focusable:!x,active:L}),(0,$.createElement)(t5,(0,tp.Z)({disabled:x,required:E.required,checked:L},S,b,{name:E.name,ref:M,onCheck:()=>E.onValueChange(b.value),onKeyDown:(0,tf.M)(m=>{"Enter"===m.key&&m.preventDefault()}),onFocus:(0,tf.M)(b.onFocus,()=>{var m;D.current&&(null===(m=_.current)||void 0===m||m.click())})})))});var ru=g(9821),rd=g(667),rp=g(7552),rf=g(5420);let rm=["top","right","bottom","left"],rh=Math.min,rg=Math.max,rv=Math.round,ry=Math.floor,createCoords=m=>({x:m,y:m}),rb={left:"right",right:"left",bottom:"top",top:"bottom"},rw={start:"end",end:"start"};function floating_ui_utils_evaluate(m,h){return"function"==typeof m?m(h):m}function floating_ui_utils_getSide(m){return m.split("-")[0]}function floating_ui_utils_getAlignment(m){return m.split("-")[1]}function getOppositeAxis(m){return"x"===m?"y":"x"}function getAxisLength(m){return"y"===m?"height":"width"}function floating_ui_utils_getSideAxis(m){return["top","bottom"].includes(floating_ui_utils_getSide(m))?"y":"x"}function floating_ui_utils_getOppositeAlignmentPlacement(m){return m.replace(/start|end/g,m=>rw[m])}function getOppositePlacement(m){return m.replace(/left|right|bottom|top/g,m=>rb[m])}function floating_ui_utils_getPaddingObject(m){return"number"!=typeof m?{top:0,right:0,bottom:0,left:0,...m}:{top:m,right:m,bottom:m,left:m}}function floating_ui_utils_rectToClientRect(m){return{...m,top:m.y,left:m.x,right:m.x+m.width,bottom:m.y+m.height}}function computeCoordsFromPlacement(m,h,g){let v,{reference:b,floating:E}=m,x=floating_ui_utils_getSideAxis(h),C=getOppositeAxis(floating_ui_utils_getSideAxis(h)),S=getAxisLength(C),$=floating_ui_utils_getSide(h),_="y"===x,M=b.x+b.width/2-E.width/2,L=b.y+b.height/2-E.height/2,D=b[S]/2-E[S]/2;switch($){case"top":v={x:M,y:b.y-E.height};break;case"bottom":v={x:M,y:b.y+b.height};break;case"right":v={x:b.x+b.width,y:L};break;case"left":v={x:b.x-E.width,y:L};break;default:v={x:b.x,y:b.y}}switch(floating_ui_utils_getAlignment(h)){case"start":v[C]-=D*(g&&_?-1:1);break;case"end":v[C]+=D*(g&&_?-1:1)}return v}let computePosition=async(m,h,g)=>{let{placement:v="bottom",strategy:b="absolute",middleware:E=[],platform:x}=g,C=E.filter(Boolean),S=await (null==x.isRTL?void 0:x.isRTL(h)),$=await x.getElementRects({reference:m,floating:h,strategy:b}),{x:_,y:M}=computeCoordsFromPlacement($,v,S),L=v,D={},F=0;for(let g=0;g<C.length;g++){let{name:E,fn:N}=C[g],{x:j,y:W,data:B,reset:U}=await N({x:_,y:M,initialPlacement:v,placement:L,strategy:b,middlewareData:D,rects:$,platform:x,elements:{reference:m,floating:h}});if(_=null!=j?j:_,M=null!=W?W:M,D={...D,[E]:{...D[E],...B}},U&&F<=50){F++,"object"==typeof U&&(U.placement&&(L=U.placement),U.rects&&($=!0===U.rects?await x.getElementRects({reference:m,floating:h,strategy:b}):U.rects),{x:_,y:M}=computeCoordsFromPlacement($,L,S)),g=-1;continue}}return{x:_,y:M,placement:L,strategy:b,middlewareData:D}};async function detectOverflow(m,h){var g;void 0===h&&(h={});let{x:v,y:b,platform:E,rects:x,elements:C,strategy:S}=m,{boundary:$="clippingAncestors",rootBoundary:_="viewport",elementContext:M="floating",altBoundary:L=!1,padding:D=0}=floating_ui_utils_evaluate(h,m),F=floating_ui_utils_getPaddingObject(D),N=C[L?"floating"===M?"reference":"floating":M],j=floating_ui_utils_rectToClientRect(await E.getClippingRect({element:null==(g=await (null==E.isElement?void 0:E.isElement(N)))||g?N:N.contextElement||await (null==E.getDocumentElement?void 0:E.getDocumentElement(C.floating)),boundary:$,rootBoundary:_,strategy:S})),W="floating"===M?{...x.floating,x:v,y:b}:x.reference,B=await (null==E.getOffsetParent?void 0:E.getOffsetParent(C.floating)),U=await (null==E.isElement?void 0:E.isElement(B))&&await (null==E.getScale?void 0:E.getScale(B))||{x:1,y:1},Z=floating_ui_utils_rectToClientRect(E.convertOffsetParentRelativeRectToViewportRelativeRect?await E.convertOffsetParentRelativeRectToViewportRelativeRect({rect:W,offsetParent:B,strategy:S}):W);return{top:(j.top-Z.top+F.top)/U.y,bottom:(Z.bottom-j.bottom+F.bottom)/U.y,left:(j.left-Z.left+F.left)/U.x,right:(Z.right-j.right+F.right)/U.x}}let arrow=m=>({name:"arrow",options:m,async fn(h){let{x:g,y:v,placement:b,rects:E,platform:x,elements:C,middlewareData:S}=h,{element:$,padding:_=0}=floating_ui_utils_evaluate(m,h)||{};if(null==$)return{};let M=floating_ui_utils_getPaddingObject(_),L={x:g,y:v},D=getOppositeAxis(floating_ui_utils_getSideAxis(b)),F=getAxisLength(D),N=await x.getDimensions($),j="y"===D,W=j?"clientHeight":"clientWidth",B=E.reference[F]+E.reference[D]-L[D]-E.floating[F],U=L[D]-E.reference[D],Z=await (null==x.getOffsetParent?void 0:x.getOffsetParent($)),K=Z?Z[W]:0;K&&await (null==x.isElement?void 0:x.isElement(Z))||(K=C.floating[W]||E.floating[F]);let G=K/2-N[F]/2-1,X=rh(M[j?"top":"left"],G),Y=rh(M[j?"bottom":"right"],G),J=K-N[F]-Y,ee=K/2-N[F]/2+(B/2-U/2),et=rg(X,rh(ee,J)),ei=!S.arrow&&null!=floating_ui_utils_getAlignment(b)&&ee!=et&&E.reference[F]/2-(ee<X?X:Y)-N[F]/2<0,ea=ei?ee<X?ee-X:ee-J:0;return{[D]:L[D]+ea,data:{[D]:et,centerOffset:ee-et-ea,...ei&&{alignmentOffset:ea}},reset:ei}}}),flip=function(m){return void 0===m&&(m={}),{name:"flip",options:m,async fn(h){var g,v,b,E,x;let{placement:C,middlewareData:S,rects:$,initialPlacement:_,platform:M,elements:L}=h,{mainAxis:D=!0,crossAxis:F=!0,fallbackPlacements:N,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:W="none",flipAlignment:B=!0,...U}=floating_ui_utils_evaluate(m,h);if(null!=(g=S.arrow)&&g.alignmentOffset)return{};let Z=floating_ui_utils_getSide(C),K=floating_ui_utils_getSide(_)===_,G=await (null==M.isRTL?void 0:M.isRTL(L.floating)),X=N||(K||!B?[getOppositePlacement(_)]:function(m){let h=getOppositePlacement(m);return[floating_ui_utils_getOppositeAlignmentPlacement(m),h,floating_ui_utils_getOppositeAlignmentPlacement(h)]}(_));N||"none"===W||X.push(...function(m,h,g,v){let b=floating_ui_utils_getAlignment(m),E=function(m,h,g){let v=["left","right"],b=["right","left"];switch(m){case"top":case"bottom":if(g)return h?b:v;return h?v:b;case"left":case"right":return h?["top","bottom"]:["bottom","top"];default:return[]}}(floating_ui_utils_getSide(m),"start"===g,v);return b&&(E=E.map(m=>m+"-"+b),h&&(E=E.concat(E.map(floating_ui_utils_getOppositeAlignmentPlacement)))),E}(_,B,W,G));let Y=[_,...X],J=await detectOverflow(h,U),ee=[],et=(null==(v=S.flip)?void 0:v.overflows)||[];if(D&&ee.push(J[Z]),F){let m=function(m,h,g){void 0===g&&(g=!1);let v=floating_ui_utils_getAlignment(m),b=getOppositeAxis(floating_ui_utils_getSideAxis(m)),E=getAxisLength(b),x="x"===b?v===(g?"end":"start")?"right":"left":"start"===v?"bottom":"top";return h.reference[E]>h.floating[E]&&(x=getOppositePlacement(x)),[x,getOppositePlacement(x)]}(C,$,G);ee.push(J[m[0]],J[m[1]])}if(et=[...et,{placement:C,overflows:ee}],!ee.every(m=>m<=0)){let m=((null==(b=S.flip)?void 0:b.index)||0)+1,h=Y[m];if(h)return{data:{index:m,overflows:et},reset:{placement:h}};let g=null==(E=et.filter(m=>m.overflows[0]<=0).sort((m,h)=>m.overflows[1]-h.overflows[1])[0])?void 0:E.placement;if(!g)switch(j){case"bestFit":{let m=null==(x=et.map(m=>[m.placement,m.overflows.filter(m=>m>0).reduce((m,h)=>m+h,0)]).sort((m,h)=>m[1]-h[1])[0])?void 0:x[0];m&&(g=m);break}case"initialPlacement":g=_}if(C!==g)return{reset:{placement:g}}}return{}}}};function getSideOffsets(m,h){return{top:m.top-h.height,right:m.right-h.width,bottom:m.bottom-h.height,left:m.left-h.width}}function isAnySideFullyClipped(m){return rm.some(h=>m[h]>=0)}let hide=function(m){return void 0===m&&(m={}),{name:"hide",options:m,async fn(h){let{rects:g}=h,{strategy:v="referenceHidden",...b}=floating_ui_utils_evaluate(m,h);switch(v){case"referenceHidden":{let m=await detectOverflow(h,{...b,elementContext:"reference"}),v=getSideOffsets(m,g.reference);return{data:{referenceHiddenOffsets:v,referenceHidden:isAnySideFullyClipped(v)}}}case"escaped":{let m=await detectOverflow(h,{...b,altBoundary:!0}),v=getSideOffsets(m,g.floating);return{data:{escapedOffsets:v,escaped:isAnySideFullyClipped(v)}}}default:return{}}}}};async function convertValueToCoords(m,h){let{placement:g,platform:v,elements:b}=m,E=await (null==v.isRTL?void 0:v.isRTL(b.floating)),x=floating_ui_utils_getSide(g),C=floating_ui_utils_getAlignment(g),S="y"===floating_ui_utils_getSideAxis(g),$=["left","top"].includes(x)?-1:1,_=E&&S?-1:1,M=floating_ui_utils_evaluate(h,m),{mainAxis:L,crossAxis:D,alignmentAxis:F}="number"==typeof M?{mainAxis:M,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...M};return C&&"number"==typeof F&&(D="end"===C?-1*F:F),S?{x:D*_,y:L*$}:{x:L*$,y:D*_}}let offset=function(m){return void 0===m&&(m=0),{name:"offset",options:m,async fn(h){let{x:g,y:v}=h,b=await convertValueToCoords(h,m);return{x:g+b.x,y:v+b.y,data:b}}}},shift=function(m){return void 0===m&&(m={}),{name:"shift",options:m,async fn(h){let{x:g,y:v,placement:b}=h,{mainAxis:E=!0,crossAxis:x=!1,limiter:C={fn:m=>{let{x:h,y:g}=m;return{x:h,y:g}}},...S}=floating_ui_utils_evaluate(m,h),$={x:g,y:v},_=await detectOverflow(h,S),M=floating_ui_utils_getSideAxis(floating_ui_utils_getSide(b)),L=getOppositeAxis(M),D=$[L],F=$[M];if(E){let m=D+_["y"===L?"top":"left"],h=D-_["y"===L?"bottom":"right"];D=rg(m,rh(D,h))}if(x){let m="y"===M?"top":"left",h="y"===M?"bottom":"right",g=F+_[m],v=F-_[h];F=rg(g,rh(F,v))}let N=C.fn({...h,[L]:D,[M]:F});return{...N,data:{x:N.x-g,y:N.y-v}}}}},limitShift=function(m){return void 0===m&&(m={}),{options:m,fn(h){let{x:g,y:v,placement:b,rects:E,middlewareData:x}=h,{offset:C=0,mainAxis:S=!0,crossAxis:$=!0}=floating_ui_utils_evaluate(m,h),_={x:g,y:v},M=floating_ui_utils_getSideAxis(b),L=getOppositeAxis(M),D=_[L],F=_[M],N=floating_ui_utils_evaluate(C,h),j="number"==typeof N?{mainAxis:N,crossAxis:0}:{mainAxis:0,crossAxis:0,...N};if(S){let m="y"===L?"height":"width",h=E.reference[L]-E.floating[m]+j.mainAxis,g=E.reference[L]+E.reference[m]-j.mainAxis;D<h?D=h:D>g&&(D=g)}if($){var W,B;let m="y"===L?"width":"height",h=["top","left"].includes(floating_ui_utils_getSide(b)),g=E.reference[M]-E.floating[m]+(h&&(null==(W=x.offset)?void 0:W[M])||0)+(h?0:j.crossAxis),v=E.reference[M]+E.reference[m]+(h?0:(null==(B=x.offset)?void 0:B[M])||0)-(h?j.crossAxis:0);F<g?F=g:F>v&&(F=v)}return{[L]:D,[M]:F}}}},size=function(m){return void 0===m&&(m={}),{name:"size",options:m,async fn(h){let g,v;let{placement:b,rects:E,platform:x,elements:C}=h,{apply:S=()=>{},...$}=floating_ui_utils_evaluate(m,h),_=await detectOverflow(h,$),M=floating_ui_utils_getSide(b),L=floating_ui_utils_getAlignment(b),D="y"===floating_ui_utils_getSideAxis(b),{width:F,height:N}=E.floating;"top"===M||"bottom"===M?(g=M,v=L===(await (null==x.isRTL?void 0:x.isRTL(C.floating))?"start":"end")?"left":"right"):(v=M,g="end"===L?"top":"bottom");let j=N-_[g],W=F-_[v],B=!h.middlewareData.shift,U=j,Z=W;if(D){let m=F-_.left-_.right;Z=L||B?rh(W,m):m}else{let m=N-_.top-_.bottom;U=L||B?rh(j,m):m}if(B&&!L){let m=rg(_.left,0),h=rg(_.right,0),g=rg(_.top,0),v=rg(_.bottom,0);D?Z=F-2*(0!==m||0!==h?m+h:rg(_.left,_.right)):U=N-2*(0!==g||0!==v?g+v:rg(_.top,_.bottom))}await S({...h,availableWidth:Z,availableHeight:U});let K=await x.getDimensions(C.floating);return F!==K.width||N!==K.height?{reset:{rects:!0}}:{}}}};function getNodeName(m){return isNode(m)?(m.nodeName||"").toLowerCase():"#document"}function getWindow(m){var h;return(null==m?void 0:null==(h=m.ownerDocument)?void 0:h.defaultView)||window}function getDocumentElement(m){var h;return null==(h=(isNode(m)?m.ownerDocument:m.document)||window.document)?void 0:h.documentElement}function isNode(m){return m instanceof Node||m instanceof getWindow(m).Node}function isElement(m){return m instanceof Element||m instanceof getWindow(m).Element}function isHTMLElement(m){return m instanceof HTMLElement||m instanceof getWindow(m).HTMLElement}function isShadowRoot(m){return"undefined"!=typeof ShadowRoot&&(m instanceof ShadowRoot||m instanceof getWindow(m).ShadowRoot)}function isOverflowElement(m){let{overflow:h,overflowX:g,overflowY:v,display:b}=floating_ui_utils_dom_getComputedStyle(m);return/auto|scroll|overlay|hidden|clip/.test(h+v+g)&&!["inline","contents"].includes(b)}function isContainingBlock(m){let h=isWebKit(),g=floating_ui_utils_dom_getComputedStyle(m);return"none"!==g.transform||"none"!==g.perspective||!!g.containerType&&"normal"!==g.containerType||!h&&!!g.backdropFilter&&"none"!==g.backdropFilter||!h&&!!g.filter&&"none"!==g.filter||["transform","perspective","filter"].some(m=>(g.willChange||"").includes(m))||["paint","layout","strict","content"].some(m=>(g.contain||"").includes(m))}function isWebKit(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(m){return["html","body","#document"].includes(getNodeName(m))}function floating_ui_utils_dom_getComputedStyle(m){return getWindow(m).getComputedStyle(m)}function getNodeScroll(m){return isElement(m)?{scrollLeft:m.scrollLeft,scrollTop:m.scrollTop}:{scrollLeft:m.pageXOffset,scrollTop:m.pageYOffset}}function getParentNode(m){if("html"===getNodeName(m))return m;let h=m.assignedSlot||m.parentNode||isShadowRoot(m)&&m.host||getDocumentElement(m);return isShadowRoot(h)?h.host:h}function getOverflowAncestors(m,h,g){var v;void 0===h&&(h=[]),void 0===g&&(g=!0);let b=function getNearestOverflowAncestor(m){let h=getParentNode(m);return isLastTraversableNode(h)?m.ownerDocument?m.ownerDocument.body:m.body:isHTMLElement(h)&&isOverflowElement(h)?h:getNearestOverflowAncestor(h)}(m),E=b===(null==(v=m.ownerDocument)?void 0:v.body),x=getWindow(b);return E?h.concat(x,x.visualViewport||[],isOverflowElement(b)?b:[],x.frameElement&&g?getOverflowAncestors(x.frameElement):[]):h.concat(b,getOverflowAncestors(b,[],g))}function getCssDimensions(m){let h=floating_ui_utils_dom_getComputedStyle(m),g=parseFloat(h.width)||0,v=parseFloat(h.height)||0,b=isHTMLElement(m),E=b?m.offsetWidth:g,x=b?m.offsetHeight:v,C=rv(g)!==E||rv(v)!==x;return C&&(g=E,v=x),{width:g,height:v,$:C}}function unwrapElement(m){return isElement(m)?m:m.contextElement}function getScale(m){let h=unwrapElement(m);if(!isHTMLElement(h))return createCoords(1);let g=h.getBoundingClientRect(),{width:v,height:b,$:E}=getCssDimensions(h),x=(E?rv(g.width):g.width)/v,C=(E?rv(g.height):g.height)/b;return x&&Number.isFinite(x)||(x=1),C&&Number.isFinite(C)||(C=1),{x,y:C}}let rE=createCoords(0);function getVisualOffsets(m){let h=getWindow(m);return isWebKit()&&h.visualViewport?{x:h.visualViewport.offsetLeft,y:h.visualViewport.offsetTop}:rE}function getBoundingClientRect(m,h,g,v){var b;void 0===h&&(h=!1),void 0===g&&(g=!1);let E=m.getBoundingClientRect(),x=unwrapElement(m),C=createCoords(1);h&&(v?isElement(v)&&(C=getScale(v)):C=getScale(m));let S=(void 0===(b=g)&&(b=!1),v&&(!b||v===getWindow(x))&&b)?getVisualOffsets(x):createCoords(0),$=(E.left+S.x)/C.x,_=(E.top+S.y)/C.y,M=E.width/C.x,L=E.height/C.y;if(x){let m=getWindow(x),h=v&&isElement(v)?getWindow(v):v,g=m.frameElement;for(;g&&v&&h!==m;){let m=getScale(g),h=g.getBoundingClientRect(),v=floating_ui_utils_dom_getComputedStyle(g),b=h.left+(g.clientLeft+parseFloat(v.paddingLeft))*m.x,E=h.top+(g.clientTop+parseFloat(v.paddingTop))*m.y;$*=m.x,_*=m.y,M*=m.x,L*=m.y,$+=b,_+=E,g=getWindow(g).frameElement}}return floating_ui_utils_rectToClientRect({width:M,height:L,x:$,y:_})}function getWindowScrollBarX(m){return getBoundingClientRect(getDocumentElement(m)).left+getNodeScroll(m).scrollLeft}function getClientRectFromClippingAncestor(m,h,g){let v;if("viewport"===h)v=function(m,h){let g=getWindow(m),v=getDocumentElement(m),b=g.visualViewport,E=v.clientWidth,x=v.clientHeight,C=0,S=0;if(b){E=b.width,x=b.height;let m=isWebKit();(!m||m&&"fixed"===h)&&(C=b.offsetLeft,S=b.offsetTop)}return{width:E,height:x,x:C,y:S}}(m,g);else if("document"===h)v=function(m){let h=getDocumentElement(m),g=getNodeScroll(m),v=m.ownerDocument.body,b=rg(h.scrollWidth,h.clientWidth,v.scrollWidth,v.clientWidth),E=rg(h.scrollHeight,h.clientHeight,v.scrollHeight,v.clientHeight),x=-g.scrollLeft+getWindowScrollBarX(m),C=-g.scrollTop;return"rtl"===floating_ui_utils_dom_getComputedStyle(v).direction&&(x+=rg(h.clientWidth,v.clientWidth)-b),{width:b,height:E,x,y:C}}(getDocumentElement(m));else if(isElement(h))v=function(m,h){let g=getBoundingClientRect(m,!0,"fixed"===h),v=g.top+m.clientTop,b=g.left+m.clientLeft,E=isHTMLElement(m)?getScale(m):createCoords(1),x=m.clientWidth*E.x,C=m.clientHeight*E.y,S=b*E.x,$=v*E.y;return{width:x,height:C,x:S,y:$}}(h,g);else{let g=getVisualOffsets(m);v={...h,x:h.x-g.x,y:h.y-g.y}}return floating_ui_utils_rectToClientRect(v)}function getTrueOffsetParent(m,h){return isHTMLElement(m)&&"fixed"!==floating_ui_utils_dom_getComputedStyle(m).position?h?h(m):m.offsetParent:null}function getOffsetParent(m,h){let g=getWindow(m);if(!isHTMLElement(m))return g;let v=getTrueOffsetParent(m,h);for(;v&&["table","td","th"].includes(getNodeName(v))&&"static"===floating_ui_utils_dom_getComputedStyle(v).position;)v=getTrueOffsetParent(v,h);return v&&("html"===getNodeName(v)||"body"===getNodeName(v)&&"static"===floating_ui_utils_dom_getComputedStyle(v).position&&!isContainingBlock(v))?g:v||function(m){let h=getParentNode(m);for(;isHTMLElement(h)&&!isLastTraversableNode(h);){if(isContainingBlock(h))return h;h=getParentNode(h)}return null}(m)||g}let getElementRects=async function(m){let{reference:h,floating:g,strategy:v}=m,b=this.getOffsetParent||getOffsetParent,E=this.getDimensions;return{reference:function(m,h,g){let v=isHTMLElement(h),b=getDocumentElement(h),E="fixed"===g,x=getBoundingClientRect(m,!0,E,h),C={scrollLeft:0,scrollTop:0},S=createCoords(0);if(v||!v&&!E){if(("body"!==getNodeName(h)||isOverflowElement(b))&&(C=getNodeScroll(h)),v){let m=getBoundingClientRect(h,!0,E,h);S.x=m.x+h.clientLeft,S.y=m.y+h.clientTop}else b&&(S.x=getWindowScrollBarX(b))}return{x:x.left+C.scrollLeft-S.x,y:x.top+C.scrollTop-S.y,width:x.width,height:x.height}}(h,await b(g),v),floating:{x:0,y:0,...await E(g)}}},rx={convertOffsetParentRelativeRectToViewportRelativeRect:function(m){let{rect:h,offsetParent:g,strategy:v}=m,b=isHTMLElement(g),E=getDocumentElement(g);if(g===E)return h;let x={scrollLeft:0,scrollTop:0},C=createCoords(1),S=createCoords(0);if((b||!b&&"fixed"!==v)&&(("body"!==getNodeName(g)||isOverflowElement(E))&&(x=getNodeScroll(g)),isHTMLElement(g))){let m=getBoundingClientRect(g);C=getScale(g),S.x=m.x+g.clientLeft,S.y=m.y+g.clientTop}return{width:h.width*C.x,height:h.height*C.y,x:h.x*C.x-x.scrollLeft*C.x+S.x,y:h.y*C.y-x.scrollTop*C.y+S.y}},getDocumentElement:getDocumentElement,getClippingRect:function(m){let{element:h,boundary:g,rootBoundary:v,strategy:b}=m,E="clippingAncestors"===g?function(m,h){let g=h.get(m);if(g)return g;let v=getOverflowAncestors(m,[],!1).filter(m=>isElement(m)&&"body"!==getNodeName(m)),b=null,E="fixed"===floating_ui_utils_dom_getComputedStyle(m).position,x=E?getParentNode(m):m;for(;isElement(x)&&!isLastTraversableNode(x);){let h=floating_ui_utils_dom_getComputedStyle(x),g=isContainingBlock(x);g||"fixed"!==h.position||(b=null);let C=E?!g&&!b:!g&&"static"===h.position&&!!b&&["absolute","fixed"].includes(b.position)||isOverflowElement(x)&&!g&&function hasFixedPositionAncestor(m,h){let g=getParentNode(m);return!(g===h||!isElement(g)||isLastTraversableNode(g))&&("fixed"===floating_ui_utils_dom_getComputedStyle(g).position||hasFixedPositionAncestor(g,h))}(m,x);C?v=v.filter(m=>m!==x):b=h,x=getParentNode(x)}return h.set(m,v),v}(h,this._c):[].concat(g),x=[...E,v],C=x[0],S=x.reduce((m,g)=>{let v=getClientRectFromClippingAncestor(h,g,b);return m.top=rg(v.top,m.top),m.right=rh(v.right,m.right),m.bottom=rh(v.bottom,m.bottom),m.left=rg(v.left,m.left),m},getClientRectFromClippingAncestor(h,C,b));return{width:S.right-S.left,height:S.bottom-S.top,x:S.left,y:S.top}},getOffsetParent,getElementRects,getClientRects:function(m){return Array.from(m.getClientRects())},getDimensions:function(m){return getCssDimensions(m)},getScale,isElement:isElement,isRTL:function(m){return"rtl"===floating_ui_utils_dom_getComputedStyle(m).direction}};function autoUpdate(m,h,g,v){let b;void 0===v&&(v={});let{ancestorScroll:E=!0,ancestorResize:x=!0,elementResize:C="function"==typeof ResizeObserver,layoutShift:S="function"==typeof IntersectionObserver,animationFrame:$=!1}=v,_=unwrapElement(m),M=E||x?[..._?getOverflowAncestors(_):[],...getOverflowAncestors(h)]:[];M.forEach(m=>{E&&m.addEventListener("scroll",g,{passive:!0}),x&&m.addEventListener("resize",g)});let L=_&&S?function(m,h){let g,v=null,b=getDocumentElement(m);function cleanup(){clearTimeout(g),v&&v.disconnect(),v=null}return!function refresh(E,x){void 0===E&&(E=!1),void 0===x&&(x=1),cleanup();let{left:C,top:S,width:$,height:_}=m.getBoundingClientRect();if(E||h(),!$||!_)return;let M=ry(S),L=ry(b.clientWidth-(C+$)),D=ry(b.clientHeight-(S+_)),F=ry(C),N={rootMargin:-M+"px "+-L+"px "+-D+"px "+-F+"px",threshold:rg(0,rh(1,x))||1},j=!0;function handleObserve(m){let h=m[0].intersectionRatio;if(h!==x){if(!j)return refresh();h?refresh(!1,h):g=setTimeout(()=>{refresh(!1,1e-7)},100)}j=!1}try{v=new IntersectionObserver(handleObserve,{...N,root:b.ownerDocument})}catch(m){v=new IntersectionObserver(handleObserve,N)}v.observe(m)}(!0),cleanup}(_,g):null,D=-1,F=null;C&&(F=new ResizeObserver(m=>{let[v]=m;v&&v.target===_&&F&&(F.unobserve(h),cancelAnimationFrame(D),D=requestAnimationFrame(()=>{F&&F.observe(h)})),g()}),_&&!$&&F.observe(_),F.observe(h));let N=$?getBoundingClientRect(m):null;return $&&function frameLoop(){let h=getBoundingClientRect(m);N&&(h.x!==N.x||h.y!==N.y||h.width!==N.width||h.height!==N.height)&&g(),N=h,b=requestAnimationFrame(frameLoop)}(),g(),()=>{M.forEach(m=>{E&&m.removeEventListener("scroll",g),x&&m.removeEventListener("resize",g)}),L&&L(),F&&F.disconnect(),F=null,$&&cancelAnimationFrame(b)}}let floating_ui_dom_computePosition=(m,h,g)=>{let v=new Map,b={platform:rx,...g},E={...b.platform,_c:v};return computePosition(m,h,{...b,platform:E})};var rC=g(3935);let floating_ui_react_dom_arrow=m=>({name:"arrow",options:m,fn(h){let{element:g,padding:v}="function"==typeof m?m(h):m;if(g&&({}).hasOwnProperty.call(g,"current")){if(null!=g.current)return arrow({element:g.current,padding:v}).fn(h)}else if(g)return arrow({element:g,padding:v}).fn(h);return{}}});var rA="undefined"!=typeof document?$.useLayoutEffect:$.useEffect;function deepEqual(m,h){let g,v,b;if(m===h)return!0;if(typeof m!=typeof h)return!1;if("function"==typeof m&&m.toString()===h.toString())return!0;if(m&&h&&"object"==typeof m){if(Array.isArray(m)){if((g=m.length)!=h.length)return!1;for(v=g;0!=v--;)if(!deepEqual(m[v],h[v]))return!1;return!0}if((g=(b=Object.keys(m)).length)!==Object.keys(h).length)return!1;for(v=g;0!=v--;)if(!({}).hasOwnProperty.call(h,b[v]))return!1;for(v=g;0!=v--;){let g=b[v];if(("_owner"!==g||!m.$$typeof)&&!deepEqual(m[g],h[g]))return!1}return!0}return m!=m&&h!=h}function getDPR(m){if("undefined"==typeof window)return 1;let h=m.ownerDocument.defaultView||window;return h.devicePixelRatio||1}function roundByDPR(m,h){let g=getDPR(m);return Math.round(h*g)/g}function useLatestRef(m){let h=$.useRef(m);return rA(()=>{h.current=m}),h}function useFloating(m){void 0===m&&(m={});let{placement:h="bottom",strategy:g="absolute",middleware:v=[],platform:b,elements:{reference:E,floating:x}={},transform:C=!0,whileElementsMounted:S,open:_}=m,[M,L]=$.useState({x:0,y:0,strategy:g,placement:h,middlewareData:{},isPositioned:!1}),[D,F]=$.useState(v);deepEqual(D,v)||F(v);let[N,j]=$.useState(null),[W,B]=$.useState(null),U=$.useCallback(m=>{m!=X.current&&(X.current=m,j(m))},[j]),Z=$.useCallback(m=>{m!==Y.current&&(Y.current=m,B(m))},[B]),K=E||N,G=x||W,X=$.useRef(null),Y=$.useRef(null),J=$.useRef(M),ee=useLatestRef(S),et=useLatestRef(b),ei=$.useCallback(()=>{if(!X.current||!Y.current)return;let m={placement:h,strategy:g,middleware:D};et.current&&(m.platform=et.current),floating_ui_dom_computePosition(X.current,Y.current,m).then(m=>{let h={...m,isPositioned:!0};ea.current&&!deepEqual(J.current,h)&&(J.current=h,rC.flushSync(()=>{L(h)}))})},[D,h,g,et]);rA(()=>{!1===_&&J.current.isPositioned&&(J.current.isPositioned=!1,L(m=>({...m,isPositioned:!1})))},[_]);let ea=$.useRef(!1);rA(()=>(ea.current=!0,()=>{ea.current=!1}),[]),rA(()=>{if(K&&(X.current=K),G&&(Y.current=G),K&&G){if(ee.current)return ee.current(K,G,ei);ei()}},[K,G,ei,ee]);let eo=$.useMemo(()=>({reference:X,floating:Y,setReference:U,setFloating:Z}),[U,Z]),el=$.useMemo(()=>({reference:K,floating:G}),[K,G]),es=$.useMemo(()=>{let m={position:g,left:0,top:0};if(!el.floating)return m;let h=roundByDPR(el.floating,M.x),v=roundByDPR(el.floating,M.y);return C?{...m,transform:"translate("+h+"px, "+v+"px)",...getDPR(el.floating)>=1.5&&{willChange:"transform"}}:{position:g,left:h,top:v}},[g,C,el.floating,M.x,M.y]);return $.useMemo(()=>({...M,update:ei,refs:eo,elements:el,floatingStyles:es}),[M,ei,eo,el,es])}let rS=(0,$.forwardRef)((m,h)=>{let{children:g,width:v=10,height:b=5,...E}=m;return(0,$.createElement)(ty.WV.svg,(0,tp.Z)({},E,{ref:h,width:v,height:b,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),m.asChild?g:(0,$.createElement)("polygon",{points:"0,0 30,0 15,10"}))});var r$=g(9981);let rP="Popper",[rR,rT]=(0,tm.b)(rP),[r_,rk]=rR(rP),rI=(0,$.forwardRef)((m,h)=>{let{__scopePopper:g,virtualRef:v,...b}=m,E=rk("PopperAnchor",g),x=(0,$.useRef)(null),C=(0,tg.e)(h,x);return(0,$.useEffect)(()=>{E.onAnchorChange((null==v?void 0:v.current)||x.current)}),v?null:(0,$.createElement)(ty.WV.div,(0,tp.Z)({},b,{ref:C}))}),rO="PopperContent",[rM,rL]=rR(rO),rD=(0,$.forwardRef)((m,h)=>{var g,v,b,E,x,C,S,_;let{__scopePopper:M,side:L="bottom",sideOffset:D=0,align:F="center",alignOffset:N=0,arrowPadding:j=0,avoidCollisions:W=!0,collisionBoundary:B=[],collisionPadding:U=0,sticky:Z="partial",hideWhenDetached:K=!1,updatePositionStrategy:G="optimized",onPlaced:X,...Y}=m,J=rk(rO,M),[ee,et]=(0,$.useState)(null),ei=(0,tg.e)(h,m=>et(m)),[ea,eo]=(0,$.useState)(null),el=(0,tJ.t)(ea),es=null!==(g=null==el?void 0:el.width)&&void 0!==g?g:0,ec=null!==(v=null==el?void 0:el.height)&&void 0!==v?v:0,eu="number"==typeof U?U:{top:0,right:0,bottom:0,left:0,...U},ed=Array.isArray(B)?B:[B],ep=ed.length>0,ef={padding:eu,boundary:ed.filter($cf1ac5d9fe0e8206$var$isNotNull),altBoundary:ep},{refs:em,floatingStyles:eh,placement:eg,isPositioned:ev,middlewareData:ey}=useFloating({strategy:"fixed",placement:L+("center"!==F?"-"+F:""),whileElementsMounted:(...m)=>{let h=autoUpdate(...m,{animationFrame:"always"===G});return h},elements:{reference:J.anchor},middleware:[offset({mainAxis:D+ec,alignmentAxis:N}),W&&shift({mainAxis:!0,crossAxis:!1,limiter:"partial"===Z?limitShift():void 0,...ef}),W&&flip({...ef}),size({...ef,apply:({elements:m,rects:h,availableWidth:g,availableHeight:v})=>{let{width:b,height:E}=h.reference,x=m.floating.style;x.setProperty("--radix-popper-available-width",`${g}px`),x.setProperty("--radix-popper-available-height",`${v}px`),x.setProperty("--radix-popper-anchor-width",`${b}px`),x.setProperty("--radix-popper-anchor-height",`${E}px`)}}),ea&&floating_ui_react_dom_arrow({element:ea,padding:j}),$cf1ac5d9fe0e8206$var$transformOrigin({arrowWidth:es,arrowHeight:ec}),K&&hide({strategy:"referenceHidden",...ef})]}),[eb,ew]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(eg),eE=(0,tb.W)(X);(0,r$.b)(()=>{ev&&(null==eE||eE())},[ev,eE]);let ex=null===(b=ey.arrow)||void 0===b?void 0:b.x,eC=null===(E=ey.arrow)||void 0===E?void 0:E.y,eA=(null===(x=ey.arrow)||void 0===x?void 0:x.centerOffset)!==0,[eS,e$]=(0,$.useState)();return(0,r$.b)(()=>{ee&&e$(window.getComputedStyle(ee).zIndex)},[ee]),(0,$.createElement)("div",{ref:em.setFloating,"data-radix-popper-content-wrapper":"",style:{...eh,transform:ev?eh.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:eS,"--radix-popper-transform-origin":[null===(C=ey.transformOrigin)||void 0===C?void 0:C.x,null===(S=ey.transformOrigin)||void 0===S?void 0:S.y].join(" ")},dir:m.dir},(0,$.createElement)(rM,{scope:M,placedSide:eb,onArrowChange:eo,arrowX:ex,arrowY:eC,shouldHideArrow:eA},(0,$.createElement)(ty.WV.div,(0,tp.Z)({"data-side":eb,"data-align":ew},Y,{ref:ei,style:{...Y.style,animation:ev?void 0:"none",opacity:null!==(_=ey.hide)&&void 0!==_&&_.referenceHidden?0:void 0}}))))}),rF={top:"bottom",right:"left",bottom:"top",left:"right"},rN=(0,$.forwardRef)(function(m,h){let{__scopePopper:g,...v}=m,b=rL("PopperArrow",g),E=rF[b.placedSide];return(0,$.createElement)("span",{ref:b.onArrowChange,style:{position:"absolute",left:b.arrowX,top:b.arrowY,[E]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[b.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[b.placedSide],visibility:b.shouldHideArrow?"hidden":void 0}},(0,$.createElement)(rS,(0,tp.Z)({},v,{ref:h,style:{...v.style,display:"block"}})))});function $cf1ac5d9fe0e8206$var$isNotNull(m){return null!==m}let $cf1ac5d9fe0e8206$var$transformOrigin=m=>({name:"transformOrigin",options:m,fn(h){var g,v,b,E,x;let{placement:C,rects:S,middlewareData:$}=h,_=(null===(g=$.arrow)||void 0===g?void 0:g.centerOffset)!==0,M=_?0:m.arrowWidth,L=_?0:m.arrowHeight,[D,F]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(C),N={start:"0%",center:"50%",end:"100%"}[F],j=(null!==(v=null===(b=$.arrow)||void 0===b?void 0:b.x)&&void 0!==v?v:0)+M/2,W=(null!==(E=null===(x=$.arrow)||void 0===x?void 0:x.y)&&void 0!==E?E:0)+L/2,B="",U="";return"bottom"===D?(B=_?N:`${j}px`,U=`${-L}px`):"top"===D?(B=_?N:`${j}px`,U=`${S.floating.height+L}px`):"right"===D?(B=`${-L}px`,U=_?N:`${W}px`):"left"===D&&(B=`${S.floating.width+L}px`,U=_?N:`${W}px`),{data:{x:B,y:U}}}});function $cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(m){let[h,g="center"]=m.split("-");return[h,g]}let $cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9=m=>{let{__scopePopper:h,children:g}=m,[v,b]=(0,$.useState)(null);return(0,$.createElement)(r_,{scope:h,anchor:v,onAnchorChange:b},g)};g(2651);var rj=g(8426),rW=g(3541),rV=g(6223);let rz="Popover",[rH,rB]=(0,tm.b)(rz,[rT]),rU=rT(),[rq,rZ]=rH(rz),rK=(0,$.forwardRef)((m,h)=>{let{__scopePopover:g,...v}=m,b=rZ("PopoverTrigger",g),E=rU(g),x=(0,tg.e)(h,b.triggerRef),C=(0,$.createElement)(ty.WV.button,(0,tp.Z)({type:"button","aria-haspopup":"dialog","aria-expanded":b.open,"aria-controls":b.contentId,"data-state":$cb5cc270b50c6fcd$var$getState(b.open)},v,{ref:x,onClick:(0,tf.M)(m.onClick,b.onOpenToggle)}));return b.hasCustomAnchor?C:(0,$.createElement)(rI,(0,tp.Z)({asChild:!0},E),C)}),[rG,rX]=rH("PopoverPortal",{forceMount:void 0}),rY="PopoverContent",rQ=(0,$.forwardRef)((m,h)=>{let g=rX(rY,m.__scopePopover),{forceMount:v=g.forceMount,...b}=m,E=rZ(rY,m.__scopePopover);return(0,$.createElement)(tD.z,{present:v||E.open},E.modal?(0,$.createElement)(rJ,(0,tp.Z)({},b,{ref:h})):(0,$.createElement)(r0,(0,tp.Z)({},b,{ref:h})))}),rJ=(0,$.forwardRef)((m,h)=>{let g=rZ(rY,m.__scopePopover),v=(0,$.useRef)(null),b=(0,tg.e)(h,v),E=(0,$.useRef)(!1);return(0,$.useEffect)(()=>{let m=v.current;if(m)return(0,rW.Ry)(m)},[]),(0,$.createElement)(rV.Z,{as:rj.g7,allowPinchZoom:!0},(0,$.createElement)(r1,(0,tp.Z)({},m,{ref:b,trapFocus:g.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,tf.M)(m.onCloseAutoFocus,m=>{var h;m.preventDefault(),E.current||null===(h=g.triggerRef.current)||void 0===h||h.focus()}),onPointerDownOutside:(0,tf.M)(m.onPointerDownOutside,m=>{let h=m.detail.originalEvent,g=0===h.button&&!0===h.ctrlKey,v=2===h.button||g;E.current=v},{checkForDefaultPrevented:!1}),onFocusOutside:(0,tf.M)(m.onFocusOutside,m=>m.preventDefault(),{checkForDefaultPrevented:!1})})))}),r0=(0,$.forwardRef)((m,h)=>{let g=rZ(rY,m.__scopePopover),v=(0,$.useRef)(!1),b=(0,$.useRef)(!1);return(0,$.createElement)(r1,(0,tp.Z)({},m,{ref:h,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:h=>{var E,x;null===(E=m.onCloseAutoFocus)||void 0===E||E.call(m,h),h.defaultPrevented||(v.current||null===(x=g.triggerRef.current)||void 0===x||x.focus(),h.preventDefault()),v.current=!1,b.current=!1},onInteractOutside:h=>{var E,x;null===(E=m.onInteractOutside)||void 0===E||E.call(m,h),h.defaultPrevented||(v.current=!0,"pointerdown"!==h.detail.originalEvent.type||(b.current=!0));let C=h.target,S=null===(x=g.triggerRef.current)||void 0===x?void 0:x.contains(C);S&&h.preventDefault(),"focusin"===h.detail.originalEvent.type&&b.current&&h.preventDefault()}}))}),r1=(0,$.forwardRef)((m,h)=>{let{__scopePopover:g,trapFocus:v,onOpenAutoFocus:b,onCloseAutoFocus:E,disableOutsidePointerEvents:x,onEscapeKeyDown:C,onPointerDownOutside:S,onFocusOutside:_,onInteractOutside:M,...L}=m,D=rZ(rY,g),F=rU(g);return(0,rp.EW)(),(0,$.createElement)(rf.M,{asChild:!0,loop:!0,trapped:v,onMountAutoFocus:b,onUnmountAutoFocus:E},(0,$.createElement)(rd.XB,{asChild:!0,disableOutsidePointerEvents:x,onInteractOutside:M,onEscapeKeyDown:C,onPointerDownOutside:S,onFocusOutside:_,onDismiss:()=>D.onOpenChange(!1)},(0,$.createElement)(rD,(0,tp.Z)({"data-state":$cb5cc270b50c6fcd$var$getState(D.open),role:"dialog",id:D.contentId},F,L,{ref:h,style:{...L.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))}),r2=(0,$.forwardRef)((m,h)=>{let{__scopePopover:g,...v}=m,b=rZ("PopoverClose",g);return(0,$.createElement)(ty.WV.button,(0,tp.Z)({type:"button"},v,{ref:h,onClick:(0,tf.M)(m.onClick,()=>b.onOpenChange(!1))}))}),r3=(0,$.forwardRef)((m,h)=>{let{__scopePopover:g,...v}=m,b=rU(g);return(0,$.createElement)(rN,(0,tp.Z)({},b,v,{ref:h}))});function $cb5cc270b50c6fcd$var$getState(m){return m?"open":"closed"}function $ae6933e535247d3d$export$7d15b64cf5a3a4c4(m,[h,g]){return Math.min(g,Math.max(h,m))}var r4=g(8724);let r6="dismissableLayer.update",r5=(0,$.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),r8=(0,$.forwardRef)((m,h)=>{var g;let{disableOutsidePointerEvents:v=!1,onEscapeKeyDown:E,onPointerDownOutside:x,onFocusOutside:C,onInteractOutside:S,onDismiss:_,...M}=m,L=(0,$.useContext)(r5),[D,F]=(0,$.useState)(null),N=null!==(g=null==D?void 0:D.ownerDocument)&&void 0!==g?g:null==globalThis?void 0:globalThis.document,[,j]=(0,$.useState)({}),W=(0,tg.e)(h,m=>F(m)),B=Array.from(L.layers),[U]=[...L.layersWithOutsidePointerEventsDisabled].slice(-1),Z=B.indexOf(U),K=D?B.indexOf(D):-1,G=L.layersWithOutsidePointerEventsDisabled.size>0,X=K>=Z,Y=function(m,h=null==globalThis?void 0:globalThis.document){let g=(0,tb.W)(m),v=(0,$.useRef)(!1),b=(0,$.useRef)(()=>{});return(0,$.useEffect)(()=>{let handlePointerDown=m=>{if(m.target&&!v.current){let v={originalEvent:m};function handleAndDispatchPointerDownOutsideEvent(){$5cb92bef7577960e$var$handleAndDispatchCustomEvent("dismissableLayer.pointerDownOutside",g,v,{discrete:!0})}"touch"===m.pointerType?(h.removeEventListener("click",b.current),b.current=handleAndDispatchPointerDownOutsideEvent,h.addEventListener("click",b.current,{once:!0})):handleAndDispatchPointerDownOutsideEvent()}v.current=!1},m=window.setTimeout(()=>{h.addEventListener("pointerdown",handlePointerDown)},0);return()=>{window.clearTimeout(m),h.removeEventListener("pointerdown",handlePointerDown),h.removeEventListener("click",b.current)}},[h,g]),{onPointerDownCapture:()=>v.current=!0}}(m=>{let h=m.target,g=[...L.branches].some(m=>m.contains(h));!X||g||(null==x||x(m),null==S||S(m),m.defaultPrevented||null==_||_())},N),J=function(m,h=null==globalThis?void 0:globalThis.document){let g=(0,tb.W)(m),v=(0,$.useRef)(!1);return(0,$.useEffect)(()=>{let handleFocus=m=>{m.target&&!v.current&&$5cb92bef7577960e$var$handleAndDispatchCustomEvent("dismissableLayer.focusOutside",g,{originalEvent:m},{discrete:!1})};return h.addEventListener("focusin",handleFocus),()=>h.removeEventListener("focusin",handleFocus)},[h,g]),{onFocusCapture:()=>v.current=!0,onBlurCapture:()=>v.current=!1}}(m=>{let h=m.target,g=[...L.branches].some(m=>m.contains(h));g||(null==C||C(m),null==S||S(m),m.defaultPrevented||null==_||_())},N);return(0,r4.e)(m=>{let h=K===L.layers.size-1;h&&(null==E||E(m),!m.defaultPrevented&&_&&(m.preventDefault(),_()))},N),(0,$.useEffect)(()=>{if(D)return v&&(0===L.layersWithOutsidePointerEventsDisabled.size&&(b=N.body.style.pointerEvents,N.body.style.pointerEvents="none"),L.layersWithOutsidePointerEventsDisabled.add(D)),L.layers.add(D),$5cb92bef7577960e$var$dispatchUpdate(),()=>{v&&1===L.layersWithOutsidePointerEventsDisabled.size&&(N.body.style.pointerEvents=b)}},[D,N,v,L]),(0,$.useEffect)(()=>()=>{D&&(L.layers.delete(D),L.layersWithOutsidePointerEventsDisabled.delete(D),$5cb92bef7577960e$var$dispatchUpdate())},[D,L]),(0,$.useEffect)(()=>{let handleUpdate=()=>j({});return document.addEventListener(r6,handleUpdate),()=>document.removeEventListener(r6,handleUpdate)},[]),(0,$.createElement)(ty.WV.div,(0,tp.Z)({},M,{ref:W,style:{pointerEvents:G?X?"auto":"none":void 0,...m.style},onFocusCapture:(0,tf.M)(m.onFocusCapture,J.onFocusCapture),onBlurCapture:(0,tf.M)(m.onBlurCapture,J.onBlurCapture),onPointerDownCapture:(0,tf.M)(m.onPointerDownCapture,Y.onPointerDownCapture)}))});function $5cb92bef7577960e$var$dispatchUpdate(){let m=new CustomEvent(r6);document.dispatchEvent(m)}function $5cb92bef7577960e$var$handleAndDispatchCustomEvent(m,h,g,{discrete:v}){let b=g.originalEvent.target,E=new CustomEvent(m,{bubbles:!1,cancelable:!0,detail:g});h&&b.addEventListener(m,h,{once:!0}),v?(0,ty.jH)(b,E):b.dispatchEvent(E)}let r9="focusScope.autoFocusOnMount",r7="focusScope.autoFocusOnUnmount",ne={bubbles:!1,cancelable:!0},nt=(0,$.forwardRef)((m,h)=>{let{loop:g=!1,trapped:v=!1,onMountAutoFocus:b,onUnmountAutoFocus:E,...x}=m,[C,S]=(0,$.useState)(null),_=(0,tb.W)(b),M=(0,tb.W)(E),L=(0,$.useRef)(null),D=(0,tg.e)(h,m=>S(m)),F=(0,$.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,$.useEffect)(()=>{if(v){function handleFocusIn(m){if(F.paused||!C)return;let h=m.target;C.contains(h)?L.current=h:$d3863c46a17e8a28$var$focus(L.current,{select:!0})}function handleFocusOut(m){if(F.paused||!C)return;let h=m.relatedTarget;null===h||C.contains(h)||$d3863c46a17e8a28$var$focus(L.current,{select:!0})}document.addEventListener("focusin",handleFocusIn),document.addEventListener("focusout",handleFocusOut);let m=new MutationObserver(function(m){let h=document.activeElement;for(let g of m)g.removedNodes.length>0&&!(null!=C&&C.contains(h))&&$d3863c46a17e8a28$var$focus(C)});return C&&m.observe(C,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",handleFocusIn),document.removeEventListener("focusout",handleFocusOut),m.disconnect()}}},[v,C,F.paused]),(0,$.useEffect)(()=>{if(C){ni.add(F);let m=document.activeElement,h=C.contains(m);if(!h){let h=new CustomEvent(r9,ne);C.addEventListener(r9,_),C.dispatchEvent(h),h.defaultPrevented||(function(m,{select:h=!1}={}){let g=document.activeElement;for(let v of m)if($d3863c46a17e8a28$var$focus(v,{select:h}),document.activeElement!==g)return}($d3863c46a17e8a28$var$getTabbableCandidates(C).filter(m=>"A"!==m.tagName),{select:!0}),document.activeElement===m&&$d3863c46a17e8a28$var$focus(C))}return()=>{C.removeEventListener(r9,_),setTimeout(()=>{let h=new CustomEvent(r7,ne);C.addEventListener(r7,M),C.dispatchEvent(h),h.defaultPrevented||$d3863c46a17e8a28$var$focus(null!=m?m:document.body,{select:!0}),C.removeEventListener(r7,M),ni.remove(F)},0)}}},[C,_,M,F]);let N=(0,$.useCallback)(m=>{if(!g&&!v||F.paused)return;let h="Tab"===m.key&&!m.altKey&&!m.ctrlKey&&!m.metaKey,b=document.activeElement;if(h&&b){let h=m.currentTarget,[v,E]=function(m){let h=$d3863c46a17e8a28$var$getTabbableCandidates(m),g=$d3863c46a17e8a28$var$findVisible(h,m),v=$d3863c46a17e8a28$var$findVisible(h.reverse(),m);return[g,v]}(h),x=v&&E;x?m.shiftKey||b!==E?m.shiftKey&&b===v&&(m.preventDefault(),g&&$d3863c46a17e8a28$var$focus(E,{select:!0})):(m.preventDefault(),g&&$d3863c46a17e8a28$var$focus(v,{select:!0})):b===h&&m.preventDefault()}},[g,v,F.paused]);return(0,$.createElement)(ty.WV.div,(0,tp.Z)({tabIndex:-1},x,{ref:D,onKeyDown:N}))});function $d3863c46a17e8a28$var$getTabbableCandidates(m){let h=[],g=document.createTreeWalker(m,NodeFilter.SHOW_ELEMENT,{acceptNode:m=>{let h="INPUT"===m.tagName&&"hidden"===m.type;return m.disabled||m.hidden||h?NodeFilter.FILTER_SKIP:m.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;g.nextNode();)h.push(g.currentNode);return h}function $d3863c46a17e8a28$var$findVisible(m,h){for(let g of m)if(!function(m,{upTo:h}){if("hidden"===getComputedStyle(m).visibility)return!0;for(;m&&(void 0===h||m!==h);){if("none"===getComputedStyle(m).display)return!0;m=m.parentElement}return!1}(g,{upTo:h}))return g}function $d3863c46a17e8a28$var$focus(m,{select:h=!1}={}){if(m&&m.focus){var g;let v=document.activeElement;m.focus({preventScroll:!0}),m!==v&&(g=m)instanceof HTMLInputElement&&"select"in g&&h&&m.select()}}let ni=(E=[],{add(m){let h=E[0];m!==h&&(null==h||h.pause()),(E=$d3863c46a17e8a28$var$arrayRemove(E,m)).unshift(m)},remove(m){var h;null===(h=(E=$d3863c46a17e8a28$var$arrayRemove(E,m))[0])||void 0===h||h.resume()}});function $d3863c46a17e8a28$var$arrayRemove(m,h){let g=[...m],v=g.indexOf(h);return -1!==v&&g.splice(v,1),g}let na="Popper",[no,nl]=(0,tm.b)(na),[ns,nc]=no(na),nu=(0,$.forwardRef)((m,h)=>{let{__scopePopper:g,virtualRef:v,...b}=m,E=nc("PopperAnchor",g),x=(0,$.useRef)(null),C=(0,tg.e)(h,x);return(0,$.useEffect)(()=>{E.onAnchorChange((null==v?void 0:v.current)||x.current)}),v?null:(0,$.createElement)(ty.WV.div,(0,tp.Z)({},b,{ref:C}))}),nd="PopperContent",[np,nf]=no(nd),nm=(0,$.forwardRef)((m,h)=>{var g,v,b,E,x,C,S,_;let{__scopePopper:M,side:L="bottom",sideOffset:D=0,align:F="center",alignOffset:N=0,arrowPadding:j=0,collisionBoundary:W=[],collisionPadding:B=0,sticky:U="partial",hideWhenDetached:Z=!1,avoidCollisions:K=!0,onPlaced:G,...X}=m,Y=nc(nd,M),[J,ee]=(0,$.useState)(null),et=(0,tg.e)(h,m=>ee(m)),[ei,ea]=(0,$.useState)(null),eo=(0,tJ.t)(ei),el=null!==(g=null==eo?void 0:eo.width)&&void 0!==g?g:0,es=null!==(v=null==eo?void 0:eo.height)&&void 0!==v?v:0,ec="number"==typeof B?B:{top:0,right:0,bottom:0,left:0,...B},eu=Array.isArray(W)?W:[W],ed=eu.length>0,ep={padding:ec,boundary:eu.filter(dist_$cf1ac5d9fe0e8206$var$isNotNull),altBoundary:ed},{refs:ef,floatingStyles:em,placement:eh,isPositioned:eg,middlewareData:ev}=useFloating({strategy:"fixed",placement:L+("center"!==F?"-"+F:""),whileElementsMounted:autoUpdate,elements:{reference:Y.anchor},middleware:[offset({mainAxis:D+es,alignmentAxis:N}),K&&shift({mainAxis:!0,crossAxis:!1,limiter:"partial"===U?limitShift():void 0,...ep}),K&&flip({...ep}),size({...ep,apply:({elements:m,rects:h,availableWidth:g,availableHeight:v})=>{let{width:b,height:E}=h.reference,x=m.floating.style;x.setProperty("--radix-popper-available-width",`${g}px`),x.setProperty("--radix-popper-available-height",`${v}px`),x.setProperty("--radix-popper-anchor-width",`${b}px`),x.setProperty("--radix-popper-anchor-height",`${E}px`)}}),ei&&floating_ui_react_dom_arrow({element:ei,padding:j}),dist_$cf1ac5d9fe0e8206$var$transformOrigin({arrowWidth:el,arrowHeight:es}),Z&&hide({strategy:"referenceHidden"})]}),[ey,eb]=dist_$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(eh),ew=(0,tb.W)(G);(0,r$.b)(()=>{eg&&(null==ew||ew())},[eg,ew]);let eE=null===(b=ev.arrow)||void 0===b?void 0:b.x,ex=null===(E=ev.arrow)||void 0===E?void 0:E.y,eC=(null===(x=ev.arrow)||void 0===x?void 0:x.centerOffset)!==0,[eA,eS]=(0,$.useState)();return(0,r$.b)(()=>{J&&eS(window.getComputedStyle(J).zIndex)},[J]),(0,$.createElement)("div",{ref:ef.setFloating,"data-radix-popper-content-wrapper":"",style:{...em,transform:eg?em.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:eA,"--radix-popper-transform-origin":[null===(C=ev.transformOrigin)||void 0===C?void 0:C.x,null===(S=ev.transformOrigin)||void 0===S?void 0:S.y].join(" ")},dir:m.dir},(0,$.createElement)(np,{scope:M,placedSide:ey,onArrowChange:ea,arrowX:eE,arrowY:ex,shouldHideArrow:eC},(0,$.createElement)(ty.WV.div,(0,tp.Z)({"data-side":ey,"data-align":eb},X,{ref:et,style:{...X.style,animation:eg?void 0:"none",opacity:null!==(_=ev.hide)&&void 0!==_&&_.referenceHidden?0:void 0}}))))}),nh={top:"bottom",right:"left",bottom:"top",left:"right"};function dist_$cf1ac5d9fe0e8206$var$isNotNull(m){return null!==m}let dist_$cf1ac5d9fe0e8206$var$transformOrigin=m=>({name:"transformOrigin",options:m,fn(h){var g,v,b,E,x;let{placement:C,rects:S,middlewareData:$}=h,_=(null===(g=$.arrow)||void 0===g?void 0:g.centerOffset)!==0,M=_?0:m.arrowWidth,L=_?0:m.arrowHeight,[D,F]=dist_$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(C),N={start:"0%",center:"50%",end:"100%"}[F],j=(null!==(v=null===(b=$.arrow)||void 0===b?void 0:b.x)&&void 0!==v?v:0)+M/2,W=(null!==(E=null===(x=$.arrow)||void 0===x?void 0:x.y)&&void 0!==E?E:0)+L/2,B="",U="";return"bottom"===D?(B=_?N:`${j}px`,U=`${-L}px`):"top"===D?(B=_?N:`${j}px`,U=`${S.floating.height+L}px`):"right"===D?(B=`${-L}px`,U=_?N:`${W}px`):"left"===D&&(B=`${S.floating.width+L}px`,U=_?N:`${W}px`),{data:{x:B,y:U}}}});function dist_$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(m){let[h,g="center"]=m.split("-");return[h,g]}let dist_$cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9=m=>{let{__scopePopper:h,children:g}=m,[v,b]=(0,$.useState)(null);return(0,$.createElement)(ns,{scope:h,anchor:v,onAnchorChange:b},g)},ng=(0,$.forwardRef)((m,h)=>{var g;let{container:v=null==globalThis?void 0:null===(g=globalThis.document)||void 0===g?void 0:g.body,...b}=m;return v?rC.createPortal((0,$.createElement)(ty.WV.div,(0,tp.Z)({},b,{ref:h})),v):null}),nv=(0,$.forwardRef)((m,h)=>(0,$.createElement)(ty.WV.span,(0,tp.Z)({},m,{ref:h,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...m.style}}))),ny=[" ","Enter","ArrowUp","ArrowDown"],nb=[" ","Enter"],nw="Select",[nE,nx,nC]=(0,th.B)(nw),[nA,nS]=(0,tm.b)(nw,[nC,nl]),n$=nl(),[nP,nR]=nA(nw),[nT,n_]=nA(nw),nk=(0,$.forwardRef)((m,h)=>{let{__scopeSelect:g,disabled:v=!1,...b}=m,E=n$(g),x=nR("SelectTrigger",g),C=x.disabled||v,S=(0,tg.e)(h,x.onTriggerChange),_=nx(g),[M,L,D]=$cc7e05a45900e73f$var$useTypeaheadSearch(m=>{let h=_().filter(m=>!m.disabled),g=h.find(m=>m.value===x.value),v=$cc7e05a45900e73f$var$findNextItem(h,m,g);void 0!==v&&x.onValueChange(v.value)}),handleOpen=()=>{C||(x.onOpenChange(!0),D())};return(0,$.createElement)(nu,(0,tp.Z)({asChild:!0},E),(0,$.createElement)(ty.WV.button,(0,tp.Z)({type:"button",role:"combobox","aria-controls":x.contentId,"aria-expanded":x.open,"aria-required":x.required,"aria-autocomplete":"none",dir:x.dir,"data-state":x.open?"open":"closed",disabled:C,"data-disabled":C?"":void 0,"data-placeholder":void 0===x.value?"":void 0},b,{ref:S,onClick:(0,tf.M)(b.onClick,m=>{m.currentTarget.focus()}),onPointerDown:(0,tf.M)(b.onPointerDown,m=>{let h=m.target;h.hasPointerCapture(m.pointerId)&&h.releasePointerCapture(m.pointerId),0===m.button&&!1===m.ctrlKey&&(handleOpen(),x.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)},m.preventDefault())}),onKeyDown:(0,tf.M)(b.onKeyDown,m=>{let h=""!==M.current,g=m.ctrlKey||m.altKey||m.metaKey;g||1!==m.key.length||L(m.key),(!h||" "!==m.key)&&ny.includes(m.key)&&(handleOpen(),m.preventDefault())})})))}),nI=(0,$.forwardRef)((m,h)=>{let{__scopeSelect:g,className:v,style:b,children:E,placeholder:x,...C}=m,S=nR("SelectValue",g),{onValueNodeHasChildrenChange:_}=S,M=void 0!==E,L=(0,tg.e)(h,S.onValueNodeChange);return(0,r$.b)(()=>{_(M)},[_,M]),(0,$.createElement)(ty.WV.span,(0,tp.Z)({},C,{ref:L,style:{pointerEvents:"none"}}),void 0===S.value&&void 0!==x?x:E)}),nO=(0,$.forwardRef)((m,h)=>{let{__scopeSelect:g,children:v,...b}=m;return(0,$.createElement)(ty.WV.span,(0,tp.Z)({"aria-hidden":!0},b,{ref:h}),v||"")}),$cc7e05a45900e73f$export$b2af6c9944296213=m=>(0,$.createElement)(ng,(0,tp.Z)({asChild:!0},m)),nM="SelectContent",nL=(0,$.forwardRef)((m,h)=>{let g=nR(nM,m.__scopeSelect),[v,b]=(0,$.useState)();return((0,r$.b)(()=>{b(new DocumentFragment)},[]),g.open)?(0,$.createElement)(nN,(0,tp.Z)({},m,{ref:h})):v?(0,rC.createPortal)((0,$.createElement)(nD,{scope:m.__scopeSelect},(0,$.createElement)(nE.Slot,{scope:m.__scopeSelect},(0,$.createElement)("div",null,m.children))),v):null}),[nD,nF]=nA(nM),nN=(0,$.forwardRef)((m,h)=>{let{__scopeSelect:g,position:v="item-aligned",onCloseAutoFocus:b,onEscapeKeyDown:E,onPointerDownOutside:x,side:C,sideOffset:S,align:_,alignOffset:M,arrowPadding:L,collisionBoundary:D,collisionPadding:F,sticky:N,hideWhenDetached:j,avoidCollisions:W,...B}=m,U=nR(nM,g),[Z,K]=(0,$.useState)(null),[G,X]=(0,$.useState)(null),Y=(0,tg.e)(h,m=>K(m)),[J,ee]=(0,$.useState)(null),[et,ei]=(0,$.useState)(null),ea=nx(g),[eo,el]=(0,$.useState)(!1),es=(0,$.useRef)(!1);(0,$.useEffect)(()=>{if(Z)return(0,rW.Ry)(Z)},[Z]),(0,rp.EW)();let ec=(0,$.useCallback)(m=>{let[h,...g]=ea().map(m=>m.ref.current),[v]=g.slice(-1),b=document.activeElement;for(let g of m)if(g===b||(null==g||g.scrollIntoView({block:"nearest"}),g===h&&G&&(G.scrollTop=0),g===v&&G&&(G.scrollTop=G.scrollHeight),null==g||g.focus(),document.activeElement!==b))return},[ea,G]),eu=(0,$.useCallback)(()=>ec([J,Z]),[ec,J,Z]);(0,$.useEffect)(()=>{eo&&eu()},[eo,eu]);let{onOpenChange:ed,triggerPointerDownPosRef:ep}=U;(0,$.useEffect)(()=>{if(Z){let m={x:0,y:0},handlePointerMove=h=>{var g,v,b,E;m={x:Math.abs(Math.round(h.pageX)-(null!==(g=null===(v=ep.current)||void 0===v?void 0:v.x)&&void 0!==g?g:0)),y:Math.abs(Math.round(h.pageY)-(null!==(b=null===(E=ep.current)||void 0===E?void 0:E.y)&&void 0!==b?b:0))}},handlePointerUp=h=>{m.x<=10&&m.y<=10?h.preventDefault():Z.contains(h.target)||ed(!1),document.removeEventListener("pointermove",handlePointerMove),ep.current=null};return null!==ep.current&&(document.addEventListener("pointermove",handlePointerMove),document.addEventListener("pointerup",handlePointerUp,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",handlePointerMove),document.removeEventListener("pointerup",handlePointerUp,{capture:!0})}}},[Z,ed,ep]),(0,$.useEffect)(()=>{let close=()=>ed(!1);return window.addEventListener("blur",close),window.addEventListener("resize",close),()=>{window.removeEventListener("blur",close),window.removeEventListener("resize",close)}},[ed]);let[ef,em]=$cc7e05a45900e73f$var$useTypeaheadSearch(m=>{let h=ea().filter(m=>!m.disabled),g=h.find(m=>m.ref.current===document.activeElement),v=$cc7e05a45900e73f$var$findNextItem(h,m,g);v&&setTimeout(()=>v.ref.current.focus())}),eh=(0,$.useCallback)((m,h,g)=>{let v=!es.current&&!g,b=void 0!==U.value&&U.value===h;(b||v)&&(ee(m),v&&(es.current=!0))},[U.value]),eg=(0,$.useCallback)(()=>null==Z?void 0:Z.focus(),[Z]),ev=(0,$.useCallback)((m,h,g)=>{let v=!es.current&&!g,b=void 0!==U.value&&U.value===h;(b||v)&&ei(m)},[U.value]),ey="popper"===v?nW:nj,eb=ey===nW?{side:C,sideOffset:S,align:_,alignOffset:M,arrowPadding:L,collisionBoundary:D,collisionPadding:F,sticky:N,hideWhenDetached:j,avoidCollisions:W}:{};return(0,$.createElement)(nD,{scope:g,content:Z,viewport:G,onViewportChange:X,itemRefCallback:eh,selectedItem:J,onItemLeave:eg,itemTextRefCallback:ev,focusSelectedItem:eu,selectedItemText:et,position:v,isPositioned:eo,searchRef:ef},(0,$.createElement)(rV.Z,{as:rj.g7,allowPinchZoom:!0},(0,$.createElement)(nt,{asChild:!0,trapped:U.open,onMountAutoFocus:m=>{m.preventDefault()},onUnmountAutoFocus:(0,tf.M)(b,m=>{var h;null===(h=U.trigger)||void 0===h||h.focus({preventScroll:!0}),m.preventDefault()})},(0,$.createElement)(r8,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:E,onPointerDownOutside:x,onFocusOutside:m=>m.preventDefault(),onDismiss:()=>U.onOpenChange(!1)},(0,$.createElement)(ey,(0,tp.Z)({role:"listbox",id:U.contentId,"data-state":U.open?"open":"closed",dir:U.dir,onContextMenu:m=>m.preventDefault()},B,eb,{onPlaced:()=>el(!0),ref:Y,style:{display:"flex",flexDirection:"column",outline:"none",...B.style},onKeyDown:(0,tf.M)(B.onKeyDown,m=>{let h=m.ctrlKey||m.altKey||m.metaKey;if("Tab"===m.key&&m.preventDefault(),h||1!==m.key.length||em(m.key),["ArrowUp","ArrowDown","Home","End"].includes(m.key)){let h=ea().filter(m=>!m.disabled),g=h.map(m=>m.ref.current);if(["ArrowUp","End"].includes(m.key)&&(g=g.slice().reverse()),["ArrowUp","ArrowDown"].includes(m.key)){let h=m.target,v=g.indexOf(h);g=g.slice(v+1)}setTimeout(()=>ec(g)),m.preventDefault()}})}))))))}),nj=(0,$.forwardRef)((m,h)=>{let{__scopeSelect:g,onPlaced:v,...b}=m,E=nR(nM,g),x=nF(nM,g),[C,S]=(0,$.useState)(null),[_,M]=(0,$.useState)(null),L=(0,tg.e)(h,m=>M(m)),D=nx(g),F=(0,$.useRef)(!1),N=(0,$.useRef)(!0),{viewport:j,selectedItem:W,selectedItemText:B,focusSelectedItem:U}=x,Z=(0,$.useCallback)(()=>{if(E.trigger&&E.valueNode&&C&&_&&j&&W&&B){let m=E.trigger.getBoundingClientRect(),h=_.getBoundingClientRect(),g=E.valueNode.getBoundingClientRect(),b=B.getBoundingClientRect();if("rtl"!==E.dir){let v=b.left-h.left,E=g.left-v,x=m.left-E,S=m.width+x,$=Math.max(S,h.width),_=window.innerWidth-10,M=$ae6933e535247d3d$export$7d15b64cf5a3a4c4(E,[10,_-$]);C.style.minWidth=S+"px",C.style.left=M+"px"}else{let v=h.right-b.right,E=window.innerWidth-g.right-v,x=window.innerWidth-m.right-E,S=m.width+x,$=Math.max(S,h.width),_=window.innerWidth-10,M=$ae6933e535247d3d$export$7d15b64cf5a3a4c4(E,[10,_-$]);C.style.minWidth=S+"px",C.style.right=M+"px"}let x=D(),S=window.innerHeight-20,$=j.scrollHeight,M=window.getComputedStyle(_),L=parseInt(M.borderTopWidth,10),N=parseInt(M.paddingTop,10),U=parseInt(M.borderBottomWidth,10),Z=parseInt(M.paddingBottom,10),K=L+N+$+Z+U,G=Math.min(5*W.offsetHeight,K),X=window.getComputedStyle(j),Y=parseInt(X.paddingTop,10),J=parseInt(X.paddingBottom,10),ee=m.top+m.height/2-10,et=W.offsetHeight/2,ei=W.offsetTop+et,ea=L+N+ei;if(ea<=ee){let m=W===x[x.length-1].ref.current;C.style.bottom="0px";let h=_.clientHeight-j.offsetTop-j.offsetHeight;C.style.height=ea+Math.max(S-ee,et+(m?J:0)+h+U)+"px"}else{let m=W===x[0].ref.current;C.style.top="0px";let h=Math.max(ee,L+j.offsetTop+(m?Y:0)+et);C.style.height=h+(K-ea)+"px",j.scrollTop=ea-ee+j.offsetTop}C.style.margin="10px 0",C.style.minHeight=G+"px",C.style.maxHeight=S+"px",null==v||v(),requestAnimationFrame(()=>F.current=!0)}},[D,E.trigger,E.valueNode,C,_,j,W,B,E.dir,v]);(0,r$.b)(()=>Z(),[Z]);let[K,G]=(0,$.useState)();(0,r$.b)(()=>{_&&G(window.getComputedStyle(_).zIndex)},[_]);let X=(0,$.useCallback)(m=>{m&&!0===N.current&&(Z(),null==U||U(),N.current=!1)},[Z,U]);return(0,$.createElement)(nV,{scope:g,contentWrapper:C,shouldExpandOnScrollRef:F,onScrollButtonChange:X},(0,$.createElement)("div",{ref:S,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:K}},(0,$.createElement)(ty.WV.div,(0,tp.Z)({},b,{ref:L,style:{boxSizing:"border-box",maxHeight:"100%",...b.style}}))))}),nW=(0,$.forwardRef)((m,h)=>{let{__scopeSelect:g,align:v="start",collisionPadding:b=10,...E}=m,x=n$(g);return(0,$.createElement)(nm,(0,tp.Z)({},x,E,{ref:h,align:v,collisionPadding:b,style:{boxSizing:"border-box",...E.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[nV,nz]=nA(nM,{}),nH="SelectViewport",nB=(0,$.forwardRef)((m,h)=>{let{__scopeSelect:g,...v}=m,b=nF(nH,g),E=nz(nH,g),x=(0,tg.e)(h,b.onViewportChange),C=(0,$.useRef)(0);return(0,$.createElement)($.Fragment,null,(0,$.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),(0,$.createElement)(nE.Slot,{scope:g},(0,$.createElement)(ty.WV.div,(0,tp.Z)({"data-radix-select-viewport":"",role:"presentation"},v,{ref:x,style:{position:"relative",flex:1,overflow:"auto",...v.style},onScroll:(0,tf.M)(v.onScroll,m=>{let h=m.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:v}=E;if(null!=v&&v.current&&g){let m=Math.abs(C.current-h.scrollTop);if(m>0){let v=window.innerHeight-20,b=parseFloat(g.style.minHeight),E=parseFloat(g.style.height),x=Math.max(b,E);if(x<v){let b=x+m,E=Math.min(v,b),C=b-E;g.style.height=E+"px","0px"===g.style.bottom&&(h.scrollTop=C>0?C:0,g.style.justifyContent="flex-end")}}}C.current=h.scrollTop})}))))}),[nU,nq]=nA("SelectGroup"),nZ=(0,$.forwardRef)((m,h)=>{let{__scopeSelect:g,...v}=m,b=(0,tv.M)();return(0,$.createElement)(nU,{scope:g,id:b},(0,$.createElement)(ty.WV.div,(0,tp.Z)({role:"group","aria-labelledby":b},v,{ref:h})))}),nK=(0,$.forwardRef)((m,h)=>{let{__scopeSelect:g,...v}=m,b=nq("SelectLabel",g);return(0,$.createElement)(ty.WV.div,(0,tp.Z)({id:b.id},v,{ref:h}))}),nG="SelectItem",[nX,nY]=nA(nG),nQ=(0,$.forwardRef)((m,h)=>{let{__scopeSelect:g,value:v,disabled:b=!1,textValue:E,...x}=m,C=nR(nG,g),S=nF(nG,g),_=C.value===v,[M,L]=(0,$.useState)(null!=E?E:""),[D,F]=(0,$.useState)(!1),N=(0,tg.e)(h,m=>{var h;return null===(h=S.itemRefCallback)||void 0===h?void 0:h.call(S,m,v,b)}),j=(0,tv.M)(),handleSelect=()=>{b||(C.onValueChange(v),C.onOpenChange(!1))};return(0,$.createElement)(nX,{scope:g,value:v,disabled:b,textId:j,isSelected:_,onItemTextChange:(0,$.useCallback)(m=>{L(h=>{var g;return h||(null!==(g=null==m?void 0:m.textContent)&&void 0!==g?g:"").trim()})},[])},(0,$.createElement)(nE.ItemSlot,{scope:g,value:v,disabled:b,textValue:M},(0,$.createElement)(ty.WV.div,(0,tp.Z)({role:"option","aria-labelledby":j,"data-highlighted":D?"":void 0,"aria-selected":_&&D,"data-state":_?"checked":"unchecked","aria-disabled":b||void 0,"data-disabled":b?"":void 0,tabIndex:b?void 0:-1},x,{ref:N,onFocus:(0,tf.M)(x.onFocus,()=>F(!0)),onBlur:(0,tf.M)(x.onBlur,()=>F(!1)),onPointerUp:(0,tf.M)(x.onPointerUp,handleSelect),onPointerMove:(0,tf.M)(x.onPointerMove,m=>{if(b){var h;null===(h=S.onItemLeave)||void 0===h||h.call(S)}else m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,tf.M)(x.onPointerLeave,m=>{if(m.currentTarget===document.activeElement){var h;null===(h=S.onItemLeave)||void 0===h||h.call(S)}}),onKeyDown:(0,tf.M)(x.onKeyDown,m=>{var h;let g=(null===(h=S.searchRef)||void 0===h?void 0:h.current)!=="";g&&" "===m.key||(nb.includes(m.key)&&handleSelect()," "===m.key&&m.preventDefault())})}))))}),nJ="SelectItemText",n0=(0,$.forwardRef)((m,h)=>{let{__scopeSelect:g,className:v,style:b,...E}=m,x=nR(nJ,g),C=nF(nJ,g),S=nY(nJ,g),_=n_(nJ,g),[M,L]=(0,$.useState)(null),D=(0,tg.e)(h,m=>L(m),S.onItemTextChange,m=>{var h;return null===(h=C.itemTextRefCallback)||void 0===h?void 0:h.call(C,m,S.value,S.disabled)}),F=null==M?void 0:M.textContent,N=(0,$.useMemo)(()=>(0,$.createElement)("option",{key:S.value,value:S.value,disabled:S.disabled},F),[S.disabled,S.value,F]),{onNativeOptionAdd:j,onNativeOptionRemove:W}=_;return(0,r$.b)(()=>(j(N),()=>W(N)),[j,W,N]),(0,$.createElement)($.Fragment,null,(0,$.createElement)(ty.WV.span,(0,tp.Z)({id:S.textId},E,{ref:D})),S.isSelected&&x.valueNode&&!x.valueNodeHasChildren?(0,rC.createPortal)(E.children,x.valueNode):null)}),n1=(0,$.forwardRef)((m,h)=>{let{__scopeSelect:g,...v}=m,b=nY("SelectItemIndicator",g);return b.isSelected?(0,$.createElement)(ty.WV.span,(0,tp.Z)({"aria-hidden":!0},v,{ref:h})):null}),n2="SelectScrollUpButton",n3=(0,$.forwardRef)((m,h)=>{let g=nF(n2,m.__scopeSelect),v=nz(n2,m.__scopeSelect),[b,E]=(0,$.useState)(!1),x=(0,tg.e)(h,v.onScrollButtonChange);return(0,r$.b)(()=>{if(g.viewport&&g.isPositioned){let m=g.viewport;function handleScroll(){let h=m.scrollTop>0;E(h)}return handleScroll(),m.addEventListener("scroll",handleScroll),()=>m.removeEventListener("scroll",handleScroll)}},[g.viewport,g.isPositioned]),b?(0,$.createElement)(n5,(0,tp.Z)({},m,{ref:x,onAutoScroll:()=>{let{viewport:m,selectedItem:h}=g;m&&h&&(m.scrollTop=m.scrollTop-h.offsetHeight)}})):null}),n4="SelectScrollDownButton",n6=(0,$.forwardRef)((m,h)=>{let g=nF(n4,m.__scopeSelect),v=nz(n4,m.__scopeSelect),[b,E]=(0,$.useState)(!1),x=(0,tg.e)(h,v.onScrollButtonChange);return(0,r$.b)(()=>{if(g.viewport&&g.isPositioned){let m=g.viewport;function handleScroll(){let h=m.scrollHeight-m.clientHeight,g=Math.ceil(m.scrollTop)<h;E(g)}return handleScroll(),m.addEventListener("scroll",handleScroll),()=>m.removeEventListener("scroll",handleScroll)}},[g.viewport,g.isPositioned]),b?(0,$.createElement)(n5,(0,tp.Z)({},m,{ref:x,onAutoScroll:()=>{let{viewport:m,selectedItem:h}=g;m&&h&&(m.scrollTop=m.scrollTop+h.offsetHeight)}})):null}),n5=(0,$.forwardRef)((m,h)=>{let{__scopeSelect:g,onAutoScroll:v,...b}=m,E=nF("SelectScrollButton",g),x=(0,$.useRef)(null),C=nx(g),S=(0,$.useCallback)(()=>{null!==x.current&&(window.clearInterval(x.current),x.current=null)},[]);return(0,$.useEffect)(()=>()=>S(),[S]),(0,r$.b)(()=>{var m;let h=C().find(m=>m.ref.current===document.activeElement);null==h||null===(m=h.ref.current)||void 0===m||m.scrollIntoView({block:"nearest"})},[C]),(0,$.createElement)(ty.WV.div,(0,tp.Z)({"aria-hidden":!0},b,{ref:h,style:{flexShrink:0,...b.style},onPointerDown:(0,tf.M)(b.onPointerDown,()=>{null===x.current&&(x.current=window.setInterval(v,50))}),onPointerMove:(0,tf.M)(b.onPointerMove,()=>{var m;null===(m=E.onItemLeave)||void 0===m||m.call(E),null===x.current&&(x.current=window.setInterval(v,50))}),onPointerLeave:(0,tf.M)(b.onPointerLeave,()=>{S()})}))}),n8=(0,$.forwardRef)((m,h)=>{let{value:g,...v}=m,b=(0,$.useRef)(null),E=(0,tg.e)(h,b),x=(0,t0.D)(g);return(0,$.useEffect)(()=>{let m=b.current,h=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(h,"value"),E=v.set;if(x!==g&&E){let h=new Event("change",{bubbles:!0});E.call(m,g),m.dispatchEvent(h)}},[x,g]),(0,$.createElement)(nv,{asChild:!0},(0,$.createElement)("select",(0,tp.Z)({},v,{ref:E,defaultValue:g})))});function $cc7e05a45900e73f$var$useTypeaheadSearch(m){let h=(0,tb.W)(m),g=(0,$.useRef)(""),v=(0,$.useRef)(0),b=(0,$.useCallback)(m=>{let b=g.current+m;h(b),function updateSearch(m){g.current=m,window.clearTimeout(v.current),""!==m&&(v.current=window.setTimeout(()=>updateSearch(""),1e3))}(b)},[h]),E=(0,$.useCallback)(()=>{g.current="",window.clearTimeout(v.current)},[]);return(0,$.useEffect)(()=>()=>window.clearTimeout(v.current),[]),[g,b,E]}function $cc7e05a45900e73f$var$findNextItem(m,h,g){var v;let b=h.length>1&&Array.from(h).every(m=>m===h[0]),E=b?h[0]:h,x=g?m.indexOf(g):-1,C=(v=Math.max(x,0),m.map((h,g)=>m[(v+g)%m.length])),S=1===E.length;S&&(C=C.filter(m=>m!==g));let $=C.find(m=>m.textValue.toLowerCase().startsWith(E.toLowerCase()));return $!==g?$:void 0}n8.displayName="BubbleSelect";var n9=g(9203);let n7="Switch",[ie,it]=(0,tm.b)(n7),[ii,ia]=ie(n7),io=(0,$.forwardRef)((m,h)=>{let{__scopeSwitch:g,name:v,checked:b,defaultChecked:E,required:x,disabled:C,value:S="on",onCheckedChange:_,...M}=m,[L,D]=(0,$.useState)(null),F=(0,tg.e)(h,m=>D(m)),N=(0,$.useRef)(!1),j=!L||!!L.closest("form"),[W=!1,B]=(0,tw.T)({prop:b,defaultProp:E,onChange:_});return(0,$.createElement)(ii,{scope:g,checked:W,disabled:C},(0,$.createElement)(ty.WV.button,(0,tp.Z)({type:"button",role:"switch","aria-checked":W,"aria-required":x,"data-state":$6be4966fd9bbc698$var$getState(W),"data-disabled":C?"":void 0,disabled:C,value:S},M,{ref:F,onClick:(0,tf.M)(m.onClick,m=>{B(m=>!m),j&&(N.current=m.isPropagationStopped(),N.current||m.stopPropagation())})})),j&&(0,$.createElement)($6be4966fd9bbc698$var$BubbleInput,{control:L,bubbles:!N.current,name:v,value:S,checked:W,required:x,disabled:C,style:{transform:"translateX(-100%)"}}))}),il=(0,$.forwardRef)((m,h)=>{let{__scopeSwitch:g,...v}=m,b=ia("SwitchThumb",g);return(0,$.createElement)(ty.WV.span,(0,tp.Z)({"data-state":$6be4966fd9bbc698$var$getState(b.checked),"data-disabled":b.disabled?"":void 0},v,{ref:h}))}),$6be4966fd9bbc698$var$BubbleInput=m=>{let{control:h,checked:g,bubbles:v=!0,...b}=m,E=(0,$.useRef)(null),x=(0,t0.D)(g),C=(0,tJ.t)(h);return(0,$.useEffect)(()=>{let m=E.current,h=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(h,"checked"),C=b.set;if(x!==g&&C){let h=new Event("click",{bubbles:v});C.call(m,g),m.dispatchEvent(h)}},[x,g,v]),(0,$.createElement)("input",(0,tp.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:g},b,{tabIndex:-1,ref:E,style:{...m.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function $6be4966fd9bbc698$var$getState(m){return m?"checked":"unchecked"}let dt=m=>{let h=m.toString().split(":"),g=Math.ceil(parseInt(h[0])),v=Math.ceil(parseInt(h[1])),b=mt(Math.ceil(parseInt(h[2])),2),E=`${0!==g&&v<10?(v+"").padStart(2,"0"):v}:${b}`;return 0!==g&&(E=`${g}:${E}`),E},ge=m=>{let h=new Date(1e3*m).toISOString().substr(11,8);return dt(h)},he=(m,h)=>{if("object"!=typeof m||null===m)return h;for(let g in h)"object"!=typeof h[g]||null===h[g]||Array.isArray(h[g])?m[g]=h[g]:(m[g]||(m[g]={}),m[g]=he(m[g],h[g]));return m},xe=(m,h)=>Object.hasOwn(m,h)?m[h].toString():void 0,mt=(m,h)=>String(m).padStart(h,"0"),is={background:"transparent",canvasBackgroundColor:"#6662",canvasHeight:"61.8vh",ignoreCaptionLabels:[],informationPanel:{open:!0,renderAbout:!0,renderSupplementing:!0,renderToggle:!0},openSeadragon:{},requestHeaders:{"Content-Type":"application/json"},showIIIFBadge:!0,showTitle:!0,withCredentials:!1},ic={activeCanvas:"",activeManifest:"",collection:{},configOptions:is,informationOpen:null==(x=null==is?void 0:is.informationPanel)?void 0:x.open,isLoaded:!1,vault:new Vault},iu=$.createContext(ic),id=$.createContext(ic);function ut(m,h){switch(h.type){case"updateActiveCanvas":return h.canvasId||(h.canvasId=""),{...m,activeCanvas:h.canvasId};case"updateActiveManifest":return{...m,activeManifest:h.manifestId};case"updateCollection":return{...m,collection:h.collection};case"updateConfigOptions":return{...m,configOptions:he(m.configOptions,h.configOptions)};case"updateInformationOpen":return{...m,informationOpen:h.informationOpen};case"updateIsLoaded":return{...m,isLoaded:h.isLoaded};default:throw Error(`Unhandled action type: ${h.type}`)}}let pt=({initialState:m=ic,children:h})=>{let[g,v]=(0,$.useReducer)(ut,m);return $.createElement(iu.Provider,{value:g},$.createElement(id.Provider,{value:v},h))};function I(){let m=$.useContext(iu);if(void 0===m)throw Error("useViewerState must be used within a ViewerProvider");return m}function P(){let m=$.useContext(id);if(void 0===m)throw Error("useViewerDispatch must be used within a ViewerProvider");return m}let ye=(m,h,g,v)=>{var b,E;let x={canvas:void 0,accompanyingCanvas:void 0,annotationPage:void 0,annotations:[]};if(x.canvas=m.get(h),x.canvas&&(x.annotationPage=m.get(x.canvas.items[0]),x.accompanyingCanvas=null!=(b=x.canvas)&&b.accompanyingCanvas?m.get(null==(E=x.canvas)?void 0:E.accompanyingCanvas):void 0),x.annotationPage){let b=m.get(x.annotationPage.items).map(h=>({body:m.get(h.body[0].id),motivation:h.motivation,type:"Annotation"})),E=[];b.forEach(h=>{"Choice"===h.body.type?h.body.items.forEach(g=>E.push({...h,id:g.id,body:m.get(g.id)})):E.push(h)}),x.annotations=E.filter(b=>{if(b){if(!b.body||!b.motivation){console.error("Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'",b);return}let E=b.body;Array.isArray(E)&&(E=E[0]);let x=m.get(E.id);if(x)switch(g){case"painting":return b.target===h.id&&b.motivation&&"painting"===b.motivation[0]&&v.includes(x.type)&&(b.body=x),!!b;case"supplementing":return;default:throw Error("Invalid annotation motivation.")}}})}return x},V=(m,h="en")=>{if(!m)return"";if(!m[h]){let h=Object.getOwnPropertyNames(m);if(h.length>0)return m[h[0]]}return m[h]},O=(m,h)=>{let g=ye(m,{id:h,type:"Canvas"},"painting",["Image","Sound","Video"]);if(0!==g.annotations.length&&g.annotations&&g.annotations)return g.annotations.map(m=>null==m?void 0:m.body)},ft=(m,h,g)=>{let v=m.get({id:h,type:"Canvas"});if(!(null!=v&&v.annotations)||!v.annotations[0])return[];let b=m.get(v.annotations[0]),E=m.get(b.items);return Array.isArray(E)?E.filter(h=>{var v;if(h.body&&null!=(v=h.motivation)&&v.includes("supplementing")){let v=h.body;Array.isArray(v)&&(v=v[0]);let b=m.get(v.id);if(b.format===g)return h.body=b,h}}).map(m=>m.body):[]},gt=(m,h,g,v)=>{let b=[];if(h.canvas&&h.canvas.thumbnail.length>0){let g=m.get(h.canvas.thumbnail[0]);b.push(g)}if(h.annotations[0]){if(h.annotations[0].thumbnail&&h.annotations[0].thumbnail.length>0){let g=m.get(h.annotations[0].thumbnail[0]);b.push(g)}if(!h.annotations[0].body)return;let g=h.annotations[0].body;"Image"===g.type&&b.push(g)}return 0===b.length?void 0:{id:b[0].id,format:b[0].format,type:b[0].type,width:g,height:v}},ip={xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"},{styled:im,css:ih,keyframes:ig,createTheme:iv}=(0,td.Th)({theme:{colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:"hsl(209 100% 38.2%)",accentMuted:"hsl(209 80% 61.8%)",accentAlt:"hsl(209 80% 30%)",secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},media:ip}),iy=im("div",{display:"flex",flexDirection:"column",alignItems:"center"}),ib=im("p",{fontWeight:"bold",fontSize:"x-large"}),iw=im("span",{fontSize:"medium"}),yt=({error:m})=>{let{message:h}=m;return $.createElement(iy,{role:"alert"},$.createElement(ib,{"data-testid":"headline"},"Something went wrong"),h&&$.createElement(iw,null,`Error message: ${h}`," "))},iE=im("div",{position:"relative",zIndex:"0"}),ix=im("div",{display:"flex",flexDirection:"row",overflow:"hidden","@sm":{flexDirection:"column"}}),iC=im("div",{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",width:"61.8%","@sm":{width:"100%"}}),iA=im(tc.xz,{display:"none",border:"none",padding:"0",transition:"$all",opacity:"1",background:"#6663",margin:"1rem 0",borderRadius:"6px","&[data-information-panel='false']":{opacity:"0",marginTop:"-59px"},"@sm":{display:"flex","> span":{display:"flex",flexGrow:"1",fontSize:"0.8333em",justifyContent:"center",padding:"0.5rem",fontFamily:"inherit"}}}),iS=im(tc.VY,{width:"100%",display:"flex"}),i$=im("aside",{display:"flex",flexGrow:"1",flexShrink:"0",width:"38.2%",maxHeight:"100%","@sm":{width:"100%"}}),iP=im("div",{display:"flex",flexDirection:"column",fontSmooth:"auto",webkitFontSmoothing:"antialiased","> div":{display:"flex",flexDirection:"column",flexGrow:"1",justifyContent:"flex-start","@sm":{[`& ${ix}`]:{flexGrow:"1"},[`& ${iC}`]:{flexGrow:"0"}}},"@sm":{padding:"0"},"&[data-information-panel-open='true']":{"@sm":{position:"fixed",height:"100%",width:"100%",top:"0",left:"0",zIndex:"2500000000",[`& ${iE}`]:{display:"none"},[`& ${iA}`]:{margin:"1rem"},[`& ${iS}`]:{height:"100%"}}}}),iR=im(tH,{display:"flex",flexDirection:"column",width:"100%",height:"100%",flexGrow:"1",flexShrink:"0",position:"relative",zIndex:"1",maskImage:"linear-gradient(180deg, rgba(0, 0, 0, 1) calc(100% - 2rem), transparent 100%)","@sm":{marginTop:"0.5rem",boxShadow:"none"}}),iT=im(tB,{display:"flex",flexGrow:"0",margin:"0 1.618rem",borderBottom:"4px solid #6663","@sm":{margin:"0 1rem"}}),i_=im(tU,{display:"flex",position:"relative",padding:"0.5rem 1rem",background:"none",backgroundColor:"transparent",fontFamily:"inherit",border:"none",opacity:"0.7",fontSize:"1rem",marginRight:"1rem",lineHeight:"1rem",whiteSpace:"nowrap",cursor:"pointer",fontWeight:400,transition:"$all","&::after":{width:"0",height:"4px",content:"",position:"absolute",bottom:"-4px",left:"0",transition:"$all"},"&[data-state='active']":{opacity:"1",fontWeight:700,"&::after":{width:"100%",backgroundColor:"$accent"}}}),ik=im(tq,{display:"flex",flexGrow:"1",flexShrink:"0",position:"absolute",top:"0",left:"0","&[data-state='active']":{width:"100%",height:"calc(100% - 2rem)",padding:"1.618rem 0"}}),iI=im("div",{position:"relative",height:"100%",width:"100%",overflowY:"scroll"}),iO=im("div",{padding:" 0 1.618rem 2rem",display:"flex",flexDirection:"column",overflow:"scroll",position:"absolute",fontWeight:"400",fontSize:"1rem",zIndex:"0",img:{maxWidth:"100px",maxHeight:"100px",objectFit:"contain",color:"transparent",margin:"0 0 1rem",borderRadius:"3px",backgroundColor:"$secondaryMuted"},video:{display:"none"},"a, a:visited":{color:"$accent"},p:{fontSize:"1rem",lineHeight:"1.45em",margin:"0"},dl:{margin:"0",dt:{fontWeight:"700",margin:"1rem 0 0.25rem"},dd:{margin:"0"}},".manifest-property-title":{fontWeight:"700",margin:"1rem 0 0.25rem"},"ul, ol":{padding:"0",margin:"0",li:{fontSize:"1rem",lineHeight:"1.45em",listStyle:"none",margin:"0.25rem 0 0.25rem"}}}),iM=im("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),Ie=(m,h="none")=>{if(!m)return null;if("string"==typeof m)return[m];if(!m[h]){let h=Object.getOwnPropertyNames(m);if(h.length>0)return m[h[0]]}return m[h]&&Array.isArray(m[h])?m[h]:null},T=(m,h="none",g=", ")=>{let v=Ie(m,h);return Array.isArray(v)?v.join(`${g}`):v};function A(m,h){let g=Object.keys(m).filter(m=>h.includes(m)?null:m),v={};return g.forEach(h=>{v[h]=m[h]}),v}let iL=im("span",{}),z=m=>{let{as:h,label:g}=m,v=A(m,["as","label"]);return $.createElement(iL,{as:h,...v},T(g,v.lang))},Rt=(m,h="200,",g="full")=>{let v;Array.isArray(m)&&(m=m[0]);let{id:b,service:E}=m;if(!E)return b;if(Array.isArray(m.service)&&m.service.length>0&&(v=E[0]),v){if(v["@id"])return`${v["@id"]}/${g}/${h}/0/default.jpg`;if(v.id)return`${v.id}/${g}/${h}/0/default.jpg`}},iD=im("img",{objectFit:"cover"}),zt=m=>{let h;let g=(0,$.useRef)(null),{contentResource:v,altAsLabel:b,region:E="full"}=m;b&&(h=T(b));let x=A(m,["contentResource","altAsLabel"]),{type:C,id:S,width:_=200,height:M=200,duration:L}=v;(0,$.useEffect)(()=>{if(!S&&!g.current||["Image"].includes(C)||!S.includes("m3u8"))return;let m=new tK.Z;return g.current&&(m.attachMedia(g.current),m.on(tK.Z.Events.MEDIA_ATTACHED,function(){m.loadSource(S)})),m.on(tK.Z.Events.ERROR,function(h,g){if(g.fatal)switch(g.type){case tK.Z.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${h} network error encountered, try to recover`),m.startLoad();break;case tK.Z.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${h} media error encountered, try to recover`),m.recoverMediaError();break;default:m.destroy()}}),()=>{m&&(m.detachMedia(),m.destroy())}},[S,C]);let D=(0,$.useCallback)(()=>{if(!g.current)return;let m=0,h=30;if(L&&(h=L),!S.split("#t=")&&L&&(m=.1*L),S.split("#t=").pop()){let h=S.split("#t=").pop();h&&(m=parseInt(h.split(",")[0]))}let v=g.current;v.autoplay=!0,v.currentTime=m,setTimeout(()=>D(),1e3*h)},[L,S]);(0,$.useEffect)(()=>D(),[D]);let F=Rt(v,`${_},${M}`,E);switch(C){case"Image":return $.createElement(iD,{as:"img",alt:h,css:{width:_,height:M},key:S,src:F,...x});case"Video":return $.createElement(iD,{as:"video",css:{width:_,height:M},disablePictureInPicture:!0,key:S,loop:!0,muted:!0,onPause:D,ref:g,src:S});default:return console.warn(`Resource type: ${C} is not valid or not yet supported in Primitives.`),$.createElement($.Fragment,null)}},iF=im("a",{}),Ft=m=>{let{children:h,homepage:g}=m,v=A(m,["children","homepage"]);return $.createElement($.Fragment,null,g&&g.map(m=>{let g=T(m.label,v.lang);return $.createElement(iF,{"aria-label":h?g:void 0,href:m.id,key:m.id,...v},h||g)}))},iN={delimiter:", "},ij=(0,$.createContext)(void 0),$e=()=>{let m=(0,$.useContext)(ij);if(void 0===m)throw Error("usePrimitivesContext must be used with a PrimitivesProvider");return m},Q=({children:m,initialState:h=iN})=>{let g=Vt(h,"delimiter");return $.createElement(ij.Provider,{value:{delimiter:g}},m)},Vt=(m,h)=>Object.hasOwn(m,h)?m[h].toString():void 0,iW=im("span",{}),ae=m=>{let{as:h,markup:g}=m,{delimiter:v}=$e();if(!g)return $.createElement($.Fragment,null);let b=A(m,["as","markup"]),E={__html:tZ(T(g,b.lang,v),{allowedAttributes:{a:["href"],img:["alt","src","height","width"]},allowedSchemes:["http","https","mailto"],allowedTags:["a","b","br","i","img","p","small","span","sub","sup"]})};return $.createElement(iW,{as:h,...b,dangerouslySetInnerHTML:E})},Ae=m=>$.useContext(ij)?$.createElement(ae,{...m}):$.createElement(Q,null,$.createElement(ae,{...m})),Bt=({as:m="dd",lang:h,value:g})=>$.createElement(Ae,{markup:g,as:m,lang:h}),iV=im("span",{}),Dt=({as:m="dd",customValueContent:h,lang:g,value:v})=>{var b;let{delimiter:E}=$e(),x=null==(b=Ie(v,g))?void 0:b.map(m=>(0,$.cloneElement)(h,{value:m}));return $.createElement(iV,{as:m,lang:g},null==x?void 0:x.map((m,h)=>[h>0&&`${E}`,$.createElement($.Fragment,{key:h},m)]))},Te=m=>{var h;let{item:g,lang:v,customValueContent:b}=m,{label:E,value:x}=g,C=null==(h=T(E))?void 0:h.replace(" ","-").toLowerCase();return $.createElement("div",{role:"group","data-label":C},$.createElement(z,{as:"dt",label:E,lang:v}),b?$.createElement(Dt,{as:"dd",customValueContent:b,value:x,lang:v}):$.createElement(Bt,{as:"dd",value:x,lang:v}))},iz=im("dl",{}),Nt=m=>{let{as:h,customValueContent:g,metadata:v}=m;if(!Array.isArray(v))return $.createElement($.Fragment,null);let b=xe(m,"customValueDelimiter"),E=A(m,["as","customValueContent","customValueDelimiter","metadata"]);return $.createElement(Q,{..."string"==typeof b?{initialState:{delimiter:b}}:void 0},v.length>0&&$.createElement(iz,{as:h,...E},v.map((m,h)=>{let v=g?function(m,h){let g=h.filter(h=>{let{matchingLabel:g}=h,v=Object.keys(h.matchingLabel)[0],b=T(g,v);if(T(m,v)===b)return!0}).map(m=>m.Content);if(Array.isArray(g))return g[0]}(m.label,g):void 0;return $.createElement(Te,{customValueContent:v,item:m,key:h,lang:null==E?void 0:E.lang})})))};im("li",{}),im("ul",{});let iH=im("dl",{}),qt=m=>{let{as:h,requiredStatement:g}=m;if(!g)return $.createElement($.Fragment,null);let v=xe(m,"customValueDelimiter"),b=A(m,["as","customValueDelimiter","requiredStatement"]);return $.createElement(Q,{..."string"==typeof v?{initialState:{delimiter:v}}:void 0},$.createElement(iH,{as:h,...b},$.createElement(Te,{item:g,lang:b.lang})))},iB=im("li",{}),iU=im("ul",{}),Zt=m=>{let{as:h,seeAlso:g}=m,v=A(m,["as","seeAlso"]);return $.createElement(iU,{as:h},g&&g.map(m=>{let h=T(m.label,v.lang);return $.createElement(iB,{key:m.id},$.createElement("a",{href:m.id,...v},h||m.id))}))},Xt=m=>{let{as:h,summary:g}=m,v=A(m,["as","customValueDelimiter","summary"]);return $.createElement(Ae,{as:h,markup:g,...v})},Me=m=>{let{thumbnail:h,region:g}=m,v=A(m,["thumbnail"]);return $.createElement($.Fragment,null,h&&h.map(m=>$.createElement(zt,{contentResource:m,key:m.id,region:g,...v})))},Yt=({homepage:m})=>(null==m?void 0:m.length)===0?$.createElement($.Fragment,null):$.createElement($.Fragment,null,$.createElement("span",{className:"manifest-property-title"},"Homepage"),$.createElement(Ft,{homepage:m})),Kt=({id:m,htmlLabel:h,parent:g="manifest"})=>$.createElement($.Fragment,null,$.createElement("span",{className:"manifest-property-title"},h),$.createElement("a",{href:m,target:"_blank",id:`iiif-${g}-id`},m)),Jt=({metadata:m,parent:h="manifest"})=>m?$.createElement($.Fragment,null,$.createElement(Nt,{metadata:m,id:`iiif-${h}-metadata`})):$.createElement($.Fragment,null),Qt=({requiredStatement:m,parent:h="manifest"})=>m?$.createElement($.Fragment,null,$.createElement(qt,{requiredStatement:m,id:`iiif-${h}-required-statement`})):$.createElement($.Fragment,null),en=({rights:m})=>m?$.createElement($.Fragment,null,$.createElement("span",{className:"manifest-property-title"},"Rights"),$.createElement("a",{href:m,target:"_blank"},m)):$.createElement($.Fragment,null),tn=({seeAlso:m})=>(null==m?void 0:m.length)===0?$.createElement($.Fragment,null):$.createElement($.Fragment,null,$.createElement("span",{className:"manifest-property-title"},"See Also"),$.createElement(Zt,{seeAlso:m})),nn=({summary:m,parent:h="manifest"})=>m?$.createElement($.Fragment,null,$.createElement(Xt,{summary:m,as:"p",id:`iiif-${h}-summary`})):$.createElement($.Fragment,null),rn=({label:m,thumbnail:h})=>(null==h?void 0:h.length)===0?$.createElement($.Fragment,null):$.createElement($.Fragment,null,$.createElement(Me,{altAsLabel:m||{none:["resource"]},thumbnail:h,style:{backgroundColor:"#6663",objectFit:"cover"}})),on=()=>{let m=I(),{activeManifest:h,vault:g}=m,[v,b]=(0,$.useState)(),[E,x]=(0,$.useState)([]),[C,S]=(0,$.useState)([]),[_,M]=(0,$.useState)([]);return(0,$.useEffect)(()=>{var m,v,E;let C=g.get(h);b(C),(null==(m=C.homepage)?void 0:m.length)>0&&x(g.get(C.homepage)),(null==(v=C.seeAlso)?void 0:v.length)>0&&S(g.get(C.seeAlso)),(null==(E=C.thumbnail)?void 0:E.length)>0&&M(g.get(C.thumbnail))},[h,g]),v?$.createElement(iM,null,$.createElement(iO,null,$.createElement(rn,{thumbnail:_,label:v.label}),$.createElement(nn,{summary:v.summary}),$.createElement(Jt,{metadata:v.metadata}),$.createElement(Qt,{requiredStatement:v.requiredStatement}),$.createElement(en,{rights:v.rights}),$.createElement(Yt,{homepage:E}),$.createElement(tn,{seeAlso:C}),$.createElement(Kt,{id:v.id,htmlLabel:"IIIF Manifest"}))):$.createElement($.Fragment,null)},an=()=>{function t(m){return m.map(m=>{let h=m.identifier||esm_browser_v4();return{...m,identifier:h}})}return{addIdentifiersToParsedCues:t,createNestedCues:function(m){var h;let g=[],v=[],b=t(m);for(let m of b){for(;v.length>0&&v[v.length-1].end<=m.start;)v.pop();v.length>0?(v[v.length-1].children||(v[v.length-1].children=[]),null==(h=v[v.length-1].children)||h.push(m)):g.push(m),v.push(m)}return g},isChild:function(m,h=[]){return h.some(h=>m.start>=h.start&&m.end<=h.end)},orderCuesByTime:function(m=[]){return m.sort((m,h)=>m.start-h.start)}}},iq=ig({from:{transform:"rotate(360deg)"},to:{transform:"rotate(0deg)"}}),iZ=im(rs,{display:"flex",flexDirection:"column",width:"100%"}),iK=im(rc,{position:"relative",cursor:"pointer",display:"flex",width:"100%",justifyContent:"space-between",textAlign:"left",margin:"0",padding:"0.5rem 1.618rem",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",color:"inherit",border:"none",background:"none","@sm":{padding:"0.5rem 1rem",fontSize:"0.8333rem"},"&::before":{content:"",width:"12px",height:"12px",borderRadius:"12px",position:"absolute",backgroundColor:"$primaryMuted",opacity:"0",left:"8px",marginTop:"3px",boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",opacity:"0",clipPath:"polygon(100% 50%, 0 100%, 0 0)",left:"13px",marginTop:"6px",boxSizing:"content-box","@sm":{content:"unset"}},strong:{marginLeft:"1rem"},"&:hover":{color:"$accent","&::before":{backgroundColor:"$accent",opacity:"1"},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",clipPath:"polygon(100% 50%, 0 100%, 0 0)",opacity:"1"}},"&[aria-checked='true']":{backgroundColor:"#6663","&::before":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accentMuted",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1s linear infinite",animationName:iq,boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accent",clipPath:"polygon(100% 0, 100% 100%, 0 0)",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1.5s linear infinite",animationName:iq,boxSizing:"content-box","@sm":{content:"unset"}}}}),sn=({label:m,start:h,end:g})=>{let[v,b]=(0,$.useState)(!1),E=document.getElementById("clover-iiif-video");return(0,$.useEffect)(()=>(null==E||E.addEventListener("timeupdate",()=>{let{currentTime:m}=E;b(h<=m&&m<g)}),()=>document.removeEventListener("timeupdate",()=>{})),[g,h,E]),$.createElement(iK,{"aria-checked":v,"data-testid":"information-panel-cue",onClick:()=>{E&&(E.pause(),E.currentTime=h,E.play())},value:m},m,$.createElement("strong",null,ge(h)))},iG=im("ul",{listStyle:"none",paddingLeft:"1rem",position:"relative","&&:first-child":{paddingLeft:"0"},"& li ul":{[`& ${iK}`]:{backgroundColor:"unset","&::before":{content:"none"},"&::after":{content:"none"}}},"&:first-child":{margin:"0 0 1.618rem"}}),ze=({items:m})=>$.createElement(iG,null,m.map(m=>{let{text:h,start:g,end:v,children:b,identifier:E}=m;return $.createElement("li",{key:E},$.createElement(sn,{label:h,start:g,end:v}),b&&$.createElement(ze,{items:b}))})),dn=({resource:m})=>{let[h,g]=$.useState([]),{id:v,label:b}=m,{createNestedCues:E,orderCuesByTime:x}=an();return(0,$.useEffect)(()=>{v&&fetch(v,{headers:{"Content-Type":"text/plain",Accept:"application/json"}}).then(m=>m.text()).then(m=>{let h=(0,ru.parse)(m).cues,v=x(h),b=E(v);g(b)}).catch(m=>console.error(v,m.toString()))},[E,v,x]),$.createElement(iZ,{"aria-label":`navigate ${V(b,"en")}`},$.createElement(ze,{items:h}))},mn=({activeCanvas:m,resources:h})=>{var g;let v=I(),{configOptions:b}=v,{informationPanel:E}=b,[x,C]=(0,$.useState)(),S=(null==E?void 0:E.renderAbout)||(null==(g=null==b?void 0:b.informationPanel)?void 0:g.renderAbout),_=null==E?void 0:E.renderSupplementing;return(0,$.useEffect)(()=>{S?C("manifest-about"):h&&(null==h?void 0:h.length)>0&&!S&&C(h[0].id)},[m,S,h]),h?$.createElement(iR,{"data-testid":"information-panel",defaultValue:x,onValueChange:m=>{C(m)},orientation:"horizontal",value:x},$.createElement(iT,{"aria-label":"select chapter","data-testid":"information-panel-list"},S&&$.createElement(i_,{value:"manifest-about"},"About"),_&&h&&h.map(({id:m,label:h})=>$.createElement(i_,{key:m,value:m},$.createElement(z,{label:h})))),$.createElement(iI,null,S&&$.createElement(ik,{value:"manifest-about"},$.createElement(on,null)),_&&h&&h.map(m=>$.createElement(ik,{key:m.id,value:m.id},$.createElement(dn,{resource:m}))))):$.createElement($.Fragment,null)},iX=im("div",{position:"absolute",right:"1rem",top:"1rem",display:"flex",justifyContent:"flex-end",zIndex:"1"}),iY=im("input",{flexGrow:"1",border:"none",backgroundColor:"$secondaryMuted",color:"$primary",marginRight:"1rem",height:"2rem",padding:"0 1rem",borderRadius:"2rem",fontFamily:"inherit",fontSize:"1rem",lineHeight:"1rem",boxShadow:"inset 1px 1px 2px #0003","&::placeholder":{color:"$primaryMuted"}}),iQ=im("button",{display:"flex",background:"none",border:"none",width:"2rem !important",height:"2rem !important",padding:"0",margin:"0",fontWeight:"700",borderRadius:"2rem",backgroundColor:"$accent",color:"$secondary",cursor:"pointer",boxSizing:"content-box !important",transition:"$all",svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",opacity:"1",filter:"drop-shadow(5px 5px 5px #000D)",boxSizing:"inherit",transition:"$all"},"&:disabled":{backgroundColor:"transparent",boxShadow:"none",svg:{opacity:"0.25"}}}),iJ=im("div",{display:"flex",marginRight:"0.618rem",backgroundColor:"$accentAlt",borderRadius:"2rem",boxShadow:"5px 5px 5px #0003",color:"$secondary",alignItems:"center","> span":{display:"flex",margin:"0 0.5rem",fontSize:"0.7222rem"}}),i0=im("div",{display:"flex",position:"relative",zIndex:"1",width:"100%",padding:"0",transition:"$all",variants:{isToggle:{true:{paddingTop:"2.618rem",[`& ${iX}`]:{width:"calc(100% - 2rem)","@sm":{width:"calc(100% - 2rem)"}}}}}}),gn=(m,h)=>{(0,$.useEffect)(()=>{function r(g){g.key===m&&h()}return window.addEventListener("keyup",r),()=>window.removeEventListener("keyup",r)},[])},hn=()=>$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},$.createElement("title",null,"Arrow Back"),$.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M244 400L100 256l144-144M120 256h292"})),xn=()=>$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},$.createElement("title",null,"Arrow Forward"),$.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M268 112l144 144-144 144M392 256H100"})),vn=()=>$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},$.createElement("title",null,"Close"),$.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),bn=()=>$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},$.createElement("title",null,"Search"),$.createElement("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})),yn=({handleCanvasToggle:m,handleFilter:h,activeIndex:g,canvasLength:v})=>{let[b,E]=(0,$.useState)(!1),[x,C]=(0,$.useState)(!1),[S,_]=(0,$.useState)(!1);return(0,$.useEffect)(()=>{_(0===g),g===v-1?C(!0):C(!1)},[g,v]),gn("Escape",()=>{E(!1),h("")}),$.createElement(i0,{isToggle:b},$.createElement(iX,null,b&&$.createElement(iY,{autoFocus:!0,onChange:m=>h(m.target.value),placeholder:"Search"}),!b&&$.createElement(iJ,null,$.createElement(iQ,{onClick:()=>m(-1),disabled:S,type:"button"},$.createElement(hn,null)),$.createElement("span",null,g+1," of ",v),$.createElement(iQ,{onClick:()=>m(1),disabled:x,type:"button"},$.createElement(xn,null))),$.createElement(iQ,{onClick:()=>{E(m=>!m),h("")},type:"button"},b?$.createElement(vn,null):$.createElement(bn,null))))},i1=im(rs,{display:"flex",flexDirection:"row",flexGrow:"1",padding:"1.618rem",overflowX:"scroll",position:"relative",zIndex:"0"}),i2=im("svg",{display:"inline-flex",variants:{isLarge:{true:{height:"4rem",width:"4rem"}},isMedium:{true:{height:"2rem",width:"2rem"}},isSmall:{true:{height:"1rem",width:"1rem"}}}}),k=m=>$.createElement(i2,{...m,"data-testid":"icon-svg",role:"img",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},m.children);k.Title=({children:m})=>$.createElement("title",null,m),k.Add=()=>$.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288M400 256H112"}),k.Audio=()=>$.createElement($.Fragment,null,$.createElement("path",{d:"M232 416a23.88 23.88 0 01-14.2-4.68 8.27 8.27 0 01-.66-.51L125.76 336H56a24 24 0 01-24-24V200a24 24 0 0124-24h69.75l91.37-74.81a8.27 8.27 0 01.66-.51A24 24 0 01256 120v272a24 24 0 01-24 24zm-106.18-80zm-.27-159.86zM320 336a16 16 0 01-14.29-23.19c9.49-18.87 14.3-38 14.3-56.81 0-19.38-4.66-37.94-14.25-56.73a16 16 0 0128.5-14.54C346.19 208.12 352 231.44 352 256c0 23.86-6 47.81-17.7 71.19A16 16 0 01320 336z"}),$.createElement("path",{d:"M368 384a16 16 0 01-13.86-24C373.05 327.09 384 299.51 384 256c0-44.17-10.93-71.56-29.82-103.94a16 16 0 0127.64-16.12C402.92 172.11 416 204.81 416 256c0 50.43-13.06 83.29-34.13 120a16 16 0 01-13.87 8z"}),$.createElement("path",{d:"M416 432a16 16 0 01-13.39-24.74C429.85 365.47 448 323.76 448 256c0-66.5-18.18-108.62-45.49-151.39a16 16 0 1127-17.22C459.81 134.89 480 181.74 480 256c0 64.75-14.66 113.63-50.6 168.74A16 16 0 01416 432z"})),k.Close=()=>$.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}),k.Image=()=>$.createElement("path",{d:"M416 64H96a64.07 64.07 0 00-64 64v256a64.07 64.07 0 0064 64h320a64.07 64.07 0 0064-64V128a64.07 64.07 0 00-64-64zm-80 64a48 48 0 11-48 48 48.05 48.05 0 0148-48zM96 416a32 32 0 01-32-32v-67.63l94.84-84.3a48.06 48.06 0 0165.8 1.9l64.95 64.81L172.37 416zm352-32a32 32 0 01-32 32H217.63l121.42-121.42a47.72 47.72 0 0161.64-.16L448 333.84z"}),k.Video=()=>$.createElement("path",{d:"M464 384.39a32 32 0 01-13-2.77 15.77 15.77 0 01-2.71-1.54l-82.71-58.22A32 32 0 01352 295.7v-79.4a32 32 0 0113.58-26.16l82.71-58.22a15.77 15.77 0 012.71-1.54 32 32 0 0145 29.24v192.76a32 32 0 01-32 32zM268 400H84a68.07 68.07 0 01-68-68V180a68.07 68.07 0 0168-68h184.48A67.6 67.6 0 01336 179.52V332a68.07 68.07 0 01-68 68z"});let i3=ig({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),i4=ig({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),i6=im(r3,{fill:"$secondaryAlt"}),i5=im(r2,{position:"absolute",right:"0",top:"0",padding:"0.5rem",margin:"0",cursor:"pointer",border:"none",background:"none",fill:"inherit","&:hover":{opacity:"0.75"}}),i8=im(rQ,{border:"none",backgroundColor:"white",fill:"inhrerit",padding:"1rem 2rem 1rem 1rem",width:"auto",minWidth:"200px",maxWidth:"350px",borderRadius:"3px",boxShadow:"5px 5px 13px #0002",animationDuration:"0.3s",animationTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)",'&[data-side="top"]':{animationName:i4},'&[data-side="bottom"]':{animationName:i3},'&[data-align="end"]':{[`& ${i6}`]:{margin:"0 0.7rem"}}}),i9=im(rK,{display:"inline-flex",padding:"0.5rem 0",margin:"0 0.5rem 0 0",cursor:"pointer",border:"none",background:"none","> button, > span":{margin:"0"}}),i7=im(m=>{let{__scopePopover:h,children:g,open:v,defaultOpen:b,onOpenChange:E,modal:x=!1}=m,C=rU(h),S=(0,$.useRef)(null),[_,M]=(0,$.useState)(!1),[L=!1,D]=(0,tw.T)({prop:v,defaultProp:b,onChange:E});return(0,$.createElement)($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,C,(0,$.createElement)(rq,{scope:h,contentId:(0,tv.M)(),triggerRef:S,open:L,onOpenChange:D,onOpenToggle:(0,$.useCallback)(()=>D(m=>!m),[D]),hasCustomAnchor:_,onCustomAnchorAdd:(0,$.useCallback)(()=>M(!0),[]),onCustomAnchorRemove:(0,$.useCallback)(()=>M(!1),[]),modal:x},g))},{boxSizing:"content-box"}),H=({children:m})=>$.createElement(i7,null,m);H.Trigger=m=>$.createElement(i9,{...m},m.children),H.Content=m=>$.createElement(i8,{...m},$.createElement(i6,null),$.createElement(i5,null,$.createElement(k,{isSmall:!0},$.createElement(k.Close,null))),m.children);let at=im("div",{boxSizing:"border-box",display:"inline-flex",alignItems:"center",borderRadius:"5px",padding:"$1",marginBottom:"$2",marginRight:"$2",backgroundColor:"$lightGrey",color:"$richBlack50",textTransform:"uppercase",fontSize:"$2",objectFit:"contain",lineHeight:"1em !important","&:last-child":{marginRight:"0"},[`${i2}`]:{position:"absolute",left:"$1",height:"$3",width:"$3"},variants:{isIcon:{true:{position:"relative",paddingLeft:"$5"}}}}),ai=im("span",{display:"flex"}),aa=im("span",{display:"flex",width:"1.2111rem",height:"0.7222rem"}),ao=im("span",{display:"inline-flex",marginLeft:"5px",marginBottom:"-1px"}),al=im(rc,{display:"flex",flexShrink:"0",margin:"0 1.618rem 0 0",padding:"0",cursor:"pointer",background:"none",border:"none",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",textAlign:"left","&:last-child":{marginRight:"1rem"},figure:{margin:"0",width:"161.8px","> div":{position:"relative",display:"flex",backgroundColor:"$secondaryAlt",width:"inherit",height:"100px",overflow:"hidden",borderRadius:"3px",transition:"$all",img:{width:"100%",height:"100%",objectFit:"cover",filter:"blur(0)",transform:"scale3d(1, 1, 1)",transition:"$all",color:"transparent"},[`& ${ai}`]:{position:"absolute",right:"0",bottom:"0",[`& ${at}`]:{margin:"0",paddingLeft:"0",fontSize:"0.7222rem",backgroundColor:"#000d",color:"$secondary",fill:"$secondary",borderBottomLeftRadius:"0",borderTopRightRadius:"0"}}},figcaption:{marginTop:"0.5rem",fontWeight:"400",fontSize:"0.8333rem",display:"-webkit-box",overflow:"hidden",MozBoxOrient:"vertical",WebkitBoxOrient:"vertical",WebkitLineClamp:"5","@sm":{fontSize:"0.8333rem"}}},"&[aria-checked='true']":{figure:{"> div":{backgroundColor:"$primaryAlt","&::before":{position:"absolute",zIndex:"1",color:"$secondaryMuted",content:"Active Item",textTransform:"uppercase",fontWeight:"700",fontSize:"0.6111rem",letterSpacing:"0.03rem",display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",textAlign:"center",textShadow:"5px 5px 5px #0003"},img:{opacity:"0.3",transform:"scale3d(1.1, 1.1, 1.1)",filter:"blur(2px)"},[`& ${ai}`]:{[`& ${at}`]:{backgroundColor:"$accent"}}}},figcaption:{fontWeight:"700"}}}),On=({type:m})=>{switch(m){case"Sound":return $.createElement(k.Audio,null);case"Image":default:return $.createElement(k.Image,null);case"Video":return $.createElement(k.Video,null)}},Dn=({canvas:m,canvasIndex:h,isActive:g,thumbnail:v,type:b,handleChange:E})=>$.createElement(al,{"aria-checked":g,"data-testid":"media-thumbnail","data-canvas":h,onClick:()=>E(m.id),value:m.id},$.createElement("figure",null,$.createElement("div",null,(null==v?void 0:v.id)&&$.createElement("img",{src:v.id,alt:null!=m&&m.label?V(m.label):""}),$.createElement(ai,null,$.createElement(at,{isIcon:!0,"data-testid":"thumbnail-tag"},$.createElement(aa,null),$.createElement(k,{"aria-label":b},$.createElement(On,{type:b})),["Video","Sound"].includes(b)&&$.createElement(ao,null,ge(m.duration))))),(null==m?void 0:m.label)&&$.createElement("figcaption",{"data-testid":"fig-caption"},$.createElement(z,{label:m.label})))),Wn=m=>m.body?m.body.type:"Image",jn=({items:m})=>{let h=P(),g=I(),{activeCanvas:v,vault:b}=g,[E,x]=(0,$.useState)(""),[C,S]=(0,$.useState)([]),[_,M]=(0,$.useState)(0),L=$.useRef(null),w=m=>{v!==m&&h({type:"updateActiveCanvas",canvasId:m})};return(0,$.useEffect)(()=>{if(!C.length){let h=["Image","Sound","Video"],g=m.map(m=>ye(b,m,"painting",h)).filter(m=>m.annotations.length>0);S(g)}},[m,C.length,b]),(0,$.useEffect)(()=>{C.forEach((m,h)=>{null!=m&&m.canvas&&m.canvas.id===v&&M(h)})},[v,C]),(0,$.useEffect)(()=>{let m=document.querySelector(`[data-canvas="${_}"]`);if(m instanceof HTMLElement&&L.current){let h=m.offsetLeft-L.current.offsetWidth/2+m.offsetWidth/2;L.current.scrollTo({left:h,behavior:"smooth"})}},[_]),$.createElement($.Fragment,null,$.createElement(yn,{handleFilter:m=>x(m),handleCanvasToggle:m=>{let h=C[_+m];null!=h&&h.canvas&&w(h.canvas.id)},activeIndex:_,canvasLength:C.length}),$.createElement(i1,{"aria-label":"select item","data-testid":"media",ref:L},C.filter(m=>{var h;if(null!=(h=m.canvas)&&h.label){let h=V(m.canvas.label);if(Array.isArray(h))return h[0].toLowerCase().includes(E.toLowerCase())}}).map((m,h)=>{var g,E;return $.createElement(Dn,{canvas:m.canvas,canvasIndex:h,handleChange:w,isActive:v===(null==(g=null==m?void 0:m.canvas)?void 0:g.id),key:null==(E=null==m?void 0:m.canvas)?void 0:E.id,thumbnail:gt(b,m,200,200),type:Wn(m.annotations[0])})})))},as=im("button",{background:"none",border:"none",cursor:"zoom-in",width:"100%",height:"100%",margin:"0",padding:"0",transition:"$all","& img":{width:"100%",height:"100%",objectFit:"contain",color:"transparent",transition:"$all"},variants:{isMedia:{true:{cursor:"pointer"}}}}),ac=im("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",backgroundColor:"$primary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&#rotateRight":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&#rotateLeft":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&#reset":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}}),au=im(ac,{position:"absolute",width:"2rem",top:"1rem",right:"1rem",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",transition:"$all",borderRadius:"50%",backgroundColor:"$accent",cursor:"pointer","&:hover, &:focus":{backgroundColor:"$accent !important"},variants:{isInteractive:{true:{"&:hover":{opacity:"1"}},false:{}},isMedia:{true:{cursor:"pointer !important"}}},compoundVariants:[{isInteractive:!1,isMedia:!0,css:{top:"50%",right:"50%",width:"4rem",height:"4rem",transform:"translate(50%,-50%)"}}]}),ad=im("div",{position:"relative",zIndex:"0",display:"flex",flexDirection:"column",gap:"1rem","&:hover":{[`${au}`]:{backgroundColor:"$accent"},[`${as}`]:{backgroundColor:"#6662",img:{filter:"brightness(0.85)"}}}}),ap=im("div",{}),af=im("svg",{height:"19px",color:"$accent",fill:"$accent",stroke:"$accent",display:"flex",margin:"0.25rem 0.85rem"}),am=im(nk,{fontSize:"1.25rem",fontWeight:"400",fontFamily:"inherit",alignSelf:"flex-start",flexGrow:"1",cursor:"pointer",transition:"$all",border:"1px solid #6663",boxShadow:"2px 2px 5px #0001",borderRadius:"3px",display:"flex",alignItems:"center",paddingLeft:"0.5rem",width:"100%","@sm":{fontSize:"1rem"}}),ah=im(nL,{borderRadius:"3px",boxShadow:"3px 3px 8px #0003",backgroundColor:"$secondary",marginTop:"2.25rem",marginLeft:"6px",paddingBottom:"0.25rem",maxHeight:"calc(61.8vh - 2.5rem) !important",borderTopLeftRadius:"0",border:"1px solid $secondaryMuted",maxWidth:"90vw"}),ag=im(nQ,{display:"flex",alignItems:"center",fontFamily:"inherit",padding:"0.25rem 0.5rem",color:"$primary",fontWeight:"400",fontSize:"0.8333rem",cursor:"pointer",backgroundColor:"$secondary",width:"calc(100% - 1rem)","> span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},'&[data-state="checked"]':{fontWeight:"700",color:"$primary !important"},"&:hover":{color:"$accent"},img:{width:"31px",height:"31px",marginRight:"0.5rem",borderRadius:"3px"}}),av=im(nK,{color:"$primaryMuted",fontFamily:"inherit",fontSize:"0.85rem",padding:"0.5rem 1rem 0.5rem 0.5rem",display:"flex",alignItems:"center",marginBottom:"0.25rem",borderRadius:"3px",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",backgroundColor:"$secondaryMuted"}),ay=im(m=>{let{__scopeSelect:h,children:g,open:v,defaultOpen:b,onOpenChange:E,value:x,defaultValue:C,onValueChange:S,dir:_,name:M,autoComplete:L,disabled:D,required:F}=m,N=n$(h),[j,W]=(0,$.useState)(null),[B,U]=(0,$.useState)(null),[Z,K]=(0,$.useState)(!1),G=(0,tE.gm)(_),[X=!1,Y]=(0,tw.T)({prop:v,defaultProp:b,onChange:E}),[J,ee]=(0,tw.T)({prop:x,defaultProp:C,onChange:S}),et=(0,$.useRef)(null),ei=!j||!!j.closest("form"),[ea,eo]=(0,$.useState)(new Set),el=Array.from(ea).map(m=>m.props.value).join(";");return(0,$.createElement)(dist_$cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,N,(0,$.createElement)(nP,{required:F,scope:h,trigger:j,onTriggerChange:W,valueNode:B,onValueNodeChange:U,valueNodeHasChildren:Z,onValueNodeHasChildrenChange:K,contentId:(0,tv.M)(),value:J,onValueChange:ee,open:X,onOpenChange:Y,dir:G,triggerPointerDownPosRef:et,disabled:D},(0,$.createElement)(nE.Provider,{scope:h},(0,$.createElement)(nT,{scope:m.__scopeSelect,onNativeOptionAdd:(0,$.useCallback)(m=>{eo(h=>new Set(h).add(m))},[]),onNativeOptionRemove:(0,$.useCallback)(m=>{eo(h=>{let g=new Set(h);return g.delete(m),g})},[])},g)),ei?(0,$.createElement)(n8,{key:el,"aria-hidden":!0,required:F,tabIndex:-1,name:M,autoComplete:L,value:J,onChange:m=>ee(m.target.value),disabled:D},void 0===J?(0,$.createElement)("option",{value:""}):null,Array.from(ea)):null))},{position:"relative",zIndex:"5",width:"100%"}),q=({direction:m,title:h})=>$.createElement(af,{xmlns:"http://www.w3.org/2000/svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},$.createElement("title",null,h),"up"===m&&$.createElement(()=>$.createElement("path",{d:"M414 321.94L274.22 158.82a24 24 0 00-36.44 0L98 321.94c-13.34 15.57-2.28 39.62 18.22 39.62h279.6c20.5 0 31.56-24.05 18.18-39.62z"}),null),"down"===m&&$.createElement(()=>$.createElement("path",{d:"M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z"}),null)),De=({children:m,label:h,maxHeight:g,onValueChange:v,value:b})=>$.createElement(ay,{onValueChange:v,value:b},$.createElement(am,{"data-testid":"select-button"},$.createElement(nI,{"data-testid":"select-button-value"}),$.createElement(nO,null,$.createElement(q,{direction:"down",title:"select"}))),$.createElement($cc7e05a45900e73f$export$b2af6c9944296213,null,$.createElement(ah,{css:{maxHeight:`${g} !important`},"data-testid":"select-content"},$.createElement(n3,null,$.createElement(q,{direction:"up",title:"scroll up for more"})),$.createElement(nB,null,$.createElement(nZ,null,h&&$.createElement(av,null,$.createElement(z,{"data-testid":"select-label",label:h})),m)),$.createElement(n6,null,$.createElement(q,{direction:"down",title:"scroll down for more"}))))),We=m=>$.createElement(ag,{...m},m.thumbnail&&$.createElement(Me,{thumbnail:m.thumbnail}),$.createElement(n0,null,$.createElement(z,{label:m.label})),$.createElement(n1,null)),ab=im("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),aw=im("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),aE=im("div",{width:"100%",height:"61.8vh",maxHeight:"100vh",background:"black",backgroundSize:"contain",color:"white",position:"relative",zIndex:"1",overflow:"hidden"}),R=({id:m,label:h,children:g})=>$.createElement(ac,{id:m,"data-testid":"openseadragon-button"},$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":`${m}-svg-title`,"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},$.createElement("title",{id:`${m}-svg-title`},h),g)),ax=im("div",{position:"absolute",zIndex:"1",top:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),er=()=>$.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),tr=()=>$.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),nr=()=>$.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),rr=()=>$.createElement("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),le=()=>$.createElement($.Fragment,null,$.createElement("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),$.createElement("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})),or=({hasPlaceholder:m,options:h})=>$.createElement(ax,{"data-testid":"openseadragon-controls",hasPlaceholder:m,id:"openseadragon-controls"},h.showZoomControl&&$.createElement($.Fragment,null,$.createElement(R,{id:"zoomIn",label:"zoom in"},$.createElement(er,null)),$.createElement(R,{id:"zoomOut",label:"zoom out"},$.createElement(tr,null))),h.showFullPageControl&&$.createElement(R,{id:"fullPage",label:"full page"},$.createElement(nr,null)),h.showRotationControl&&$.createElement($.Fragment,null,$.createElement(R,{id:"rotateRight",label:"rotate right"},$.createElement(le,null)),$.createElement(R,{id:"rotateLeft",label:"rotate left"},$.createElement(le,null))),h.showHomeControl&&$.createElement(R,{id:"reset",label:"reset"},$.createElement(rr,null))),ar=m=>fetch(`${m.replace(/\/$/,"")}/info.json`).then(m=>m.json()).then(m=>m).catch(h=>{console.error(`The IIIF tilesource ${m.replace(/\/$/,"")}/info.json failed to load: ${h}`)}),ir=m=>{let h,g;return Array.isArray(m)&&(h=m[0])&&(g="@id"in h?h["@id"]:h.id),g},lr=({uri:m,hasPlaceholder:h,imageType:g})=>{let[v,b]=(0,$.useState)(),E=I(),{configOptions:x}=E,C=esm_browser_v4(),S={id:`openseadragon-viewport-${C}`,loadTilesWithAjax:!0,fullPageButton:"fullPage",homeButton:"reset",rotateLeftButton:"rotateLeft",rotateRightButton:"rotateRight",zoomInButton:"zoomIn",zoomOutButton:"zoomOut",showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",navigatorId:`openseadragon-navigator-${C}`,gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!0},...x.openSeadragon,ajaxWithCredentials:x.withCredentials};return(0,$.useEffect)(()=>{m!==v&&b(m)},[v,m]),(0,$.useEffect)(()=>{if(v)switch(g){case"simpleImage":n9(S).addSimpleImage({url:v});break;case"tiledImage":ar(v).then(m=>n9(S).addTiledImage({tileSource:m}));break;default:console.warn(`Unable to render ${v} in OpenSeadragon as type: "${g}"`)}},[v]),$.createElement(aE,{css:{backgroundColor:x.canvasBackgroundColor,height:x.canvasHeight}},$.createElement(or,{hasPlaceholder:h,options:S}),$.createElement(ab,{id:`openseadragon-navigator-${C}`}),$.createElement(aw,{id:`openseadragon-viewport-${C}`}))},sr=({painting:m,hasPlaceholder:h})=>{let[g,v]=(0,$.useState)(),[b,E]=(0,$.useState)();return(0,$.useEffect)(()=>{Array.isArray(null==m?void 0:m.service)&&(null==m?void 0:m.service.length)>0?(v("tiledImage"),E(ir(null==m?void 0:m.service))):(v("simpleImage"),E(null==m?void 0:m.id))},[m]),$.createElement(lr,{uri:b,key:b,hasPlaceholder:h,imageType:g})},cr=({isMedia:m,label:h,placeholderCanvas:g,setIsInteractive:v})=>{let{vault:b}=I(),E=O(b,g),x=E?E[0]:void 0,C=h?V(h):["placeholder image"];return $.createElement(as,{onClick:()=>v(!0),isMedia:m},$.createElement("img",{src:(null==x?void 0:x.id)||"",alt:C.join(),height:null==x?void 0:x.height,width:null==x?void 0:x.width}))},aC=im("canvas",{position:"absolute",width:"100%",height:"100%",zIndex:"0"}),aA=$.forwardRef((m,h)=>{let g=$.useRef(null);function o(){let m=h.current,v=new AudioContext,b=v.createMediaElementSource(m),E=v.createAnalyser(),x=g.current;if(!x)return;x.width=m.offsetWidth,x.height=m.offsetHeight;let C=x.getContext("2d");b.connect(E),E.connect(v.destination),E.fftSize=256;let S=E.frequencyBinCount,$=new Uint8Array(S);setInterval(function(){!function(m,h,g,v,b,E){let x=b/g*2.6,C,S=0;m.getByteFrequencyData(v),h.fillStyle="#000000",h.fillRect(0,0,b,E);for(let m=0;m<g;m++)C=2*v[m],h.fillStyle="rgba(78, 42, 132, 1)",h.fillRect(S,E-C,x,C),S+=x+6}(E,C,S,$,x.width,x.height)},20)}return $.useEffect(()=>{h&&(h.current.onplay=o)},[h]),$.createElement(aC,{ref:g})}),aS=im("div",{position:"relative",backgroundColor:"$primaryAlt",display:"flex",flexGrow:"0",flexShrink:"1",maxHeight:"500px",zIndex:"1",video:{backgroundColor:"transparent",objectFit:"contain",width:"100%",height:"100%",position:"relative",zIndex:"1"}}),pr=({resource:m,ignoreCaptionLabels:h})=>{let g=V(m.label,"en");return Array.isArray(g)&&g.some(m=>h.includes(m))?null:$.createElement("track",{key:m.id,src:m.id,label:Array.isArray(g)?g[0]:g,srcLang:"en","data-testid":"player-track"})},fr=({allSources:m,resources:h,painting:g})=>{var v;let[b,E]=$.useState(0),[x,C]=$.useState(),S=$.useRef(null),_=null==(v=null==g?void 0:g.format)?void 0:v.includes("audio/"),M=I(),{activeCanvas:L,configOptions:D,vault:F}=M;return(0,$.useEffect)(()=>{if(!g.id||!S.current)return;if(null!=S&&S.current){let m=S.current;m.src=g.id,m.load()}if("m3u8"!==g.id.split(".").pop())return;let m=new tK.Z({xhrSetup:function(m,h){m.withCredentials=!!D.withCredentials}});return m.attachMedia(S.current),m.on(tK.Z.Events.MEDIA_ATTACHED,function(){m.loadSource(g.id)}),m.on(tK.Z.Events.ERROR,function(h,g){if(g.fatal)switch(g.type){case tK.Z.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${h} network error encountered, try to recover`),m.startLoad();break;case tK.Z.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${h} media error encountered, try to recover`),m.recoverMediaError();break;default:m.destroy()}}),()=>{if(m&&S.current){let h=S.current;m.detachMedia(),m.destroy(),h.currentTime=0}}},[D.withCredentials,g.id]),(0,$.useEffect)(()=>{var m,h,g,v;let E=F.get(L),x=null!=(m=E.accompanyingCanvas)&&m.id?O(F,null==(h=E.accompanyingCanvas)?void 0:h.id):null,S=null!=(g=E.placeholderCanvas)&&g.id?O(F,null==(v=E.placeholderCanvas)?void 0:v.id):null;x&&S?C(0===b?S[0].id:x[0].id):(x&&C(x[0].id),S&&C(S[0].id))},[L,b,F]),(0,$.useEffect)(()=>{if(null!=S&&S.current){let m=S.current;return null==m||m.addEventListener("timeupdate",()=>E(m.currentTime)),()=>document.removeEventListener("timeupdate",()=>{})}},[]),$.createElement(aS,{css:{backgroundColor:D.canvasBackgroundColor,maxHeight:D.canvasHeight,position:"relative"}},$.createElement("video",{id:"clover-iiif-video",key:g.id,ref:S,controls:!0,height:g.height,width:g.width,crossOrigin:"anonymous",poster:x,style:{maxHeight:D.canvasHeight,position:"relative",zIndex:"0"}},m.map(m=>$.createElement("source",{src:m.id,type:m.format,key:m.id})),h.length>0&&h.map(m=>$.createElement(pr,{resource:m,ignoreCaptionLabels:D.ignoreCaptionLabels||[],key:m.id})),"Sorry, your browser doesn't support embedded videos."),_&&$.createElement(aA,{ref:S}))},gr=()=>$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"close-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},$.createElement("title",{id:"close-svg-title"},"close"),$.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),hr=({isMedia:m})=>$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"open-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},$.createElement("title",{id:"open-svg-title"},"open"),m?$.createElement("path",{d:"M133 440a35.37 35.37 0 01-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0135.77.45l247.85 148.36a36 36 0 010 61l-247.89 148.4A35.5 35.5 0 01133 440z"}):$.createElement($.Fragment,null,$.createElement("path",{d:"m456.69,421.39l-94.09-94.09c22.65-30.16,34.88-66.86,34.84-104.58,0-96.34-78.38-174.72-174.72-174.72S48,126.38,48,222.72s78.38,174.72,174.72,174.72c37.72.04,74.42-12.19,104.58-34.84l94.09,94.09c10.29,9.2,26.1,8.32,35.3-1.98,8.48-9.49,8.48-23.83,0-33.32Zm-233.97-73.87c-68.89-.08-124.72-55.91-124.8-124.8h0c0-68.93,55.87-124.8,124.8-124.8s124.8,55.87,124.8,124.8-55.87,124.8-124.8,124.8Z"}),$.createElement("path",{d:"m279.5,197.76h-3.35s-28.47,0-28.47,0v-31.82c-.77-13.79-12.57-24.33-26.36-23.56-12.71.71-22.85,10.86-23.56,23.56v3.35h0v28.47h-31.82c-13.79.77-24.33,12.57-23.56,26.36.71,12.71,10.86,22.85,23.56,23.56h3.35s28.47,0,28.47,0v31.82c.77,13.79,12.57,24.33,26.36,23.56,12.71-.71,22.85-10.86,23.56-23.56v-3.35h0v-28.47h31.82c13.79-.77,24.33-12.57,23.56-26.36-.71-12.71-10.86-22.85-23.56-23.56Z"}))),xr=({handleToggle:m,isInteractive:h,isMedia:g})=>$.createElement(au,{onClick:m,isInteractive:h,isMedia:g},h?$.createElement(gr,null):$.createElement(hr,{isMedia:g})),vr=({activeCanvas:m,isMedia:h,painting:g,resources:v})=>{var b,E;let[x,C]=$.useState(0),[S,_]=$.useState(!1),{configOptions:M,vault:L}=I(),D=L.get(m),F=null==(b=null==D?void 0:D.placeholderCanvas)?void 0:b.id,N=!!F,j=(null==g?void 0:g.length)>1,W=F&&!S&&!h;return $.createElement(ad,null,$.createElement(ap,{style:{backgroundColor:M.canvasBackgroundColor,maxHeight:M.canvasHeight}},F&&!h&&$.createElement(xr,{handleToggle:()=>_(!S),isInteractive:S,isMedia:h}),W&&!h&&$.createElement(cr,{isMedia:h,label:null==D?void 0:D.label,placeholderCanvas:F,setIsInteractive:_}),!W&&$.createElement("div",null,h?$.createElement(fr,{allSources:g,painting:g[x],resources:v}):g&&$.createElement(sr,{painting:g[x],hasPlaceholder:N,key:m}))),j&&$.createElement(De,{value:null==(E=g[x])?void 0:E.id,onValueChange:m=>{let h=g.findIndex(h=>h.id===m);C(h)},maxHeight:"200px"},null==g?void 0:g.map(m=>$.createElement(We,{value:null==m?void 0:m.id,key:null==m?void 0:m.id,label:null==m?void 0:m.label}))))},br=({activeCanvas:m,painting:h,resources:g,items:v,isAudioVideo:b})=>{let{informationOpen:E,configOptions:x}=I(),{informationPanel:C}=x,S=(null==C?void 0:C.renderAbout)||(null==C?void 0:C.renderSupplementing)&&g.length>0;return $.createElement(ix,{className:"clover-content"},$.createElement(iC,null,$.createElement(vr,{activeCanvas:m,isMedia:b,painting:h,resources:g}),S&&$.createElement(iA,null,$.createElement("span",null,E?"View Items":"More Information")),v.length>1&&$.createElement(iE,{className:"clover-canvases"},$.createElement(jn,{items:v,activeItem:0}))),E&&S&&$.createElement(i$,null,$.createElement(iS,null,$.createElement(mn,{activeCanvas:m,resources:g}))))},a$=im(H.Trigger,{width:"30px",padding:"5px"}),aP=im(H.Content,{display:"flex",flexDirection:"column",fontSize:"0.8333rem",border:"none",boxShadow:"2px 2px 5px #0003",zIndex:"2",button:{display:"flex",textDecoration:"none",marginBottom:"0.5em",color:"$accentAlt",cursor:"pointer",background:"$secondary",border:"none","&:last-child":{marginBottom:"0"}}}),aR=im("span",{fontSize:"1.33rem",alignSelf:"flex-start",flexGrow:"0",flexShrink:"1",padding:"1rem","@sm":{fontSize:"1rem"},"&.visually-hidden":{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"}}),aT=im("header",{display:"flex",backgroundColor:"transparent !important",justifyContent:"space-between",alignItems:"flex-start",width:"100%",[`> ${ay}`]:{flexGrow:"1",flexShrink:"0"},form:{flexGrow:"0",flexShrink:"1"}}),a_=im("div",{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",padding:"1rem",flexShrink:"0",flexGrow:"1"}),kr=()=>{var m;let h=P(),g=I(),{activeManifest:v,collection:b,configOptions:E,vault:x}=g,C=null==E?void 0:E.canvasHeight;return $.createElement("div",{style:{margin:"0.75rem"}},$.createElement(De,{label:b.label,maxHeight:C,value:v,onValueChange:m=>{h({type:"updateActiveManifest",manifestId:m})}},null==(m=null==b?void 0:b.items)?void 0:m.map(m=>$.createElement(We,{value:m.id,key:m.id,thumbnail:null!=m&&m.thumbnail?x.get(null==m?void 0:m.thumbnail):void 0,label:m.label}))))},Ir=(m,h=2500)=>{let[g,v]=(0,$.useState)(),b=(0,$.useCallback)(()=>{navigator.clipboard.writeText(m).then(()=>v("copied"),()=>v("failed"))},[m]);return(0,$.useEffect)(()=>{if(!g)return;let m=setTimeout(()=>v(void 0),h);return()=>clearTimeout(m)},[g]),[g,b]},ak=im("span",{display:"flex",alignContent:"center",alignItems:"center",padding:"0.125rem 0.25rem 0",marginTop:"-0.125rem",marginLeft:"0.5rem",backgroundColor:"$accent",color:"$secondary",borderRadius:"3px",fontSize:"0.6111rem",textTransform:"uppercase",lineHeight:"1em"}),Ar=({status:m})=>m?$.createElement(ak,{"data-copy-status":m},m):null,se=({textPrompt:m,textToCopy:h})=>{let[g,v]=Ir(h);return $.createElement("button",{onClick:v},m," ",$.createElement(Ar,{status:g}))},Tr=()=>{let m="#ed1d33",h="#2873ab";return $.createElement("svg",{viewBox:"0 0 493.35999 441.33334",id:"iiif-logo",version:"1.1"},$.createElement("title",null,"IIIF Manifest Options"),$.createElement("g",{transform:"matrix(1.3333333,0,0,-1.3333333,0,441.33333)"},$.createElement("g",{transform:"scale(0.1)"},$.createElement("path",{style:{fill:h},d:"M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5"}),$.createElement("path",{style:{fill:h},d:"m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18"}),$.createElement("path",{style:{fill:m},d:"M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5"}),$.createElement("path",{style:{fill:m},d:"m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18"}),$.createElement("path",{style:{fill:h},d:"m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5"}),$.createElement("path",{style:{fill:h},d:"m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18"}),$.createElement("path",{style:{fill:m},d:"m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950"}))))},aI=im(io,{all:"unset",height:"2rem",width:"3.236rem",backgroundColor:"#6663",borderRadius:"9999px",position:"relative",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px $secondaryAlt"},'&[data-state="checked"]':{backgroundColor:"$accent",boxShadow:"inset 2px 2px 5px #0003"}}),aO=im(il,{display:"block",height:"calc(2rem - 12px)",width:"calc(2rem - 12px)",backgroundColor:"$secondary",borderRadius:"100%",boxShadow:"2px 2px 5px #0001",transition:"$all",transform:"translateX(6px)",willChange:"transform",'&[data-state="checked"]':{transform:"translateX(calc(1.236rem + 6px))"}}),aM=im("label",{fontSize:"0.8333rem",fontWeight:"400",lineHeight:"1em",userSelect:"none",cursor:"pointer",paddingRight:"0.618rem"}),aL=im("form",{display:"flex",flexShrink:"0",flexGrow:"1",alignItems:"center",marginLeft:"1.618rem"}),Fr=()=>{var m;let{configOptions:h}=I(),g=P(),[v,b]=(0,$.useState)(null==(m=null==h?void 0:h.informationPanel)?void 0:m.open);return(0,$.useEffect)(()=>{g({type:"updateInformationOpen",informationOpen:v})},[v]),$.createElement(aL,null,$.createElement(aM,{htmlFor:"information-toggle",css:v?{opacity:"1"}:{}},"More Information"),$.createElement(aI,{checked:v,onCheckedChange:()=>b(!v),id:"information-toggle","aria-label":"information panel toggle",name:"toggled?"},$.createElement(aO,null)))},je=m=>{let n=()=>!!window.matchMedia&&window.matchMedia(m).matches,[h,g]=(0,$.useState)(n);return(0,$.useEffect)(()=>{let a=()=>g(n);return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)}),h},Pr=({manifestId:m,manifestLabel:h})=>{let g=I(),{collection:v,configOptions:b}=g,{showTitle:E,showIIIFBadge:x,informationPanel:C}=b,S=x||(null==C?void 0:C.renderToggle),_=je(ip.sm);return $.createElement(aT,{className:"clover-header"},null!=v&&v.items?$.createElement(kr,null):$.createElement(aR,{className:E?"":"visually-hidden"},E&&$.createElement(z,{label:h})),S&&$.createElement(a_,null,x&&$.createElement(H,null,$.createElement(a$,null,$.createElement(Tr,null)),$.createElement(aP,null,(null==v?void 0:v.items)&&$.createElement("button",{onClick:m=>{m.preventDefault(),window.open(v.id,"_blank")}},"View Collection"),$.createElement("button",{onClick:h=>{h.preventDefault(),window.open(m,"_blank")}},"View Manifest")," ",(null==v?void 0:v.items)&&$.createElement(se,{textPrompt:"Copy Collection URL",textToCopy:v.id}),$.createElement(se,{textPrompt:"Copy Manifest URL",textToCopy:m}))),(null==C?void 0:C.renderToggle)&&!_&&$.createElement(Fr,null)))},Vr=(m=!1)=>{let[h,g]=(0,$.useState)(m);return(0,$.useLayoutEffect)(()=>{if(!h)return;let m=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=m}},[h]),(0,$.useEffect)(()=>{h!==m&&g(m)},[m]),[h,g]},Hr=({manifest:m,theme:h})=>{var g;let v=I(),b=P(),{activeCanvas:E,informationOpen:x,vault:C,configOptions:S}=v,[_,M]=(0,$.useState)(!1),[L,D]=(0,$.useState)(!1),[F,N]=(0,$.useState)([]),[j,W]=(0,$.useState)([]),[B,U]=Vr(!1),Z=je(ip.sm),K=(0,$.useCallback)(m=>{b({type:"updateInformationOpen",informationOpen:m})},[b]);return(0,$.useEffect)(()=>{var m;null!=(m=null==S?void 0:S.informationPanel)&&m.open&&K(!Z)},[Z,null==(g=null==S?void 0:S.informationPanel)?void 0:g.open,K]),(0,$.useEffect)(()=>{if(!Z){U(!1);return}U(x)},[x,Z,U]),(0,$.useEffect)(()=>{let m=O(C,E),h=ft(C,E,"text/vtt");m&&(D(["Sound","Video"].indexOf(m[0].type)>-1),N(m)),W(h),M(0!==h.length)},[E,C]),$.createElement(tu.SV,{FallbackComponent:yt},$.createElement(iP,{className:`${h} clover-iiif`,css:{background:null==S?void 0:S.background},"data-body-locked":B,"data-information-panel":_,"data-information-panel-open":x},$.createElement(tc.fC,{open:x,onOpenChange:K},$.createElement(Pr,{manifestLabel:m.label,manifestId:m.id}),$.createElement(br,{activeCanvas:E,painting:F,resources:j,items:m.items,isAudioVideo:L}))))},aD={ignoreCache:!1,headers:{Accept:"application/json, text/javascript, text/plain"},timeout:5e3,withCredentials:!1};function de(m,h=null){return{ok:!1,status:m.status,statusText:m.statusText,headers:m.getAllResponseHeaders(),data:h||m.statusText,json:()=>JSON.parse(h||m.statusText)}}let Qr=({canvasIdCallback:m=()=>{},customTheme:h,iiifContent:g,id:v,manifestId:b,options:E})=>{var x;let C=g;return v&&(C=v),b&&(C=b),$.createElement(pt,{initialState:{...ic,informationOpen:!!(null!=(x=null==E?void 0:E.informationPanel)&&x.open),vault:new Vault({customFetcher:m=>(function(m,h=aD){let g=h.headers||aD.headers;return new Promise((v,b)=>{let E=new XMLHttpRequest;E.open("get",m),E.withCredentials=h.withCredentials,g&&Object.keys(g).forEach(m=>E.setRequestHeader(m,g[m])),E.onload=()=>{v({ok:E.status>=200&&E.status<300,status:E.status,statusText:E.statusText,headers:E.getAllResponseHeaders(),data:E.responseText,json:()=>JSON.parse(E.responseText)})},E.onerror=()=>{b(de(E,"Failed to make request."))},E.ontimeout=()=>{b(de(E,"Request took longer than expected."))},E.send()})})(m,{withCredentials:null==E?void 0:E.withCredentials,headers:null==E?void 0:E.requestHeaders}).then(m=>JSON.parse(m.data))})}},$.createElement(Dr,{iiifContent:C,canvasIdCallback:m,customTheme:h,options:E}))},Dr=({canvasIdCallback:m,customTheme:h,iiifContent:g,options:v})=>{let b=P(),E=I(),{activeCanvas:x,activeManifest:C,isLoaded:S,vault:_}=E,[M,L]=(0,$.useState)(),[D,F]=(0,$.useState)(),N={};return h&&(N=(0,td.jG)("custom",h)),(0,$.useEffect)(()=>{m&&m(x)},[x,m]),(0,$.useEffect)(()=>{C&&_.loadManifest(C).then(m=>{F(m),b({type:"updateActiveCanvas",canvasId:m.items[0]&&m.items[0].id})}).catch(m=>{console.error(`Manifest failed to load: ${m}`)}).finally(()=>{b({type:"updateIsLoaded",isLoaded:!0})})},[C,b,_]),(0,$.useEffect)(()=>{b({type:"updateConfigOptions",configOptions:v}),_.load(g).then(m=>{L(m)}).catch(m=>{console.error(`The IIIF resource ${g} failed to load: ${m}`)})},[b,g,v,_]),(0,$.useEffect)(()=>{let m=[];(null==M?void 0:M.type)==="Collection"?(b({type:"updateCollection",collection:M}),(m=M.items.filter(m=>"Manifest"===m.type).map(m=>m.id)).length>0&&b({type:"updateActiveManifest",manifestId:m[0]})):(null==M?void 0:M.type)==="Manifest"&&b({type:"updateActiveManifest",manifestId:M.id})},[b,M]),S?D&&D.items?0===D.items.length?(console.log(`The IIIF manifest ${g} does not contain canvases.`),$.createElement($.Fragment,null)):$.createElement(Hr,{manifest:D,theme:N,key:D.id}):(console.log(`The IIIF manifest ${g} failed to load.`),$.createElement($.Fragment,null)):$.createElement($.Fragment,null,"Loading")};var aF=Qr}}]);